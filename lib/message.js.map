{"version":3,"sources":["message.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAKA,IAAM,SAAS,QAAQ,qBAAR,EAA+B,MAA/B;;;;;;;;IAOT;AACJ,WADI,OACJ,CAAY,OAAZ,EAAqB,QAArB,EAA0C;QAAX,6DAAO,kBAAI;;0BADtC,SACsC;;AACxC,SAAK,OAAL,GAAe,QAAQ,OAAR,CADyB;AAExC,SAAK,MAAL,GAAc,QAAQ,MAAR,CAF0B;AAGxC,SAAK,UAAL,GAAkB,QAAQ,UAAR,CAHsB;;gCAIJ,KAAK,MAAL,CAAY,UAAZ,CAAuB,KAAvB,CAA6B,GAA7B,EAJI;;;;AAIvC,SAAK,QAAL,6BAJuC;AAIxB,SAAK,WAAL,6BAJwB;;AAKxC,SAAK,SAAL,GAAiB,QAAjB,CALwC;AAMxC,SAAK,YAAL,GAAoB,KAAK,WAAL,IAAoB,KAApB,CANoB;AAOxC,SAAK,eAAL,GAAuB,KAAK,cAAL,IAAuB,KAAvB,CAPiB;GAA1C;;eADI;;kCAWU;AACZ,UAAI,KAAK,YAAL,IAAqB,KAAK,SAAL,KAAmB,KAAK,QAAL,IAAiB,CAAC,KAAK,OAAL,EAAD,EAAiB,OAAO,IAAP,CAA9E;AACA,UAAI,KAAK,eAAL,IAAwB,KAAK,OAAL,EAAxB,EAAwC,OAAO,IAAP,CAA5C;AACA,aAAO,KAAP,CAHY;;;;8BAMJ;AACR,aAAQ,KAAK,MAAL,CAAY,QAAZ,KAAyB,OAAO,WAAP,CADzB;;;;SAjBN;;;kBAsBS","file":"message.js","sourcesContent":["/**\n * A module that exports the base SpaceBunny client\n * @module SpaceBunny\n */\n\nconst CONFIG = require('../config/constants').CONFIG;\n\n/**\n * @constructor\n * @param {Object} message - constructor options may contain api-key or connection options\n * @param {Object} opts - constructor options may contain api-key or connection options\n */\nclass Message {\n  constructor(message, deviceId, opts = {}) {\n    this.content = message.content;\n    this.fields = message.fields;\n    this.properties = message.properties;\n    [this.senderId, this.channelName] = this.fields.routingKey.split('.');\n    this._deviceId = deviceId;\n    this._discardMine = opts.discardMine || false;\n    this._discardFromApi = opts.discardFromApi || false;\n  }\n\n  blackListed() {\n    if (this._discardMine && this._deviceId === this.senderId && !this.fromApi()) return true;\n    if (this._discardFromApi && this.fromApi()) return true;\n    return false;\n  }\n\n  fromApi() {\n    return (this.fields.exchange === CONFIG.apiExchange);\n  }\n}\n\nexport default Message;\n"],"sourceRoot":"/Users/gfoiani/Dev/work/spacebunny/sdk-node/src"}