!function(root,factory){"object"==typeof exports&&"object"==typeof module?module.exports=factory():"function"==typeof define&&define.amd?define([],factory):"object"==typeof exports?exports.spacebunny=factory():root.spacebunny=factory()}(this,(function(){return function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{enumerable:!0,get:getter})},__webpack_require__.r=function(exports){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})},__webpack_require__.t=function(value,mode){if(1&mode&&(value=__webpack_require__(value)),8&mode)return value;if(4&mode&&"object"==typeof value&&value&&value.__esModule)return value;var ns=Object.create(null);if(__webpack_require__.r(ns),Object.defineProperty(ns,"default",{enumerable:!0,value:value}),2&mode&&"string"!=typeof value)for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=128)}([function(module,exports){module.exports=require("util")},function(module,exports,__webpack_require__){"use strict";var es5=__webpack_require__(15),canEvaluate="undefined"==typeof navigator,errorObj={e:{}},tryCatchTarget,globalObject="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:void 0!==this?this:null;function tryCatcher(){try{var target=tryCatchTarget;return tryCatchTarget=null,target.apply(this,arguments)}catch(e){return errorObj.e=e,errorObj}}function tryCatch(fn){return tryCatchTarget=fn,tryCatcher}var inherits=function(Child,Parent){var hasProp={}.hasOwnProperty;function T(){for(var propertyName in this.constructor=Child,this.constructor$=Parent,Parent.prototype)hasProp.call(Parent.prototype,propertyName)&&"$"!==propertyName.charAt(propertyName.length-1)&&(this[propertyName+"$"]=Parent.prototype[propertyName])}return T.prototype=Parent.prototype,Child.prototype=new T,Child.prototype};function isPrimitive(val){return null==val||!0===val||!1===val||"string"==typeof val||"number"==typeof val}function isObject(value){return"function"==typeof value||"object"==typeof value&&null!==value}function maybeWrapAsError(maybeError){return isPrimitive(maybeError)?new Error(safeToString(maybeError)):maybeError}function withAppended(target,appendee){var i,len=target.length,ret=new Array(len+1);for(i=0;i<len;++i)ret[i]=target[i];return ret[i]=appendee,ret}function getDataPropertyOrDefault(obj,key,defaultValue){if(!es5.isES5)return{}.hasOwnProperty.call(obj,key)?obj[key]:void 0;var desc=Object.getOwnPropertyDescriptor(obj,key);return null!=desc?null==desc.get&&null==desc.set?desc.value:defaultValue:void 0}function notEnumerableProp(obj,name,value){if(isPrimitive(obj))return obj;var descriptor={value:value,configurable:!0,enumerable:!1,writable:!0};return es5.defineProperty(obj,name,descriptor),obj}function thrower(r){throw r}var inheritedDataKeys=function(){var excludedPrototypes=[Array.prototype,Object.prototype,Function.prototype],isExcludedProto=function(val){for(var i=0;i<excludedPrototypes.length;++i)if(excludedPrototypes[i]===val)return!0;return!1};if(es5.isES5){var getKeys=Object.getOwnPropertyNames;return function(obj){for(var ret=[],visitedKeys=Object.create(null);null!=obj&&!isExcludedProto(obj);){var keys;try{keys=getKeys(obj)}catch(e){return ret}for(var i=0;i<keys.length;++i){var key=keys[i];if(!visitedKeys[key]){visitedKeys[key]=!0;var desc=Object.getOwnPropertyDescriptor(obj,key);null!=desc&&null==desc.get&&null==desc.set&&ret.push(key)}}obj=es5.getPrototypeOf(obj)}return ret}}var hasProp={}.hasOwnProperty;return function(obj){if(isExcludedProto(obj))return[];var ret=[];enumeration:for(var key in obj)if(hasProp.call(obj,key))ret.push(key);else{for(var i=0;i<excludedPrototypes.length;++i)if(hasProp.call(excludedPrototypes[i],key))continue enumeration;ret.push(key)}return ret}}(),thisAssignmentPattern=/this\s*\.\s*\S+\s*=/;function isClass(fn){try{if("function"==typeof fn){var keys=es5.names(fn.prototype),hasMethods=es5.isES5&&keys.length>1,hasMethodsOtherThanConstructor=keys.length>0&&!(1===keys.length&&"constructor"===keys[0]),hasThisAssignmentAndStaticMethods=thisAssignmentPattern.test(fn+"")&&es5.names(fn).length>0;if(hasMethods||hasMethodsOtherThanConstructor||hasThisAssignmentAndStaticMethods)return!0}return!1}catch(e){return!1}}function toFastProperties(obj){function FakeConstructor(){}FakeConstructor.prototype=obj;var receiver=new FakeConstructor;function ic(){return typeof receiver.foo}return ic(),ic(),obj}var rident=/^[a-z$_][a-z$_0-9]*$/i;function isIdentifier(str){return rident.test(str)}function filledRange(count,prefix,suffix){for(var ret=new Array(count),i=0;i<count;++i)ret[i]=prefix+i+suffix;return ret}function safeToString(obj){try{return obj+""}catch(e){return"[no string representation]"}}function isError(obj){return obj instanceof Error||null!==obj&&"object"==typeof obj&&"string"==typeof obj.message&&"string"==typeof obj.name}function markAsOriginatingFromRejection(e){try{notEnumerableProp(e,"isOperational",!0)}catch(ignore){}}function originatesFromRejection(e){return null!=e&&(e instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===e.isOperational)}function canAttachTrace(obj){return isError(obj)&&es5.propertyIsWritable(obj,"stack")}var ensureErrorObject="stack"in new Error?function(value){return canAttachTrace(value)?value:new Error(safeToString(value))}:function(value){if(canAttachTrace(value))return value;try{throw new Error(safeToString(value))}catch(err){return err}};function classString(obj){return{}.toString.call(obj)}function copyDescriptors(from,to,filter){for(var keys=es5.names(from),i=0;i<keys.length;++i){var key=keys[i];if(filter(key))try{es5.defineProperty(to,key,es5.getDescriptor(from,key))}catch(ignore){}}}var asArray=function(v){return es5.isArray(v)?v:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var ArrayFrom="function"==typeof Array.from?function(v){return Array.from(v)}:function(v){for(var itResult,ret=[],it=v[Symbol.iterator]();!(itResult=it.next()).done;)ret.push(itResult.value);return ret};asArray=function(v){return es5.isArray(v)?v:null!=v&&"function"==typeof v[Symbol.iterator]?ArrayFrom(v):null}}var isNode="undefined"!=typeof process&&"[object process]"===classString(process).toLowerCase(),hasEnvVariables="undefined"!=typeof process&&void 0!==process.env,reflectHandler;function env(key){return hasEnvVariables?process.env[key]:void 0}function getNativePromise(){if("function"==typeof Promise)try{if("[object Promise]"===classString(new Promise((function(){}))))return Promise}catch(e){}}function contextBind(ctx,cb){if(null===ctx||"function"!=typeof cb||cb===reflectHandler)return cb;null!==ctx.domain&&(cb=ctx.domain.bind(cb));var async=ctx.async;if(null!==async){var old=cb;cb=function(){for(var $_len=arguments.length+2,args=new Array($_len),$_i=2;$_i<$_len;++$_i)args[$_i]=arguments[$_i-2];return args[0]=old,args[1]=this,async.runInAsyncScope.apply(async,args)}}return cb}var ret={setReflectHandler:function(fn){reflectHandler=fn},isClass:isClass,isIdentifier:isIdentifier,inheritedDataKeys:inheritedDataKeys,getDataPropertyOrDefault:getDataPropertyOrDefault,thrower:thrower,isArray:es5.isArray,asArray:asArray,notEnumerableProp:notEnumerableProp,isPrimitive:isPrimitive,isObject:isObject,isError:isError,canEvaluate:canEvaluate,errorObj:errorObj,tryCatch:tryCatch,inherits:inherits,withAppended:withAppended,maybeWrapAsError:maybeWrapAsError,toFastProperties:toFastProperties,filledRange:filledRange,toString:safeToString,canAttachTrace:canAttachTrace,ensureErrorObject:ensureErrorObject,originatesFromRejection:originatesFromRejection,markAsOriginatingFromRejection:markAsOriginatingFromRejection,classString:classString,copyDescriptors:copyDescriptors,isNode:isNode,hasEnvVariables:hasEnvVariables,env:env,global:globalObject,getNativePromise:getNativePromise,contextBind:contextBind},version;ret.isRecentNode=ret.isNode&&(process.versions&&process.versions.node?version=process.versions.node.split(".").map(Number):process.version&&(version=process.version.split(".").map(Number)),0===version[0]&&version[1]>10||version[0]>0),ret.nodeSupportsAsyncResource=ret.isNode&&function(){var supportsAsync=!1;try{supportsAsync="function"==typeof __webpack_require__(71).AsyncResource.prototype.runInAsyncScope}catch(e){supportsAsync=!1}return supportsAsync}(),ret.isNode&&ret.toFastProperties(process);try{throw new Error}catch(e){ret.lastLineError=e}module.exports=ret},function(module,exports,__webpack_require__){try{var util=__webpack_require__(0);if("function"!=typeof util.inherits)throw"";module.exports=util.inherits}catch(e){module.exports=__webpack_require__(145)}},function(module,exports,__webpack_require__){"use strict";var bind=__webpack_require__(75),toString=Object.prototype.toString;function isArray(val){return"[object Array]"===toString.call(val)}function isUndefined(val){return void 0===val}function isObject(val){return null!==val&&"object"==typeof val}function isPlainObject(val){if("[object Object]"!==toString.call(val))return!1;var prototype=Object.getPrototypeOf(val);return null===prototype||prototype===Object.prototype}function isFunction(val){return"[object Function]"===toString.call(val)}function forEach(obj,fn){if(null!=obj)if("object"!=typeof obj&&(obj=[obj]),isArray(obj))for(var i=0,l=obj.length;i<l;i++)fn.call(null,obj[i],i,obj);else for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&fn.call(null,obj[key],key,obj)}module.exports={isArray:isArray,isArrayBuffer:function(val){return"[object ArrayBuffer]"===toString.call(val)},isBuffer:function(val){return null!==val&&!isUndefined(val)&&null!==val.constructor&&!isUndefined(val.constructor)&&"function"==typeof val.constructor.isBuffer&&val.constructor.isBuffer(val)},isFormData:function(val){return"undefined"!=typeof FormData&&val instanceof FormData},isArrayBufferView:function(val){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(val):val&&val.buffer&&val.buffer instanceof ArrayBuffer},isString:function(val){return"string"==typeof val},isNumber:function(val){return"number"==typeof val},isObject:isObject,isPlainObject:isPlainObject,isUndefined:isUndefined,isDate:function(val){return"[object Date]"===toString.call(val)},isFile:function(val){return"[object File]"===toString.call(val)},isBlob:function(val){return"[object Blob]"===toString.call(val)},isFunction:isFunction,isStream:function(val){return isObject(val)&&isFunction(val.pipe)},isURLSearchParams:function(val){return"undefined"!=typeof URLSearchParams&&val instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:forEach,merge:function merge(){var result={};function assignValue(val,key){isPlainObject(result[key])&&isPlainObject(val)?result[key]=merge(result[key],val):isPlainObject(val)?result[key]=merge({},val):isArray(val)?result[key]=val.slice():result[key]=val}for(var i=0,l=arguments.length;i<l;i++)forEach(arguments[i],assignValue);return result},extend:function(a,b,thisArg){return forEach(b,(function(val,key){a[key]=thisArg&&"function"==typeof val?bind(val,thisArg):val})),a},trim:function(str){return str.replace(/^\s*/,"").replace(/\s*$/,"")},stripBOM:function(content){return 65279===content.charCodeAt(0)&&(content=content.slice(1)),content}}},function(module,exports){module.exports=require("events")},function(module,exports){module.exports=require("buffer")},function(module,exports){module.exports=require("stream")},function(module,exports){function objectToString(o){return Object.prototype.toString.call(o)}exports.isArray=function(arg){return Array.isArray?Array.isArray(arg):"[object Array]"===objectToString(arg)},exports.isBoolean=function(arg){return"boolean"==typeof arg},exports.isNull=function(arg){return null===arg},exports.isNullOrUndefined=function(arg){return null==arg},exports.isNumber=function(arg){return"number"==typeof arg},exports.isString=function(arg){return"string"==typeof arg},exports.isSymbol=function(arg){return"symbol"==typeof arg},exports.isUndefined=function(arg){return void 0===arg},exports.isRegExp=function(re){return"[object RegExp]"===objectToString(re)},exports.isObject=function(arg){return"object"==typeof arg&&null!==arg},exports.isDate=function(d){return"[object Date]"===objectToString(d)},exports.isError=function(e){return"[object Error]"===objectToString(e)||e instanceof Error},exports.isFunction=function(arg){return"function"==typeof arg},exports.isPrimitive=function(arg){return null===arg||"boolean"==typeof arg||"number"==typeof arg||"string"==typeof arg||"symbol"==typeof arg||void 0===arg},exports.isBuffer=Buffer.isBuffer},function(module,exports,__webpack_require__){"use strict";var isValue=__webpack_require__(23),isPlainFunction=__webpack_require__(100),assign=__webpack_require__(56),normalizeOpts=__webpack_require__(101),contains=__webpack_require__(102);(module.exports=function(dscr,value){var c,e,w,options,desc;return arguments.length<2||"string"!=typeof dscr?(options=value,value=dscr,dscr=null):options=arguments[2],isValue(dscr)?(c=contains.call(dscr,"c"),e=contains.call(dscr,"e"),w=contains.call(dscr,"w")):(c=w=!0,e=!1),desc={value:value,configurable:c,enumerable:e,writable:w},options?assign(normalizeOpts(options),desc):desc}).gs=function(dscr,get,set){var c,e,options,desc;return"string"!=typeof dscr?(options=set,set=get,get=dscr,dscr=null):options=arguments[3],isValue(get)?isPlainFunction(get)?isValue(set)?isPlainFunction(set)||(options=set,set=void 0):set=void 0:(options=get,get=set=void 0):get=void 0,isValue(dscr)?(c=contains.call(dscr,"c"),e=contains.call(dscr,"e")):(c=!0,e=!1),desc={get:get,set:set,configurable:c,enumerable:e},options?assign(normalizeOpts(options),desc):desc}},function(module,exports,__webpack_require__){"use strict";var isValue=__webpack_require__(22);module.exports=function(value){if(!isValue(value))throw new TypeError("Cannot use null or undefined");return value}},function(module,exports){module.exports=require("crypto")},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__extends",(function(){return __extends})),__webpack_require__.d(__webpack_exports__,"__assign",(function(){return __assign})),__webpack_require__.d(__webpack_exports__,"__rest",(function(){return __rest})),__webpack_require__.d(__webpack_exports__,"__decorate",(function(){return __decorate})),__webpack_require__.d(__webpack_exports__,"__param",(function(){return __param})),__webpack_require__.d(__webpack_exports__,"__metadata",(function(){return __metadata})),__webpack_require__.d(__webpack_exports__,"__awaiter",(function(){return __awaiter})),__webpack_require__.d(__webpack_exports__,"__generator",(function(){return __generator})),__webpack_require__.d(__webpack_exports__,"__createBinding",(function(){return __createBinding})),__webpack_require__.d(__webpack_exports__,"__exportStar",(function(){return __exportStar})),__webpack_require__.d(__webpack_exports__,"__values",(function(){return __values})),__webpack_require__.d(__webpack_exports__,"__read",(function(){return __read})),__webpack_require__.d(__webpack_exports__,"__spread",(function(){return __spread})),__webpack_require__.d(__webpack_exports__,"__spreadArrays",(function(){return __spreadArrays})),__webpack_require__.d(__webpack_exports__,"__await",(function(){return __await})),__webpack_require__.d(__webpack_exports__,"__asyncGenerator",(function(){return __asyncGenerator})),__webpack_require__.d(__webpack_exports__,"__asyncDelegator",(function(){return __asyncDelegator})),__webpack_require__.d(__webpack_exports__,"__asyncValues",(function(){return __asyncValues})),__webpack_require__.d(__webpack_exports__,"__makeTemplateObject",(function(){return __makeTemplateObject})),__webpack_require__.d(__webpack_exports__,"__importStar",(function(){return __importStar})),__webpack_require__.d(__webpack_exports__,"__importDefault",(function(){return __importDefault})),__webpack_require__.d(__webpack_exports__,"__classPrivateFieldGet",(function(){return __classPrivateFieldGet})),__webpack_require__.d(__webpack_exports__,"__classPrivateFieldSet",(function(){return __classPrivateFieldSet}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)};function __extends(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}var __assign=function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};function __rest(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t}function __decorate(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r}function __param(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}}function __metadata(metadataKey,metadataValue){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(metadataKey,metadataValue)}function __awaiter(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))}function __generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}}function __createBinding(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}function __exportStar(m,exports){for(var p in m)"default"===p||exports.hasOwnProperty(p)||(exports[p]=m[p])}function __values(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar}function __spread(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read(arguments[i]));return ar}function __spreadArrays(){for(var s=0,i=0,il=arguments.length;i<il;i++)s+=arguments[i].length;var r=Array(s),k=0;for(i=0;i<il;i++)for(var a=arguments[i],j=0,jl=a.length;j<jl;j++,k++)r[k]=a[j];return r}function __await(v){return this instanceof __await?(this.v=v,this):new __await(v)}function __asyncGenerator(thisArg,_arguments,generator){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,g=generator.apply(thisArg,_arguments||[]),q=[];return i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i;function verb(n){g[n]&&(i[n]=function(v){return new Promise((function(a,b){q.push([n,v,a,b])>1||resume(n,v)}))})}function resume(n,v){try{(r=g[n](v)).value instanceof __await?Promise.resolve(r.value.v).then(fulfill,reject):settle(q[0][2],r)}catch(e){settle(q[0][3],e)}var r}function fulfill(value){resume("next",value)}function reject(value){resume("throw",value)}function settle(f,v){f(v),q.shift(),q.length&&resume(q[0][0],q[0][1])}}function __asyncDelegator(o){var i,p;return i={},verb("next"),verb("throw",(function(e){throw e})),verb("return"),i[Symbol.iterator]=function(){return this},i;function verb(n,f){i[n]=o[n]?function(v){return(p=!p)?{value:__await(o[n](v)),done:"return"===n}:f?f(v):v}:f}}function __asyncValues(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,m=o[Symbol.asyncIterator];return m?m.call(o):(o=__values(o),i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i);function verb(n){i[n]=o[n]&&function(v){return new Promise((function(resolve,reject){(function(resolve,reject,d,v){Promise.resolve(v).then((function(v){resolve({value:v,done:d})}),reject)})(resolve,reject,(v=o[n](v)).done,v.value)}))}}}function __makeTemplateObject(cooked,raw){return Object.defineProperty?Object.defineProperty(cooked,"raw",{value:raw}):cooked.raw=raw,cooked}function __importStar(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)Object.hasOwnProperty.call(mod,k)&&(result[k]=mod[k]);return result.default=mod,result}function __importDefault(mod){return mod&&mod.__esModule?mod:{default:mod}}function __classPrivateFieldGet(receiver,privateMap){if(!privateMap.has(receiver))throw new TypeError("attempted to get private field on non-instance");return privateMap.get(receiver)}function __classPrivateFieldSet(receiver,privateMap,value){if(!privateMap.has(receiver))throw new TypeError("attempted to set private field on non-instance");return privateMap.set(receiver,value),value}},function(module,exports,__webpack_require__){"use strict";var _TypeError,_RangeError,es5=__webpack_require__(15),Objectfreeze=es5.freeze,util=__webpack_require__(1),inherits=util.inherits,notEnumerableProp=util.notEnumerableProp;function subError(nameProperty,defaultMessage){function SubError(message){if(!(this instanceof SubError))return new SubError(message);notEnumerableProp(this,"message","string"==typeof message?message:defaultMessage),notEnumerableProp(this,"name",nameProperty),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return inherits(SubError,Error),SubError}var Warning=subError("Warning","warning"),CancellationError=subError("CancellationError","cancellation error"),TimeoutError=subError("TimeoutError","timeout error"),AggregateError=subError("AggregateError","aggregate error");try{_TypeError=TypeError,_RangeError=RangeError}catch(e){_TypeError=subError("TypeError","type error"),_RangeError=subError("RangeError","range error")}for(var methods="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),i=0;i<methods.length;++i)"function"==typeof Array.prototype[methods[i]]&&(AggregateError.prototype[methods[i]]=Array.prototype[methods[i]]);es5.defineProperty(AggregateError.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),AggregateError.prototype.isOperational=!0;var level=0;function OperationalError(message){if(!(this instanceof OperationalError))return new OperationalError(message);notEnumerableProp(this,"name","OperationalError"),notEnumerableProp(this,"message",message),this.cause=message,this.isOperational=!0,message instanceof Error?(notEnumerableProp(this,"message",message.message),notEnumerableProp(this,"stack",message.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}AggregateError.prototype.toString=function(){var indent=Array(4*level+1).join(" "),ret="\n"+indent+"AggregateError of:\n";level++,indent=Array(4*level+1).join(" ");for(var i=0;i<this.length;++i){for(var str=this[i]===this?"[Circular AggregateError]":this[i]+"",lines=str.split("\n"),j=0;j<lines.length;++j)lines[j]=indent+lines[j];ret+=(str=lines.join("\n"))+"\n"}return level--,ret},inherits(OperationalError,Error);var errorTypes=Error.__BluebirdErrorTypes__;errorTypes||(errorTypes=Objectfreeze({CancellationError:CancellationError,TimeoutError:TimeoutError,OperationalError:OperationalError,RejectionError:OperationalError,AggregateError:AggregateError}),es5.defineProperty(Error,"__BluebirdErrorTypes__",{value:errorTypes,writable:!1,enumerable:!1,configurable:!1})),module.exports={Error:Error,TypeError:_TypeError,RangeError:_RangeError,CancellationError:errorTypes.CancellationError,OperationalError:errorTypes.OperationalError,TimeoutError:errorTypes.TimeoutError,AggregateError:errorTypes.AggregateError,Warning:Warning}},function(module,exports,__webpack_require__){"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?module.exports=__webpack_require__(204):module.exports=__webpack_require__(206)},function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(244)()?__webpack_require__(38).Symbol:__webpack_require__(247)},function(module,exports){var isES5=function(){"use strict";return void 0===this}();if(isES5)module.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:isES5,propertyIsWritable:function(obj,prop){var descriptor=Object.getOwnPropertyDescriptor(obj,prop);return!(descriptor&&!descriptor.writable&&!descriptor.set)}};else{var has={}.hasOwnProperty,str={}.toString,proto={}.constructor.prototype,ObjectKeys=function(o){var ret=[];for(var key in o)has.call(o,key)&&ret.push(key);return ret};module.exports={isArray:function(obj){try{return"[object Array]"===str.call(obj)}catch(e){return!1}},keys:ObjectKeys,names:ObjectKeys,defineProperty:function(o,key,desc){return o[key]=desc.value,o},getDescriptor:function(o,key){return{value:o[key]}},freeze:function(obj){return obj},getPrototypeOf:function(obj){try{return Object(obj).constructor.prototype}catch(e){return proto}},isES5:isES5,propertyIsWritable:function(){return!0}}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(fn){if("function"!=typeof fn)throw new TypeError(fn+" is not a function");return fn}},function(module,exports,__webpack_require__){"use strict";const codes={};function createErrorType(code,message,Base){Base||(Base=Error);class NodeError extends Base{constructor(arg1,arg2,arg3){super(function(arg1,arg2,arg3){return"string"==typeof message?message:message(arg1,arg2,arg3)}(arg1,arg2,arg3))}}NodeError.prototype.name=Base.name,NodeError.prototype.code=code,codes[code]=NodeError}function oneOf(expected,thing){if(Array.isArray(expected)){const len=expected.length;return expected=expected.map((i=>String(i))),len>2?`one of ${thing} ${expected.slice(0,len-1).join(", ")}, or `+expected[len-1]:2===len?`one of ${thing} ${expected[0]} or ${expected[1]}`:`of ${thing} ${expected[0]}`}return`of ${thing} ${String(expected)}`}createErrorType("ERR_INVALID_OPT_VALUE",(function(name,value){return'The value "'+value+'" is invalid for option "'+name+'"'}),TypeError),createErrorType("ERR_INVALID_ARG_TYPE",(function(name,expected,actual){let determiner;var search,pos;let msg;if("string"==typeof expected&&(search="not ",expected.substr(!pos||pos<0?0:+pos,search.length)===search)?(determiner="must not be",expected=expected.replace(/^not /,"")):determiner="must be",function(str,search,this_len){return(void 0===this_len||this_len>str.length)&&(this_len=str.length),str.substring(this_len-search.length,this_len)===search}(name," argument"))msg=`The ${name} ${determiner} ${oneOf(expected,"type")}`;else{msg=`The "${name}" ${function(str,search,start){return"number"!=typeof start&&(start=0),!(start+search.length>str.length)&&-1!==str.indexOf(search,start)}(name,".")?"property":"argument"} ${determiner} ${oneOf(expected,"type")}`}return msg+=". Received type "+typeof actual,msg}),TypeError),createErrorType("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),createErrorType("ERR_METHOD_NOT_IMPLEMENTED",(function(name){return"The "+name+" method is not implemented"})),createErrorType("ERR_STREAM_PREMATURE_CLOSE","Premature close"),createErrorType("ERR_STREAM_DESTROYED",(function(name){return"Cannot call "+name+" after a stream was destroyed"})),createErrorType("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),createErrorType("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),createErrorType("ERR_STREAM_WRITE_AFTER_END","write after end"),createErrorType("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),createErrorType("ERR_UNKNOWN_ENCODING",(function(arg){return"Unknown encoding: "+arg}),TypeError),createErrorType("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),module.exports.codes=codes},function(module,exports,__webpack_require__){module.exports=Duplex;var objectKeys=Object.keys||function(obj){var keys=[];for(var key in obj)keys.push(key);return keys},util=__webpack_require__(7);util.inherits=__webpack_require__(2);var Readable=__webpack_require__(146),Writable=__webpack_require__(148);function Duplex(options){if(!(this instanceof Duplex))return new Duplex(options);Readable.call(this,options),Writable.call(this,options),options&&!1===options.readable&&(this.readable=!1),options&&!1===options.writable&&(this.writable=!1),this.allowHalfOpen=!0,options&&!1===options.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",onend)}function onend(){this.allowHalfOpen||this._writableState.ended||process.nextTick(this.end.bind(this))}util.inherits(Duplex,Readable),function(xs,f){for(var i=0,l=xs.length;i<l;i++)f(xs[i],i)}(objectKeys(Writable.prototype),(function(method){Duplex.prototype[method]||(Duplex.prototype[method]=Writable.prototype[method])}))},function(module,exports,__webpack_require__){"use strict";var defs=__webpack_require__(26),format=__webpack_require__(0).format,HEARTBEAT=(__webpack_require__(0).inherits,__webpack_require__(63).HEARTBEAT);module.exports.closeMessage=function(close){var code=close.fields.replyCode;return format('%d (%s) with message "%s"',code,defs.constant_strs[code],close.fields.replyText)},module.exports.methodName=function(id){return defs.info(id).name},module.exports.inspect=function(frame,showFields){if(frame===HEARTBEAT)return"<Heartbeat>";if(frame.id){var info=defs.info(frame.id);return format("<%s channel:%d%s>",info.name,frame.channel,showFields?" "+JSON.stringify(frame.fields,void 0,2):"")}return format("<Content channel:%d size:%d>",frame.channel,frame.size)}},function(module,exports,__webpack_require__){var Stream=__webpack_require__(6);"disable"===process.env.READABLE_STREAM&&Stream?(module.exports=Stream,(exports=module.exports=Stream.Readable).Readable=Stream.Readable,exports.Writable=Stream.Writable,exports.Duplex=Stream.Duplex,exports.Transform=Stream.Transform,exports.PassThrough=Stream.PassThrough,exports.Stream=Stream):((exports=module.exports=__webpack_require__(89)).Stream=Stream||exports,exports.Readable=exports,exports.Writable=__webpack_require__(92),exports.Duplex=__webpack_require__(21),exports.Transform=__webpack_require__(95),exports.PassThrough=__webpack_require__(219))},function(module,exports,__webpack_require__){"use strict";var pna=__webpack_require__(32),objectKeys=Object.keys||function(obj){var keys=[];for(var key in obj)keys.push(key);return keys};module.exports=Duplex;var util=Object.create(__webpack_require__(7));util.inherits=__webpack_require__(2);var Readable=__webpack_require__(89),Writable=__webpack_require__(92);util.inherits(Duplex,Readable);for(var keys=objectKeys(Writable.prototype),v=0;v<keys.length;v++){var method=keys[v];Duplex.prototype[method]||(Duplex.prototype[method]=Writable.prototype[method])}function Duplex(options){if(!(this instanceof Duplex))return new Duplex(options);Readable.call(this,options),Writable.call(this,options),options&&!1===options.readable&&(this.readable=!1),options&&!1===options.writable&&(this.writable=!1),this.allowHalfOpen=!0,options&&!1===options.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",onend)}function onend(){this.allowHalfOpen||this._writableState.ended||pna.nextTick(onEndNT,this)}function onEndNT(self){self.end()}Object.defineProperty(Duplex.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(Duplex.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(value){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=value,this._writableState.destroyed=value)}}),Duplex.prototype._destroy=function(err,cb){this.push(null),this.end(),pna.nextTick(cb,err)}},function(module,exports,__webpack_require__){"use strict";var _undefined=__webpack_require__(223)();module.exports=function(val){return val!==_undefined&&null!==val}},function(module,exports,__webpack_require__){"use strict";module.exports=function(value){return null!=value}},function(module,exports,__webpack_require__){"use strict";var objectKeys=Object.keys||function(obj){var keys=[];for(var key in obj)keys.push(key);return keys};module.exports=Duplex;var Readable=__webpack_require__(106),Writable=__webpack_require__(110);__webpack_require__(2)(Duplex,Readable);for(var keys=objectKeys(Writable.prototype),v=0;v<keys.length;v++){var method=keys[v];Duplex.prototype[method]||(Duplex.prototype[method]=Writable.prototype[method])}function Duplex(options){if(!(this instanceof Duplex))return new Duplex(options);Readable.call(this,options),Writable.call(this,options),this.allowHalfOpen=!0,options&&(!1===options.readable&&(this.readable=!1),!1===options.writable&&(this.writable=!1),!1===options.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",onend)))}function onend(){this._writableState.ended||process.nextTick(onEndNT,this)}function onEndNT(self){self.end()}Object.defineProperty(Duplex.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(Duplex.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(Duplex.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(Duplex.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(value){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=value,this._writableState.destroyed=value)}})},function(module,exports,__webpack_require__){"use strict";module.exports={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),EMPTY_BUFFER:Buffer.alloc(0),NOOP:()=>{}}},function(module,exports,__webpack_require__){"use strict";
/** @preserve This file is generated by the script
 * ../bin/generate-defs.js, which is not in general included in a
 * distribution, but is available in the source repository e.g. at
 * https://github.com/squaremo/amqp.node/
 */var Buffer=__webpack_require__(27).Buffer,codec=__webpack_require__(62),ints=__webpack_require__(28),encodeTable=codec.encodeTable,decodeFields=codec.decodeFields,SCRATCH=Buffer.alloc(65536);Object.freeze({});module.exports.constants={FRAME_METHOD:1,FRAME_HEADER:2,FRAME_BODY:3,FRAME_HEARTBEAT:8,FRAME_MIN_SIZE:4096,FRAME_END:206,REPLY_SUCCESS:200,CONTENT_TOO_LARGE:311,NO_ROUTE:312,NO_CONSUMERS:313,ACCESS_REFUSED:403,NOT_FOUND:404,RESOURCE_LOCKED:405,PRECONDITION_FAILED:406,CONNECTION_FORCED:320,INVALID_PATH:402,FRAME_ERROR:501,SYNTAX_ERROR:502,COMMAND_INVALID:503,CHANNEL_ERROR:504,UNEXPECTED_FRAME:505,RESOURCE_ERROR:506,NOT_ALLOWED:530,NOT_IMPLEMENTED:540,INTERNAL_ERROR:541},module.exports.constant_strs={1:"FRAME-METHOD",2:"FRAME-HEADER",3:"FRAME-BODY",8:"FRAME-HEARTBEAT",200:"REPLY-SUCCESS",206:"FRAME-END",311:"CONTENT-TOO-LARGE",312:"NO-ROUTE",313:"NO-CONSUMERS",320:"CONNECTION-FORCED",402:"INVALID-PATH",403:"ACCESS-REFUSED",404:"NOT-FOUND",405:"RESOURCE-LOCKED",406:"PRECONDITION-FAILED",501:"FRAME-ERROR",502:"SYNTAX-ERROR",503:"COMMAND-INVALID",504:"CHANNEL-ERROR",505:"UNEXPECTED-FRAME",506:"RESOURCE-ERROR",530:"NOT-ALLOWED",540:"NOT-IMPLEMENTED",541:"INTERNAL-ERROR",4096:"FRAME-MIN-SIZE"},module.exports.FRAME_OVERHEAD=8,module.exports.decode=function(id,buf){switch(id){case 655370:return fields={versionMajor:void 0,versionMinor:void 0,serverProperties:void 0,mechanisms:void 0,locales:void 0},val=(buffer=buf)[offset=0],offset++,fields.versionMajor=val,val=buffer[offset],offset++,fields.versionMinor=val,len=buffer.readUInt32BE(offset),offset+=4,val=decodeFields(buffer.slice(offset,offset+len)),offset+=len,fields.serverProperties=val,len=buffer.readUInt32BE(offset),offset+=4,val=buffer.slice(offset,offset+len),offset+=len,fields.mechanisms=val,len=buffer.readUInt32BE(offset),offset+=4,val=buffer.slice(offset,offset+len),offset+=len,fields.locales=val,fields;case 655371:return function(buffer){var val,len,offset=0,fields={clientProperties:void 0,mechanism:void 0,response:void 0,locale:void 0};return len=buffer.readUInt32BE(offset),offset+=4,val=decodeFields(buffer.slice(offset,offset+len)),offset+=len,fields.clientProperties=val,len=buffer.readUInt8(offset),offset++,val=buffer.toString("utf8",offset,offset+len),offset+=len,fields.mechanism=val,len=buffer.readUInt32BE(offset),offset+=4,val=buffer.slice(offset,offset+len),offset+=len,fields.response=val,len=buffer.readUInt8(offset),offset++,val=buffer.toString("utf8",offset,offset+len),offset+=len,fields.locale=val,fields}(buf);case 655380:return function(buffer){var val,len,offset=0,fields={challenge:void 0};return len=buffer.readUInt32BE(offset),offset+=4,val=buffer.slice(offset,offset+len),offset+=len,fields.challenge=val,fields}(buf);case 655381:return function(buffer){var val,len,offset=0,fields={response:void 0};return len=buffer.readUInt32BE(offset),offset+=4,val=buffer.slice(offset,offset+len),offset+=len,fields.response=val,fields}(buf);case 655390:return function(buffer){var val,offset=0,fields={channelMax:void 0,frameMax:void 0,heartbeat:void 0};return val=buffer.readUInt16BE(offset),offset+=2,fields.channelMax=val,val=buffer.readUInt32BE(offset),offset+=4,fields.frameMax=val,val=buffer.readUInt16BE(offset),offset+=2,fields.heartbeat=val,fields}(buf);case 655391:return function(buffer){var val,offset=0,fields={channelMax:void 0,frameMax:void 0,heartbeat:void 0};return val=buffer.readUInt16BE(offset),offset+=2,fields.channelMax=val,val=buffer.readUInt32BE(offset),offset+=4,fields.frameMax=val,val=buffer.readUInt16BE(offset),offset+=2,fields.heartbeat=val,fields}(buf);case 655400:return function(buffer){var val,len,offset=0,fields={virtualHost:void 0,capabilities:void 0,insist:void 0};return len=buffer.readUInt8(offset),offset++,val=buffer.toString("utf8",offset,offset+len),offset+=len,fields.virtualHost=val,len=buffer.readUInt8(offset),offset++,val=buffer.toString("utf8",offset,offset+len),offset+=len,fields.capabilities=val,val=!!(1&buffer[offset]),fields.insist=val,fields}(buf);case 655401:return function(buffer){var val,len,offset=0,fields={knownHosts:void 0};return len=buffer.readUInt8(offset),offset++,val=buffer.toString("utf8",offset,offset+len),offset+=len,fields.knownHosts=val,fields}(buf);case 655410:return function(buffer){var val,len,offset=0,fields={replyCode:void 0,replyText:void 0,classId:void 0,methodId:void 0};return val=buffer.readUInt16BE(offset),offset+=2,fields.replyCode=val,len=buffer.readUInt8(offset),offset++,val=buffer.toString("utf8",offset,offset+len),offset+=len,fields.replyText=val,val=buffer.readUInt16BE(offset),offset+=2,fields.classId=val,val=buffer.readUInt16BE(offset),offset+=2,fields.methodId=val,fields}(buf);case 655411:return{};case 655420:return function(buffer){var val,len,offset=0,fields={reason:void 0};return len=buffer.readUInt8(offset),offset++,val=buffer.toString("utf8",offset,offset+len),offset+=len,fields.reason=val,fields}(buf);case 655421:return{};case 1310730:return function(buffer){var val,len,offset=0,fields={outOfBand:void 0};return len=buffer.readUInt8(offset),offset++,val=buffer.toString("utf8",offset,offset+len),offset+=len,fields.outOfBand=val,fields}(buf);case 1310731:return function(buffer){var val,len,offset=0,fields={channelId:void 0};return len=buffer.readUInt32BE(offset),offset+=4,val=buffer.slice(offset,offset+len),offset+=len,fields.channelId=val,fields}(buf);case 1310740:return function(buffer){var val,fields={active:void 0};return val=!!(1&buffer[0]),fields.active=val,fields}(buf);case 1310741:return function(buffer){var val,fields={active:void 0};return val=!!(1&buffer[0]),fields.active=val,fields}(buf);case 1310760:return function(buffer){var val,len,offset=0,fields={replyCode:void 0,replyText:void 0,classId:void 0,methodId:void 0};return val=buffer.readUInt16BE(offset),offset+=2,fields.replyCode=val,len=buffer.readUInt8(offset),offset++,val=buffer.toString("utf8",offset,offset+len),offset+=len,fields.replyText=val,val=buffer.readUInt16BE(offset),offset+=2,fields.classId=val,val=buffer.readUInt16BE(offset),offset+=2,fields.methodId=val,fields}(buf);case 1310761:return{};case 1966090:return function(buffer){var val,len,offset=0,fields={realm:void 0,exclusive:void 0,passive:void 0,active:void 0,write:void 0,read:void 0};return len=buffer.readUInt8(offset),offset++,val=buffer.toString("utf8",offset,offset+len),offset+=len,fields.realm=val,val=!!(1&buffer[offset]),fields.exclusive=val,val=!!(2&buffer[offset]),fields.passive=val,val=!!(4&buffer[offset]),fields.active=val,val=!!(8&buffer[offset]),fields.write=val,val=!!(16&buffer[offset]),fields.read=val,fields}(buf);case 1966091:return function(buffer){var val,offset=0,fields={ticket:void 0};return val=buffer.readUInt16BE(offset),offset+=2,fields.ticket=val,fields}(buf);case 2621450:return function(buffer){var val,len,offset=0,fields={ticket:void 0,exchange:void 0,type:void 0,passive:void 0,durable:void 0,autoDelete:void 0,internal:void 0,nowait:void 0,arguments:void 0};return val=buffer.readUInt16BE(offset),offset+=2,fields.ticket=val,len=buffer.readUInt8(offset),offset++,val=buffer.toString("utf8",offset,offset+len),offset+=len,fields.exchange=val,len=buffer.readUInt8(offset),offset++,val=buffer.toString("utf8",offset,offset+len),offset+=len,fields.type=val,val=!!(1&buffer[offset]),fields.passive=val,val=!!(2&buffer[offset]),fields.durable=val,val=!!(4&buffer[offset]),fields.autoDelete=val,val=!!(8&buffer[offset]),fields.internal=val,val=!!(16&buffer[offset]),fields.nowait=val,offset++,len=buffer.readUInt32BE(offset),offset+=4,val=decodeFields(buffer.slice(offset,offset+len)),offset+=len,fields.arguments=val,fields}(buf);case 2621451:return{};case 2621460:return function(buffer){var val,len,offset=0,fields={ticket:void 0,exchange:void 0,ifUnused:void 0,nowait:void 0};return val=buffer.readUInt16BE(offset),offset+=2,fields.ticket=val,len=buffer.readUInt8(offset),offset++,val=buffer.toString("utf8",offset,offset+len),offset+=len,fields.exchange=val,val=!!(1&buffer[offset]),fields.ifUnused=val,val=!!(2&buffer[offset]),fields.nowait=val,fields}(buf);case 2621461:return{};case 2621470:return function(buffer){var val,len,offset=0,fields={ticket:void 0,destination:void 0,source:void 0,routingKey:void 0,nowait:void 0,arguments:void 0};return val=buffer.readUInt16BE(offset),offset+=2,fields.ticket=val,len=buffer.readUInt8(offset),offset++,val=buffer.toString("utf8",offset,offset+len),offset+=len,fields.destination=val,len=buffer.readUInt8(offset),offset++,val=buffer.toString("utf8",offset,offset+len),offset+=len,fields.source=val,len=buffer.readUInt8(offset),offset++,val=buffer.toString("utf8",offset,offset+len),offset+=len,fields.routingKey=val,val=!!(1&buffer[offset]),fields.nowait=val,offset++,len=buffer.readUInt32BE(offset),offset+=4,val=decodeFields(buffer.slice(offset,offset+len)),offset+=len,fields.arguments=val,fields}(buf);case 2621471:return{};case 2621480:return function(buffer){var val,len,offset=0,fields={ticket:void 0,destination:void 0,source:void 0,routingKey:void 0,nowait:void 0,arguments:void 0};return val=buffer.readUInt16BE(offset),offset+=2,fields.ticket=val,len=buffer.readUInt8(offset),offset++,val=buffer.toString("utf8",offset,offset+len),offset+=len,fields.destination=val,len=buffer.readUInt8(offset),offset++,val=buffer.toString("utf8",offset,offset+len),offset+=len,fields.source=val,len=buffer.readUInt8(offset),offset++,val=buffer.toString("utf8",offset,offset+len),offset+=len,fields.routingKey=val,val=!!(1&buffer[offset]),fields.nowait=val,offset++,len=buffer.readUInt32BE(offset),offset+=4,val=decodeFields(buffer.slice(offset,offset+len)),offset+=len,fields.arguments=val,fields}(buf);case 2621491:return{};case 3276810:return function(buffer){var val,len,offset=0,fields={ticket:void 0,queue:void 0,passive:void 0,durable:void 0,exclusive:void 0,autoDelete:void 0,nowait:void 0,arguments:void 0};return val=buffer.readUInt16BE(offset),offset+=2,fields.ticket=val,len=buffer.readUInt8(offset),offset++,val=buffer.toString("utf8",offset,offset+len),offset+=len,fields.queue=val,val=!!(1&buffer[offset]),fields.passive=val,val=!!(2&buffer[offset]),fields.durable=val,val=!!(4&buffer[offset]),fields.exclusive=val,val=!!(8&buffer[offset]),fields.autoDelete=val,val=!!(16&buffer[offset]),fields.nowait=val,offset++,len=buffer.readUInt32BE(offset),offset+=4,val=decodeFields(buffer.slice(offset,offset+len)),offset+=len,fields.arguments=val,fields}(buf);case 3276811:return function(buffer){var val,len,offset=0,fields={queue:void 0,messageCount:void 0,consumerCount:void 0};return len=buffer.readUInt8(offset),offset++,val=buffer.toString("utf8",offset,offset+len),offset+=len,fields.queue=val,val=buffer.readUInt32BE(offset),offset+=4,fields.messageCount=val,val=buffer.readUInt32BE(offset),offset+=4,fields.consumerCount=val,fields}(buf);case 3276820:return function(buffer){var val,len,offset=0,fields={ticket:void 0,queue:void 0,exchange:void 0,routingKey:void 0,nowait:void 0,arguments:void 0};return val=buffer.readUInt16BE(offset),offset+=2,fields.ticket=val,len=buffer.readUInt8(offset),offset++,val=buffer.toString("utf8",offset,offset+len),offset+=len,fields.queue=val,len=buffer.readUInt8(offset),offset++,val=buffer.toString("utf8",offset,offset+len),offset+=len,fields.exchange=val,len=buffer.readUInt8(offset),offset++,val=buffer.toString("utf8",offset,offset+len),offset+=len,fields.routingKey=val,val=!!(1&buffer[offset]),fields.nowait=val,offset++,len=buffer.readUInt32BE(offset),offset+=4,val=decodeFields(buffer.slice(offset,offset+len)),offset+=len,fields.arguments=val,fields}(buf);case 3276821:return{};case 3276830:return function(buffer){var val,len,offset=0,fields={ticket:void 0,queue:void 0,nowait:void 0};return val=buffer.readUInt16BE(offset),offset+=2,fields.ticket=val,len=buffer.readUInt8(offset),offset++,val=buffer.toString("utf8",offset,offset+len),offset+=len,fields.queue=val,val=!!(1&buffer[offset]),fields.nowait=val,fields}(buf);case 3276831:return function(buffer){var val,offset=0,fields={messageCount:void 0};return val=buffer.readUInt32BE(offset),offset+=4,fields.messageCount=val,fields}(buf);case 3276840:return function(buffer){var val,len,offset=0,fields={ticket:void 0,queue:void 0,ifUnused:void 0,ifEmpty:void 0,nowait:void 0};return val=buffer.readUInt16BE(offset),offset+=2,fields.ticket=val,len=buffer.readUInt8(offset),offset++,val=buffer.toString("utf8",offset,offset+len),offset+=len,fields.queue=val,val=!!(1&buffer[offset]),fields.ifUnused=val,val=!!(2&buffer[offset]),fields.ifEmpty=val,val=!!(4&buffer[offset]),fields.nowait=val,fields}(buf);case 3276841:return function(buffer){var val,offset=0,fields={messageCount:void 0};return val=buffer.readUInt32BE(offset),offset+=4,fields.messageCount=val,fields}(buf);case 3276850:return function(buffer){var val,len,offset=0,fields={ticket:void 0,queue:void 0,exchange:void 0,routingKey:void 0,arguments:void 0};return val=buffer.readUInt16BE(offset),offset+=2,fields.ticket=val,len=buffer.readUInt8(offset),offset++,val=buffer.toString("utf8",offset,offset+len),offset+=len,fields.queue=val,len=buffer.readUInt8(offset),offset++,val=buffer.toString("utf8",offset,offset+len),offset+=len,fields.exchange=val,len=buffer.readUInt8(offset),offset++,val=buffer.toString("utf8",offset,offset+len),offset+=len,fields.routingKey=val,len=buffer.readUInt32BE(offset),offset+=4,val=decodeFields(buffer.slice(offset,offset+len)),offset+=len,fields.arguments=val,fields}(buf);case 3276851:return{};case 3932170:return function(buffer){var val,offset=0,fields={prefetchSize:void 0,prefetchCount:void 0,global:void 0};return val=buffer.readUInt32BE(offset),offset+=4,fields.prefetchSize=val,val=buffer.readUInt16BE(offset),offset+=2,fields.prefetchCount=val,val=!!(1&buffer[offset]),fields.global=val,fields}(buf);case 3932171:return{};case 3932180:return function(buffer){var val,len,offset=0,fields={ticket:void 0,queue:void 0,consumerTag:void 0,noLocal:void 0,noAck:void 0,exclusive:void 0,nowait:void 0,arguments:void 0};return val=buffer.readUInt16BE(offset),offset+=2,fields.ticket=val,len=buffer.readUInt8(offset),offset++,val=buffer.toString("utf8",offset,offset+len),offset+=len,fields.queue=val,len=buffer.readUInt8(offset),offset++,val=buffer.toString("utf8",offset,offset+len),offset+=len,fields.consumerTag=val,val=!!(1&buffer[offset]),fields.noLocal=val,val=!!(2&buffer[offset]),fields.noAck=val,val=!!(4&buffer[offset]),fields.exclusive=val,val=!!(8&buffer[offset]),fields.nowait=val,offset++,len=buffer.readUInt32BE(offset),offset+=4,val=decodeFields(buffer.slice(offset,offset+len)),offset+=len,fields.arguments=val,fields}(buf);case 3932181:return function(buffer){var val,len,offset=0,fields={consumerTag:void 0};return len=buffer.readUInt8(offset),offset++,val=buffer.toString("utf8",offset,offset+len),offset+=len,fields.consumerTag=val,fields}(buf);case 3932190:return function(buffer){var val,len,offset=0,fields={consumerTag:void 0,nowait:void 0};return len=buffer.readUInt8(offset),offset++,val=buffer.toString("utf8",offset,offset+len),offset+=len,fields.consumerTag=val,val=!!(1&buffer[offset]),fields.nowait=val,fields}(buf);case 3932191:return function(buffer){var val,len,offset=0,fields={consumerTag:void 0};return len=buffer.readUInt8(offset),offset++,val=buffer.toString("utf8",offset,offset+len),offset+=len,fields.consumerTag=val,fields}(buf);case 3932200:return function(buffer){var val,len,offset=0,fields={ticket:void 0,exchange:void 0,routingKey:void 0,mandatory:void 0,immediate:void 0};return val=buffer.readUInt16BE(offset),offset+=2,fields.ticket=val,len=buffer.readUInt8(offset),offset++,val=buffer.toString("utf8",offset,offset+len),offset+=len,fields.exchange=val,len=buffer.readUInt8(offset),offset++,val=buffer.toString("utf8",offset,offset+len),offset+=len,fields.routingKey=val,val=!!(1&buffer[offset]),fields.mandatory=val,val=!!(2&buffer[offset]),fields.immediate=val,fields}(buf);case 3932210:return function(buffer){var val,len,offset=0,fields={replyCode:void 0,replyText:void 0,exchange:void 0,routingKey:void 0};return val=buffer.readUInt16BE(offset),offset+=2,fields.replyCode=val,len=buffer.readUInt8(offset),offset++,val=buffer.toString("utf8",offset,offset+len),offset+=len,fields.replyText=val,len=buffer.readUInt8(offset),offset++,val=buffer.toString("utf8",offset,offset+len),offset+=len,fields.exchange=val,len=buffer.readUInt8(offset),offset++,val=buffer.toString("utf8",offset,offset+len),offset+=len,fields.routingKey=val,fields}(buf);case 3932220:return function(buffer){var val,len,offset=0,fields={consumerTag:void 0,deliveryTag:void 0,redelivered:void 0,exchange:void 0,routingKey:void 0};return len=buffer.readUInt8(offset),offset++,val=buffer.toString("utf8",offset,offset+len),offset+=len,fields.consumerTag=val,val=ints.readUInt64BE(buffer,offset),offset+=8,fields.deliveryTag=val,val=!!(1&buffer[offset]),fields.redelivered=val,offset++,len=buffer.readUInt8(offset),offset++,val=buffer.toString("utf8",offset,offset+len),offset+=len,fields.exchange=val,len=buffer.readUInt8(offset),offset++,val=buffer.toString("utf8",offset,offset+len),offset+=len,fields.routingKey=val,fields}(buf);case 3932230:return function(buffer){var val,len,offset=0,fields={ticket:void 0,queue:void 0,noAck:void 0};return val=buffer.readUInt16BE(offset),offset+=2,fields.ticket=val,len=buffer.readUInt8(offset),offset++,val=buffer.toString("utf8",offset,offset+len),offset+=len,fields.queue=val,val=!!(1&buffer[offset]),fields.noAck=val,fields}(buf);case 3932231:return function(buffer){var val,len,offset=0,fields={deliveryTag:void 0,redelivered:void 0,exchange:void 0,routingKey:void 0,messageCount:void 0};return val=ints.readUInt64BE(buffer,offset),offset+=8,fields.deliveryTag=val,val=!!(1&buffer[offset]),fields.redelivered=val,offset++,len=buffer.readUInt8(offset),offset++,val=buffer.toString("utf8",offset,offset+len),offset+=len,fields.exchange=val,len=buffer.readUInt8(offset),offset++,val=buffer.toString("utf8",offset,offset+len),offset+=len,fields.routingKey=val,val=buffer.readUInt32BE(offset),offset+=4,fields.messageCount=val,fields}(buf);case 3932232:return function(buffer){var val,len,offset=0,fields={clusterId:void 0};return len=buffer.readUInt8(offset),offset++,val=buffer.toString("utf8",offset,offset+len),offset+=len,fields.clusterId=val,fields}(buf);case 3932240:return function(buffer){var val,offset=0,fields={deliveryTag:void 0,multiple:void 0};return val=ints.readUInt64BE(buffer,offset),offset+=8,fields.deliveryTag=val,val=!!(1&buffer[offset]),fields.multiple=val,fields}(buf);case 3932250:return function(buffer){var val,offset=0,fields={deliveryTag:void 0,requeue:void 0};return val=ints.readUInt64BE(buffer,offset),offset+=8,fields.deliveryTag=val,val=!!(1&buffer[offset]),fields.requeue=val,fields}(buf);case 3932260:return function(buffer){var val,fields={requeue:void 0};return val=!!(1&buffer[0]),fields.requeue=val,fields}(buf);case 3932270:return function(buffer){var val,fields={requeue:void 0};return val=!!(1&buffer[0]),fields.requeue=val,fields}(buf);case 3932271:return{};case 3932280:return function(buffer){var val,offset=0,fields={deliveryTag:void 0,multiple:void 0,requeue:void 0};return val=ints.readUInt64BE(buffer,offset),offset+=8,fields.deliveryTag=val,val=!!(1&buffer[offset]),fields.multiple=val,val=!!(2&buffer[offset]),fields.requeue=val,fields}(buf);case 5898250:case 5898251:case 5898260:case 5898261:case 5898270:case 5898271:return{};case 5570570:return function(buffer){var val,fields={nowait:void 0};return val=!!(1&buffer[0]),fields.nowait=val,fields}(buf);case 5570571:return{};case 60:return function(buffer){var flags,val,len,offset=2;if(0===(flags=buffer.readUInt16BE(0)))return{};var fields={contentType:void 0,contentEncoding:void 0,headers:void 0,deliveryMode:void 0,priority:void 0,correlationId:void 0,replyTo:void 0,expiration:void 0,messageId:void 0,timestamp:void 0,type:void 0,userId:void 0,appId:void 0,clusterId:void 0};return 32768&flags&&(len=buffer.readUInt8(offset),offset++,val=buffer.toString("utf8",offset,offset+len),offset+=len,fields.contentType=val),16384&flags&&(len=buffer.readUInt8(offset),offset++,val=buffer.toString("utf8",offset,offset+len),offset+=len,fields.contentEncoding=val),8192&flags&&(len=buffer.readUInt32BE(offset),offset+=4,val=decodeFields(buffer.slice(offset,offset+len)),offset+=len,fields.headers=val),4096&flags&&(val=buffer[offset],offset++,fields.deliveryMode=val),2048&flags&&(val=buffer[offset],offset++,fields.priority=val),1024&flags&&(len=buffer.readUInt8(offset),offset++,val=buffer.toString("utf8",offset,offset+len),offset+=len,fields.correlationId=val),512&flags&&(len=buffer.readUInt8(offset),offset++,val=buffer.toString("utf8",offset,offset+len),offset+=len,fields.replyTo=val),256&flags&&(len=buffer.readUInt8(offset),offset++,val=buffer.toString("utf8",offset,offset+len),offset+=len,fields.expiration=val),128&flags&&(len=buffer.readUInt8(offset),offset++,val=buffer.toString("utf8",offset,offset+len),offset+=len,fields.messageId=val),64&flags&&(val=ints.readUInt64BE(buffer,offset),offset+=8,fields.timestamp=val),32&flags&&(len=buffer.readUInt8(offset),offset++,val=buffer.toString("utf8",offset,offset+len),offset+=len,fields.type=val),16&flags&&(len=buffer.readUInt8(offset),offset++,val=buffer.toString("utf8",offset,offset+len),offset+=len,fields.userId=val),8&flags&&(len=buffer.readUInt8(offset),offset++,val=buffer.toString("utf8",offset,offset+len),offset+=len,fields.appId=val),4&flags&&(len=buffer.readUInt8(offset),offset++,val=buffer.toString("utf8",offset,offset+len),offset+=len,fields.clusterId=val),fields}(buf);default:throw new Error("Unknown class/method ID")}var buffer,val,len,offset,fields},module.exports.encodeMethod=function(id,channel,fields){switch(id){case 655370:return function(channel,fields){var len,offset=0,val=null,varyingSize=0,scratchOffset=0;if(void 0===(val=fields.serverProperties))throw new Error("Missing value for mandatory field 'serverProperties'");if("object"!=typeof val)throw new TypeError("Field 'serverProperties' is the wrong type; must be an object");len=encodeTable(SCRATCH,val,scratchOffset);var serverProperties_encoded=SCRATCH.slice(scratchOffset,scratchOffset+len);if(scratchOffset+=len,varyingSize+=serverProperties_encoded.length,void 0===(val=fields.mechanisms))val=Buffer.from("PLAIN");else if(!Buffer.isBuffer(val))throw new TypeError("Field 'mechanisms' is the wrong type; must be a Buffer");if(varyingSize+=val.length,void 0===(val=fields.locales))val=Buffer.from("en_US");else if(!Buffer.isBuffer(val))throw new TypeError("Field 'locales' is the wrong type; must be a Buffer");varyingSize+=val.length;var buffer=Buffer.alloc(22+varyingSize);if(buffer[0]=1,buffer.writeUInt16BE(channel,1),buffer.writeUInt32BE(655370,7),offset=11,void 0===(val=fields.versionMajor))val=0;else if("number"!=typeof val||isNaN(val))throw new TypeError("Field 'versionMajor' is the wrong type; must be a number (but not NaN)");if(buffer.writeUInt8(val,offset),offset++,void 0===(val=fields.versionMinor))val=9;else if("number"!=typeof val||isNaN(val))throw new TypeError("Field 'versionMinor' is the wrong type; must be a number (but not NaN)");return buffer.writeUInt8(val,offset),offset++,offset+=serverProperties_encoded.copy(buffer,offset),void 0===(val=fields.mechanisms)&&(val=Buffer.from("PLAIN")),len=val.length,buffer.writeUInt32BE(len,offset),offset+=4,val.copy(buffer,offset),offset+=len,void 0===(val=fields.locales)&&(val=Buffer.from("en_US")),len=val.length,buffer.writeUInt32BE(len,offset),offset+=4,val.copy(buffer,offset),buffer[offset+=len]=206,buffer.writeUInt32BE(offset-7,3),buffer}(channel,fields);case 655371:return function(channel,fields){var len,offset=0,val=null,varyingSize=0,scratchOffset=0;if(void 0===(val=fields.clientProperties))throw new Error("Missing value for mandatory field 'clientProperties'");if("object"!=typeof val)throw new TypeError("Field 'clientProperties' is the wrong type; must be an object");len=encodeTable(SCRATCH,val,scratchOffset);var clientProperties_encoded=SCRATCH.slice(scratchOffset,scratchOffset+len);if(scratchOffset+=len,varyingSize+=clientProperties_encoded.length,void 0===(val=fields.mechanism))val="PLAIN";else if(!("string"==typeof val&&Buffer.byteLength(val)<256))throw new TypeError("Field 'mechanism' is the wrong type; must be a string (up to 255 chars)");var mechanism_len=Buffer.byteLength(val,"utf8");if(varyingSize+=mechanism_len,void 0===(val=fields.response))throw new Error("Missing value for mandatory field 'response'");if(!Buffer.isBuffer(val))throw new TypeError("Field 'response' is the wrong type; must be a Buffer");if(varyingSize+=val.length,void 0===(val=fields.locale))val="en_US";else if(!("string"==typeof val&&Buffer.byteLength(val)<256))throw new TypeError("Field 'locale' is the wrong type; must be a string (up to 255 chars)");var locale_len=Buffer.byteLength(val,"utf8");varyingSize+=locale_len;var buffer=Buffer.alloc(18+varyingSize);return buffer[0]=1,buffer.writeUInt16BE(channel,1),buffer.writeUInt32BE(655371,7),offset=11,offset+=clientProperties_encoded.copy(buffer,offset),void 0===(val=fields.mechanism)&&(val="PLAIN"),buffer[offset]=mechanism_len,offset++,buffer.write(val,offset,"utf8"),offset+=mechanism_len,void 0===(val=fields.response)&&(val=Buffer.from(void 0)),len=val.length,buffer.writeUInt32BE(len,offset),offset+=4,val.copy(buffer,offset),offset+=len,void 0===(val=fields.locale)&&(val="en_US"),buffer[offset]=locale_len,offset++,buffer.write(val,offset,"utf8"),buffer[offset+=locale_len]=206,buffer.writeUInt32BE(offset-7,3),buffer}(channel,fields);case 655380:return function(channel,fields){var len,offset=0,val=null,varyingSize=0;if(void 0===(val=fields.challenge))throw new Error("Missing value for mandatory field 'challenge'");if(!Buffer.isBuffer(val))throw new TypeError("Field 'challenge' is the wrong type; must be a Buffer");varyingSize+=val.length;var buffer=Buffer.alloc(16+varyingSize);return buffer[0]=1,buffer.writeUInt16BE(channel,1),buffer.writeUInt32BE(655380,7),offset=11,void 0===(val=fields.challenge)&&(val=Buffer.from(void 0)),len=val.length,buffer.writeUInt32BE(len,offset),offset+=4,val.copy(buffer,offset),buffer[offset+=len]=206,buffer.writeUInt32BE(offset-7,3),buffer}(channel,fields);case 655381:return function(channel,fields){var len,offset=0,val=null,varyingSize=0;if(void 0===(val=fields.response))throw new Error("Missing value for mandatory field 'response'");if(!Buffer.isBuffer(val))throw new TypeError("Field 'response' is the wrong type; must be a Buffer");varyingSize+=val.length;var buffer=Buffer.alloc(16+varyingSize);return buffer[0]=1,buffer.writeUInt16BE(channel,1),buffer.writeUInt32BE(655381,7),offset=11,void 0===(val=fields.response)&&(val=Buffer.from(void 0)),len=val.length,buffer.writeUInt32BE(len,offset),offset+=4,val.copy(buffer,offset),buffer[offset+=len]=206,buffer.writeUInt32BE(offset-7,3),buffer}(channel,fields);case 655390:return function(channel,fields){var offset=0,val=null,buffer=Buffer.alloc(20);if(buffer[0]=1,buffer.writeUInt16BE(channel,1),buffer.writeUInt32BE(655390,7),offset=11,void 0===(val=fields.channelMax))val=0;else if("number"!=typeof val||isNaN(val))throw new TypeError("Field 'channelMax' is the wrong type; must be a number (but not NaN)");if(buffer.writeUInt16BE(val,offset),offset+=2,void 0===(val=fields.frameMax))val=0;else if("number"!=typeof val||isNaN(val))throw new TypeError("Field 'frameMax' is the wrong type; must be a number (but not NaN)");if(buffer.writeUInt32BE(val,offset),offset+=4,void 0===(val=fields.heartbeat))val=0;else if("number"!=typeof val||isNaN(val))throw new TypeError("Field 'heartbeat' is the wrong type; must be a number (but not NaN)");return buffer.writeUInt16BE(val,offset),buffer[offset+=2]=206,buffer.writeUInt32BE(offset-7,3),buffer}(channel,fields);case 655391:return function(channel,fields){var offset=0,val=null,buffer=Buffer.alloc(20);if(buffer[0]=1,buffer.writeUInt16BE(channel,1),buffer.writeUInt32BE(655391,7),offset=11,void 0===(val=fields.channelMax))val=0;else if("number"!=typeof val||isNaN(val))throw new TypeError("Field 'channelMax' is the wrong type; must be a number (but not NaN)");if(buffer.writeUInt16BE(val,offset),offset+=2,void 0===(val=fields.frameMax))val=0;else if("number"!=typeof val||isNaN(val))throw new TypeError("Field 'frameMax' is the wrong type; must be a number (but not NaN)");if(buffer.writeUInt32BE(val,offset),offset+=4,void 0===(val=fields.heartbeat))val=0;else if("number"!=typeof val||isNaN(val))throw new TypeError("Field 'heartbeat' is the wrong type; must be a number (but not NaN)");return buffer.writeUInt16BE(val,offset),buffer[offset+=2]=206,buffer.writeUInt32BE(offset-7,3),buffer}(channel,fields);case 655400:return function(channel,fields){var offset=0,val=null,bits=0,varyingSize=0;if(void 0===(val=fields.virtualHost))val="/";else if(!("string"==typeof val&&Buffer.byteLength(val)<256))throw new TypeError("Field 'virtualHost' is the wrong type; must be a string (up to 255 chars)");var virtualHost_len=Buffer.byteLength(val,"utf8");if(varyingSize+=virtualHost_len,void 0===(val=fields.capabilities))val="";else if(!("string"==typeof val&&Buffer.byteLength(val)<256))throw new TypeError("Field 'capabilities' is the wrong type; must be a string (up to 255 chars)");var capabilities_len=Buffer.byteLength(val,"utf8");varyingSize+=capabilities_len;var buffer=Buffer.alloc(15+varyingSize);return buffer[0]=1,buffer.writeUInt16BE(channel,1),buffer.writeUInt32BE(655400,7),offset=11,void 0===(val=fields.virtualHost)&&(val="/"),buffer[offset]=virtualHost_len,offset++,buffer.write(val,offset,"utf8"),offset+=virtualHost_len,void 0===(val=fields.capabilities)&&(val=""),buffer[offset]=capabilities_len,offset++,buffer.write(val,offset,"utf8"),offset+=capabilities_len,void 0===(val=fields.insist)&&(val=!1),val&&(bits+=1),buffer[offset]=bits,buffer[++offset]=206,buffer.writeUInt32BE(offset-7,3),buffer}(channel,fields);case 655401:return function(channel,fields){var offset=0,val=null,varyingSize=0;if(void 0===(val=fields.knownHosts))val="";else if(!("string"==typeof val&&Buffer.byteLength(val)<256))throw new TypeError("Field 'knownHosts' is the wrong type; must be a string (up to 255 chars)");var knownHosts_len=Buffer.byteLength(val,"utf8");varyingSize+=knownHosts_len;var buffer=Buffer.alloc(13+varyingSize);return buffer[0]=1,buffer.writeUInt16BE(channel,1),buffer.writeUInt32BE(655401,7),offset=11,void 0===(val=fields.knownHosts)&&(val=""),buffer[offset]=knownHosts_len,offset++,buffer.write(val,offset,"utf8"),buffer[offset+=knownHosts_len]=206,buffer.writeUInt32BE(offset-7,3),buffer}(channel,fields);case 655410:return function(channel,fields){var offset=0,val=null,varyingSize=0;if(void 0===(val=fields.replyText))val="";else if(!("string"==typeof val&&Buffer.byteLength(val)<256))throw new TypeError("Field 'replyText' is the wrong type; must be a string (up to 255 chars)");var replyText_len=Buffer.byteLength(val,"utf8");varyingSize+=replyText_len;var buffer=Buffer.alloc(19+varyingSize);if(buffer[0]=1,buffer.writeUInt16BE(channel,1),buffer.writeUInt32BE(655410,7),offset=11,void 0===(val=fields.replyCode))throw new Error("Missing value for mandatory field 'replyCode'");if("number"!=typeof val||isNaN(val))throw new TypeError("Field 'replyCode' is the wrong type; must be a number (but not NaN)");if(buffer.writeUInt16BE(val,offset),offset+=2,void 0===(val=fields.replyText)&&(val=""),buffer[offset]=replyText_len,offset++,buffer.write(val,offset,"utf8"),offset+=replyText_len,void 0===(val=fields.classId))throw new Error("Missing value for mandatory field 'classId'");if("number"!=typeof val||isNaN(val))throw new TypeError("Field 'classId' is the wrong type; must be a number (but not NaN)");if(buffer.writeUInt16BE(val,offset),offset+=2,void 0===(val=fields.methodId))throw new Error("Missing value for mandatory field 'methodId'");if("number"!=typeof val||isNaN(val))throw new TypeError("Field 'methodId' is the wrong type; must be a number (but not NaN)");return buffer.writeUInt16BE(val,offset),buffer[offset+=2]=206,buffer.writeUInt32BE(offset-7,3),buffer}(channel,fields);case 655411:return function(channel,fields){var buffer=Buffer.alloc(12);return buffer[0]=1,buffer.writeUInt16BE(channel,1),buffer.writeUInt32BE(655411,7),buffer[11]=206,buffer.writeUInt32BE(4,3),buffer}(channel);case 655420:return function(channel,fields){var offset=0,val=null,varyingSize=0;if(void 0===(val=fields.reason))val="";else if(!("string"==typeof val&&Buffer.byteLength(val)<256))throw new TypeError("Field 'reason' is the wrong type; must be a string (up to 255 chars)");var reason_len=Buffer.byteLength(val,"utf8");varyingSize+=reason_len;var buffer=Buffer.alloc(13+varyingSize);return buffer[0]=1,buffer.writeUInt16BE(channel,1),buffer.writeUInt32BE(655420,7),offset=11,void 0===(val=fields.reason)&&(val=""),buffer[offset]=reason_len,offset++,buffer.write(val,offset,"utf8"),buffer[offset+=reason_len]=206,buffer.writeUInt32BE(offset-7,3),buffer}(channel,fields);case 655421:return function(channel,fields){var buffer=Buffer.alloc(12);return buffer[0]=1,buffer.writeUInt16BE(channel,1),buffer.writeUInt32BE(655421,7),buffer[11]=206,buffer.writeUInt32BE(4,3),buffer}(channel);case 1310730:return function(channel,fields){var offset=0,val=null,varyingSize=0;if(void 0===(val=fields.outOfBand))val="";else if(!("string"==typeof val&&Buffer.byteLength(val)<256))throw new TypeError("Field 'outOfBand' is the wrong type; must be a string (up to 255 chars)");var outOfBand_len=Buffer.byteLength(val,"utf8");varyingSize+=outOfBand_len;var buffer=Buffer.alloc(13+varyingSize);return buffer[0]=1,buffer.writeUInt16BE(channel,1),buffer.writeUInt32BE(1310730,7),offset=11,void 0===(val=fields.outOfBand)&&(val=""),buffer[offset]=outOfBand_len,offset++,buffer.write(val,offset,"utf8"),buffer[offset+=outOfBand_len]=206,buffer.writeUInt32BE(offset-7,3),buffer}(channel,fields);case 1310731:return function(channel,fields){var len,offset=0,val=null,varyingSize=0;if(void 0===(val=fields.channelId))val=Buffer.from("");else if(!Buffer.isBuffer(val))throw new TypeError("Field 'channelId' is the wrong type; must be a Buffer");varyingSize+=val.length;var buffer=Buffer.alloc(16+varyingSize);return buffer[0]=1,buffer.writeUInt16BE(channel,1),buffer.writeUInt32BE(1310731,7),offset=11,void 0===(val=fields.channelId)&&(val=Buffer.from("")),len=val.length,buffer.writeUInt32BE(len,offset),offset+=4,val.copy(buffer,offset),buffer[offset+=len]=206,buffer.writeUInt32BE(offset-7,3),buffer}(channel,fields);case 1310740:return function(channel,fields){var val,offset=0,bits=0,buffer=Buffer.alloc(13);if(buffer[0]=1,buffer.writeUInt16BE(channel,1),buffer.writeUInt32BE(1310740,7),offset=11,void 0===(val=fields.active))throw new Error("Missing value for mandatory field 'active'");return val&&(bits+=1),buffer[offset]=bits,buffer[++offset]=206,buffer.writeUInt32BE(offset-7,3),buffer}(channel,fields);case 1310741:return function(channel,fields){var val,offset=0,bits=0,buffer=Buffer.alloc(13);if(buffer[0]=1,buffer.writeUInt16BE(channel,1),buffer.writeUInt32BE(1310741,7),offset=11,void 0===(val=fields.active))throw new Error("Missing value for mandatory field 'active'");return val&&(bits+=1),buffer[offset]=bits,buffer[++offset]=206,buffer.writeUInt32BE(offset-7,3),buffer}(channel,fields);case 1310760:return function(channel,fields){var offset=0,val=null,varyingSize=0;if(void 0===(val=fields.replyText))val="";else if(!("string"==typeof val&&Buffer.byteLength(val)<256))throw new TypeError("Field 'replyText' is the wrong type; must be a string (up to 255 chars)");var replyText_len=Buffer.byteLength(val,"utf8");varyingSize+=replyText_len;var buffer=Buffer.alloc(19+varyingSize);if(buffer[0]=1,buffer.writeUInt16BE(channel,1),buffer.writeUInt32BE(1310760,7),offset=11,void 0===(val=fields.replyCode))throw new Error("Missing value for mandatory field 'replyCode'");if("number"!=typeof val||isNaN(val))throw new TypeError("Field 'replyCode' is the wrong type; must be a number (but not NaN)");if(buffer.writeUInt16BE(val,offset),offset+=2,void 0===(val=fields.replyText)&&(val=""),buffer[offset]=replyText_len,offset++,buffer.write(val,offset,"utf8"),offset+=replyText_len,void 0===(val=fields.classId))throw new Error("Missing value for mandatory field 'classId'");if("number"!=typeof val||isNaN(val))throw new TypeError("Field 'classId' is the wrong type; must be a number (but not NaN)");if(buffer.writeUInt16BE(val,offset),offset+=2,void 0===(val=fields.methodId))throw new Error("Missing value for mandatory field 'methodId'");if("number"!=typeof val||isNaN(val))throw new TypeError("Field 'methodId' is the wrong type; must be a number (but not NaN)");return buffer.writeUInt16BE(val,offset),buffer[offset+=2]=206,buffer.writeUInt32BE(offset-7,3),buffer}(channel,fields);case 1310761:return function(channel,fields){var buffer=Buffer.alloc(12);return buffer[0]=1,buffer.writeUInt16BE(channel,1),buffer.writeUInt32BE(1310761,7),buffer[11]=206,buffer.writeUInt32BE(4,3),buffer}(channel);case 1966090:return function(channel,fields){var offset=0,val=null,bits=0,varyingSize=0;if(void 0===(val=fields.realm))val="/data";else if(!("string"==typeof val&&Buffer.byteLength(val)<256))throw new TypeError("Field 'realm' is the wrong type; must be a string (up to 255 chars)");var realm_len=Buffer.byteLength(val,"utf8");varyingSize+=realm_len;var buffer=Buffer.alloc(14+varyingSize);return buffer[0]=1,buffer.writeUInt16BE(channel,1),buffer.writeUInt32BE(1966090,7),offset=11,void 0===(val=fields.realm)&&(val="/data"),buffer[offset]=realm_len,offset++,buffer.write(val,offset,"utf8"),offset+=realm_len,void 0===(val=fields.exclusive)&&(val=!1),val&&(bits+=1),void 0===(val=fields.passive)&&(val=!0),val&&(bits+=2),void 0===(val=fields.active)&&(val=!0),val&&(bits+=4),void 0===(val=fields.write)&&(val=!0),val&&(bits+=8),void 0===(val=fields.read)&&(val=!0),val&&(bits+=16),buffer[offset]=bits,buffer[++offset]=206,buffer.writeUInt32BE(offset-7,3),buffer}(channel,fields);case 1966091:return function(channel,fields){var offset=0,val=null,buffer=Buffer.alloc(14);if(buffer[0]=1,buffer.writeUInt16BE(channel,1),buffer.writeUInt32BE(1966091,7),offset=11,void 0===(val=fields.ticket))val=1;else if("number"!=typeof val||isNaN(val))throw new TypeError("Field 'ticket' is the wrong type; must be a number (but not NaN)");return buffer.writeUInt16BE(val,offset),buffer[offset+=2]=206,buffer.writeUInt32BE(offset-7,3),buffer}(channel,fields);case 2621450:return function(channel,fields){var len,offset=0,val=null,bits=0,varyingSize=0,scratchOffset=0;if(void 0===(val=fields.exchange))throw new Error("Missing value for mandatory field 'exchange'");if(!("string"==typeof val&&Buffer.byteLength(val)<256))throw new TypeError("Field 'exchange' is the wrong type; must be a string (up to 255 chars)");var exchange_len=Buffer.byteLength(val,"utf8");if(varyingSize+=exchange_len,void 0===(val=fields.type))val="direct";else if(!("string"==typeof val&&Buffer.byteLength(val)<256))throw new TypeError("Field 'type' is the wrong type; must be a string (up to 255 chars)");var type_len=Buffer.byteLength(val,"utf8");if(varyingSize+=type_len,void 0===(val=fields.arguments))val={};else if("object"!=typeof val)throw new TypeError("Field 'arguments' is the wrong type; must be an object");len=encodeTable(SCRATCH,val,scratchOffset);var arguments_encoded=SCRATCH.slice(scratchOffset,scratchOffset+len);scratchOffset+=len,varyingSize+=arguments_encoded.length;var buffer=Buffer.alloc(17+varyingSize);if(buffer[0]=1,buffer.writeUInt16BE(channel,1),buffer.writeUInt32BE(2621450,7),offset=11,void 0===(val=fields.ticket))val=0;else if("number"!=typeof val||isNaN(val))throw new TypeError("Field 'ticket' is the wrong type; must be a number (but not NaN)");return buffer.writeUInt16BE(val,offset),offset+=2,void 0===(val=fields.exchange)&&(val=void 0),buffer[offset]=exchange_len,offset++,buffer.write(val,offset,"utf8"),offset+=exchange_len,void 0===(val=fields.type)&&(val="direct"),buffer[offset]=type_len,offset++,buffer.write(val,offset,"utf8"),offset+=type_len,void 0===(val=fields.passive)&&(val=!1),val&&(bits+=1),void 0===(val=fields.durable)&&(val=!1),val&&(bits+=2),void 0===(val=fields.autoDelete)&&(val=!1),val&&(bits+=4),void 0===(val=fields.internal)&&(val=!1),val&&(bits+=8),void 0===(val=fields.nowait)&&(val=!1),val&&(bits+=16),buffer[offset]=bits,offset++,bits=0,buffer[offset+=arguments_encoded.copy(buffer,offset)]=206,buffer.writeUInt32BE(offset-7,3),buffer}(channel,fields);case 2621451:return function(channel,fields){var buffer=Buffer.alloc(12);return buffer[0]=1,buffer.writeUInt16BE(channel,1),buffer.writeUInt32BE(2621451,7),buffer[11]=206,buffer.writeUInt32BE(4,3),buffer}(channel);case 2621460:return function(channel,fields){var offset=0,val=null,bits=0,varyingSize=0;if(void 0===(val=fields.exchange))throw new Error("Missing value for mandatory field 'exchange'");if(!("string"==typeof val&&Buffer.byteLength(val)<256))throw new TypeError("Field 'exchange' is the wrong type; must be a string (up to 255 chars)");var exchange_len=Buffer.byteLength(val,"utf8");varyingSize+=exchange_len;var buffer=Buffer.alloc(16+varyingSize);if(buffer[0]=1,buffer.writeUInt16BE(channel,1),buffer.writeUInt32BE(2621460,7),offset=11,void 0===(val=fields.ticket))val=0;else if("number"!=typeof val||isNaN(val))throw new TypeError("Field 'ticket' is the wrong type; must be a number (but not NaN)");return buffer.writeUInt16BE(val,offset),offset+=2,void 0===(val=fields.exchange)&&(val=void 0),buffer[offset]=exchange_len,offset++,buffer.write(val,offset,"utf8"),offset+=exchange_len,void 0===(val=fields.ifUnused)&&(val=!1),val&&(bits+=1),void 0===(val=fields.nowait)&&(val=!1),val&&(bits+=2),buffer[offset]=bits,buffer[++offset]=206,buffer.writeUInt32BE(offset-7,3),buffer}(channel,fields);case 2621461:return function(channel,fields){var buffer=Buffer.alloc(12);return buffer[0]=1,buffer.writeUInt16BE(channel,1),buffer.writeUInt32BE(2621461,7),buffer[11]=206,buffer.writeUInt32BE(4,3),buffer}(channel);case 2621470:return function(channel,fields){var len,offset=0,val=null,bits=0,varyingSize=0,scratchOffset=0;if(void 0===(val=fields.destination))throw new Error("Missing value for mandatory field 'destination'");if(!("string"==typeof val&&Buffer.byteLength(val)<256))throw new TypeError("Field 'destination' is the wrong type; must be a string (up to 255 chars)");var destination_len=Buffer.byteLength(val,"utf8");if(varyingSize+=destination_len,void 0===(val=fields.source))throw new Error("Missing value for mandatory field 'source'");if(!("string"==typeof val&&Buffer.byteLength(val)<256))throw new TypeError("Field 'source' is the wrong type; must be a string (up to 255 chars)");var source_len=Buffer.byteLength(val,"utf8");if(varyingSize+=source_len,void 0===(val=fields.routingKey))val="";else if(!("string"==typeof val&&Buffer.byteLength(val)<256))throw new TypeError("Field 'routingKey' is the wrong type; must be a string (up to 255 chars)");var routingKey_len=Buffer.byteLength(val,"utf8");if(varyingSize+=routingKey_len,void 0===(val=fields.arguments))val={};else if("object"!=typeof val)throw new TypeError("Field 'arguments' is the wrong type; must be an object");len=encodeTable(SCRATCH,val,scratchOffset);var arguments_encoded=SCRATCH.slice(scratchOffset,scratchOffset+len);scratchOffset+=len,varyingSize+=arguments_encoded.length;var buffer=Buffer.alloc(18+varyingSize);if(buffer[0]=1,buffer.writeUInt16BE(channel,1),buffer.writeUInt32BE(2621470,7),offset=11,void 0===(val=fields.ticket))val=0;else if("number"!=typeof val||isNaN(val))throw new TypeError("Field 'ticket' is the wrong type; must be a number (but not NaN)");return buffer.writeUInt16BE(val,offset),offset+=2,void 0===(val=fields.destination)&&(val=void 0),buffer[offset]=destination_len,offset++,buffer.write(val,offset,"utf8"),offset+=destination_len,void 0===(val=fields.source)&&(val=void 0),buffer[offset]=source_len,offset++,buffer.write(val,offset,"utf8"),offset+=source_len,void 0===(val=fields.routingKey)&&(val=""),buffer[offset]=routingKey_len,offset++,buffer.write(val,offset,"utf8"),offset+=routingKey_len,void 0===(val=fields.nowait)&&(val=!1),val&&(bits+=1),buffer[offset]=bits,offset++,bits=0,buffer[offset+=arguments_encoded.copy(buffer,offset)]=206,buffer.writeUInt32BE(offset-7,3),buffer}(channel,fields);case 2621471:return function(channel,fields){var buffer=Buffer.alloc(12);return buffer[0]=1,buffer.writeUInt16BE(channel,1),buffer.writeUInt32BE(2621471,7),buffer[11]=206,buffer.writeUInt32BE(4,3),buffer}(channel);case 2621480:return function(channel,fields){var len,offset=0,val=null,bits=0,varyingSize=0,scratchOffset=0;if(void 0===(val=fields.destination))throw new Error("Missing value for mandatory field 'destination'");if(!("string"==typeof val&&Buffer.byteLength(val)<256))throw new TypeError("Field 'destination' is the wrong type; must be a string (up to 255 chars)");var destination_len=Buffer.byteLength(val,"utf8");if(varyingSize+=destination_len,void 0===(val=fields.source))throw new Error("Missing value for mandatory field 'source'");if(!("string"==typeof val&&Buffer.byteLength(val)<256))throw new TypeError("Field 'source' is the wrong type; must be a string (up to 255 chars)");var source_len=Buffer.byteLength(val,"utf8");if(varyingSize+=source_len,void 0===(val=fields.routingKey))val="";else if(!("string"==typeof val&&Buffer.byteLength(val)<256))throw new TypeError("Field 'routingKey' is the wrong type; must be a string (up to 255 chars)");var routingKey_len=Buffer.byteLength(val,"utf8");if(varyingSize+=routingKey_len,void 0===(val=fields.arguments))val={};else if("object"!=typeof val)throw new TypeError("Field 'arguments' is the wrong type; must be an object");len=encodeTable(SCRATCH,val,scratchOffset);var arguments_encoded=SCRATCH.slice(scratchOffset,scratchOffset+len);scratchOffset+=len,varyingSize+=arguments_encoded.length;var buffer=Buffer.alloc(18+varyingSize);if(buffer[0]=1,buffer.writeUInt16BE(channel,1),buffer.writeUInt32BE(2621480,7),offset=11,void 0===(val=fields.ticket))val=0;else if("number"!=typeof val||isNaN(val))throw new TypeError("Field 'ticket' is the wrong type; must be a number (but not NaN)");return buffer.writeUInt16BE(val,offset),offset+=2,void 0===(val=fields.destination)&&(val=void 0),buffer[offset]=destination_len,offset++,buffer.write(val,offset,"utf8"),offset+=destination_len,void 0===(val=fields.source)&&(val=void 0),buffer[offset]=source_len,offset++,buffer.write(val,offset,"utf8"),offset+=source_len,void 0===(val=fields.routingKey)&&(val=""),buffer[offset]=routingKey_len,offset++,buffer.write(val,offset,"utf8"),offset+=routingKey_len,void 0===(val=fields.nowait)&&(val=!1),val&&(bits+=1),buffer[offset]=bits,offset++,bits=0,buffer[offset+=arguments_encoded.copy(buffer,offset)]=206,buffer.writeUInt32BE(offset-7,3),buffer}(channel,fields);case 2621491:return function(channel,fields){var buffer=Buffer.alloc(12);return buffer[0]=1,buffer.writeUInt16BE(channel,1),buffer.writeUInt32BE(2621491,7),buffer[11]=206,buffer.writeUInt32BE(4,3),buffer}(channel);case 3276810:return function(channel,fields){var len,offset=0,val=null,bits=0,varyingSize=0,scratchOffset=0;if(void 0===(val=fields.queue))val="";else if(!("string"==typeof val&&Buffer.byteLength(val)<256))throw new TypeError("Field 'queue' is the wrong type; must be a string (up to 255 chars)");var queue_len=Buffer.byteLength(val,"utf8");if(varyingSize+=queue_len,void 0===(val=fields.arguments))val={};else if("object"!=typeof val)throw new TypeError("Field 'arguments' is the wrong type; must be an object");len=encodeTable(SCRATCH,val,scratchOffset);var arguments_encoded=SCRATCH.slice(scratchOffset,scratchOffset+len);scratchOffset+=len,varyingSize+=arguments_encoded.length;var buffer=Buffer.alloc(16+varyingSize);if(buffer[0]=1,buffer.writeUInt16BE(channel,1),buffer.writeUInt32BE(3276810,7),offset=11,void 0===(val=fields.ticket))val=0;else if("number"!=typeof val||isNaN(val))throw new TypeError("Field 'ticket' is the wrong type; must be a number (but not NaN)");return buffer.writeUInt16BE(val,offset),offset+=2,void 0===(val=fields.queue)&&(val=""),buffer[offset]=queue_len,offset++,buffer.write(val,offset,"utf8"),offset+=queue_len,void 0===(val=fields.passive)&&(val=!1),val&&(bits+=1),void 0===(val=fields.durable)&&(val=!1),val&&(bits+=2),void 0===(val=fields.exclusive)&&(val=!1),val&&(bits+=4),void 0===(val=fields.autoDelete)&&(val=!1),val&&(bits+=8),void 0===(val=fields.nowait)&&(val=!1),val&&(bits+=16),buffer[offset]=bits,offset++,bits=0,buffer[offset+=arguments_encoded.copy(buffer,offset)]=206,buffer.writeUInt32BE(offset-7,3),buffer}(channel,fields);case 3276811:return function(channel,fields){var offset=0,val=null,varyingSize=0;if(void 0===(val=fields.queue))throw new Error("Missing value for mandatory field 'queue'");if(!("string"==typeof val&&Buffer.byteLength(val)<256))throw new TypeError("Field 'queue' is the wrong type; must be a string (up to 255 chars)");var queue_len=Buffer.byteLength(val,"utf8");varyingSize+=queue_len;var buffer=Buffer.alloc(21+varyingSize);if(buffer[0]=1,buffer.writeUInt16BE(channel,1),buffer.writeUInt32BE(3276811,7),offset=11,void 0===(val=fields.queue)&&(val=void 0),buffer[offset]=queue_len,offset++,buffer.write(val,offset,"utf8"),offset+=queue_len,void 0===(val=fields.messageCount))throw new Error("Missing value for mandatory field 'messageCount'");if("number"!=typeof val||isNaN(val))throw new TypeError("Field 'messageCount' is the wrong type; must be a number (but not NaN)");if(buffer.writeUInt32BE(val,offset),offset+=4,void 0===(val=fields.consumerCount))throw new Error("Missing value for mandatory field 'consumerCount'");if("number"!=typeof val||isNaN(val))throw new TypeError("Field 'consumerCount' is the wrong type; must be a number (but not NaN)");return buffer.writeUInt32BE(val,offset),buffer[offset+=4]=206,buffer.writeUInt32BE(offset-7,3),buffer}(channel,fields);case 3276820:return function(channel,fields){var len,offset=0,val=null,bits=0,varyingSize=0,scratchOffset=0;if(void 0===(val=fields.queue))val="";else if(!("string"==typeof val&&Buffer.byteLength(val)<256))throw new TypeError("Field 'queue' is the wrong type; must be a string (up to 255 chars)");var queue_len=Buffer.byteLength(val,"utf8");if(varyingSize+=queue_len,void 0===(val=fields.exchange))throw new Error("Missing value for mandatory field 'exchange'");if(!("string"==typeof val&&Buffer.byteLength(val)<256))throw new TypeError("Field 'exchange' is the wrong type; must be a string (up to 255 chars)");var exchange_len=Buffer.byteLength(val,"utf8");if(varyingSize+=exchange_len,void 0===(val=fields.routingKey))val="";else if(!("string"==typeof val&&Buffer.byteLength(val)<256))throw new TypeError("Field 'routingKey' is the wrong type; must be a string (up to 255 chars)");var routingKey_len=Buffer.byteLength(val,"utf8");if(varyingSize+=routingKey_len,void 0===(val=fields.arguments))val={};else if("object"!=typeof val)throw new TypeError("Field 'arguments' is the wrong type; must be an object");len=encodeTable(SCRATCH,val,scratchOffset);var arguments_encoded=SCRATCH.slice(scratchOffset,scratchOffset+len);scratchOffset+=len,varyingSize+=arguments_encoded.length;var buffer=Buffer.alloc(18+varyingSize);if(buffer[0]=1,buffer.writeUInt16BE(channel,1),buffer.writeUInt32BE(3276820,7),offset=11,void 0===(val=fields.ticket))val=0;else if("number"!=typeof val||isNaN(val))throw new TypeError("Field 'ticket' is the wrong type; must be a number (but not NaN)");return buffer.writeUInt16BE(val,offset),offset+=2,void 0===(val=fields.queue)&&(val=""),buffer[offset]=queue_len,offset++,buffer.write(val,offset,"utf8"),offset+=queue_len,void 0===(val=fields.exchange)&&(val=void 0),buffer[offset]=exchange_len,offset++,buffer.write(val,offset,"utf8"),offset+=exchange_len,void 0===(val=fields.routingKey)&&(val=""),buffer[offset]=routingKey_len,offset++,buffer.write(val,offset,"utf8"),offset+=routingKey_len,void 0===(val=fields.nowait)&&(val=!1),val&&(bits+=1),buffer[offset]=bits,offset++,bits=0,buffer[offset+=arguments_encoded.copy(buffer,offset)]=206,buffer.writeUInt32BE(offset-7,3),buffer}(channel,fields);case 3276821:return function(channel,fields){var buffer=Buffer.alloc(12);return buffer[0]=1,buffer.writeUInt16BE(channel,1),buffer.writeUInt32BE(3276821,7),buffer[11]=206,buffer.writeUInt32BE(4,3),buffer}(channel);case 3276830:return function(channel,fields){var offset=0,val=null,bits=0,varyingSize=0;if(void 0===(val=fields.queue))val="";else if(!("string"==typeof val&&Buffer.byteLength(val)<256))throw new TypeError("Field 'queue' is the wrong type; must be a string (up to 255 chars)");var queue_len=Buffer.byteLength(val,"utf8");varyingSize+=queue_len;var buffer=Buffer.alloc(16+varyingSize);if(buffer[0]=1,buffer.writeUInt16BE(channel,1),buffer.writeUInt32BE(3276830,7),offset=11,void 0===(val=fields.ticket))val=0;else if("number"!=typeof val||isNaN(val))throw new TypeError("Field 'ticket' is the wrong type; must be a number (but not NaN)");return buffer.writeUInt16BE(val,offset),offset+=2,void 0===(val=fields.queue)&&(val=""),buffer[offset]=queue_len,offset++,buffer.write(val,offset,"utf8"),offset+=queue_len,void 0===(val=fields.nowait)&&(val=!1),val&&(bits+=1),buffer[offset]=bits,buffer[++offset]=206,buffer.writeUInt32BE(offset-7,3),buffer}(channel,fields);case 3276831:return function(channel,fields){var val,offset=0,buffer=Buffer.alloc(16);if(buffer[0]=1,buffer.writeUInt16BE(channel,1),buffer.writeUInt32BE(3276831,7),offset=11,void 0===(val=fields.messageCount))throw new Error("Missing value for mandatory field 'messageCount'");if("number"!=typeof val||isNaN(val))throw new TypeError("Field 'messageCount' is the wrong type; must be a number (but not NaN)");return buffer.writeUInt32BE(val,offset),buffer[offset+=4]=206,buffer.writeUInt32BE(offset-7,3),buffer}(channel,fields);case 3276840:return function(channel,fields){var offset=0,val=null,bits=0,varyingSize=0;if(void 0===(val=fields.queue))val="";else if(!("string"==typeof val&&Buffer.byteLength(val)<256))throw new TypeError("Field 'queue' is the wrong type; must be a string (up to 255 chars)");var queue_len=Buffer.byteLength(val,"utf8");varyingSize+=queue_len;var buffer=Buffer.alloc(16+varyingSize);if(buffer[0]=1,buffer.writeUInt16BE(channel,1),buffer.writeUInt32BE(3276840,7),offset=11,void 0===(val=fields.ticket))val=0;else if("number"!=typeof val||isNaN(val))throw new TypeError("Field 'ticket' is the wrong type; must be a number (but not NaN)");return buffer.writeUInt16BE(val,offset),offset+=2,void 0===(val=fields.queue)&&(val=""),buffer[offset]=queue_len,offset++,buffer.write(val,offset,"utf8"),offset+=queue_len,void 0===(val=fields.ifUnused)&&(val=!1),val&&(bits+=1),void 0===(val=fields.ifEmpty)&&(val=!1),val&&(bits+=2),void 0===(val=fields.nowait)&&(val=!1),val&&(bits+=4),buffer[offset]=bits,buffer[++offset]=206,buffer.writeUInt32BE(offset-7,3),buffer}(channel,fields);case 3276841:return function(channel,fields){var val,offset=0,buffer=Buffer.alloc(16);if(buffer[0]=1,buffer.writeUInt16BE(channel,1),buffer.writeUInt32BE(3276841,7),offset=11,void 0===(val=fields.messageCount))throw new Error("Missing value for mandatory field 'messageCount'");if("number"!=typeof val||isNaN(val))throw new TypeError("Field 'messageCount' is the wrong type; must be a number (but not NaN)");return buffer.writeUInt32BE(val,offset),buffer[offset+=4]=206,buffer.writeUInt32BE(offset-7,3),buffer}(channel,fields);case 3276850:return function(channel,fields){var len,offset=0,val=null,varyingSize=0,scratchOffset=0;if(void 0===(val=fields.queue))val="";else if(!("string"==typeof val&&Buffer.byteLength(val)<256))throw new TypeError("Field 'queue' is the wrong type; must be a string (up to 255 chars)");var queue_len=Buffer.byteLength(val,"utf8");if(varyingSize+=queue_len,void 0===(val=fields.exchange))throw new Error("Missing value for mandatory field 'exchange'");if(!("string"==typeof val&&Buffer.byteLength(val)<256))throw new TypeError("Field 'exchange' is the wrong type; must be a string (up to 255 chars)");var exchange_len=Buffer.byteLength(val,"utf8");if(varyingSize+=exchange_len,void 0===(val=fields.routingKey))val="";else if(!("string"==typeof val&&Buffer.byteLength(val)<256))throw new TypeError("Field 'routingKey' is the wrong type; must be a string (up to 255 chars)");var routingKey_len=Buffer.byteLength(val,"utf8");if(varyingSize+=routingKey_len,void 0===(val=fields.arguments))val={};else if("object"!=typeof val)throw new TypeError("Field 'arguments' is the wrong type; must be an object");len=encodeTable(SCRATCH,val,scratchOffset);var arguments_encoded=SCRATCH.slice(scratchOffset,scratchOffset+len);scratchOffset+=len,varyingSize+=arguments_encoded.length;var buffer=Buffer.alloc(17+varyingSize);if(buffer[0]=1,buffer.writeUInt16BE(channel,1),buffer.writeUInt32BE(3276850,7),offset=11,void 0===(val=fields.ticket))val=0;else if("number"!=typeof val||isNaN(val))throw new TypeError("Field 'ticket' is the wrong type; must be a number (but not NaN)");return buffer.writeUInt16BE(val,offset),offset+=2,void 0===(val=fields.queue)&&(val=""),buffer[offset]=queue_len,offset++,buffer.write(val,offset,"utf8"),offset+=queue_len,void 0===(val=fields.exchange)&&(val=void 0),buffer[offset]=exchange_len,offset++,buffer.write(val,offset,"utf8"),offset+=exchange_len,void 0===(val=fields.routingKey)&&(val=""),buffer[offset]=routingKey_len,offset++,buffer.write(val,offset,"utf8"),offset+=routingKey_len,buffer[offset+=arguments_encoded.copy(buffer,offset)]=206,buffer.writeUInt32BE(offset-7,3),buffer}(channel,fields);case 3276851:return function(channel,fields){var buffer=Buffer.alloc(12);return buffer[0]=1,buffer.writeUInt16BE(channel,1),buffer.writeUInt32BE(3276851,7),buffer[11]=206,buffer.writeUInt32BE(4,3),buffer}(channel);case 3932170:return function(channel,fields){var offset=0,val=null,bits=0,buffer=Buffer.alloc(19);if(buffer[0]=1,buffer.writeUInt16BE(channel,1),buffer.writeUInt32BE(3932170,7),offset=11,void 0===(val=fields.prefetchSize))val=0;else if("number"!=typeof val||isNaN(val))throw new TypeError("Field 'prefetchSize' is the wrong type; must be a number (but not NaN)");if(buffer.writeUInt32BE(val,offset),offset+=4,void 0===(val=fields.prefetchCount))val=0;else if("number"!=typeof val||isNaN(val))throw new TypeError("Field 'prefetchCount' is the wrong type; must be a number (but not NaN)");return buffer.writeUInt16BE(val,offset),offset+=2,void 0===(val=fields.global)&&(val=!1),val&&(bits+=1),buffer[offset]=bits,buffer[++offset]=206,buffer.writeUInt32BE(offset-7,3),buffer}(channel,fields);case 3932171:return function(channel,fields){var buffer=Buffer.alloc(12);return buffer[0]=1,buffer.writeUInt16BE(channel,1),buffer.writeUInt32BE(3932171,7),buffer[11]=206,buffer.writeUInt32BE(4,3),buffer}(channel);case 3932180:return function(channel,fields){var len,offset=0,val=null,bits=0,varyingSize=0,scratchOffset=0;if(void 0===(val=fields.queue))val="";else if(!("string"==typeof val&&Buffer.byteLength(val)<256))throw new TypeError("Field 'queue' is the wrong type; must be a string (up to 255 chars)");var queue_len=Buffer.byteLength(val,"utf8");if(varyingSize+=queue_len,void 0===(val=fields.consumerTag))val="";else if(!("string"==typeof val&&Buffer.byteLength(val)<256))throw new TypeError("Field 'consumerTag' is the wrong type; must be a string (up to 255 chars)");var consumerTag_len=Buffer.byteLength(val,"utf8");if(varyingSize+=consumerTag_len,void 0===(val=fields.arguments))val={};else if("object"!=typeof val)throw new TypeError("Field 'arguments' is the wrong type; must be an object");len=encodeTable(SCRATCH,val,scratchOffset);var arguments_encoded=SCRATCH.slice(scratchOffset,scratchOffset+len);scratchOffset+=len,varyingSize+=arguments_encoded.length;var buffer=Buffer.alloc(17+varyingSize);if(buffer[0]=1,buffer.writeUInt16BE(channel,1),buffer.writeUInt32BE(3932180,7),offset=11,void 0===(val=fields.ticket))val=0;else if("number"!=typeof val||isNaN(val))throw new TypeError("Field 'ticket' is the wrong type; must be a number (but not NaN)");return buffer.writeUInt16BE(val,offset),offset+=2,void 0===(val=fields.queue)&&(val=""),buffer[offset]=queue_len,offset++,buffer.write(val,offset,"utf8"),offset+=queue_len,void 0===(val=fields.consumerTag)&&(val=""),buffer[offset]=consumerTag_len,offset++,buffer.write(val,offset,"utf8"),offset+=consumerTag_len,void 0===(val=fields.noLocal)&&(val=!1),val&&(bits+=1),void 0===(val=fields.noAck)&&(val=!1),val&&(bits+=2),void 0===(val=fields.exclusive)&&(val=!1),val&&(bits+=4),void 0===(val=fields.nowait)&&(val=!1),val&&(bits+=8),buffer[offset]=bits,offset++,bits=0,buffer[offset+=arguments_encoded.copy(buffer,offset)]=206,buffer.writeUInt32BE(offset-7,3),buffer}(channel,fields);case 3932181:return function(channel,fields){var offset=0,val=null,varyingSize=0;if(void 0===(val=fields.consumerTag))throw new Error("Missing value for mandatory field 'consumerTag'");if(!("string"==typeof val&&Buffer.byteLength(val)<256))throw new TypeError("Field 'consumerTag' is the wrong type; must be a string (up to 255 chars)");var consumerTag_len=Buffer.byteLength(val,"utf8");varyingSize+=consumerTag_len;var buffer=Buffer.alloc(13+varyingSize);return buffer[0]=1,buffer.writeUInt16BE(channel,1),buffer.writeUInt32BE(3932181,7),offset=11,void 0===(val=fields.consumerTag)&&(val=void 0),buffer[offset]=consumerTag_len,offset++,buffer.write(val,offset,"utf8"),buffer[offset+=consumerTag_len]=206,buffer.writeUInt32BE(offset-7,3),buffer}(channel,fields);case 3932190:return function(channel,fields){var offset=0,val=null,bits=0,varyingSize=0;if(void 0===(val=fields.consumerTag))throw new Error("Missing value for mandatory field 'consumerTag'");if(!("string"==typeof val&&Buffer.byteLength(val)<256))throw new TypeError("Field 'consumerTag' is the wrong type; must be a string (up to 255 chars)");var consumerTag_len=Buffer.byteLength(val,"utf8");varyingSize+=consumerTag_len;var buffer=Buffer.alloc(14+varyingSize);return buffer[0]=1,buffer.writeUInt16BE(channel,1),buffer.writeUInt32BE(3932190,7),offset=11,void 0===(val=fields.consumerTag)&&(val=void 0),buffer[offset]=consumerTag_len,offset++,buffer.write(val,offset,"utf8"),offset+=consumerTag_len,void 0===(val=fields.nowait)&&(val=!1),val&&(bits+=1),buffer[offset]=bits,buffer[++offset]=206,buffer.writeUInt32BE(offset-7,3),buffer}(channel,fields);case 3932191:return function(channel,fields){var offset=0,val=null,varyingSize=0;if(void 0===(val=fields.consumerTag))throw new Error("Missing value for mandatory field 'consumerTag'");if(!("string"==typeof val&&Buffer.byteLength(val)<256))throw new TypeError("Field 'consumerTag' is the wrong type; must be a string (up to 255 chars)");var consumerTag_len=Buffer.byteLength(val,"utf8");varyingSize+=consumerTag_len;var buffer=Buffer.alloc(13+varyingSize);return buffer[0]=1,buffer.writeUInt16BE(channel,1),buffer.writeUInt32BE(3932191,7),offset=11,void 0===(val=fields.consumerTag)&&(val=void 0),buffer[offset]=consumerTag_len,offset++,buffer.write(val,offset,"utf8"),buffer[offset+=consumerTag_len]=206,buffer.writeUInt32BE(offset-7,3),buffer}(channel,fields);case 3932200:return function(channel,fields){var offset=0,val=null,bits=0,varyingSize=0;if(void 0===(val=fields.exchange))val="";else if(!("string"==typeof val&&Buffer.byteLength(val)<256))throw new TypeError("Field 'exchange' is the wrong type; must be a string (up to 255 chars)");var exchange_len=Buffer.byteLength(val,"utf8");if(varyingSize+=exchange_len,void 0===(val=fields.routingKey))val="";else if(!("string"==typeof val&&Buffer.byteLength(val)<256))throw new TypeError("Field 'routingKey' is the wrong type; must be a string (up to 255 chars)");var routingKey_len=Buffer.byteLength(val,"utf8");varyingSize+=routingKey_len;var buffer=Buffer.alloc(17+varyingSize);if(buffer[0]=1,buffer.writeUInt16BE(channel,1),buffer.writeUInt32BE(3932200,7),offset=11,void 0===(val=fields.ticket))val=0;else if("number"!=typeof val||isNaN(val))throw new TypeError("Field 'ticket' is the wrong type; must be a number (but not NaN)");return buffer.writeUInt16BE(val,offset),offset+=2,void 0===(val=fields.exchange)&&(val=""),buffer[offset]=exchange_len,offset++,buffer.write(val,offset,"utf8"),offset+=exchange_len,void 0===(val=fields.routingKey)&&(val=""),buffer[offset]=routingKey_len,offset++,buffer.write(val,offset,"utf8"),offset+=routingKey_len,void 0===(val=fields.mandatory)&&(val=!1),val&&(bits+=1),void 0===(val=fields.immediate)&&(val=!1),val&&(bits+=2),buffer[offset]=bits,buffer[++offset]=206,buffer.writeUInt32BE(offset-7,3),buffer}(channel,fields);case 3932210:return function(channel,fields){var offset=0,val=null,varyingSize=0;if(void 0===(val=fields.replyText))val="";else if(!("string"==typeof val&&Buffer.byteLength(val)<256))throw new TypeError("Field 'replyText' is the wrong type; must be a string (up to 255 chars)");var replyText_len=Buffer.byteLength(val,"utf8");if(varyingSize+=replyText_len,void 0===(val=fields.exchange))throw new Error("Missing value for mandatory field 'exchange'");if(!("string"==typeof val&&Buffer.byteLength(val)<256))throw new TypeError("Field 'exchange' is the wrong type; must be a string (up to 255 chars)");var exchange_len=Buffer.byteLength(val,"utf8");if(varyingSize+=exchange_len,void 0===(val=fields.routingKey))throw new Error("Missing value for mandatory field 'routingKey'");if(!("string"==typeof val&&Buffer.byteLength(val)<256))throw new TypeError("Field 'routingKey' is the wrong type; must be a string (up to 255 chars)");var routingKey_len=Buffer.byteLength(val,"utf8");varyingSize+=routingKey_len;var buffer=Buffer.alloc(17+varyingSize);if(buffer[0]=1,buffer.writeUInt16BE(channel,1),buffer.writeUInt32BE(3932210,7),offset=11,void 0===(val=fields.replyCode))throw new Error("Missing value for mandatory field 'replyCode'");if("number"!=typeof val||isNaN(val))throw new TypeError("Field 'replyCode' is the wrong type; must be a number (but not NaN)");return buffer.writeUInt16BE(val,offset),offset+=2,void 0===(val=fields.replyText)&&(val=""),buffer[offset]=replyText_len,offset++,buffer.write(val,offset,"utf8"),offset+=replyText_len,void 0===(val=fields.exchange)&&(val=void 0),buffer[offset]=exchange_len,offset++,buffer.write(val,offset,"utf8"),offset+=exchange_len,void 0===(val=fields.routingKey)&&(val=void 0),buffer[offset]=routingKey_len,offset++,buffer.write(val,offset,"utf8"),buffer[offset+=routingKey_len]=206,buffer.writeUInt32BE(offset-7,3),buffer}(channel,fields);case 3932220:return function(channel,fields){var offset=0,val=null,bits=0,varyingSize=0;if(void 0===(val=fields.consumerTag))throw new Error("Missing value for mandatory field 'consumerTag'");if(!("string"==typeof val&&Buffer.byteLength(val)<256))throw new TypeError("Field 'consumerTag' is the wrong type; must be a string (up to 255 chars)");var consumerTag_len=Buffer.byteLength(val,"utf8");if(varyingSize+=consumerTag_len,void 0===(val=fields.exchange))throw new Error("Missing value for mandatory field 'exchange'");if(!("string"==typeof val&&Buffer.byteLength(val)<256))throw new TypeError("Field 'exchange' is the wrong type; must be a string (up to 255 chars)");var exchange_len=Buffer.byteLength(val,"utf8");if(varyingSize+=exchange_len,void 0===(val=fields.routingKey))throw new Error("Missing value for mandatory field 'routingKey'");if(!("string"==typeof val&&Buffer.byteLength(val)<256))throw new TypeError("Field 'routingKey' is the wrong type; must be a string (up to 255 chars)");var routingKey_len=Buffer.byteLength(val,"utf8");varyingSize+=routingKey_len;var buffer=Buffer.alloc(24+varyingSize);if(buffer[0]=1,buffer.writeUInt16BE(channel,1),buffer.writeUInt32BE(3932220,7),offset=11,void 0===(val=fields.consumerTag)&&(val=void 0),buffer[offset]=consumerTag_len,offset++,buffer.write(val,offset,"utf8"),offset+=consumerTag_len,void 0===(val=fields.deliveryTag))throw new Error("Missing value for mandatory field 'deliveryTag'");if("number"!=typeof val||isNaN(val))throw new TypeError("Field 'deliveryTag' is the wrong type; must be a number (but not NaN)");return ints.writeUInt64BE(buffer,val,offset),offset+=8,void 0===(val=fields.redelivered)&&(val=!1),val&&(bits+=1),buffer[offset]=bits,offset++,bits=0,void 0===(val=fields.exchange)&&(val=void 0),buffer[offset]=exchange_len,offset++,buffer.write(val,offset,"utf8"),offset+=exchange_len,void 0===(val=fields.routingKey)&&(val=void 0),buffer[offset]=routingKey_len,offset++,buffer.write(val,offset,"utf8"),buffer[offset+=routingKey_len]=206,buffer.writeUInt32BE(offset-7,3),buffer}(channel,fields);case 3932230:return function(channel,fields){var offset=0,val=null,bits=0,varyingSize=0;if(void 0===(val=fields.queue))val="";else if(!("string"==typeof val&&Buffer.byteLength(val)<256))throw new TypeError("Field 'queue' is the wrong type; must be a string (up to 255 chars)");var queue_len=Buffer.byteLength(val,"utf8");varyingSize+=queue_len;var buffer=Buffer.alloc(16+varyingSize);if(buffer[0]=1,buffer.writeUInt16BE(channel,1),buffer.writeUInt32BE(3932230,7),offset=11,void 0===(val=fields.ticket))val=0;else if("number"!=typeof val||isNaN(val))throw new TypeError("Field 'ticket' is the wrong type; must be a number (but not NaN)");return buffer.writeUInt16BE(val,offset),offset+=2,void 0===(val=fields.queue)&&(val=""),buffer[offset]=queue_len,offset++,buffer.write(val,offset,"utf8"),offset+=queue_len,void 0===(val=fields.noAck)&&(val=!1),val&&(bits+=1),buffer[offset]=bits,buffer[++offset]=206,buffer.writeUInt32BE(offset-7,3),buffer}(channel,fields);case 3932231:return function(channel,fields){var offset=0,val=null,bits=0,varyingSize=0;if(void 0===(val=fields.exchange))throw new Error("Missing value for mandatory field 'exchange'");if(!("string"==typeof val&&Buffer.byteLength(val)<256))throw new TypeError("Field 'exchange' is the wrong type; must be a string (up to 255 chars)");var exchange_len=Buffer.byteLength(val,"utf8");if(varyingSize+=exchange_len,void 0===(val=fields.routingKey))throw new Error("Missing value for mandatory field 'routingKey'");if(!("string"==typeof val&&Buffer.byteLength(val)<256))throw new TypeError("Field 'routingKey' is the wrong type; must be a string (up to 255 chars)");var routingKey_len=Buffer.byteLength(val,"utf8");varyingSize+=routingKey_len;var buffer=Buffer.alloc(27+varyingSize);if(buffer[0]=1,buffer.writeUInt16BE(channel,1),buffer.writeUInt32BE(3932231,7),offset=11,void 0===(val=fields.deliveryTag))throw new Error("Missing value for mandatory field 'deliveryTag'");if("number"!=typeof val||isNaN(val))throw new TypeError("Field 'deliveryTag' is the wrong type; must be a number (but not NaN)");if(ints.writeUInt64BE(buffer,val,offset),offset+=8,void 0===(val=fields.redelivered)&&(val=!1),val&&(bits+=1),buffer[offset]=bits,offset++,bits=0,void 0===(val=fields.exchange)&&(val=void 0),buffer[offset]=exchange_len,offset++,buffer.write(val,offset,"utf8"),offset+=exchange_len,void 0===(val=fields.routingKey)&&(val=void 0),buffer[offset]=routingKey_len,offset++,buffer.write(val,offset,"utf8"),offset+=routingKey_len,void 0===(val=fields.messageCount))throw new Error("Missing value for mandatory field 'messageCount'");if("number"!=typeof val||isNaN(val))throw new TypeError("Field 'messageCount' is the wrong type; must be a number (but not NaN)");return buffer.writeUInt32BE(val,offset),buffer[offset+=4]=206,buffer.writeUInt32BE(offset-7,3),buffer}(channel,fields);case 3932232:return function(channel,fields){var offset=0,val=null,varyingSize=0;if(void 0===(val=fields.clusterId))val="";else if(!("string"==typeof val&&Buffer.byteLength(val)<256))throw new TypeError("Field 'clusterId' is the wrong type; must be a string (up to 255 chars)");var clusterId_len=Buffer.byteLength(val,"utf8");varyingSize+=clusterId_len;var buffer=Buffer.alloc(13+varyingSize);return buffer[0]=1,buffer.writeUInt16BE(channel,1),buffer.writeUInt32BE(3932232,7),offset=11,void 0===(val=fields.clusterId)&&(val=""),buffer[offset]=clusterId_len,offset++,buffer.write(val,offset,"utf8"),buffer[offset+=clusterId_len]=206,buffer.writeUInt32BE(offset-7,3),buffer}(channel,fields);case 3932240:return function(channel,fields){var offset=0,val=null,bits=0,buffer=Buffer.alloc(21);if(buffer[0]=1,buffer.writeUInt16BE(channel,1),buffer.writeUInt32BE(3932240,7),offset=11,void 0===(val=fields.deliveryTag))val=0;else if("number"!=typeof val||isNaN(val))throw new TypeError("Field 'deliveryTag' is the wrong type; must be a number (but not NaN)");return ints.writeUInt64BE(buffer,val,offset),offset+=8,void 0===(val=fields.multiple)&&(val=!1),val&&(bits+=1),buffer[offset]=bits,buffer[++offset]=206,buffer.writeUInt32BE(offset-7,3),buffer}(channel,fields);case 3932250:return function(channel,fields){var offset=0,val=null,bits=0,buffer=Buffer.alloc(21);if(buffer[0]=1,buffer.writeUInt16BE(channel,1),buffer.writeUInt32BE(3932250,7),offset=11,void 0===(val=fields.deliveryTag))throw new Error("Missing value for mandatory field 'deliveryTag'");if("number"!=typeof val||isNaN(val))throw new TypeError("Field 'deliveryTag' is the wrong type; must be a number (but not NaN)");return ints.writeUInt64BE(buffer,val,offset),offset+=8,void 0===(val=fields.requeue)&&(val=!0),val&&(bits+=1),buffer[offset]=bits,buffer[++offset]=206,buffer.writeUInt32BE(offset-7,3),buffer}(channel,fields);case 3932260:return function(channel,fields){var offset=0,val=null,bits=0,buffer=Buffer.alloc(13);return buffer[0]=1,buffer.writeUInt16BE(channel,1),buffer.writeUInt32BE(3932260,7),offset=11,void 0===(val=fields.requeue)&&(val=!1),val&&(bits+=1),buffer[offset]=bits,buffer[++offset]=206,buffer.writeUInt32BE(offset-7,3),buffer}(channel,fields);case 3932270:return function(channel,fields){var offset=0,val=null,bits=0,buffer=Buffer.alloc(13);return buffer[0]=1,buffer.writeUInt16BE(channel,1),buffer.writeUInt32BE(3932270,7),offset=11,void 0===(val=fields.requeue)&&(val=!1),val&&(bits+=1),buffer[offset]=bits,buffer[++offset]=206,buffer.writeUInt32BE(offset-7,3),buffer}(channel,fields);case 3932271:return function(channel,fields){var buffer=Buffer.alloc(12);return buffer[0]=1,buffer.writeUInt16BE(channel,1),buffer.writeUInt32BE(3932271,7),buffer[11]=206,buffer.writeUInt32BE(4,3),buffer}(channel);case 3932280:return function(channel,fields){var offset=0,val=null,bits=0,buffer=Buffer.alloc(21);if(buffer[0]=1,buffer.writeUInt16BE(channel,1),buffer.writeUInt32BE(3932280,7),offset=11,void 0===(val=fields.deliveryTag))val=0;else if("number"!=typeof val||isNaN(val))throw new TypeError("Field 'deliveryTag' is the wrong type; must be a number (but not NaN)");return ints.writeUInt64BE(buffer,val,offset),offset+=8,void 0===(val=fields.multiple)&&(val=!1),val&&(bits+=1),void 0===(val=fields.requeue)&&(val=!0),val&&(bits+=2),buffer[offset]=bits,buffer[++offset]=206,buffer.writeUInt32BE(offset-7,3),buffer}(channel,fields);case 5898250:return function(channel,fields){var buffer=Buffer.alloc(12);return buffer[0]=1,buffer.writeUInt16BE(channel,1),buffer.writeUInt32BE(5898250,7),buffer[11]=206,buffer.writeUInt32BE(4,3),buffer}(channel);case 5898251:return function(channel,fields){var buffer=Buffer.alloc(12);return buffer[0]=1,buffer.writeUInt16BE(channel,1),buffer.writeUInt32BE(5898251,7),buffer[11]=206,buffer.writeUInt32BE(4,3),buffer}(channel);case 5898260:return function(channel,fields){var buffer=Buffer.alloc(12);return buffer[0]=1,buffer.writeUInt16BE(channel,1),buffer.writeUInt32BE(5898260,7),buffer[11]=206,buffer.writeUInt32BE(4,3),buffer}(channel);case 5898261:return function(channel,fields){var buffer=Buffer.alloc(12);return buffer[0]=1,buffer.writeUInt16BE(channel,1),buffer.writeUInt32BE(5898261,7),buffer[11]=206,buffer.writeUInt32BE(4,3),buffer}(channel);case 5898270:return function(channel,fields){var buffer=Buffer.alloc(12);return buffer[0]=1,buffer.writeUInt16BE(channel,1),buffer.writeUInt32BE(5898270,7),buffer[11]=206,buffer.writeUInt32BE(4,3),buffer}(channel);case 5898271:return function(channel,fields){var buffer=Buffer.alloc(12);return buffer[0]=1,buffer.writeUInt16BE(channel,1),buffer.writeUInt32BE(5898271,7),buffer[11]=206,buffer.writeUInt32BE(4,3),buffer}(channel);case 5570570:return function(channel,fields){var offset=0,val=null,bits=0,buffer=Buffer.alloc(13);return buffer[0]=1,buffer.writeUInt16BE(channel,1),buffer.writeUInt32BE(5570570,7),offset=11,void 0===(val=fields.nowait)&&(val=!1),val&&(bits+=1),buffer[offset]=bits,buffer[++offset]=206,buffer.writeUInt32BE(offset-7,3),buffer}(channel,fields);case 5570571:return function(channel,fields){var buffer=Buffer.alloc(12);return buffer[0]=1,buffer.writeUInt16BE(channel,1),buffer.writeUInt32BE(5570571,7),buffer[11]=206,buffer.writeUInt32BE(4,3),buffer}(channel);default:throw new Error("Unknown class/method ID")}},module.exports.encodeProperties=function(id,channel,size,fields){switch(id){case 60:return function(channel,size,fields){var val,len,offset=0,flags=0,scratchOffset=0,varyingSize=0;if(null!=(val=fields.contentType)){if(!("string"==typeof val&&Buffer.byteLength(val)<256))throw new TypeError("Field 'contentType' is the wrong type; must be a string (up to 255 chars)");var contentType_len=Buffer.byteLength(val,"utf8");varyingSize+=1,varyingSize+=contentType_len}if(null!=(val=fields.contentEncoding)){if(!("string"==typeof val&&Buffer.byteLength(val)<256))throw new TypeError("Field 'contentEncoding' is the wrong type; must be a string (up to 255 chars)");var contentEncoding_len=Buffer.byteLength(val,"utf8");varyingSize+=1,varyingSize+=contentEncoding_len}if(null!=(val=fields.headers)){if("object"!=typeof val)throw new TypeError("Field 'headers' is the wrong type; must be an object");len=encodeTable(SCRATCH,val,scratchOffset);var headers_encoded=SCRATCH.slice(scratchOffset,scratchOffset+len);scratchOffset+=len,varyingSize+=headers_encoded.length}if(null!=(val=fields.deliveryMode)){if("number"!=typeof val||isNaN(val))throw new TypeError("Field 'deliveryMode' is the wrong type; must be a number (but not NaN)");varyingSize+=1}if(null!=(val=fields.priority)){if("number"!=typeof val||isNaN(val))throw new TypeError("Field 'priority' is the wrong type; must be a number (but not NaN)");varyingSize+=1}if(null!=(val=fields.correlationId)){if(!("string"==typeof val&&Buffer.byteLength(val)<256))throw new TypeError("Field 'correlationId' is the wrong type; must be a string (up to 255 chars)");var correlationId_len=Buffer.byteLength(val,"utf8");varyingSize+=1,varyingSize+=correlationId_len}if(null!=(val=fields.replyTo)){if(!("string"==typeof val&&Buffer.byteLength(val)<256))throw new TypeError("Field 'replyTo' is the wrong type; must be a string (up to 255 chars)");var replyTo_len=Buffer.byteLength(val,"utf8");varyingSize+=1,varyingSize+=replyTo_len}if(null!=(val=fields.expiration)){if(!("string"==typeof val&&Buffer.byteLength(val)<256))throw new TypeError("Field 'expiration' is the wrong type; must be a string (up to 255 chars)");var expiration_len=Buffer.byteLength(val,"utf8");varyingSize+=1,varyingSize+=expiration_len}if(null!=(val=fields.messageId)){if(!("string"==typeof val&&Buffer.byteLength(val)<256))throw new TypeError("Field 'messageId' is the wrong type; must be a string (up to 255 chars)");var messageId_len=Buffer.byteLength(val,"utf8");varyingSize+=1,varyingSize+=messageId_len}if(null!=(val=fields.timestamp)){if("number"!=typeof val||isNaN(val))throw new TypeError("Field 'timestamp' is the wrong type; must be a number (but not NaN)");varyingSize+=8}if(null!=(val=fields.type)){if(!("string"==typeof val&&Buffer.byteLength(val)<256))throw new TypeError("Field 'type' is the wrong type; must be a string (up to 255 chars)");var type_len=Buffer.byteLength(val,"utf8");varyingSize+=1,varyingSize+=type_len}if(null!=(val=fields.userId)){if(!("string"==typeof val&&Buffer.byteLength(val)<256))throw new TypeError("Field 'userId' is the wrong type; must be a string (up to 255 chars)");var userId_len=Buffer.byteLength(val,"utf8");varyingSize+=1,varyingSize+=userId_len}if(null!=(val=fields.appId)){if(!("string"==typeof val&&Buffer.byteLength(val)<256))throw new TypeError("Field 'appId' is the wrong type; must be a string (up to 255 chars)");var appId_len=Buffer.byteLength(val,"utf8");varyingSize+=1,varyingSize+=appId_len}if(null!=(val=fields.clusterId)){if(!("string"==typeof val&&Buffer.byteLength(val)<256))throw new TypeError("Field 'clusterId' is the wrong type; must be a string (up to 255 chars)");var clusterId_len=Buffer.byteLength(val,"utf8");varyingSize+=1,varyingSize+=clusterId_len}var buffer=Buffer.alloc(22+varyingSize);return buffer[0]=2,buffer.writeUInt16BE(channel,1),buffer.writeUInt32BE(3932160,7),ints.writeUInt64BE(buffer,size,11),flags=0,offset=21,null!=(val=fields.contentType)&&(flags+=32768,buffer[offset]=contentType_len,offset++,buffer.write(val,offset,"utf8"),offset+=contentType_len),null!=(val=fields.contentEncoding)&&(flags+=16384,buffer[offset]=contentEncoding_len,offset++,buffer.write(val,offset,"utf8"),offset+=contentEncoding_len),null!=(val=fields.headers)&&(flags+=8192,offset+=headers_encoded.copy(buffer,offset)),null!=(val=fields.deliveryMode)&&(flags+=4096,buffer.writeUInt8(val,offset),offset++),null!=(val=fields.priority)&&(flags+=2048,buffer.writeUInt8(val,offset),offset++),null!=(val=fields.correlationId)&&(flags+=1024,buffer[offset]=correlationId_len,offset++,buffer.write(val,offset,"utf8"),offset+=correlationId_len),null!=(val=fields.replyTo)&&(flags+=512,buffer[offset]=replyTo_len,offset++,buffer.write(val,offset,"utf8"),offset+=replyTo_len),null!=(val=fields.expiration)&&(flags+=256,buffer[offset]=expiration_len,offset++,buffer.write(val,offset,"utf8"),offset+=expiration_len),null!=(val=fields.messageId)&&(flags+=128,buffer[offset]=messageId_len,offset++,buffer.write(val,offset,"utf8"),offset+=messageId_len),null!=(val=fields.timestamp)&&(flags+=64,ints.writeUInt64BE(buffer,val,offset),offset+=8),null!=(val=fields.type)&&(flags+=32,buffer[offset]=type_len,offset++,buffer.write(val,offset,"utf8"),offset+=type_len),null!=(val=fields.userId)&&(flags+=16,buffer[offset]=userId_len,offset++,buffer.write(val,offset,"utf8"),offset+=userId_len),null!=(val=fields.appId)&&(flags+=8,buffer[offset]=appId_len,offset++,buffer.write(val,offset,"utf8"),offset+=appId_len),null!=(val=fields.clusterId)&&(flags+=4,buffer[offset]=clusterId_len,offset++,buffer.write(val,offset,"utf8"),offset+=clusterId_len),buffer[offset]=206,buffer.writeUInt32BE(offset-7,3),buffer.writeUInt16BE(flags,19),buffer.slice(0,offset+1)}(channel,size,fields);default:throw new Error("Unknown class/properties ID")}},module.exports.info=function(id){switch(id){case 655370:return methodInfoConnectionStart;case 655371:return methodInfoConnectionStartOk;case 655380:return methodInfoConnectionSecure;case 655381:return methodInfoConnectionSecureOk;case 655390:return methodInfoConnectionTune;case 655391:return methodInfoConnectionTuneOk;case 655400:return methodInfoConnectionOpen;case 655401:return methodInfoConnectionOpenOk;case 655410:return methodInfoConnectionClose;case 655411:return methodInfoConnectionCloseOk;case 655420:return methodInfoConnectionBlocked;case 655421:return methodInfoConnectionUnblocked;case 1310730:return methodInfoChannelOpen;case 1310731:return methodInfoChannelOpenOk;case 1310740:return methodInfoChannelFlow;case 1310741:return methodInfoChannelFlowOk;case 1310760:return methodInfoChannelClose;case 1310761:return methodInfoChannelCloseOk;case 1966090:return methodInfoAccessRequest;case 1966091:return methodInfoAccessRequestOk;case 2621450:return methodInfoExchangeDeclare;case 2621451:return methodInfoExchangeDeclareOk;case 2621460:return methodInfoExchangeDelete;case 2621461:return methodInfoExchangeDeleteOk;case 2621470:return methodInfoExchangeBind;case 2621471:return methodInfoExchangeBindOk;case 2621480:return methodInfoExchangeUnbind;case 2621491:return methodInfoExchangeUnbindOk;case 3276810:return methodInfoQueueDeclare;case 3276811:return methodInfoQueueDeclareOk;case 3276820:return methodInfoQueueBind;case 3276821:return methodInfoQueueBindOk;case 3276830:return methodInfoQueuePurge;case 3276831:return methodInfoQueuePurgeOk;case 3276840:return methodInfoQueueDelete;case 3276841:return methodInfoQueueDeleteOk;case 3276850:return methodInfoQueueUnbind;case 3276851:return methodInfoQueueUnbindOk;case 3932170:return methodInfoBasicQos;case 3932171:return methodInfoBasicQosOk;case 3932180:return methodInfoBasicConsume;case 3932181:return methodInfoBasicConsumeOk;case 3932190:return methodInfoBasicCancel;case 3932191:return methodInfoBasicCancelOk;case 3932200:return methodInfoBasicPublish;case 3932210:return methodInfoBasicReturn;case 3932220:return methodInfoBasicDeliver;case 3932230:return methodInfoBasicGet;case 3932231:return methodInfoBasicGetOk;case 3932232:return methodInfoBasicGetEmpty;case 3932240:return methodInfoBasicAck;case 3932250:return methodInfoBasicReject;case 3932260:return methodInfoBasicRecoverAsync;case 3932270:return methodInfoBasicRecover;case 3932271:return methodInfoBasicRecoverOk;case 3932280:return methodInfoBasicNack;case 5898250:return methodInfoTxSelect;case 5898251:return methodInfoTxSelectOk;case 5898260:return methodInfoTxCommit;case 5898261:return methodInfoTxCommitOk;case 5898270:return methodInfoTxRollback;case 5898271:return methodInfoTxRollbackOk;case 5570570:return methodInfoConfirmSelect;case 5570571:return methodInfoConfirmSelectOk;case 60:return propertiesInfoBasicProperties;default:throw new Error("Unknown class/method ID")}},module.exports.ConnectionStart=655370;var methodInfoConnectionStart=module.exports.methodInfoConnectionStart={id:655370,classId:10,methodId:10,name:"ConnectionStart",args:[{type:"octet",name:"versionMajor",default:0},{type:"octet",name:"versionMinor",default:9},{type:"table",name:"serverProperties"},{type:"longstr",name:"mechanisms",default:"PLAIN"},{type:"longstr",name:"locales",default:"en_US"}]};module.exports.ConnectionStartOk=655371;var methodInfoConnectionStartOk=module.exports.methodInfoConnectionStartOk={id:655371,classId:10,methodId:11,name:"ConnectionStartOk",args:[{type:"table",name:"clientProperties"},{type:"shortstr",name:"mechanism",default:"PLAIN"},{type:"longstr",name:"response"},{type:"shortstr",name:"locale",default:"en_US"}]};module.exports.ConnectionSecure=655380;var methodInfoConnectionSecure=module.exports.methodInfoConnectionSecure={id:655380,classId:10,methodId:20,name:"ConnectionSecure",args:[{type:"longstr",name:"challenge"}]};module.exports.ConnectionSecureOk=655381;var methodInfoConnectionSecureOk=module.exports.methodInfoConnectionSecureOk={id:655381,classId:10,methodId:21,name:"ConnectionSecureOk",args:[{type:"longstr",name:"response"}]};module.exports.ConnectionTune=655390;var methodInfoConnectionTune=module.exports.methodInfoConnectionTune={id:655390,classId:10,methodId:30,name:"ConnectionTune",args:[{type:"short",name:"channelMax",default:0},{type:"long",name:"frameMax",default:0},{type:"short",name:"heartbeat",default:0}]};module.exports.ConnectionTuneOk=655391;var methodInfoConnectionTuneOk=module.exports.methodInfoConnectionTuneOk={id:655391,classId:10,methodId:31,name:"ConnectionTuneOk",args:[{type:"short",name:"channelMax",default:0},{type:"long",name:"frameMax",default:0},{type:"short",name:"heartbeat",default:0}]};module.exports.ConnectionOpen=655400;var methodInfoConnectionOpen=module.exports.methodInfoConnectionOpen={id:655400,classId:10,methodId:40,name:"ConnectionOpen",args:[{type:"shortstr",name:"virtualHost",default:"/"},{type:"shortstr",name:"capabilities",default:""},{type:"bit",name:"insist",default:!1}]};module.exports.ConnectionOpenOk=655401;var methodInfoConnectionOpenOk=module.exports.methodInfoConnectionOpenOk={id:655401,classId:10,methodId:41,name:"ConnectionOpenOk",args:[{type:"shortstr",name:"knownHosts",default:""}]};module.exports.ConnectionClose=655410;var methodInfoConnectionClose=module.exports.methodInfoConnectionClose={id:655410,classId:10,methodId:50,name:"ConnectionClose",args:[{type:"short",name:"replyCode"},{type:"shortstr",name:"replyText",default:""},{type:"short",name:"classId"},{type:"short",name:"methodId"}]};module.exports.ConnectionCloseOk=655411;var methodInfoConnectionCloseOk=module.exports.methodInfoConnectionCloseOk={id:655411,classId:10,methodId:51,name:"ConnectionCloseOk",args:[]};module.exports.ConnectionBlocked=655420;var methodInfoConnectionBlocked=module.exports.methodInfoConnectionBlocked={id:655420,classId:10,methodId:60,name:"ConnectionBlocked",args:[{type:"shortstr",name:"reason",default:""}]};module.exports.ConnectionUnblocked=655421;var methodInfoConnectionUnblocked=module.exports.methodInfoConnectionUnblocked={id:655421,classId:10,methodId:61,name:"ConnectionUnblocked",args:[]};module.exports.ChannelOpen=1310730;var methodInfoChannelOpen=module.exports.methodInfoChannelOpen={id:1310730,classId:20,methodId:10,name:"ChannelOpen",args:[{type:"shortstr",name:"outOfBand",default:""}]};module.exports.ChannelOpenOk=1310731;var methodInfoChannelOpenOk=module.exports.methodInfoChannelOpenOk={id:1310731,classId:20,methodId:11,name:"ChannelOpenOk",args:[{type:"longstr",name:"channelId",default:""}]};module.exports.ChannelFlow=1310740;var methodInfoChannelFlow=module.exports.methodInfoChannelFlow={id:1310740,classId:20,methodId:20,name:"ChannelFlow",args:[{type:"bit",name:"active"}]};module.exports.ChannelFlowOk=1310741;var methodInfoChannelFlowOk=module.exports.methodInfoChannelFlowOk={id:1310741,classId:20,methodId:21,name:"ChannelFlowOk",args:[{type:"bit",name:"active"}]};module.exports.ChannelClose=1310760;var methodInfoChannelClose=module.exports.methodInfoChannelClose={id:1310760,classId:20,methodId:40,name:"ChannelClose",args:[{type:"short",name:"replyCode"},{type:"shortstr",name:"replyText",default:""},{type:"short",name:"classId"},{type:"short",name:"methodId"}]};module.exports.ChannelCloseOk=1310761;var methodInfoChannelCloseOk=module.exports.methodInfoChannelCloseOk={id:1310761,classId:20,methodId:41,name:"ChannelCloseOk",args:[]};module.exports.AccessRequest=1966090;var methodInfoAccessRequest=module.exports.methodInfoAccessRequest={id:1966090,classId:30,methodId:10,name:"AccessRequest",args:[{type:"shortstr",name:"realm",default:"/data"},{type:"bit",name:"exclusive",default:!1},{type:"bit",name:"passive",default:!0},{type:"bit",name:"active",default:!0},{type:"bit",name:"write",default:!0},{type:"bit",name:"read",default:!0}]};module.exports.AccessRequestOk=1966091;var methodInfoAccessRequestOk=module.exports.methodInfoAccessRequestOk={id:1966091,classId:30,methodId:11,name:"AccessRequestOk",args:[{type:"short",name:"ticket",default:1}]};module.exports.ExchangeDeclare=2621450;var methodInfoExchangeDeclare=module.exports.methodInfoExchangeDeclare={id:2621450,classId:40,methodId:10,name:"ExchangeDeclare",args:[{type:"short",name:"ticket",default:0},{type:"shortstr",name:"exchange"},{type:"shortstr",name:"type",default:"direct"},{type:"bit",name:"passive",default:!1},{type:"bit",name:"durable",default:!1},{type:"bit",name:"autoDelete",default:!1},{type:"bit",name:"internal",default:!1},{type:"bit",name:"nowait",default:!1},{type:"table",name:"arguments",default:{}}]};module.exports.ExchangeDeclareOk=2621451;var methodInfoExchangeDeclareOk=module.exports.methodInfoExchangeDeclareOk={id:2621451,classId:40,methodId:11,name:"ExchangeDeclareOk",args:[]};module.exports.ExchangeDelete=2621460;var methodInfoExchangeDelete=module.exports.methodInfoExchangeDelete={id:2621460,classId:40,methodId:20,name:"ExchangeDelete",args:[{type:"short",name:"ticket",default:0},{type:"shortstr",name:"exchange"},{type:"bit",name:"ifUnused",default:!1},{type:"bit",name:"nowait",default:!1}]};module.exports.ExchangeDeleteOk=2621461;var methodInfoExchangeDeleteOk=module.exports.methodInfoExchangeDeleteOk={id:2621461,classId:40,methodId:21,name:"ExchangeDeleteOk",args:[]};module.exports.ExchangeBind=2621470;var methodInfoExchangeBind=module.exports.methodInfoExchangeBind={id:2621470,classId:40,methodId:30,name:"ExchangeBind",args:[{type:"short",name:"ticket",default:0},{type:"shortstr",name:"destination"},{type:"shortstr",name:"source"},{type:"shortstr",name:"routingKey",default:""},{type:"bit",name:"nowait",default:!1},{type:"table",name:"arguments",default:{}}]};module.exports.ExchangeBindOk=2621471;var methodInfoExchangeBindOk=module.exports.methodInfoExchangeBindOk={id:2621471,classId:40,methodId:31,name:"ExchangeBindOk",args:[]};module.exports.ExchangeUnbind=2621480;var methodInfoExchangeUnbind=module.exports.methodInfoExchangeUnbind={id:2621480,classId:40,methodId:40,name:"ExchangeUnbind",args:[{type:"short",name:"ticket",default:0},{type:"shortstr",name:"destination"},{type:"shortstr",name:"source"},{type:"shortstr",name:"routingKey",default:""},{type:"bit",name:"nowait",default:!1},{type:"table",name:"arguments",default:{}}]};module.exports.ExchangeUnbindOk=2621491;var methodInfoExchangeUnbindOk=module.exports.methodInfoExchangeUnbindOk={id:2621491,classId:40,methodId:51,name:"ExchangeUnbindOk",args:[]};module.exports.QueueDeclare=3276810;var methodInfoQueueDeclare=module.exports.methodInfoQueueDeclare={id:3276810,classId:50,methodId:10,name:"QueueDeclare",args:[{type:"short",name:"ticket",default:0},{type:"shortstr",name:"queue",default:""},{type:"bit",name:"passive",default:!1},{type:"bit",name:"durable",default:!1},{type:"bit",name:"exclusive",default:!1},{type:"bit",name:"autoDelete",default:!1},{type:"bit",name:"nowait",default:!1},{type:"table",name:"arguments",default:{}}]};module.exports.QueueDeclareOk=3276811;var methodInfoQueueDeclareOk=module.exports.methodInfoQueueDeclareOk={id:3276811,classId:50,methodId:11,name:"QueueDeclareOk",args:[{type:"shortstr",name:"queue"},{type:"long",name:"messageCount"},{type:"long",name:"consumerCount"}]};module.exports.QueueBind=3276820;var methodInfoQueueBind=module.exports.methodInfoQueueBind={id:3276820,classId:50,methodId:20,name:"QueueBind",args:[{type:"short",name:"ticket",default:0},{type:"shortstr",name:"queue",default:""},{type:"shortstr",name:"exchange"},{type:"shortstr",name:"routingKey",default:""},{type:"bit",name:"nowait",default:!1},{type:"table",name:"arguments",default:{}}]};module.exports.QueueBindOk=3276821;var methodInfoQueueBindOk=module.exports.methodInfoQueueBindOk={id:3276821,classId:50,methodId:21,name:"QueueBindOk",args:[]};module.exports.QueuePurge=3276830;var methodInfoQueuePurge=module.exports.methodInfoQueuePurge={id:3276830,classId:50,methodId:30,name:"QueuePurge",args:[{type:"short",name:"ticket",default:0},{type:"shortstr",name:"queue",default:""},{type:"bit",name:"nowait",default:!1}]};module.exports.QueuePurgeOk=3276831;var methodInfoQueuePurgeOk=module.exports.methodInfoQueuePurgeOk={id:3276831,classId:50,methodId:31,name:"QueuePurgeOk",args:[{type:"long",name:"messageCount"}]};module.exports.QueueDelete=3276840;var methodInfoQueueDelete=module.exports.methodInfoQueueDelete={id:3276840,classId:50,methodId:40,name:"QueueDelete",args:[{type:"short",name:"ticket",default:0},{type:"shortstr",name:"queue",default:""},{type:"bit",name:"ifUnused",default:!1},{type:"bit",name:"ifEmpty",default:!1},{type:"bit",name:"nowait",default:!1}]};module.exports.QueueDeleteOk=3276841;var methodInfoQueueDeleteOk=module.exports.methodInfoQueueDeleteOk={id:3276841,classId:50,methodId:41,name:"QueueDeleteOk",args:[{type:"long",name:"messageCount"}]};module.exports.QueueUnbind=3276850;var methodInfoQueueUnbind=module.exports.methodInfoQueueUnbind={id:3276850,classId:50,methodId:50,name:"QueueUnbind",args:[{type:"short",name:"ticket",default:0},{type:"shortstr",name:"queue",default:""},{type:"shortstr",name:"exchange"},{type:"shortstr",name:"routingKey",default:""},{type:"table",name:"arguments",default:{}}]};module.exports.QueueUnbindOk=3276851;var methodInfoQueueUnbindOk=module.exports.methodInfoQueueUnbindOk={id:3276851,classId:50,methodId:51,name:"QueueUnbindOk",args:[]};module.exports.BasicQos=3932170;var methodInfoBasicQos=module.exports.methodInfoBasicQos={id:3932170,classId:60,methodId:10,name:"BasicQos",args:[{type:"long",name:"prefetchSize",default:0},{type:"short",name:"prefetchCount",default:0},{type:"bit",name:"global",default:!1}]};module.exports.BasicQosOk=3932171;var methodInfoBasicQosOk=module.exports.methodInfoBasicQosOk={id:3932171,classId:60,methodId:11,name:"BasicQosOk",args:[]};module.exports.BasicConsume=3932180;var methodInfoBasicConsume=module.exports.methodInfoBasicConsume={id:3932180,classId:60,methodId:20,name:"BasicConsume",args:[{type:"short",name:"ticket",default:0},{type:"shortstr",name:"queue",default:""},{type:"shortstr",name:"consumerTag",default:""},{type:"bit",name:"noLocal",default:!1},{type:"bit",name:"noAck",default:!1},{type:"bit",name:"exclusive",default:!1},{type:"bit",name:"nowait",default:!1},{type:"table",name:"arguments",default:{}}]};module.exports.BasicConsumeOk=3932181;var methodInfoBasicConsumeOk=module.exports.methodInfoBasicConsumeOk={id:3932181,classId:60,methodId:21,name:"BasicConsumeOk",args:[{type:"shortstr",name:"consumerTag"}]};module.exports.BasicCancel=3932190;var methodInfoBasicCancel=module.exports.methodInfoBasicCancel={id:3932190,classId:60,methodId:30,name:"BasicCancel",args:[{type:"shortstr",name:"consumerTag"},{type:"bit",name:"nowait",default:!1}]};module.exports.BasicCancelOk=3932191;var methodInfoBasicCancelOk=module.exports.methodInfoBasicCancelOk={id:3932191,classId:60,methodId:31,name:"BasicCancelOk",args:[{type:"shortstr",name:"consumerTag"}]};module.exports.BasicPublish=3932200;var methodInfoBasicPublish=module.exports.methodInfoBasicPublish={id:3932200,classId:60,methodId:40,name:"BasicPublish",args:[{type:"short",name:"ticket",default:0},{type:"shortstr",name:"exchange",default:""},{type:"shortstr",name:"routingKey",default:""},{type:"bit",name:"mandatory",default:!1},{type:"bit",name:"immediate",default:!1}]};module.exports.BasicReturn=3932210;var methodInfoBasicReturn=module.exports.methodInfoBasicReturn={id:3932210,classId:60,methodId:50,name:"BasicReturn",args:[{type:"short",name:"replyCode"},{type:"shortstr",name:"replyText",default:""},{type:"shortstr",name:"exchange"},{type:"shortstr",name:"routingKey"}]};module.exports.BasicDeliver=3932220;var methodInfoBasicDeliver=module.exports.methodInfoBasicDeliver={id:3932220,classId:60,methodId:60,name:"BasicDeliver",args:[{type:"shortstr",name:"consumerTag"},{type:"longlong",name:"deliveryTag"},{type:"bit",name:"redelivered",default:!1},{type:"shortstr",name:"exchange"},{type:"shortstr",name:"routingKey"}]};module.exports.BasicGet=3932230;var methodInfoBasicGet=module.exports.methodInfoBasicGet={id:3932230,classId:60,methodId:70,name:"BasicGet",args:[{type:"short",name:"ticket",default:0},{type:"shortstr",name:"queue",default:""},{type:"bit",name:"noAck",default:!1}]};module.exports.BasicGetOk=3932231;var methodInfoBasicGetOk=module.exports.methodInfoBasicGetOk={id:3932231,classId:60,methodId:71,name:"BasicGetOk",args:[{type:"longlong",name:"deliveryTag"},{type:"bit",name:"redelivered",default:!1},{type:"shortstr",name:"exchange"},{type:"shortstr",name:"routingKey"},{type:"long",name:"messageCount"}]};module.exports.BasicGetEmpty=3932232;var methodInfoBasicGetEmpty=module.exports.methodInfoBasicGetEmpty={id:3932232,classId:60,methodId:72,name:"BasicGetEmpty",args:[{type:"shortstr",name:"clusterId",default:""}]};module.exports.BasicAck=3932240;var methodInfoBasicAck=module.exports.methodInfoBasicAck={id:3932240,classId:60,methodId:80,name:"BasicAck",args:[{type:"longlong",name:"deliveryTag",default:0},{type:"bit",name:"multiple",default:!1}]};module.exports.BasicReject=3932250;var methodInfoBasicReject=module.exports.methodInfoBasicReject={id:3932250,classId:60,methodId:90,name:"BasicReject",args:[{type:"longlong",name:"deliveryTag"},{type:"bit",name:"requeue",default:!0}]};module.exports.BasicRecoverAsync=3932260;var methodInfoBasicRecoverAsync=module.exports.methodInfoBasicRecoverAsync={id:3932260,classId:60,methodId:100,name:"BasicRecoverAsync",args:[{type:"bit",name:"requeue",default:!1}]};module.exports.BasicRecover=3932270;var methodInfoBasicRecover=module.exports.methodInfoBasicRecover={id:3932270,classId:60,methodId:110,name:"BasicRecover",args:[{type:"bit",name:"requeue",default:!1}]};module.exports.BasicRecoverOk=3932271;var methodInfoBasicRecoverOk=module.exports.methodInfoBasicRecoverOk={id:3932271,classId:60,methodId:111,name:"BasicRecoverOk",args:[]};module.exports.BasicNack=3932280;var methodInfoBasicNack=module.exports.methodInfoBasicNack={id:3932280,classId:60,methodId:120,name:"BasicNack",args:[{type:"longlong",name:"deliveryTag",default:0},{type:"bit",name:"multiple",default:!1},{type:"bit",name:"requeue",default:!0}]};module.exports.TxSelect=5898250;var methodInfoTxSelect=module.exports.methodInfoTxSelect={id:5898250,classId:90,methodId:10,name:"TxSelect",args:[]};module.exports.TxSelectOk=5898251;var methodInfoTxSelectOk=module.exports.methodInfoTxSelectOk={id:5898251,classId:90,methodId:11,name:"TxSelectOk",args:[]};module.exports.TxCommit=5898260;var methodInfoTxCommit=module.exports.methodInfoTxCommit={id:5898260,classId:90,methodId:20,name:"TxCommit",args:[]};module.exports.TxCommitOk=5898261;var methodInfoTxCommitOk=module.exports.methodInfoTxCommitOk={id:5898261,classId:90,methodId:21,name:"TxCommitOk",args:[]};module.exports.TxRollback=5898270;var methodInfoTxRollback=module.exports.methodInfoTxRollback={id:5898270,classId:90,methodId:30,name:"TxRollback",args:[]};module.exports.TxRollbackOk=5898271;var methodInfoTxRollbackOk=module.exports.methodInfoTxRollbackOk={id:5898271,classId:90,methodId:31,name:"TxRollbackOk",args:[]};module.exports.ConfirmSelect=5570570;var methodInfoConfirmSelect=module.exports.methodInfoConfirmSelect={id:5570570,classId:85,methodId:10,name:"ConfirmSelect",args:[{type:"bit",name:"nowait",default:!1}]};module.exports.ConfirmSelectOk=5570571;var methodInfoConfirmSelectOk=module.exports.methodInfoConfirmSelectOk={id:5570571,classId:85,methodId:11,name:"ConfirmSelectOk",args:[]};module.exports.BasicProperties=60;var propertiesInfoBasicProperties=module.exports.propertiesInfoBasicProperties={id:60,name:"BasicProperties",args:[{type:"shortstr",name:"contentType"},{type:"shortstr",name:"contentEncoding"},{type:"table",name:"headers"},{type:"octet",name:"deliveryMode"},{type:"octet",name:"priority"},{type:"shortstr",name:"correlationId"},{type:"shortstr",name:"replyTo"},{type:"shortstr",name:"expiration"},{type:"shortstr",name:"messageId"},{type:"timestamp",name:"timestamp"},{type:"shortstr",name:"type"},{type:"shortstr",name:"userId"},{type:"shortstr",name:"appId"},{type:"shortstr",name:"clusterId"}]}},function(module,exports,__webpack_require__){var buffer=__webpack_require__(5),Buffer=buffer.Buffer;function copyProps(src,dst){for(var key in src)dst[key]=src[key]}function SafeBuffer(arg,encodingOrOffset,length){return Buffer(arg,encodingOrOffset,length)}Buffer.from&&Buffer.alloc&&Buffer.allocUnsafe&&Buffer.allocUnsafeSlow?module.exports=buffer:(copyProps(buffer,exports),exports.Buffer=SafeBuffer),copyProps(Buffer,SafeBuffer),SafeBuffer.from=function(arg,encodingOrOffset,length){if("number"==typeof arg)throw new TypeError("Argument must not be a number");return Buffer(arg,encodingOrOffset,length)},SafeBuffer.alloc=function(size,fill,encoding){if("number"!=typeof size)throw new TypeError("Argument must be a number");var buf=Buffer(size);return void 0!==fill?"string"==typeof encoding?buf.fill(fill,encoding):buf.fill(fill):buf.fill(0),buf},SafeBuffer.allocUnsafe=function(size){if("number"!=typeof size)throw new TypeError("Argument must be a number");return Buffer(size)},SafeBuffer.allocUnsafeSlow=function(size){if("number"!=typeof size)throw new TypeError("Argument must be a number");return buffer.SlowBuffer(size)}},function(module,exports,__webpack_require__){"use strict";var SHIFT_RIGHT_32=1/4294967296;function isContiguousInt(val){return val<=9007199254740991&&val>=-9007199254740991}function check_value(val,min,max){if("number"!=typeof(val=+val)||val<min||val>max||Math.floor(val)!==val)throw new TypeError('"value" argument is out of bounds');return val}function check_bounds(buf,offset,len){if(offset<0||offset+len>buf.length)throw new RangeError("Index out of range")}module.exports.isContiguousInt=isContiguousInt,module.exports.assertContiguousInt=function(val){if(!isContiguousInt(val))throw new TypeError("number cannot be represented as a contiguous integer")},["UInt","Int"].forEach((function(sign){var suffix=sign+"8";module.exports["read"+suffix]=Buffer.prototype["read"+suffix].call,module.exports["write"+suffix]=Buffer.prototype["write"+suffix].call,["16","32"].forEach((function(size){["LE","BE"].forEach((function(endian){var suffix=sign+size+endian,read=Buffer.prototype["read"+suffix];module.exports["read"+suffix]=function(buf,offset){return read.call(buf,offset)};var write=Buffer.prototype["write"+suffix];module.exports["write"+suffix]=function(buf,val,offset){return write.call(buf,val,offset)}}))}))})),module.exports.readUInt24BE=function(buf,offset){return buf.readUInt8(offset)<<16|buf.readUInt16BE(offset+1)},module.exports.writeUInt24BE=function(buf,val,offset){val=check_value(val,0,16777215),check_bounds(buf,offset,3),buf.writeUInt8(val>>>16,offset),buf.writeUInt16BE(65535&val,offset+1)},module.exports.readUInt40BE=function(buf,offset){return 4294967296*(buf.readUInt8(offset)||0)+buf.readUInt32BE(offset+1)},module.exports.writeUInt40BE=function(buf,val,offset){val=check_value(val,0,0xffffffffff),check_bounds(buf,offset,5),buf.writeUInt8(Math.floor(val*SHIFT_RIGHT_32),offset),buf.writeInt32BE(-1&val,offset+1)},module.exports.readUInt48BE=function(buf,offset){return 4294967296*buf.readUInt16BE(offset)+buf.readUInt32BE(offset+2)},module.exports.writeUInt48BE=function(buf,val,offset){val=check_value(val,0,0xffffffffffff),check_bounds(buf,offset,6),buf.writeUInt16BE(Math.floor(val*SHIFT_RIGHT_32),offset),buf.writeInt32BE(-1&val,offset+2)},module.exports.readUInt56BE=function(buf,offset){return 4294967296*((buf.readUInt8(offset)||0)<<16|buf.readUInt16BE(offset+1))+buf.readUInt32BE(offset+3)},module.exports.writeUInt56BE=function(buf,val,offset){if(val=check_value(val,0,72057594037927940),check_bounds(buf,offset,7),val<72057594037927940){var hi=Math.floor(val*SHIFT_RIGHT_32);buf.writeUInt8(hi>>>16,offset),buf.writeUInt16BE(65535&hi,offset+1),buf.writeInt32BE(-1&val,offset+3)}else buf[offset]=255,buf[offset+1]=255,buf[offset+2]=255,buf[offset+3]=255,buf[offset+4]=255,buf[offset+5]=255,buf[offset+6]=255},module.exports.readUInt64BE=function(buf,offset){return 4294967296*buf.readUInt32BE(offset)+buf.readUInt32BE(offset+4)},module.exports.writeUInt64BE=function(buf,val,offset){val=check_value(val,0,0x10000000000000000),check_bounds(buf,offset,8),val<0x10000000000000000?(buf.writeUInt32BE(Math.floor(val*SHIFT_RIGHT_32),offset),buf.writeInt32BE(-1&val,offset+4)):(buf[offset]=255,buf[offset+1]=255,buf[offset+2]=255,buf[offset+3]=255,buf[offset+4]=255,buf[offset+5]=255,buf[offset+6]=255,buf[offset+7]=255)},module.exports.readUInt24LE=function(buf,offset){return buf.readUInt8(offset+2)<<16|buf.readUInt16LE(offset)},module.exports.writeUInt24LE=function(buf,val,offset){val=check_value(val,0,16777215),check_bounds(buf,offset,3),buf.writeUInt16LE(65535&val,offset),buf.writeUInt8(val>>>16,offset+2)},module.exports.readUInt40LE=function(buf,offset){return 4294967296*(buf.readUInt8(offset+4)||0)+buf.readUInt32LE(offset)},module.exports.writeUInt40LE=function(buf,val,offset){val=check_value(val,0,0xffffffffff),check_bounds(buf,offset,5),buf.writeInt32LE(-1&val,offset),buf.writeUInt8(Math.floor(val*SHIFT_RIGHT_32),offset+4)},module.exports.readUInt48LE=function(buf,offset){return 4294967296*buf.readUInt16LE(offset+4)+buf.readUInt32LE(offset)},module.exports.writeUInt48LE=function(buf,val,offset){val=check_value(val,0,0xffffffffffff),check_bounds(buf,offset,6),buf.writeInt32LE(-1&val,offset),buf.writeUInt16LE(Math.floor(val*SHIFT_RIGHT_32),offset+4)},module.exports.readUInt56LE=function(buf,offset){return 4294967296*((buf.readUInt8(offset+6)||0)<<16|buf.readUInt16LE(offset+4))+buf.readUInt32LE(offset)},module.exports.writeUInt56LE=function(buf,val,offset){if(val=check_value(val,0,72057594037927940),check_bounds(buf,offset,7),val<72057594037927940){buf.writeInt32LE(-1&val,offset);var hi=Math.floor(val*SHIFT_RIGHT_32);buf.writeUInt16LE(65535&hi,offset+4),buf.writeUInt8(hi>>>16,offset+6)}else buf[offset]=255,buf[offset+1]=255,buf[offset+2]=255,buf[offset+3]=255,buf[offset+4]=255,buf[offset+5]=255,buf[offset+6]=255},module.exports.readUInt64LE=function(buf,offset){return 4294967296*buf.readUInt32LE(offset+4)+buf.readUInt32LE(offset)},module.exports.writeUInt64LE=function(buf,val,offset){val=check_value(val,0,0x10000000000000000),check_bounds(buf,offset,8),val<0x10000000000000000?(buf.writeInt32LE(-1&val,offset),buf.writeUInt32LE(Math.floor(val*SHIFT_RIGHT_32),offset+4)):(buf[offset]=255,buf[offset+1]=255,buf[offset+2]=255,buf[offset+3]=255,buf[offset+4]=255,buf[offset+5]=255,buf[offset+6]=255,buf[offset+7]=255)},module.exports.readInt24BE=function(buf,offset){return(buf.readInt8(offset)<<16)+buf.readUInt16BE(offset+1)},module.exports.writeInt24BE=function(buf,val,offset){val=check_value(val,-8388608,8388607),check_bounds(buf,offset,3),buf.writeInt8(val>>16,offset),buf.writeUInt16BE(65535&val,offset+1)},module.exports.readInt40BE=function(buf,offset){return 4294967296*(buf.readInt8(offset)||0)+buf.readUInt32BE(offset+1)},module.exports.writeInt40BE=function(buf,val,offset){val=check_value(val,-549755813888,549755813887),check_bounds(buf,offset,5),buf.writeInt8(Math.floor(val*SHIFT_RIGHT_32),offset),buf.writeInt32BE(-1&val,offset+1)},module.exports.readInt48BE=function(buf,offset){return 4294967296*buf.readInt16BE(offset)+buf.readUInt32BE(offset+2)},module.exports.writeInt48BE=function(buf,val,offset){val=check_value(val,-0x800000000000,0x7fffffffffff),check_bounds(buf,offset,6),buf.writeInt16BE(Math.floor(val*SHIFT_RIGHT_32),offset),buf.writeInt32BE(-1&val,offset+2)},module.exports.readInt56BE=function(buf,offset){return 4294967296*(((buf.readInt8(offset)||0)<<16)+buf.readUInt16BE(offset+1))+buf.readUInt32BE(offset+3)},module.exports.writeInt56BE=function(buf,val,offset){if(val=check_value(val,-0x800000000000000,0x80000000000000),check_bounds(buf,offset,7),val<0x80000000000000){var hi=Math.floor(val*SHIFT_RIGHT_32);buf.writeInt8(hi>>16,offset),buf.writeUInt16BE(65535&hi,offset+1),buf.writeInt32BE(-1&val,offset+3)}else buf[offset]=127,buf[offset+1]=255,buf[offset+2]=255,buf[offset+3]=255,buf[offset+4]=255,buf[offset+5]=255,buf[offset+6]=255},module.exports.readInt64BE=function(buf,offset){return 4294967296*buf.readInt32BE(offset)+buf.readUInt32BE(offset+4)},module.exports.writeInt64BE=function(buf,val,offset){val=check_value(val,-23611832414348226e5,0x8000000000000000),check_bounds(buf,offset,8),val<0x8000000000000000?(buf.writeInt32BE(Math.floor(val*SHIFT_RIGHT_32),offset),buf.writeInt32BE(-1&val,offset+4)):(buf[offset]=127,buf[offset+1]=255,buf[offset+2]=255,buf[offset+3]=255,buf[offset+4]=255,buf[offset+5]=255,buf[offset+6]=255,buf[offset+7]=255)},module.exports.readInt24LE=function(buf,offset){return(buf.readInt8(offset+2)<<16)+buf.readUInt16LE(offset)},module.exports.writeInt24LE=function(buf,val,offset){val=check_value(val,-8388608,8388607),check_bounds(buf,offset,3),buf.writeUInt16LE(65535&val,offset),buf.writeInt8(val>>16,offset+2)},module.exports.readInt40LE=function(buf,offset){return 4294967296*(buf.readInt8(offset+4)||0)+buf.readUInt32LE(offset)},module.exports.writeInt40LE=function(buf,val,offset){val=check_value(val,-549755813888,549755813887),check_bounds(buf,offset,5),buf.writeInt32LE(-1&val,offset),buf.writeInt8(Math.floor(val*SHIFT_RIGHT_32),offset+4)},module.exports.readInt48LE=function(buf,offset){return 4294967296*buf.readInt16LE(offset+4)+buf.readUInt32LE(offset)},module.exports.writeInt48LE=function(buf,val,offset){val=check_value(val,-0x800000000000,0x7fffffffffff),check_bounds(buf,offset,6),buf.writeInt32LE(-1&val,offset),buf.writeInt16LE(Math.floor(val*SHIFT_RIGHT_32),offset+4)},module.exports.readInt56LE=function(buf,offset){return 4294967296*(((buf.readInt8(offset+6)||0)<<16)+buf.readUInt16LE(offset+4))+buf.readUInt32LE(offset)},module.exports.writeInt56LE=function(buf,val,offset){if(val=check_value(val,-0x80000000000000,0x80000000000000),check_bounds(buf,offset,7),val<0x80000000000000){buf.writeInt32LE(-1&val,offset);var hi=Math.floor(val*SHIFT_RIGHT_32);buf.writeUInt16LE(65535&hi,offset+4),buf.writeInt8(hi>>16,offset+6)}else buf[offset]=255,buf[offset+1]=255,buf[offset+2]=255,buf[offset+3]=255,buf[offset+4]=255,buf[offset+5]=255,buf[offset+6]=127},module.exports.readInt64LE=function(buf,offset){return 4294967296*buf.readInt32LE(offset+4)+buf.readUInt32LE(offset)},module.exports.writeInt64LE=function(buf,val,offset){val=check_value(val,-0x8000000000000000,0x8000000000000000),check_bounds(buf,offset,8),val<0x8000000000000000?(buf.writeInt32LE(-1&val,offset),buf.writeInt32LE(Math.floor(val*SHIFT_RIGHT_32),offset+4)):(buf[offset]=255,buf[offset+1]=255,buf[offset+2]=255,buf[offset+3]=255,buf[offset+4]=255,buf[offset+5]=255,buf[offset+6]=255,buf[offset+7]=127)}},function(module,exports,__webpack_require__){function trimStack(stack,num){return stack&&stack.split("\n").slice(num).join("\n")}function IllegalOperationError(msg,stack){var tmp=new Error;this.message=msg,this.stack=this.toString()+"\n"+trimStack(tmp.stack,2),this.stackAtStateChange=stack}(0,__webpack_require__(0).inherits)(IllegalOperationError,Error),IllegalOperationError.prototype.name="IllegalOperationError",module.exports.IllegalOperationError=IllegalOperationError,module.exports.stackCapture=function(reason){return"Stack capture: "+reason+"\n"+trimStack((new Error).stack,2)}},function(module,exports,__webpack_require__){"use strict";function parseContent(message){let parsedMessage=message;Buffer.isBuffer(parsedMessage)&&(parsedMessage=parsedMessage.toString("utf-8"));let res=parsedMessage;try{res=JSON.parse(parsedMessage)}catch(ex){console.error(ex)}return res}function encapsulateContent(content){let encapsulatedContent;try{encapsulatedContent=JSON.stringify(content)}catch(ex){encapsulatedContent=content.toString()}return encapsulatedContent}Object.defineProperty(exports,"__esModule",{value:!0}),exports.encapsulateContent=exports.parseContent=void 0,exports.parseContent=parseContent,exports.encapsulateContent=encapsulateContent,exports.default={parseContent:parseContent,encapsulateContent:encapsulateContent}},function(module,exports){module.exports=require("url")},function(module,exports,__webpack_require__){"use strict";"undefined"==typeof process||!process.version||0===process.version.indexOf("v0.")||0===process.version.indexOf("v1.")&&0!==process.version.indexOf("v1.8.")?module.exports={nextTick:function(fn,arg1,arg2,arg3){if("function"!=typeof fn)throw new TypeError('"callback" argument must be a function');var args,i,len=arguments.length;switch(len){case 0:case 1:return process.nextTick(fn);case 2:return process.nextTick((function(){fn.call(null,arg1)}));case 3:return process.nextTick((function(){fn.call(null,arg1,arg2)}));case 4:return process.nextTick((function(){fn.call(null,arg1,arg2,arg3)}));default:for(args=new Array(len-1),i=0;i<args.length;)args[i++]=arguments[i];return process.nextTick((function(){fn.apply(null,args)}))}}}:module.exports=process},function(module,exports){module.exports=require("fs")},function(module,exports){module.exports=require("net")},function(module,exports){module.exports=require("http")},function(module,exports,__webpack_require__){var buffer=__webpack_require__(5),Buffer=buffer.Buffer;function copyProps(src,dst){for(var key in src)dst[key]=src[key]}function SafeBuffer(arg,encodingOrOffset,length){return Buffer(arg,encodingOrOffset,length)}Buffer.from&&Buffer.alloc&&Buffer.allocUnsafe&&Buffer.allocUnsafeSlow?module.exports=buffer:(copyProps(buffer,exports),exports.Buffer=SafeBuffer),copyProps(Buffer,SafeBuffer),SafeBuffer.from=function(arg,encodingOrOffset,length){if("number"==typeof arg)throw new TypeError("Argument must not be a number");return Buffer(arg,encodingOrOffset,length)},SafeBuffer.alloc=function(size,fill,encoding){if("number"!=typeof size)throw new TypeError("Argument must be a number");var buf=Buffer(size);return void 0!==fill?"string"==typeof encoding?buf.fill(fill,encoding):buf.fill(fill):buf.fill(0),buf},SafeBuffer.allocUnsafe=function(size){if("number"!=typeof size)throw new TypeError("Argument must be a number");return Buffer(size)},SafeBuffer.allocUnsafeSlow=function(size){if("number"!=typeof size)throw new TypeError("Argument must be a number");return buffer.SlowBuffer(size)}},function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(98)()?Object.setPrototypeOf:__webpack_require__(99)},function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(245)()?globalThis:__webpack_require__(246)},function(module,exports,__webpack_require__){"use strict";var objToString=Object.prototype.toString,id=objToString.call(function(){return arguments}());module.exports=function(value){return objToString.call(value)===id}},function(module,exports,__webpack_require__){"use strict";var objToString=Object.prototype.toString,id=objToString.call("");module.exports=function(value){return"string"==typeof value||value&&"object"==typeof value&&(value instanceof String||objToString.call(value)===id)||!1}},function(module,exports,__webpack_require__){"use strict";const zlib=__webpack_require__(84),bufferUtil=__webpack_require__(42),Limiter=__webpack_require__(300),{kStatusCode:kStatusCode,NOOP:NOOP}=__webpack_require__(25),TRAILER=Buffer.from([0,0,255,255]),kPerMessageDeflate=Symbol("permessage-deflate"),kTotalLength=Symbol("total-length"),kCallback=Symbol("callback"),kBuffers=Symbol("buffers"),kError=Symbol("error");let zlibLimiter;function deflateOnData(chunk){this[kBuffers].push(chunk),this[kTotalLength]+=chunk.length}function inflateOnData(chunk){this[kTotalLength]+=chunk.length,this[kPerMessageDeflate]._maxPayload<1||this[kTotalLength]<=this[kPerMessageDeflate]._maxPayload?this[kBuffers].push(chunk):(this[kError]=new RangeError("Max payload size exceeded"),this[kError][kStatusCode]=1009,this.removeListener("data",inflateOnData),this.reset())}function inflateOnError(err){this[kPerMessageDeflate]._inflate=null,err[kStatusCode]=1007,this[kCallback](err)}module.exports=class{constructor(options,isServer,maxPayload){if(this._maxPayload=0|maxPayload,this._options=options||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!isServer,this._deflate=null,this._inflate=null,this.params=null,!zlibLimiter){const concurrency=void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10;zlibLimiter=new Limiter(concurrency)}}static get extensionName(){return"permessage-deflate"}offer(){const params={};return this._options.serverNoContextTakeover&&(params.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(params.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(params.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?params.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(params.client_max_window_bits=!0),params}accept(configurations){return configurations=this.normalizeParams(configurations),this.params=this._isServer?this.acceptAsServer(configurations):this.acceptAsClient(configurations),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){const callback=this._deflate[kCallback];this._deflate.close(),this._deflate=null,callback&&callback(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(offers){const opts=this._options,accepted=offers.find((params=>!(!1===opts.serverNoContextTakeover&&params.server_no_context_takeover||params.server_max_window_bits&&(!1===opts.serverMaxWindowBits||"number"==typeof opts.serverMaxWindowBits&&opts.serverMaxWindowBits>params.server_max_window_bits)||"number"==typeof opts.clientMaxWindowBits&&!params.client_max_window_bits)));if(!accepted)throw new Error("None of the extension offers can be accepted");return opts.serverNoContextTakeover&&(accepted.server_no_context_takeover=!0),opts.clientNoContextTakeover&&(accepted.client_no_context_takeover=!0),"number"==typeof opts.serverMaxWindowBits&&(accepted.server_max_window_bits=opts.serverMaxWindowBits),"number"==typeof opts.clientMaxWindowBits?accepted.client_max_window_bits=opts.clientMaxWindowBits:!0!==accepted.client_max_window_bits&&!1!==opts.clientMaxWindowBits||delete accepted.client_max_window_bits,accepted}acceptAsClient(response){const params=response[0];if(!1===this._options.clientNoContextTakeover&&params.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(params.client_max_window_bits){if(!1===this._options.clientMaxWindowBits||"number"==typeof this._options.clientMaxWindowBits&&params.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"')}else"number"==typeof this._options.clientMaxWindowBits&&(params.client_max_window_bits=this._options.clientMaxWindowBits);return params}normalizeParams(configurations){return configurations.forEach((params=>{Object.keys(params).forEach((key=>{let value=params[key];if(value.length>1)throw new Error(`Parameter "${key}" must have only a single value`);if(value=value[0],"client_max_window_bits"===key){if(!0!==value){const num=+value;if(!Number.isInteger(num)||num<8||num>15)throw new TypeError(`Invalid value for parameter "${key}": ${value}`);value=num}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${key}": ${value}`)}else if("server_max_window_bits"===key){const num=+value;if(!Number.isInteger(num)||num<8||num>15)throw new TypeError(`Invalid value for parameter "${key}": ${value}`);value=num}else{if("client_no_context_takeover"!==key&&"server_no_context_takeover"!==key)throw new Error(`Unknown parameter "${key}"`);if(!0!==value)throw new TypeError(`Invalid value for parameter "${key}": ${value}`)}params[key]=value}))})),configurations}decompress(data,fin,callback){zlibLimiter.add((done=>{this._decompress(data,fin,((err,result)=>{done(),callback(err,result)}))}))}compress(data,fin,callback){zlibLimiter.add((done=>{this._compress(data,fin,((err,result)=>{done(),callback(err,result)}))}))}_decompress(data,fin,callback){const endpoint=this._isServer?"client":"server";if(!this._inflate){const key=endpoint+"_max_window_bits",windowBits="number"!=typeof this.params[key]?zlib.Z_DEFAULT_WINDOWBITS:this.params[key];this._inflate=zlib.createInflateRaw({...this._options.zlibInflateOptions,windowBits:windowBits}),this._inflate[kPerMessageDeflate]=this,this._inflate[kTotalLength]=0,this._inflate[kBuffers]=[],this._inflate.on("error",inflateOnError),this._inflate.on("data",inflateOnData)}this._inflate[kCallback]=callback,this._inflate.write(data),fin&&this._inflate.write(TRAILER),this._inflate.flush((()=>{const err=this._inflate[kError];if(err)return this._inflate.close(),this._inflate=null,void callback(err);const data=bufferUtil.concat(this._inflate[kBuffers],this._inflate[kTotalLength]);fin&&this.params[endpoint+"_no_context_takeover"]?(this._inflate.close(),this._inflate=null):(this._inflate[kTotalLength]=0,this._inflate[kBuffers]=[]),callback(null,data)}))}_compress(data,fin,callback){const endpoint=this._isServer?"server":"client";if(!this._deflate){const key=endpoint+"_max_window_bits",windowBits="number"!=typeof this.params[key]?zlib.Z_DEFAULT_WINDOWBITS:this.params[key];this._deflate=zlib.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:windowBits}),this._deflate[kTotalLength]=0,this._deflate[kBuffers]=[],this._deflate.on("error",NOOP),this._deflate.on("data",deflateOnData)}this._deflate[kCallback]=callback,this._deflate.write(data),this._deflate.flush(zlib.Z_SYNC_FLUSH,(()=>{if(!this._deflate)return;let data=bufferUtil.concat(this._deflate[kBuffers],this._deflate[kTotalLength]);fin&&(data=data.slice(0,data.length-4)),this._deflate[kCallback]=null,fin&&this.params[endpoint+"_no_context_takeover"]?(this._deflate.close(),this._deflate=null):(this._deflate[kTotalLength]=0,this._deflate[kBuffers]=[]),callback(null,data)}))}}},function(module,exports,__webpack_require__){"use strict";const{EMPTY_BUFFER:EMPTY_BUFFER}=__webpack_require__(25);function concat(list,totalLength){if(0===list.length)return EMPTY_BUFFER;if(1===list.length)return list[0];const target=Buffer.allocUnsafe(totalLength);let offset=0;for(let i=0;i<list.length;i++){const buf=list[i];target.set(buf,offset),offset+=buf.length}return offset<totalLength?target.slice(0,offset):target}function _mask(source,mask,output,offset,length){for(let i=0;i<length;i++)output[offset+i]=source[i]^mask[3&i]}function _unmask(buffer,mask){const length=buffer.length;for(let i=0;i<length;i++)buffer[i]^=mask[3&i]}function toArrayBuffer(buf){return buf.byteLength===buf.buffer.byteLength?buf.buffer:buf.buffer.slice(buf.byteOffset,buf.byteOffset+buf.byteLength)}function toBuffer(data){if(toBuffer.readOnly=!0,Buffer.isBuffer(data))return data;let buf;return data instanceof ArrayBuffer?buf=Buffer.from(data):ArrayBuffer.isView(data)?buf=Buffer.from(data.buffer,data.byteOffset,data.byteLength):(buf=Buffer.from(data),toBuffer.readOnly=!1),buf}try{const bufferUtil=__webpack_require__(297),bu=bufferUtil.BufferUtil||bufferUtil;module.exports={concat:concat,mask(source,mask,output,offset,length){length<48?_mask(source,mask,output,offset,length):bu.mask(source,mask,output,offset,length)},toArrayBuffer:toArrayBuffer,toBuffer:toBuffer,unmask(buffer,mask){buffer.length<32?_unmask(buffer,mask):bu.unmask(buffer,mask)}}}catch(e){module.exports={concat:concat,mask:_mask,toArrayBuffer:toArrayBuffer,toBuffer:toBuffer,unmask:_unmask}}},function(module,exports,__webpack_require__){"use strict";var ast=__webpack_require__(137),parser=__webpack_require__(138);function parse_pattern(string){for(var segments=parser.parse(string),i=0,len=segments.length;i<len;i++){var s=segments[i];if(null!=s.string)segments[i]=ast.string(s.string);else if(null!=s.value)segments[i]=ast.value(s.value,s.size,s.specifiers);else{if(null==s.name)throw"Unknown segment "+s;segments[i]=ast.variable(s.name,s.size,s.specifiers)}}return segments}module.exports.parse=function(){var str=[].join.call(arguments,",");return parse_pattern(str)}},function(module,exports){module.exports=require("tty")},function(module,exports,__webpack_require__){"use strict";var ints=__webpack_require__(28),Buffer=__webpack_require__(66).Buffer;function write(buf,offset,pattern,bindings){for(var i=0,len=pattern.length;i<len;i++){var segment=pattern[i];switch(segment.type){case"string":offset+=buf.write(segment.value,offset,"utf8");break;case"binary":offset+=writeBinary(segment,buf,offset,bindings);break;case"integer":offset+=writeInteger(segment,buf,offset,bindings);break;case"float":offset+=writeFloat(segment,buf,offset,bindings)}}return offset}function build(pattern,bindings){var bufsize=function(segments,bindings){for(var size=0,i=0,len=segments.length;i<len;i++)size+=size_of_segment(segments[i],bindings);return size}(pattern,bindings),buf=Buffer.alloc(bufsize);return write(buf,0,pattern,bindings),buf}function size_of_segment(segment,bindings){return"string"==typeof segment.size?bindings[segment.size]*segment.unit/8:"string"===segment.type?Buffer.byteLength(segment.value,"utf8"):"binary"===segment.type&&!0===segment.size?bindings[segment.name].length:segment.size*segment.unit/8}function writeBinary(segment,buf,offset,bindings){var bin=bindings[segment.name],size=size_of_segment(segment,bindings);return bin.copy(buf,offset,0,size),size}function writeInteger(segment,buf,offset,bindings){return write_int(buf,segment.name?bindings[segment.name]:segment.value,offset,size_of_segment(segment,bindings),segment.bigendian)}function write_int(buf,value,offset,size,bigendian){switch(size){case 1:buf.writeUInt8(value,offset);break;case 2:bigendian?buf.writeUInt16BE(value,offset):buf.writeUInt16LE(value,offset);break;case 4:bigendian?buf.writeUInt32BE(value,offset):buf.writeUInt32LE(value,offset);break;case 8:bigendian?ints.writeUInt64BE(buf,value,offset):ints.writeUInt64LE(buf,value,offset);break;default:throw new Error("integer size * unit must be 8, 16, 32 or 64")}return size}function writeFloat(segment,buf,offset,bindings){return write_float(buf,segment.name?bindings[segment.name]:segment.value,offset,size_of_segment(segment,bindings),segment.bigendian)}function write_float(buf,value,offset,size,bigendian){if(4===size)bigendian?buf.writeFloatBE(value,offset):buf.writeFloatLE(value,offset);else{if(8!==size)throw new Error("float size * unit must be 32 or 64");bigendian?buf.writeDoubleBE(value,offset):buf.writeDoubleLE(value,offset)}return size}var parse=__webpack_require__(43).parse;module.exports.write=write,module.exports.build=build,module.exports.write_int=write_int,module.exports.write_float=write_float,module.exports.builder=function(pstr){pstr=arguments.length>1?[].join.call(arguments,","):pstr;var pattern=parse(pstr);return function(vars){return build(pattern,vars)}}},function(module,exports){module.exports=require("assert")},function(module,exports){module.exports=require("tls")},function(module,exports,__webpack_require__){(function(module){var argsTag="[object Arguments]",boolTag="[object Boolean]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag="[object Map]",setTag="[object Set]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",reFlags=/\w*$/,reIsHostCtor=/^\[object .+?Constructor\]$/,reIsUint=/^(?:0|[1-9]\d*)$/,cloneableTags={};cloneableTags[argsTag]=cloneableTags["[object Array]"]=cloneableTags["[object ArrayBuffer]"]=cloneableTags["[object DataView]"]=cloneableTags["[object Boolean]"]=cloneableTags["[object Date]"]=cloneableTags["[object Float32Array]"]=cloneableTags["[object Float64Array]"]=cloneableTags["[object Int8Array]"]=cloneableTags["[object Int16Array]"]=cloneableTags["[object Int32Array]"]=cloneableTags[mapTag]=cloneableTags["[object Number]"]=cloneableTags["[object Object]"]=cloneableTags["[object RegExp]"]=cloneableTags[setTag]=cloneableTags["[object String]"]=cloneableTags["[object Symbol]"]=cloneableTags["[object Uint8Array]"]=cloneableTags["[object Uint8ClampedArray]"]=cloneableTags["[object Uint16Array]"]=cloneableTags["[object Uint32Array]"]=!0,cloneableTags["[object Error]"]=cloneableTags[funcTag]=cloneableTags["[object WeakMap]"]=!1;var freeGlobal="object"==typeof global&&global&&global.Object===Object&&global,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),freeExports=exports&&!exports.nodeType&&exports,freeModule=freeExports&&"object"==typeof module&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports;function addMapEntry(map,pair){return map.set(pair[0],pair[1]),map}function addSetEntry(set,value){return set.add(value),set}function arrayReduce(array,iteratee,accumulator,initAccum){var index=-1,length=array?array.length:0;for(initAccum&&length&&(accumulator=array[++index]);++index<length;)accumulator=iteratee(accumulator,array[index],index,array);return accumulator}function isHostObject(value){var result=!1;if(null!=value&&"function"!=typeof value.toString)try{result=!!(value+"")}catch(e){}return result}function mapToArray(map){var index=-1,result=Array(map.size);return map.forEach((function(value,key){result[++index]=[key,value]})),result}function overArg(func,transform){return function(arg){return func(transform(arg))}}function setToArray(set){var index=-1,result=Array(set.size);return set.forEach((function(value){result[++index]=value})),result}var uid,arrayProto=Array.prototype,funcProto=Function.prototype,objectProto=Object.prototype,coreJsData=root["__core-js_shared__"],maskSrcKey=(uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||""))?"Symbol(src)_1."+uid:"",funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,objectToString=objectProto.toString,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Buffer=moduleExports?root.Buffer:void 0,Symbol=root.Symbol,Uint8Array=root.Uint8Array,getPrototype=overArg(Object.getPrototypeOf,Object),objectCreate=Object.create,propertyIsEnumerable=objectProto.propertyIsEnumerable,splice=arrayProto.splice,nativeGetSymbols=Object.getOwnPropertySymbols,nativeIsBuffer=Buffer?Buffer.isBuffer:void 0,nativeKeys=overArg(Object.keys,Object),DataView=getNative(root,"DataView"),Map=getNative(root,"Map"),Promise=getNative(root,"Promise"),Set=getNative(root,"Set"),WeakMap=getNative(root,"WeakMap"),nativeCreate=getNative(Object,"create"),dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap),symbolProto=Symbol?Symbol.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function Hash(entries){var index=-1,length=entries?entries.length:0;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function ListCache(entries){var index=-1,length=entries?entries.length:0;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function MapCache(entries){var index=-1,length=entries?entries.length:0;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function Stack(entries){this.__data__=new ListCache(entries)}function arrayLikeKeys(value,inherited){var result=isArray(value)||function(value){return function(value){return function(value){return!!value&&"object"==typeof value}(value)&&isArrayLike(value)}(value)&&hasOwnProperty.call(value,"callee")&&(!propertyIsEnumerable.call(value,"callee")||objectToString.call(value)==argsTag)}(value)?function(n,iteratee){for(var index=-1,result=Array(n);++index<n;)result[index]=iteratee(index);return result}(value.length,String):[],length=result.length,skipIndexes=!!length;for(var key in value)!inherited&&!hasOwnProperty.call(value,key)||skipIndexes&&("length"==key||isIndex(key,length))||result.push(key);return result}function assignValue(object,key,value){var objValue=object[key];hasOwnProperty.call(object,key)&&eq(objValue,value)&&(void 0!==value||key in object)||(object[key]=value)}function assocIndexOf(array,key){for(var length=array.length;length--;)if(eq(array[length][0],key))return length;return-1}function baseClone(value,isDeep,isFull,customizer,key,object,stack){var result;if(customizer&&(result=object?customizer(value,key,object,stack):customizer(value)),void 0!==result)return result;if(!isObject(value))return value;var isArr=isArray(value);if(isArr){if(result=function(array){var length=array.length,result=array.constructor(length);length&&"string"==typeof array[0]&&hasOwnProperty.call(array,"index")&&(result.index=array.index,result.input=array.input);return result}(value),!isDeep)return function(source,array){var index=-1,length=source.length;array||(array=Array(length));for(;++index<length;)array[index]=source[index];return array}(value,result)}else{var tag=getTag(value),isFunc=tag==funcTag||tag==genTag;if(isBuffer(value))return function(buffer,isDeep){if(isDeep)return buffer.slice();var result=new buffer.constructor(buffer.length);return buffer.copy(result),result}(value,isDeep);if("[object Object]"==tag||tag==argsTag||isFunc&&!object){if(isHostObject(value))return object?value:{};if(result=function(object){return"function"!=typeof object.constructor||isPrototype(object)?{}:(proto=getPrototype(object),isObject(proto)?objectCreate(proto):{});var proto}(isFunc?{}:value),!isDeep)return function(source,object){return copyObject(source,getSymbols(source),object)}(value,function(object,source){return object&&copyObject(source,keys(source),object)}(result,value))}else{if(!cloneableTags[tag])return object?value:{};result=function(object,tag,cloneFunc,isDeep){var Ctor=object.constructor;switch(tag){case"[object ArrayBuffer]":return cloneArrayBuffer(object);case boolTag:case"[object Date]":return new Ctor(+object);case dataViewTag:return function(dataView,isDeep){var buffer=isDeep?cloneArrayBuffer(dataView.buffer):dataView.buffer;return new dataView.constructor(buffer,dataView.byteOffset,dataView.byteLength)}(object,isDeep);case float32Tag:case float64Tag:case int8Tag:case int16Tag:case int32Tag:case uint8Tag:case"[object Uint8ClampedArray]":case uint16Tag:case uint32Tag:return function(typedArray,isDeep){var buffer=isDeep?cloneArrayBuffer(typedArray.buffer):typedArray.buffer;return new typedArray.constructor(buffer,typedArray.byteOffset,typedArray.length)}(object,isDeep);case mapTag:return function(map,isDeep,cloneFunc){return arrayReduce(isDeep?cloneFunc(mapToArray(map),!0):mapToArray(map),addMapEntry,new map.constructor)}(object,isDeep,cloneFunc);case"[object Number]":case"[object String]":return new Ctor(object);case"[object RegExp]":return function(regexp){var result=new regexp.constructor(regexp.source,reFlags.exec(regexp));return result.lastIndex=regexp.lastIndex,result}(object);case setTag:return function(set,isDeep,cloneFunc){return arrayReduce(isDeep?cloneFunc(setToArray(set),!0):setToArray(set),addSetEntry,new set.constructor)}(object,isDeep,cloneFunc);case"[object Symbol]":return symbol=object,symbolValueOf?Object(symbolValueOf.call(symbol)):{}}var symbol}(value,tag,baseClone,isDeep)}}stack||(stack=new Stack);var stacked=stack.get(value);if(stacked)return stacked;if(stack.set(value,result),!isArr)var props=isFull?function(object){return function(object,keysFunc,symbolsFunc){var result=keysFunc(object);return isArray(object)?result:function(array,values){for(var index=-1,length=values.length,offset=array.length;++index<length;)array[offset+index]=values[index];return array}(result,symbolsFunc(object))}(object,keys,getSymbols)}(value):keys(value);return function(array,iteratee){for(var index=-1,length=array?array.length:0;++index<length&&!1!==iteratee(array[index],index,array););}(props||value,(function(subValue,key){props&&(subValue=value[key=subValue]),assignValue(result,key,baseClone(subValue,isDeep,isFull,customizer,key,value,stack))})),result}function baseIsNative(value){return!(!isObject(value)||(func=value,maskSrcKey&&maskSrcKey in func))&&(isFunction(value)||isHostObject(value)?reIsNative:reIsHostCtor).test(toSource(value));var func}function cloneArrayBuffer(arrayBuffer){var result=new arrayBuffer.constructor(arrayBuffer.byteLength);return new Uint8Array(result).set(new Uint8Array(arrayBuffer)),result}function copyObject(source,props,object,customizer){object||(object={});for(var index=-1,length=props.length;++index<length;){var key=props[index],newValue=customizer?customizer(object[key],source[key],key,object,source):void 0;assignValue(object,key,void 0===newValue?source[key]:newValue)}return object}function getMapData(map,key){var value,type,data=map.__data__;return("string"==(type=typeof(value=key))||"number"==type||"symbol"==type||"boolean"==type?"__proto__"!==value:null===value)?data["string"==typeof key?"string":"hash"]:data.map}function getNative(object,key){var value=function(object,key){return null==object?void 0:object[key]}(object,key);return baseIsNative(value)?value:void 0}Hash.prototype.clear=function(){this.__data__=nativeCreate?nativeCreate(null):{}},Hash.prototype.delete=function(key){return this.has(key)&&delete this.__data__[key]},Hash.prototype.get=function(key){var data=this.__data__;if(nativeCreate){var result=data[key];return"__lodash_hash_undefined__"===result?void 0:result}return hasOwnProperty.call(data,key)?data[key]:void 0},Hash.prototype.has=function(key){var data=this.__data__;return nativeCreate?void 0!==data[key]:hasOwnProperty.call(data,key)},Hash.prototype.set=function(key,value){return this.__data__[key]=nativeCreate&&void 0===value?"__lodash_hash_undefined__":value,this},ListCache.prototype.clear=function(){this.__data__=[]},ListCache.prototype.delete=function(key){var data=this.__data__,index=assocIndexOf(data,key);return!(index<0)&&(index==data.length-1?data.pop():splice.call(data,index,1),!0)},ListCache.prototype.get=function(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?void 0:data[index][1]},ListCache.prototype.has=function(key){return assocIndexOf(this.__data__,key)>-1},ListCache.prototype.set=function(key,value){var data=this.__data__,index=assocIndexOf(data,key);return index<0?data.push([key,value]):data[index][1]=value,this},MapCache.prototype.clear=function(){this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}},MapCache.prototype.delete=function(key){return getMapData(this,key).delete(key)},MapCache.prototype.get=function(key){return getMapData(this,key).get(key)},MapCache.prototype.has=function(key){return getMapData(this,key).has(key)},MapCache.prototype.set=function(key,value){return getMapData(this,key).set(key,value),this},Stack.prototype.clear=function(){this.__data__=new ListCache},Stack.prototype.delete=function(key){return this.__data__.delete(key)},Stack.prototype.get=function(key){return this.__data__.get(key)},Stack.prototype.has=function(key){return this.__data__.has(key)},Stack.prototype.set=function(key,value){var cache=this.__data__;if(cache instanceof ListCache){var pairs=cache.__data__;if(!Map||pairs.length<199)return pairs.push([key,value]),this;cache=this.__data__=new MapCache(pairs)}return cache.set(key,value),this};var getSymbols=nativeGetSymbols?overArg(nativeGetSymbols,Object):function(){return[]},getTag=function(value){return objectToString.call(value)};function isIndex(value,length){return!!(length=null==length?9007199254740991:length)&&("number"==typeof value||reIsUint.test(value))&&value>-1&&value%1==0&&value<length}function isPrototype(value){var Ctor=value&&value.constructor;return value===("function"==typeof Ctor&&Ctor.prototype||objectProto)}function toSource(func){if(null!=func){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}function eq(value,other){return value===other||value!=value&&other!=other}(DataView&&getTag(new DataView(new ArrayBuffer(1)))!=dataViewTag||Map&&getTag(new Map)!=mapTag||Promise&&"[object Promise]"!=getTag(Promise.resolve())||Set&&getTag(new Set)!=setTag||WeakMap&&"[object WeakMap]"!=getTag(new WeakMap))&&(getTag=function(value){var result=objectToString.call(value),Ctor="[object Object]"==result?value.constructor:void 0,ctorString=Ctor?toSource(Ctor):void 0;if(ctorString)switch(ctorString){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return"[object Promise]";case setCtorString:return setTag;case weakMapCtorString:return"[object WeakMap]"}return result});var isArray=Array.isArray;function isArrayLike(value){return null!=value&&function(value){return"number"==typeof value&&value>-1&&value%1==0&&value<=9007199254740991}(value.length)&&!isFunction(value)}var isBuffer=nativeIsBuffer||function(){return!1};function isFunction(value){var tag=isObject(value)?objectToString.call(value):"";return tag==funcTag||tag==genTag}function isObject(value){var type=typeof value;return!!value&&("object"==type||"function"==type)}function keys(object){return isArrayLike(object)?arrayLikeKeys(object):function(object){if(!isPrototype(object))return nativeKeys(object);var result=[];for(var key in Object(object))hasOwnProperty.call(object,key)&&"constructor"!=key&&result.push(key);return result}(object)}module.exports=function(value){return baseClone(value,!0,!0)}}).call(this,__webpack_require__(187)(module))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const tslib_1=__webpack_require__(11),axios_1=tslib_1.__importDefault(__webpack_require__(189)),events_1=__webpack_require__(4),fs_1=tslib_1.__importDefault(__webpack_require__(33)),humps_1=__webpack_require__(212),url_join_1=tslib_1.__importDefault(__webpack_require__(213)),util_1=__webpack_require__(0),uuid_1=__webpack_require__(313);class SpaceBunny extends events_1.EventEmitter{constructor(opts={}){super(),this.autoReconnect=!0,this.reconnectTimeout=5e3,this.verbose=!0,this.getEndpointConfigs=()=>tslib_1.__awaiter(this,void 0,void 0,(function*(){if(Object.keys(this.endpointConfigs).length>0)return this.endpointConfigs;try{if(!(this.deviceId&&this.secret||this.deviceKey)){if(this.client&&this.secret){if(this.host&&this.port&&this.vhost)return this.connectionParams.protocols={},this.tls?this.connectionParams.protocols[this.protocol]={tlsPort:this.port}:this.connectionParams.protocols[this.protocol]={port:this.port},this.endpointConfigs={connection:this.connectionParams,liveStreams:[]},this.manualConfigurations=!0,this.endpointConfigs;const hostname=this.generateHostname(),options={url:url_join_1.default(hostname,this.endpoint.liveStreamKeyConfigurationsPath),method:"GET",responseType:"json",headers:{"Live-Stream-Key-Client":this.client,"Live-Stream-Key-Secret":this.secret,"Content-Type":"application/json"}},response=yield axios_1.default(options);return this.endpointConfigs=humps_1.camelizeKeys(response.data),this.connectionParams=this.endpointConfigs.connection||{},this.liveStreams=this.endpointConfigs.liveStreams||[],this.endpointConfigs}throw new Error("Missing Device Key or wrong connection parameters")}{const hostname=this.generateHostname(),uri=url_join_1.default(hostname,this.endpoint.deviceConfigurationsPath);if(this.deviceKey){const options={url:uri,method:"GET",responseType:"json",headers:{"Device-Key":this.deviceKey,"Content-Type":"application/json"}},response=yield axios_1.default(options);return this.endpointConfigs=humps_1.camelizeKeys(response.data),this.connectionParams=this.endpointConfigs.connection||{},this.channels=this.endpointConfigs.channels||[],this.endpointConfigs}if(this.deviceId&&this.secret&&this.host&&this.port&&this.vhost)return this.connectionParams.protocols={},this.tls?this.connectionParams.protocols[this.protocol]={tlsPort:this.port}:this.connectionParams.protocols[this.protocol]={port:this.port},this.endpointConfigs={connection:this.connectionParams,channels:[]},this.manualConfigurations=!0,this.endpointConfigs}}catch(error){throw this.log("error","Error getting endpoint configurations."),error}return{}})),this.getClassName=()=>this.constructor.name,this.log=(level,message,...meta)=>{const msg=message instanceof Error?message.message:message,prefixedMessage=`${this.getClassName()} - ${msg}`;this.verbose&&this.emit("log",Object.assign({level:level,message:prefixedMessage},meta))},this.isConnected=()=>!1,this.isStreamClient=()=>this.getClassName().includes("Stream"),this.getChannels=()=>this.channels||this.endpointConfigs.channels||[],this.getDeviceId=()=>this.deviceId||this.connectionParams.deviceId,this.getClient=()=>this.client,this.getInboxTopic=()=>this.inboxTopic,this.liveStreamByName=streamName=>{const liveStreams=this.liveStreams.filter((stream=>stream.name===streamName));return liveStreams.length>0&&liveStreams[0].name||streamName},this.liveStreamExists=streamName=>{if(this.manualConfigurations)return!0;if(util_1.isNullOrUndefined(streamName)||0===streamName.length)return!1;return this.liveStreams.filter((stream=>stream.name===streamName)).length>0},this.tempQueue=(prefix,suffix,currentTime)=>{const timestamp=currentTime||(new Date).getTime(),deviceId=this.connectionParams.client||this.connectionParams.deviceId;return`${uuid_1.v4()}-${timestamp}-${deviceId}-`+this.exchangeName(prefix,suffix)+"."+this.tempQueueSuffix},this.exchangeName=(prefix,suffix)=>prefix.length>0&&suffix.length>0?`${this.liveStreamByName(prefix)}.${suffix}`:""+suffix,this.generateHostname=()=>{if(this.endpoint.url)return this.endpoint.url;const port=this.tls?this.endpoint.securePort:this.endpoint.port;let hostname=`${this.endpoint.host}:${port}`;const protocol=this.tls?this.endpoint.secureProtocol:this.endpoint.protocol;return hostname.startsWith(protocol)||(hostname=`${protocol}://${hostname}`),hostname},this.loadCachedMessages=()=>{let cachedMessages=[];this.cachedMessagesPath&&fs_1.default.existsSync(this.cachedMessagesPath)&&(cachedMessages=JSON.parse(fs_1.default.readFileSync(this.cachedMessagesPath,{encoding:"utf-8"}))),this.cachedMessages=cachedMessages||[]},this.writeCachedMessagesFile=()=>{try{fs_1.default.writeFileSync(this.cachedMessagesPath,JSON.stringify(this.cachedMessages,null,2)),this.log("silly","Cached messages written to: "+this.cachedMessagesPath)}catch(error){this.log("error","Error writing cached messages"),this.log("error",error)}},this.cacheMessage=(channel,message,options)=>{const messageToCache={channel:channel,message:message,options:options};this.cachedMessages.includes(messageToCache)||(this.cachedMessages.length>=this.cacheSize&&(this.log("debug","Message cache full, removing eldest message"),this.cachedMessages.shift()),this.log("warn","Caching message.."),this.log("silly","Message cached:",messageToCache),this.cachedMessages.push(messageToCache),this.writeCachedMessagesFile())},this.connectionParams=humps_1.camelizeKeys(opts);const{endpoint:endpoint,deviceKey:deviceKey,channels:channels,deviceId:deviceId,client:client,secret:secret,host:host,port:port,vhost:vhost,inboxTopic:inboxTopic,tls:tls,verbose:verbose,autoReconnect:autoReconnect,heartbeat:heartbeat,connectionTimeout:connectionTimeout,caching:caching,cacheSize:cacheSize,cachedMessagesPath:cachedMessagesPath}=this.connectionParams;this.endpoint=Object.assign(Object.assign({},{protocol:"http",secureProtocol:"https",host:"api.spacebunny.io",port:80,securePort:443,deviceConfigurationsPath:"device_configurations",liveStreamKeyConfigurationsPath:"live_stream_key_configurations"}),endpoint),this.manualConfigurations=!1,this.deviceKey=deviceKey,this.channels=channels,this.deviceId=deviceId,this.client=client,this.secret=secret,this.host=host,this.port=port,this.vhost=vhost,this.inboxTopic=inboxTopic||"inbox",this.liveStreamSuffix="live_stream",this.tempQueueSuffix="temp",this.liveStreams=[],this.tls=!(!1===tls),this.autoReconnect=!(!1===autoReconnect),this.verbose=!0===verbose,this.heartbeat=heartbeat||SpaceBunny.DEFAULT_HEARTBEAT,this.connectionTimeout=connectionTimeout||SpaceBunny.DEFAULT_CONNECTION_TIMEOUT,this.endpointConfigs={},this.caching=!0===caching,this.cacheSize=cacheSize||SpaceBunny.DEFAULT_CACHE_SIZE,this.cachedMessagesPath=cachedMessagesPath,this.loadCachedMessages()}}SpaceBunny.DEFAULT_CONNECTION_TIMEOUT=5e3,SpaceBunny.DEFAULT_RECONNECT_TIMEOUT=5e3,SpaceBunny.DEFAULT_HEARTBEAT=60,SpaceBunny.DEFAULT_CACHE_SIZE=100,exports.default=SpaceBunny},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(3);function encode(val){return encodeURIComponent(val).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}module.exports=function(url,params,paramsSerializer){if(!params)return url;var serializedParams;if(paramsSerializer)serializedParams=paramsSerializer(params);else if(utils.isURLSearchParams(params))serializedParams=params.toString();else{var parts=[];utils.forEach(params,(function(val,key){null!=val&&(utils.isArray(val)?key+="[]":val=[val],utils.forEach(val,(function(v){utils.isDate(v)?v=v.toISOString():utils.isObject(v)&&(v=JSON.stringify(v)),parts.push(encode(key)+"="+encode(v))})))})),serializedParams=parts.join("&")}if(serializedParams){var hashmarkIndex=url.indexOf("#");-1!==hashmarkIndex&&(url=url.slice(0,hashmarkIndex)),url+=(-1===url.indexOf("?")?"?":"&")+serializedParams}return url}},function(module,exports,__webpack_require__){"use strict";var enhanceError=__webpack_require__(79);module.exports=function(message,config,code,request,response){var error=new Error(message);return enhanceError(error,config,code,request,response)}},function(module,exports){module.exports=require("https")},function(module,exports,__webpack_require__){"use strict";var xtend=__webpack_require__(54),Readable=__webpack_require__(20).Readable,streamsOpts={objectMode:!0},defaultStoreOptions={clean:!0},Map=__webpack_require__(220);function Store(options){if(!(this instanceof Store))return new Store(options);this.options=options||{},this.options=xtend(defaultStoreOptions,options),this._inflights=new Map}Store.prototype.put=function(packet,cb){return this._inflights.set(packet.messageId,packet),cb&&cb(),this},Store.prototype.createStream=function(){var stream=new Readable(streamsOpts),destroyed=!1,values=[],i=0;return this._inflights.forEach((function(value,key){values.push(value)})),stream._read=function(){!destroyed&&i<values.length?this.push(values[i++]):this.push(null)},stream.destroy=function(){if(!destroyed){var self=this;destroyed=!0,setTimeout((function(){self.emit("close")}),0)}},stream},Store.prototype.del=function(packet,cb){return(packet=this._inflights.get(packet.messageId))?(this._inflights.delete(packet.messageId),cb(null,packet)):cb&&cb(new Error("missing packet")),this},Store.prototype.get=function(packet,cb){return(packet=this._inflights.get(packet.messageId))?cb(null,packet):cb&&cb(new Error("missing packet")),this},Store.prototype.close=function(cb){this.options.clean&&(this._inflights=null),cb&&cb()},module.exports=Store},function(module,exports){module.exports=function(){for(var target={},i=0;i<arguments.length;i++){var source=arguments[i];for(var key in source)hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var hasOwnProperty=Object.prototype.hasOwnProperty},function(module,exports,__webpack_require__){"use strict";var isValue=__webpack_require__(23),possibleTypes={object:!0,function:!0,undefined:!0};module.exports=function(value){return!!isValue(value)&&hasOwnProperty.call(possibleTypes,typeof value)}},function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(236)()?Object.assign:__webpack_require__(237)},function(module,exports,__webpack_require__){"use strict";var Iterator,clear=__webpack_require__(96),assign=__webpack_require__(56),callable=__webpack_require__(16),value=__webpack_require__(9),d=__webpack_require__(8),autoBind=__webpack_require__(256),Symbol=__webpack_require__(14),defineProperty=Object.defineProperty,defineProperties=Object.defineProperties;module.exports=Iterator=function(list,context){if(!(this instanceof Iterator))throw new TypeError("Constructor requires 'new'");defineProperties(this,{__list__:d("w",value(list)),__context__:d("w",context),__nextIndex__:d("w",0)}),context&&(callable(context.on),context.on("_add",this._onAdd),context.on("_delete",this._onDelete),context.on("_clear",this._onClear))},delete Iterator.prototype.constructor,defineProperties(Iterator.prototype,assign({_next:d((function(){var i;if(this.__list__)return this.__redo__&&void 0!==(i=this.__redo__.shift())?i:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()})),next:d((function(){return this._createResult(this._next())})),_createResult:d((function(i){return void 0===i?{done:!0,value:void 0}:{done:!1,value:this._resolve(i)}})),_resolve:d((function(i){return this.__list__[i]})),_unBind:d((function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)})),toString:d((function(){return"[object "+(this[Symbol.toStringTag]||"Object")+"]"}))},autoBind({_onAdd:d((function(index){index>=this.__nextIndex__||(++this.__nextIndex__,this.__redo__?(this.__redo__.forEach((function(redo,i){redo>=index&&(this.__redo__[i]=++redo)}),this),this.__redo__.push(index)):defineProperty(this,"__redo__",d("c",[index])))})),_onDelete:d((function(index){var i;index>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(-1!==(i=this.__redo__.indexOf(index))&&this.__redo__.splice(i,1),this.__redo__.forEach((function(redo,j){redo>index&&(this.__redo__[j]=--redo)}),this)))})),_onClear:d((function(){this.__redo__&&clear.call(this.__redo__),this.__nextIndex__=0}))}))),defineProperty(Iterator.prototype,Symbol.iterator,d((function(){return this})))},function(module,exports,__webpack_require__){"use strict";var ERR_STREAM_PREMATURE_CLOSE=__webpack_require__(17).codes.ERR_STREAM_PREMATURE_CLOSE;function noop(){}module.exports=function eos(stream,opts,callback){if("function"==typeof opts)return eos(stream,null,opts);opts||(opts={}),callback=function(callback){var called=!1;return function(){if(!called){called=!0;for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];callback.apply(this,args)}}}(callback||noop);var readable=opts.readable||!1!==opts.readable&&stream.readable,writable=opts.writable||!1!==opts.writable&&stream.writable,onlegacyfinish=function(){stream.writable||onfinish()},writableEnded=stream._writableState&&stream._writableState.finished,onfinish=function(){writable=!1,writableEnded=!0,readable||callback.call(stream)},readableEnded=stream._readableState&&stream._readableState.endEmitted,onend=function(){readable=!1,readableEnded=!0,writable||callback.call(stream)},onerror=function(err){callback.call(stream,err)},onclose=function(){var err;return readable&&!readableEnded?(stream._readableState&&stream._readableState.ended||(err=new ERR_STREAM_PREMATURE_CLOSE),callback.call(stream,err)):writable&&!writableEnded?(stream._writableState&&stream._writableState.ended||(err=new ERR_STREAM_PREMATURE_CLOSE),callback.call(stream,err)):void 0},onrequest=function(){stream.req.on("finish",onfinish)};return!function(stream){return stream.setHeader&&"function"==typeof stream.abort}(stream)?writable&&!stream._writableState&&(stream.on("end",onlegacyfinish),stream.on("close",onlegacyfinish)):(stream.on("complete",onfinish),stream.on("abort",onclose),stream.req?onrequest():stream.on("request",onrequest)),stream.on("end",onend),stream.on("finish",onfinish),!1!==opts.error&&stream.on("error",onerror),stream.on("close",onclose),function(){stream.removeListener("complete",onfinish),stream.removeListener("abort",onclose),stream.removeListener("request",onrequest),stream.req&&stream.req.removeListener("finish",onfinish),stream.removeListener("end",onlegacyfinish),stream.removeListener("close",onlegacyfinish),stream.removeListener("finish",onfinish),stream.removeListener("end",onend),stream.removeListener("error",onerror),stream.removeListener("close",onclose)}}},function(module,exports,__webpack_require__){"use strict";var tls=__webpack_require__(47),debug=__webpack_require__(13)("mqttjs:tls");module.exports=function(mqttClient,opts){var connection;function handleTLSerrors(err){opts.rejectUnauthorized&&mqttClient.emit("error",err),connection.end()}return opts.port=opts.port||8883,opts.host=opts.hostname||opts.host||"localhost",opts.servername=opts.host,opts.rejectUnauthorized=!1!==opts.rejectUnauthorized,delete opts.path,debug("port %d host %s rejectUnauthorized %b",opts.port,opts.host,opts.rejectUnauthorized),(connection=tls.connect(opts)).on("secureConnect",(function(){opts.rejectUnauthorized&&!connection.authorized?connection.emit("error",new Error("TLS not authorized")):connection.removeListener("error",handleTLSerrors)})),connection.on("error",handleTLSerrors),connection}},function(module,exports,__webpack_require__){var stream=__webpack_require__(20),eos=__webpack_require__(291),inherits=__webpack_require__(2),shift=__webpack_require__(294),SIGNAL_FLUSH=Buffer.from&&Buffer.from!==Uint8Array.from?Buffer.from([0]):new Buffer([0]),onuncork=function(self,fn){self._corked?self.once("uncork",fn):fn()},destroyer=function(self,end){return function(err){err?function(self,err){self._autoDestroy&&self.destroy(err)}(self,"premature close"===err.message?null:err):end&&!self._ended&&self.end()}},Duplexify=function(writable,readable,opts){if(!(this instanceof Duplexify))return new Duplexify(writable,readable,opts);stream.Duplex.call(this,opts),this._writable=null,this._readable=null,this._readable2=null,this._autoDestroy=!opts||!1!==opts.autoDestroy,this._forwardDestroy=!opts||!1!==opts.destroy,this._forwardEnd=!opts||!1!==opts.end,this._corked=1,this._ondrain=null,this._drained=!1,this._forwarding=!1,this._unwrite=null,this._unread=null,this._ended=!1,this.destroyed=!1,writable&&this.setWritable(writable),readable&&this.setReadable(readable)};inherits(Duplexify,stream.Duplex),Duplexify.obj=function(writable,readable,opts){return opts||(opts={}),opts.objectMode=!0,opts.highWaterMark=16,new Duplexify(writable,readable,opts)},Duplexify.prototype.cork=function(){1==++this._corked&&this.emit("cork")},Duplexify.prototype.uncork=function(){this._corked&&0==--this._corked&&this.emit("uncork")},Duplexify.prototype.setWritable=function(writable){if(this._unwrite&&this._unwrite(),this.destroyed)writable&&writable.destroy&&writable.destroy();else if(null!==writable&&!1!==writable){var self=this,unend=eos(writable,{writable:!0,readable:!1},destroyer(this,this._forwardEnd)),ondrain=function(){var ondrain=self._ondrain;self._ondrain=null,ondrain&&ondrain()};this._unwrite&&process.nextTick(ondrain),this._writable=writable,this._writable.on("drain",ondrain),this._unwrite=function(){self._writable.removeListener("drain",ondrain),unend()},this.uncork()}else this.end()},Duplexify.prototype.setReadable=function(readable){if(this._unread&&this._unread(),this.destroyed)readable&&readable.destroy&&readable.destroy();else{if(null===readable||!1===readable)return this.push(null),void this.resume();var rs,self=this,unend=eos(readable,{writable:!1,readable:!0},destroyer(this)),onreadable=function(){self._forward()},onend=function(){self.push(null)};this._drained=!0,this._readable=readable,this._readable2=readable._readableState?readable:(rs=readable,new stream.Readable({objectMode:!0,highWaterMark:16}).wrap(rs)),this._readable2.on("readable",onreadable),this._readable2.on("end",onend),this._unread=function(){self._readable2.removeListener("readable",onreadable),self._readable2.removeListener("end",onend),unend()},this._forward()}},Duplexify.prototype._read=function(){this._drained=!0,this._forward()},Duplexify.prototype._forward=function(){if(!this._forwarding&&this._readable2&&this._drained){var data;for(this._forwarding=!0;this._drained&&null!==(data=shift(this._readable2));)this.destroyed||(this._drained=this.push(data));this._forwarding=!1}},Duplexify.prototype.destroy=function(err){if(!this.destroyed){this.destroyed=!0;var self=this;process.nextTick((function(){self._destroy(err)}))}},Duplexify.prototype._destroy=function(err){if(err){var ondrain=this._ondrain;this._ondrain=null,ondrain?ondrain(err):this.emit("error",err)}this._forwardDestroy&&(this._readable&&this._readable.destroy&&this._readable.destroy(),this._writable&&this._writable.destroy&&this._writable.destroy()),this.emit("close")},Duplexify.prototype._write=function(data,enc,cb){return this.destroyed?cb():this._corked?onuncork(this,this._write.bind(this,data,enc,cb)):data===SIGNAL_FLUSH?this._finish(cb):this._writable?void(!1===this._writable.write(data)?this._ondrain=cb:cb()):cb()},Duplexify.prototype._finish=function(cb){var self=this;this.emit("preend"),onuncork(this,(function(){var ws,fn;ws=self._forwardEnd&&self._writable,fn=function(){!1===self._writableState.prefinished&&(self._writableState.prefinished=!0),self.emit("prefinish"),onuncork(self,cb)},ws?ws._writableState&&ws._writableState.finished?fn():ws._writableState?ws.end(fn):(ws.end(),fn()):fn()}))},Duplexify.prototype.end=function(data,enc,cb){return"function"==typeof data?this.end(null,null,data):"function"==typeof enc?this.end(data,null,enc):(this._ended=!0,data&&this.write(data),this._writableState.ending||this.write(SIGNAL_FLUSH),stream.Writable.prototype.end.call(this,cb))},module.exports=Duplexify},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const tslib_1=__webpack_require__(11),amqp=tslib_1.__importStar(__webpack_require__(129)),lodash_clonedeep_1=tslib_1.__importDefault(__webpack_require__(48)),util_1=__webpack_require__(0),amqpMessage_1=tslib_1.__importDefault(__webpack_require__(188)),spacebunny_1=tslib_1.__importDefault(__webpack_require__(49)),utils_1=__webpack_require__(30);class AmqpClient extends spacebunny_1.default{constructor(opts={}){super(opts),this.onMessage=(callback,opts={})=>tslib_1.__awaiter(this,void 0,void 0,(function*(){const name=this.addAmqpListener(callback,opts);return yield this.bindAmqpListener(name),name})),this.publish=(channel,message,opts={},publishOpts={})=>tslib_1.__awaiter(this,void 0,void 0,(function*(){const{routingKey:routingKey,topic:topic,withConfirm:withConfirm=!1}=opts,ch=yield this.createChannel("output",{withConfirm:withConfirm});if(!this.isConnected())throw new Error(`${this.getClassName()} - Error sending message on channel ${channel} when client is not connected`);try{const encapsulatedContent=utils_1.encapsulateContent(message),rKey=this.routingKeyFor({channel:channel,routingKey:routingKey,topic:topic}),deviceId=this.getDeviceId();yield ch.checkExchange(deviceId);const res=ch.publish(deviceId,rKey,Buffer.from(encapsulatedContent),publishOpts);return res?(!0===withConfirm&&res&&ch&&(yield ch.waitForConfirms()),this.log("debug",`Message published on channel ${channel} successfully`),!0):(this.log("error",`Publish on channel ${channel} failed: ${encapsulatedContent}`),!1)}catch(error){throw this.log("error","Error publishing on channel "+channel),error}})),this.disconnect=()=>tslib_1.__awaiter(this,void 0,void 0,(function*(){if(this.isConnected())try{const channels=Object.keys(this.amqpChannels);for(let index=0;index<channels.length;index+=1){const channelName=channels[index];this.amqpChannels[channelName]&&(yield this.amqpChannels[channelName].close(),delete this.amqpChannels[channelName])}this.amqpConnection.removeAllListeners(),yield this.amqpConnection.close()}catch(error){throw this.log("error","Error disconnecting client."),error}else this.log("info","Client already disconnected.");return this.amqpConnection=void 0,this.amqpChannels={},this.connected=!1,this.emit("disconnect"),!0})),this.connect=(opts={},socketOptions={})=>tslib_1.__awaiter(this,void 0,void 0,(function*(){if(this.isConnected())return this.amqpConnection;yield this.getEndpointConfigs();try{this.log("debug","Connecting client.."),this.amqpConnection=yield amqp.connect({protocol:this.tls?this.tlsProtocol:this.protocol,hostname:this.connectionParams.host,port:this.tls?this.connectionParams.protocols.amqp.tlsPort:this.connectionParams.protocols.amqp.port,username:this.connectionParams.deviceId||this.connectionParams.client,password:this.connectionParams.secret,vhost:this.connectionParams.vhost.replace("/","%2f"),frameMax:opts.frameMax||this.defaultConnectionOpts.frameMax,heartbeat:opts.heartbeat||this.heartbeat},Object.assign({timeout:this.connectionTimeout},socketOptions));const onError=err=>{err&&(this.emit("error",err),this.log("error",err)),util_1.isNullOrUndefined(this.amqpConnection)||(this.amqpConnection.removeAllListeners(),this.amqpConnection=void 0),this.connected=!1,this.autoReconnect&&this.connect(opts)},onBlock=reason=>{reason&&(this.emit("blocked",reason),this.log("warn",reason))};return this.amqpConnection.on("error",onError),this.amqpConnection.on("close",onError),this.amqpConnection.on("blocked",onBlock),this.amqpConnection.on("unblocked",onBlock),this.connected=!0,this.emit("connect"),this.log("debug","Client connected!"),this.amqpConnection}catch(error){if(util_1.isNullOrUndefined(this.amqpConnection)||(this.amqpConnection.removeAllListeners(),this.amqpConnection=void 0),this.connected=!1,this.log("error","Error during connection"),!this.autoReconnect)throw error;{this.log("error",error.message);const timeout=util_1.promisify(setTimeout);yield timeout(this.reconnectTimeout),this.connect(opts)}}})),this.isConnected=()=>void 0!==this.amqpConnection&&this.connected,this.removeAmqpListener=name=>tslib_1.__awaiter(this,void 0,void 0,(function*(){util_1.isNullOrUndefined(this.amqpListeners[name])?this.log("error",`AMQP listener ${name} does not exist.`):(yield this.unsubscribe(this.amqpListeners[name].consumerTag),delete this.amqpListeners[name])})),this.unsubscribe=consumerTag=>tslib_1.__awaiter(this,void 0,void 0,(function*(){if(!this.isConnected())throw new Error(`${this.getClassName()} - Error trying to unsucscribe from ${consumerTag} on an invalid connection`);try{const ch=yield this.createChannel("input");ch&&(yield ch.cancel(consumerTag)),this.log("debug","Unsubscrbed "+consumerTag)}catch(error){throw this.log("error","Error unsubscribing from "+consumerTag),error}})),this.createChannel=(channel,opts={})=>tslib_1.__awaiter(this,void 0,void 0,(function*(){const{withConfirm:withConfirm=!0}=opts,channelName=`${channel}${!0===withConfirm?"WithConfirm":""}`;if(!this.isConnected())throw new Error(this.getClassName()+" - Error trying to open a channel on an invalid connection");try{if(util_1.isNullOrUndefined(this.amqpChannels[channelName])){this.amqpChannels[channelName]=!0===withConfirm||channelName.endsWith("WithConfirm")?yield this.amqpConnection.createConfirmChannel():yield this.amqpConnection.createChannel(),this.emit("channelOpen",channelName);const errorCallback=err=>{err&&this.log("error",err),util_1.isNullOrUndefined(this.amqpChannels[channelName])||(this.amqpChannels[channelName].removeAllListeners(),this.amqpChannels[channelName]=void 0),channel.startsWith("input")&&this.emit("channelClose",channelName)};this.amqpChannels[channelName].on("error",errorCallback),this.amqpChannels[channelName].on("close",errorCallback)}return this.amqpChannels[channelName]}catch(error){throw this.log("error","Error creating channel: "+channelName),error}})),this.closeChannel=(channelName,opts={})=>tslib_1.__awaiter(this,void 0,void 0,(function*(){try{const{withConfirm:withConfirm=!0}=opts,fullChannelName=`${channelName}${!0===withConfirm?"WithConfirm":""}`;this.amqpChannels[fullChannelName]&&(yield this.amqpChannels[fullChannelName].close(),this.amqpChannels[fullChannelName]=void 0)}catch(error){throw this.log("error","Error closing channel "+channelName),error}})),this.consumeCallback=(ch,callback,opts,message)=>{try{const{ack:ack,allUpTo:allUpTo=!1,requeue:requeue=!1}=opts;if(util_1.isNullOrUndefined(message))return;const{discardMine:discardMine,discardFromApi:discardFromApi}=opts,amqpMessage=new amqpMessage_1.default({message:message,receiverId:this.getClient(),channel:ch,subscriptionOpts:{discardMine:discardMine,discardFromApi:discardFromApi}}),ackNeeded=this.autoAck(ack);if(amqpMessage.blackListed())return void(ackNeeded&&amqpMessage.nack({allUpTo:allUpTo,requeue:requeue}));callback(amqpMessage.getContent(),amqpMessage.getFields(),amqpMessage.getProperties()),ackNeeded&&amqpMessage.ack({allUpTo:allUpTo})}catch(error){this.log("error","Error consuming message"),this.log("error",error)}},this.clearConsumers=()=>{const names=Object.keys(this.amqpListeners);for(let index=0;index<names.length;index+=1){const name=names[index];delete this.amqpListeners[name].consumerTag}},this.addAmqpListener=(callback,opts={})=>{const name="subscription-"+(new Date).getTime();return this.amqpListeners[name]={callback:callback,opts:opts},name},this.bindAmqpListeners=()=>tslib_1.__awaiter(this,void 0,void 0,(function*(){const names=Object.keys(this.amqpListeners);for(let index=0;index<names.length;index+=1){const name=names[index];yield this.bindAmqpListener(name)}})),this.bindAmqpListener=name=>tslib_1.__awaiter(this,void 0,void 0,(function*(){if(util_1.isNullOrUndefined(this.amqpListeners[name]))return void this.log("error",`Listner ${name} does not exist.`);if(!util_1.isNullOrUndefined(this.amqpListeners[name].consumerTag))return void this.log("warn",`Listner ${name} already bound to a consumer.`);const{callback:callback,opts:opts}=this.amqpListeners[name],noAck=util_1.isNullOrUndefined(opts.ack),ch=yield this.createChannel("input",{withConfirm:!1});try{yield ch.checkQueue(`${this.getDeviceId()}.${this.getInboxTopic()}`);const{consumerTag:consumerTag}=yield ch.consume(`${this.getDeviceId()}.${this.getInboxTopic()}`,this.consumeCallback.bind(this,ch,callback,opts),{noAck:noAck});this.amqpListeners[name].consumerTag=consumerTag}catch(error){throw this.log("error","Error consuming from input channel."),error}})),this.routingKeyFor=(params={})=>{const{channel:channel,routingKey:routingKey,topic:topic}=params;if(routingKey)return routingKey;let messageRoutingKey=this.getDeviceId();return!util_1.isNullOrUndefined(channel)&&channel.length>0&&(messageRoutingKey+="."+(channel||"")),!util_1.isNullOrUndefined(topic)&&topic.length>0&&(messageRoutingKey+="."+(topic||"")),messageRoutingKey},this.autoAck=ack=>{if(ack)switch(this.ackTypes.includes(ack)||this.log("error","Wrong acknowledge type"),ack){case"auto":return!0;default:return!1}return!1},this.publishCachedMessages=()=>tslib_1.__awaiter(this,void 0,void 0,(function*(){if(this.isConnected()&&this.cachedMessages.length>0){const cachedMessagesToSend=lodash_clonedeep_1.default(this.cachedMessages);this.log("debug",`Publishing ${cachedMessagesToSend.length} cached messages...`);for(let index=0;index<cachedMessagesToSend.length;index+=1){const cachedMessage=cachedMessagesToSend[index];this.log("silly",`Sending message ${index+1} from cache`);const{message:message,channel:channel,options:options}=cachedMessage;if(yield this.publish(channel,message,options)){const itemToRemove=this.cachedMessages.findIndex((el=>util_1.isDeepStrictEqual(el,cachedMessage)));this.cachedMessages.splice(itemToRemove,1)}}this.writeCachedMessagesFile()}})),this.amqpConnection=void 0,this.amqpChannels={},this.protocol="amqp",this.tlsProtocol="amqps",this.defaultConnectionOpts={frameMax:32768},this.ackTypes=["auto","manual"],this.connected=!1,this.amqpListeners={},this.on("connect",(()=>{this.bindAmqpListeners(),this.publishCachedMessages()})),this.on("disconnect",(()=>{this.amqpListeners={}})),this.on("channelClose",(()=>{this.clearConsumers()}))}}exports.default=AmqpClient},function(module,exports,__webpack_require__){"use strict";var ints=__webpack_require__(28);function encodeTable(buffer,val,offset){var start=offset;for(var key in offset+=4,val)if(void 0!==val[key]){var len=Buffer.byteLength(key);buffer.writeUInt8(len,offset),offset++,buffer.write(key,offset,"utf8"),offset+=len,offset+=encodeFieldValue(buffer,val[key],offset)}var size=offset-start;return buffer.writeUInt32BE(size-4,start),size}function encodeFieldValue(buffer,value,offset){var n,start=offset,type=typeof value,val=value;function tag(t){buffer.write(t,offset),offset++}switch(value&&"object"===type&&value.hasOwnProperty("!")&&(val=value.value,type=value["!"]),"number"==type&&(type=(n=val)>=0x8000000000000000||Math.abs(n)<0x4000000000000&&Math.floor(n)!==n?"double":val<128&&val>=-128?"byte":val>=-32768&&val<32768?"short":val>=-2147483648&&val<2147483648?"int":"long"),type){case"string":var len=Buffer.byteLength(val,"utf8");tag("S"),buffer.writeUInt32BE(len,offset),offset+=4,buffer.write(val,offset,"utf8"),offset+=len;break;case"object":null===val?tag("V"):Array.isArray(val)?(tag("A"),offset+=function(buffer,val,offset){var start=offset;offset+=4;for(var i=0,num=val.length;i<num;i++)offset+=encodeFieldValue(buffer,val[i],offset);var size=offset-start;return buffer.writeUInt32BE(size-4,start),size}(buffer,val,offset)):Buffer.isBuffer(val)?(tag("x"),buffer.writeUInt32BE(val.length,offset),offset+=4,val.copy(buffer,offset),offset+=val.length):(tag("F"),offset+=encodeTable(buffer,val,offset));break;case"boolean":tag("t"),buffer.writeUInt8(val?1:0,offset),offset++;break;case"double":case"float64":tag("d"),buffer.writeDoubleBE(val,offset),offset+=8;break;case"byte":case"int8":tag("b"),buffer.writeInt8(val,offset),offset++;break;case"short":case"int16":tag("s"),buffer.writeInt16BE(val,offset),offset+=2;break;case"int":case"int32":tag("I"),buffer.writeInt32BE(val,offset),offset+=4;break;case"long":case"int64":tag("l"),ints.writeInt64BE(buffer,val,offset),offset+=8;break;case"timestamp":tag("T"),ints.writeUInt64BE(buffer,val,offset),offset+=8;break;case"float":tag("f"),buffer.writeFloatBE(val,offset),offset+=4;break;case"decimal":if(tag("D"),!(val.hasOwnProperty("places")&&val.hasOwnProperty("digits")&&val.places>=0&&val.places<256))throw new TypeError("Decimal value must be {'places': 0..255, 'digits': uint32}, got "+JSON.stringify(val));buffer[offset]=val.places,offset++,buffer.writeUInt32BE(val.digits,offset),offset+=4;break;default:throw new TypeError("Unknown type to encode: "+type)}return offset-start}module.exports.encodeTable=encodeTable,module.exports.decodeFields=function decodeFields(slice){var len,key,val,fields={},offset=0,size=slice.length;function decodeFieldValue(){var tag=String.fromCharCode(slice[offset]);switch(offset++,tag){case"b":val=slice.readInt8(offset),offset++;break;case"S":len=slice.readUInt32BE(offset),offset+=4,val=slice.toString("utf8",offset,offset+len),offset+=len;break;case"I":val=slice.readInt32BE(offset),offset+=4;break;case"D":var places=slice[offset];offset++;var digits=slice.readUInt32BE(offset);offset+=4,val={"!":"decimal",value:{places:places,digits:digits}};break;case"T":val=ints.readUInt64BE(slice,offset),offset+=8,val={"!":"timestamp",value:val};break;case"F":len=slice.readUInt32BE(offset),offset+=4,val=decodeFields(slice.slice(offset,offset+len)),offset+=len;break;case"A":len=slice.readUInt32BE(offset),function(until){var vals=[];for(;offset<until;)decodeFieldValue(),vals.push(val);val=vals}((offset+=4)+len);break;case"d":val=slice.readDoubleBE(offset),offset+=8;break;case"f":val=slice.readFloatBE(offset),offset+=4;break;case"l":val=ints.readInt64BE(slice,offset),offset+=8;break;case"s":val=slice.readInt16BE(offset),offset+=2;break;case"t":val=0!=slice[offset],offset++;break;case"V":val=null;break;case"x":len=slice.readUInt32BE(offset),offset+=4,val=slice.slice(offset,offset+len),offset+=len;break;default:throw new TypeError('Unexpected type tag "'+tag+'"')}}for(;offset<size;)len=slice.readUInt8(offset),offset++,key=slice.toString("utf8",offset,offset+len),offset+=len,decodeFieldValue(),fields[key]=val;return fields}},function(module,exports,__webpack_require__){"use strict";var defs=__webpack_require__(26),constants=defs.constants,decode=defs.decode,Buffer=__webpack_require__(27).Buffer,Bits=__webpack_require__(136);module.exports.PROTOCOL_HEADER="AMQP"+String.fromCharCode(0,0,9,1);var FRAME_METHOD=constants.FRAME_METHOD,FRAME_HEARTBEAT=constants.FRAME_HEARTBEAT,FRAME_HEADER=constants.FRAME_HEADER,FRAME_BODY=constants.FRAME_BODY,FRAME_END=constants.FRAME_END,bodyCons=Bits.builder(FRAME_BODY,"channel:16, size:32, payload:size/binary",FRAME_END);module.exports.makeBodyFrame=function(channel,payload){return bodyCons({channel:channel,size:payload.length,payload:payload})};var frameHeaderPattern=Bits.matcher("type:8","channel:16","size:32","rest/binary");module.exports.parseFrame=function(bin,max){var fh=frameHeaderPattern(bin);if(fh){var size=fh.size,rest=fh.rest;if(size>max)throw new Error("Frame size exceeds frame max");if(rest.length>size){if(rest[size]!==FRAME_END)throw new Error("Invalid frame");return{type:fh.type,channel:fh.channel,size:size,payload:rest.slice(0,size),rest:rest.slice(size+1)}}}return!1};var headerPattern=Bits.matcher("class:16","_weight:16","size:64","flagsAndfields/binary"),methodPattern=Bits.matcher("id:32, args/binary"),HEARTBEAT={channel:0};module.exports.decodeFrame=function(frame){var payload=frame.payload;switch(frame.type){case FRAME_METHOD:var idAndArgs=methodPattern(payload),id=idAndArgs.id,fields=decode(id,idAndArgs.args);return{id:id,channel:frame.channel,fields:fields};case FRAME_HEADER:var parts=headerPattern(payload);id=parts.class,fields=decode(id,parts.flagsAndfields);return{id:id,channel:frame.channel,size:parts.size,fields:fields};case FRAME_BODY:return{channel:frame.channel,content:frame.payload};case FRAME_HEARTBEAT:return HEARTBEAT;default:throw new Error("Unknown frame type "+frame.type)}},module.exports.HEARTBEAT_BUF=Buffer.from([constants.FRAME_HEARTBEAT,0,0,0,0,0,0,constants.FRAME_END]),module.exports.HEARTBEAT=HEARTBEAT},function(module,exports,__webpack_require__){"use strict";var ints=__webpack_require__(28),debug=__webpack_require__(139)("bitsyntax-Interpreter");function parse_int(bin,off,sizeInBytes,bigendian,signed){switch(sizeInBytes){case 1:return signed?bin.readInt8(off):bin.readUInt8(off);case 2:return bigendian?signed?bin.readInt16BE(off):bin.readUInt16BE(off):signed?bin.readInt16LE(off):bin.readUInt16LE(off);case 4:return bigendian?signed?bin.readInt32BE(off):bin.readUInt32BE(off):signed?bin.readInt32LE(off):bin.readUInt32LE(off);case 8:return bigendian?(signed?ints.readInt64BE:ints.readUInt64BE)(bin,off):(signed?ints.readInt64LE:ints.readUInt64LE)(bin,off);default:throw"Integers must be 8-, 16-, 32- or 64-bit"}}function parse_float(bin,off,sizeInBytes,bigendian){switch(sizeInBytes){case 4:return bigendian?bin.readFloatBE(off):bin.readFloatLE(off);case 8:return bigendian?bin.readDoubleBE(off):bin.readDoubleLE(off);default:throw"Floats must be 32- or 64-bit"}}function size_of(segment,bound){var size=segment.size;return"string"==typeof size?bound[size]:size}module.exports.match=function(pattern,binary,boundvars){var offset=0,vars=function(env){function scope(){}return scope.prototype=env,new scope}(boundvars),binsize=8*binary.length;function skip_bits(segment){debug("skip bits"),debug(segment);var size=size_of(segment,vars);if(!0===size)return offset%8==0&&(offset=binsize,!0);var bits=segment.unit*size;if(offset+bits>binsize)return!1;offset+=bits}function get_integer(segment){debug("get_integer"),debug(segment);var unit=segment.unit,bitsize=size_of(segment,vars)*unit,byteoffset=offset/8;return offset+=bitsize,!(bitsize%8>0||offset>binsize)&&parse_int(binary,byteoffset,bitsize/8,segment.bigendian,segment.signed)}function get_float(segment){debug("get_float"),debug(segment);var unit=segment.unit,bitsize=size_of(segment,vars)*unit,byteoffset=offset/8;return!((offset+=bitsize)>binsize)&&parse_float(binary,byteoffset,bitsize/8,segment.bigendian)}function get_binary(segment){debug("get_binary"),debug(segment);var unit=segment.unit,size=size_of(segment,vars),byteoffset=offset/8;if(!0===size)return offset=binsize,binary.slice(byteoffset);var bitsize=size*unit;return!(bitsize%8>0||offset+bitsize>binsize)&&(offset+=bitsize,binary.slice(byteoffset,byteoffset+bitsize/8))}function get_string(segment){debug("get_string"),debug(segment);var len=segment.value.length,byteoffset=offset/8;return!((offset+=8*len)>binsize)&&binary.slice(byteoffset,byteoffset+len).toString("utf8")}for(var patternlen=pattern.length,i=0;i<patternlen;i++){var segment=pattern[i],result=!1;if("_"===segment.name)result=skip_bits(segment);else{switch(segment.type){case"string":result=get_string(segment);break;case"integer":result=get_integer(segment);break;case"float":result=get_float(segment);break;case"binary":result=get_binary(segment)}if(!1===result)return!1;if(segment.name)vars[segment.name]=result;else if(segment.value!=result)return!1}}return offset==binsize&&function(scope){var s={};for(var k in scope)scope.hasOwnProperty(k)&&(s[k]=scope[k]);return s}(vars)},module.exports.parse_int=parse_int,module.exports.parse_float=parse_float},function(module,exports,__webpack_require__){var prevTime;function createDebug(namespace){function debug(){if(debug.enabled){var self=debug,curr=+new Date,ms=curr-(prevTime||curr);self.diff=ms,self.prev=prevTime,self.curr=curr,prevTime=curr;for(var args=new Array(arguments.length),i=0;i<args.length;i++)args[i]=arguments[i];args[0]=exports.coerce(args[0]),"string"!=typeof args[0]&&args.unshift("%O");var index=0;args[0]=args[0].replace(/%([a-zA-Z%])/g,(function(match,format){if("%%"===match)return match;index++;var formatter=exports.formatters[format];if("function"==typeof formatter){var val=args[index];match=formatter.call(self,val),args.splice(index,1),index--}return match})),exports.formatArgs.call(self,args);var logFn=debug.log||exports.log||console.log.bind(console);logFn.apply(self,args)}}return debug.namespace=namespace,debug.enabled=exports.enabled(namespace),debug.useColors=exports.useColors(),debug.color=function(namespace){var i,hash=0;for(i in namespace)hash=(hash<<5)-hash+namespace.charCodeAt(i),hash|=0;return exports.colors[Math.abs(hash)%exports.colors.length]}(namespace),"function"==typeof exports.init&&exports.init(debug),debug}(exports=module.exports=createDebug.debug=createDebug.default=createDebug).coerce=function(val){return val instanceof Error?val.stack||val.message:val},exports.disable=function(){exports.enable("")},exports.enable=function(namespaces){exports.save(namespaces),exports.names=[],exports.skips=[];for(var split=("string"==typeof namespaces?namespaces:"").split(/[\s,]+/),len=split.length,i=0;i<len;i++)split[i]&&("-"===(namespaces=split[i].replace(/\*/g,".*?"))[0]?exports.skips.push(new RegExp("^"+namespaces.substr(1)+"$")):exports.names.push(new RegExp("^"+namespaces+"$")))},exports.enabled=function(name){var i,len;for(i=0,len=exports.skips.length;i<len;i++)if(exports.skips[i].test(name))return!1;for(i=0,len=exports.names.length;i<len;i++)if(exports.names[i].test(name))return!0;return!1},exports.humanize=__webpack_require__(141),exports.names=[],exports.skips=[],exports.formatters={}},function(module,exports,__webpack_require__){var buffer=__webpack_require__(5),Buffer=buffer.Buffer;function copyProps(src,dst){for(var key in src)dst[key]=src[key]}function SafeBuffer(arg,encodingOrOffset,length){return Buffer(arg,encodingOrOffset,length)}Buffer.from&&Buffer.alloc&&Buffer.allocUnsafe&&Buffer.allocUnsafeSlow?module.exports=buffer:(copyProps(buffer,exports),exports.Buffer=SafeBuffer),copyProps(Buffer,SafeBuffer),SafeBuffer.from=function(arg,encodingOrOffset,length){if("number"==typeof arg)throw new TypeError("Argument must not be a number");return Buffer(arg,encodingOrOffset,length)},SafeBuffer.alloc=function(size,fill,encoding){if("number"!=typeof size)throw new TypeError("Argument must be a number");var buf=Buffer(size);return void 0!==fill?"string"==typeof encoding?buf.fill(fill,encoding):buf.fill(fill):buf.fill(0),buf},SafeBuffer.allocUnsafe=function(size){if("number"!=typeof size)throw new TypeError("Argument must be a number");return Buffer(size)},SafeBuffer.allocUnsafeSlow=function(size){if("number"!=typeof size)throw new TypeError("Argument must be a number");return buffer.SlowBuffer(size)}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(28);var $=__webpack_require__(0).format,parse=__webpack_require__(43).parse,interp=__webpack_require__(64),parse_int=interp.parse_int,parse_float=interp.parse_float,construct=__webpack_require__(45),write_int=construct.write_int,write_float=construct.write_float,Buffer=__webpack_require__(66).Buffer,lines=[];function $start(){lines=[]}function $line(){lines.push($.apply(null,arguments))}function $result(){return lines.join("\n")}function bits_expr(segment){return"string"==typeof segment.size?$("%s * %d",var_name(segment.size),segment.unit):(segment.size*segment.unit).toString()}function match_seg(segment){if("_"===segment.name)!function(segment){if("string"==typeof segment.size)$line("var skipbits = %s * %d;",var_name(segment.size),segment.unit),$line("if (offset + skipbits > binsize) { return false; }"),$line("else { offset += skipbits; }");else if(!0===segment.size)$line("if (offset % 8 === 0) { offset = binsize; }"),$line("else { return false; }");else{var bits=segment.unit*segment.size;$line("if (offset + %d > binsize) { return false; }",bits),$line("else { offset += %d; }",bits)}}(segment);else{switch(segment.type){case"integer":case"float":!function(segment){$line("bits = %s;\n",bits_expr(segment));var parser="integer"===segment.type?"parse_int":"parse_float",be=segment.bigendian,sg=segment.signed;$line("byteoffset = offset / 8; offset += bits"),$line("if (offset > binsize) { return false; }"),$line("else { result = %s(bin, byteoffset, bits / 8, %s, %s); }",parser,be,sg)}(segment);break;case"binary":!function(segment){$line("byteoffset = offset / 8;"),!0===segment.size?($line("offset = binsize;"),$line("result = bin.slice(byteoffset);")):($line("bits = %s;",bits_expr(segment)),$line("offset += bits;"),$line("if (offset > binsize) { return false; }"),$line("else { result = bin.slice(byteoffset,","byteoffset + bits / 8); }"))}(segment);break;case"string":!function(segment){$line("byteoffset = offset / 8;");var strlen=segment.value.length;$line("offset += %d;",8*strlen),$line("if (offset > binsize) { return false; }"),$line("else { result = bin.toString(byteoffset,",$("byteoffset + %d); }",strlen))}(segment)}if($line("if (result === false) return false;"),segment.name)$line("else if (%s !== undefined) {",var_name(segment.name)),$line("if (%s != result) return false;",var_name(segment.name)),$line("}"),$line("else %s = result;",var_name(segment.name));else $line("else if (result != %s) return false;",JSON.stringify(segment.value))}}function var_name(name){return"var_"+name}function compile_pattern(segments){$start(),$line("return function(binary, env) {"),$line("'use strict';"),$line("var bin = binary, env = env || {};"),$line("var offset = 0, binsize = bin.length * 8;"),$line("var bits, result, byteoffset;");for(var varnames=function(segments){for(var names={},i=0;i<segments.length;i++){var name=segments[i].name;name&&"_"!==name&&(names[name]=!0),"string"==typeof(name=segments[i].size)&&(names[name]=!0)}return Object.keys(names)}(segments),v=0;v<varnames.length;v++){$line("var %s = env['%s'];",var_name(name=varnames[v]),name)}for(var len=segments.length,i=0;i<len;i++){var segment=segments[i];$line("// "+JSON.stringify(segment)),match_seg(segment)}$line("if (offset == binsize) {"),$line("return {");for(v=0;v<varnames.length;v++){var name;$line("%s: %s,",name=varnames[v],var_name(name))}return $line("};"),$line("}"),$line("else return false;"),$line("}"),new Function("parse_int","parse_float",$result())(parse_int,parse_float)}function write_seg(segment){switch(segment.type){case"string":$line("offset += buf.write(%s, offset, 'utf8');",JSON.stringify(segment.value));break;case"binary":$line("val = bindings['%s'];",segment.name),!0===segment.size?$line("size = val.length;"):"string"==typeof segment.size?$line("size = (bindings['%s'] * %d) / 8;",segment.size,segment.unit):$line("size = %d;",segment.size*segment.unit/8),$line("val.copy(buf, offset, 0, size);"),$line("offset += size;");break;case"integer":case"float":!function(segment){segment.name?$line("val = bindings['%s'];",segment.name):$line("val = %d",segment.value);var writer="integer"===segment.type?"write_int":"write_float";"string"==typeof segment.size?$line("size = (bindings['%s'] * %d) / 8;",segment.size,segment.unit):$line("size = %d;",segment.size*segment.unit/8);$line("%s(buf, val, offset, size, %s);",writer,segment.bigendian),$line("offset += size;")}(segment)}}function compile_ctor(segments){return $start(),$line("return function(bindings) {"),$line("'use strict';"),function(segments){for(var variable=[],fixed=0,i=0;i<segments.length;i++)"string"==typeof(segment=segments[i]).size||!0===segment.size?variable.push(segment):"string"===segment.type?fixed+=Buffer.byteLength(segment.value):fixed+=segment.size*segment.unit/8;if($line("var buffersize = %d;",fixed),variable.length>0)for(var j=0;j<variable.length;j++){var segment;!0===(segment=variable[j]).size?$line("buffersize += bindings['%s'].length;",segment.name):$line("buffersize += (bindings['%s'] * %d) / 8;",segment.size,segment.unit)}}(segments),$line("var buf = Buffer.alloc(buffersize);"),$line("var offset = 0;"),function(segments){$line("var val, size;");for(var len=segments.length,i=0;i<len;i++){var segment=segments[i];$line("// %s",JSON.stringify(segment)),write_seg(segment)}}(segments),$line("return buf;"),$line("}"),new Function("write_int","write_float","Buffer",$result())(write_int,write_float,Buffer)}module.exports.compile_pattern=compile_pattern,module.exports.compile=function(){var str=[].join.call(arguments,","),p=parse(str);return compile_pattern(p)},module.exports.compile_builder=function(){var str=[].join.call(arguments,","),p=parse(str);return compile_ctor(p)}},function(module,exports,__webpack_require__){var Buffer=__webpack_require__(5).Buffer,isBufferEncoding=Buffer.isEncoding||function(encoding){switch(encoding&&encoding.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};var StringDecoder=exports.StringDecoder=function(encoding){switch(this.encoding=(encoding||"utf8").toLowerCase().replace(/[-_]/,""),function(encoding){if(encoding&&!isBufferEncoding(encoding))throw new Error("Unknown encoding: "+encoding)}(encoding),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=utf16DetectIncompleteChar;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=base64DetectIncompleteChar;break;default:return void(this.write=passThroughWrite)}this.charBuffer=new Buffer(6),this.charReceived=0,this.charLength=0};function passThroughWrite(buffer){return buffer.toString(this.encoding)}function utf16DetectIncompleteChar(buffer){this.charReceived=buffer.length%2,this.charLength=this.charReceived?2:0}function base64DetectIncompleteChar(buffer){this.charReceived=buffer.length%3,this.charLength=this.charReceived?3:0}StringDecoder.prototype.write=function(buffer){for(var charStr="";this.charLength;){var available=buffer.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:buffer.length;if(buffer.copy(this.charBuffer,this.charReceived,0,available),this.charReceived+=available,this.charReceived<this.charLength)return"";if(buffer=buffer.slice(available,buffer.length),!((charCode=(charStr=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(charStr.length-1))>=55296&&charCode<=56319)){if(this.charReceived=this.charLength=0,0===buffer.length)return charStr;break}this.charLength+=this.surrogateSize,charStr=""}this.detectIncompleteChar(buffer);var end=buffer.length;this.charLength&&(buffer.copy(this.charBuffer,0,buffer.length-this.charReceived,end),end-=this.charReceived);var charCode;end=(charStr+=buffer.toString(this.encoding,0,end)).length-1;if((charCode=charStr.charCodeAt(end))>=55296&&charCode<=56319){var size=this.surrogateSize;return this.charLength+=size,this.charReceived+=size,this.charBuffer.copy(this.charBuffer,size,0,size),buffer.copy(this.charBuffer,0,0,size),charStr.substring(0,end)}return charStr},StringDecoder.prototype.detectIncompleteChar=function(buffer){for(var i=buffer.length>=3?3:buffer.length;i>0;i--){var c=buffer[buffer.length-i];if(1==i&&c>>5==6){this.charLength=2;break}if(i<=2&&c>>4==14){this.charLength=3;break}if(i<=3&&c>>3==30){this.charLength=4;break}}this.charReceived=i},StringDecoder.prototype.end=function(buffer){var res="";if(buffer&&buffer.length&&(res=this.write(buffer)),this.charReceived){var cr=this.charReceived,buf=this.charBuffer,enc=this.encoding;res+=buf.slice(0,cr).toString(enc)}return res}},function(module,exports,__webpack_require__){var Buffer=__webpack_require__(27).Buffer,codec=__webpack_require__(62);module.exports.plain=function(user,passwd){return{mechanism:"PLAIN",response:function(){return Buffer.from(["",user,passwd].join(String.fromCharCode(0)))},username:user,password:passwd}},module.exports.amqplain=function(user,passwd){return{mechanism:"AMQPLAIN",response:function(){const buffer=Buffer.alloc(16384),size=codec.encodeTable(buffer,{LOGIN:user,PASSWORD:passwd},0);return buffer.slice(4,size)},username:user,password:passwd}},module.exports.external=function(){return{mechanism:"EXTERNAL",response:function(){return Buffer.from("")}}}},function(module,exports,__webpack_require__){"use strict";var old;"undefined"!=typeof Promise&&(old=Promise);var bluebird=__webpack_require__(156)();bluebird.noConflict=function(){try{Promise===bluebird&&(Promise=old)}catch(e){}return bluebird},module.exports=bluebird},function(module,exports){module.exports=require("async_hooks")},function(module,exports,__webpack_require__){"use strict";module.exports=function(NEXT_FILTER){var util=__webpack_require__(1),getKeys=__webpack_require__(15).keys,tryCatch=util.tryCatch,errorObj=util.errorObj;return function(instances,cb,promise){return function(e){var boundTo=promise._boundValue();predicateLoop:for(var i=0;i<instances.length;++i){var item=instances[i];if(item===Error||null!=item&&item.prototype instanceof Error){if(e instanceof item)return tryCatch(cb).call(boundTo,e)}else if("function"==typeof item){var matchesPredicate=tryCatch(item).call(boundTo,e);if(matchesPredicate===errorObj)return matchesPredicate;if(matchesPredicate)return tryCatch(cb).call(boundTo,e)}else if(util.isObject(e)){for(var keys=getKeys(item),j=0;j<keys.length;++j){var key=keys[j];if(item[key]!=e[key])continue predicateLoop}return tryCatch(cb).call(boundTo,e)}}return NEXT_FILTER}}}},function(module,exports,__webpack_require__){"use strict";var util=__webpack_require__(1),maybeWrapAsError=util.maybeWrapAsError,OperationalError=__webpack_require__(12).OperationalError,es5=__webpack_require__(15);var rErrorKey=/^(?:name|message|stack|cause)$/;function wrapAsOperationalError(obj){var ret;if(function(obj){return obj instanceof Error&&es5.getPrototypeOf(obj)===Error.prototype}(obj)){(ret=new OperationalError(obj)).name=obj.name,ret.message=obj.message,ret.stack=obj.stack;for(var keys=es5.keys(obj),i=0;i<keys.length;++i){var key=keys[i];rErrorKey.test(key)||(ret[key]=obj[key])}return ret}return util.markAsOriginatingFromRejection(obj),obj}module.exports=function(promise,multiArgs){return function(err,value){if(null!==promise){if(err){var wrapped=wrapAsOperationalError(maybeWrapAsError(err));promise._attachExtraTrace(wrapped),promise._reject(wrapped)}else if(multiArgs){for(var $_len=arguments.length,args=new Array(Math.max($_len-1,0)),$_i=1;$_i<$_len;++$_i)args[$_i-1]=arguments[$_i];promise._fulfill(args)}else promise._fulfill(value);promise=null}}}},function(module,exports,__webpack_require__){"use strict";var defs=__webpack_require__(26),closeMsg=__webpack_require__(19).closeMessage,inspect=__webpack_require__(19).inspect,methodName=__webpack_require__(19).methodName,assert=__webpack_require__(46),inherits=__webpack_require__(0).inherits,EventEmitter=__webpack_require__(4).EventEmitter,fmt=__webpack_require__(0).format,IllegalOperationError=__webpack_require__(29).IllegalOperationError,stackCapture=__webpack_require__(29).stackCapture,Buffer=__webpack_require__(27).Buffer;function Channel(connection){EventEmitter.call(this),this.connection=connection,this.reply=null,this.pending=[],this.lwm=1,this.unconfirmed=[],this.on("ack",this.handleConfirm.bind(this,(function(cb){cb&&cb(null)}))),this.on("nack",this.handleConfirm.bind(this,(function(cb){cb&&cb(new Error("message nacked"))}))),this.on("close",(function(){for(var cb;cb=this.unconfirmed.shift();)cb&&cb(new Error("channel closed"))})),this.handleMessage=acceptDeliveryOrReturn}inherits(Channel,EventEmitter),module.exports.Channel=Channel,module.exports.acceptMessage=acceptMessage;var C=Channel.prototype;function invalidOp(msg,stack){return function(){throw new IllegalOperationError(msg,stack)}}function invalidateSend(ch,msg,stack){ch.sendImmediately=ch.sendOrEnqueue=ch.sendMessage=invalidOp(msg,stack)}function acceptDeliveryOrReturn(f){var event;if(f.id===defs.BasicDeliver)event="delivery";else{if(f.id!==defs.BasicReturn)throw fmt("Expected BasicDeliver or BasicReturn; got %s",inspect(f));event="return"}var self=this,fields=f.fields;return acceptMessage((function(message){message.fields=fields,self.emit(event,message)}))}function acceptMessage(continuation){var totalSize=0,remaining=0,buffers=null,message={fields:null,properties:null,content:null};return function(f){if(f.id===defs.BasicProperties)return message.properties=f.fields,0===(totalSize=remaining=f.size)?(message.content=Buffer.alloc(0),continuation(message),acceptDeliveryOrReturn):content;throw"Expected headers frame after delivery"};function content(f){if(f.content){var size=f.content.length;if(0===(remaining-=size))return null!==buffers?(buffers.push(f.content),message.content=Buffer.concat(buffers)):message.content=f.content,continuation(message),acceptDeliveryOrReturn;if(remaining<0)throw fmt("Too much content sent! Expected %d bytes",totalSize);return null!==buffers?buffers.push(f.content):buffers=[f.content],content}throw"Expected content frame after headers"}}function BaseChannel(connection){Channel.call(this,connection),this.consumers={}}C.allocate=function(){return this.ch=this.connection.freshChannel(this),this},C.sendImmediately=function(method,fields){return this.connection.sendMethod(this.ch,method,fields)},C.sendOrEnqueue=function(method,fields,reply){this.reply?this.pending.push({method:method,fields:fields,reply:reply}):(assert(0===this.pending.length),this.reply=reply,this.sendImmediately(method,fields))},C.sendMessage=function(fields,properties,content){return this.connection.sendMessage(this.ch,defs.BasicPublish,fields,defs.BasicProperties,properties,content)},C._rpc=function(method,fields,expect,cb){var self=this;this.sendOrEnqueue(method,fields,(function(err,f){if(null===err){if(f.id===expect)return cb(null,f);var expectedName=methodName(expect),e=new Error(fmt("Expected %s; got %s",expectedName,inspect(f,!1)));return self.closeWithError(f.id,fmt("Expected %s; got %s",expectedName,methodName(f.id)),defs.constants.UNEXPECTED_FRAME,e),cb(e)}if(err instanceof Error)return cb(err);var closeReason=(err.fields.classId<<16)+err.fields.methodId,closeFrameError=(e=method===closeReason?fmt("Operation failed: %s; %s",methodName(method),closeMsg(err)):fmt("Channel closed by server: %s",closeMsg(err)),new Error(e));return closeFrameError.code=err.fields.replyCode,closeFrameError.classId=err.fields.classId,closeFrameError.methodId=err.fields.methodId,cb(closeFrameError)}))},C.toClosed=function(capturedStack){this._rejectPending(),invalidateSend(this,"Channel closed",capturedStack),this.accept=invalidOp("Channel closed",capturedStack),this.connection.releaseChannel(this.ch),this.emit("close")},C.toClosing=function(capturedStack,k){var send=this.sendImmediately.bind(this);invalidateSend(this,"Channel closing",capturedStack),this.accept=function(f){if(f.id===defs.ChannelCloseOk){k&&k();var s=stackCapture("ChannelCloseOk frame received");this.toClosed(s)}else f.id===defs.ChannelClose&&send(defs.ChannelCloseOk,{})}},C._rejectPending=function(){function rej(r){r(new Error("Channel ended, no reply will be forthcoming"))}var discard;for(null!==this.reply&&rej(this.reply),this.reply=null;discard=this.pending.shift();)rej(discard.reply);this.pending=null},C.closeBecause=function(reason,code,k){this.sendImmediately(defs.ChannelClose,{replyText:reason,replyCode:code,methodId:0,classId:0});var s=stackCapture("closeBecause called: "+reason);this.toClosing(s,k)},C.closeWithError=function(id,reason,code,error){var self=this;this.closeBecause(reason,code,(function(){error.code=code,id&&(error.classId=defs.info(id).classId,error.methodId=defs.info(id).methodId),self.emit("error",error)}))},C.acceptMessageFrame=function(f){try{this.handleMessage=this.handleMessage(f)}catch(msg){"string"==typeof msg?this.closeWithError(f.id,msg,defs.constants.UNEXPECTED_FRAME,new Error(msg)):msg instanceof Error?this.closeWithError(f.id,"Error while processing message",defs.constants.INTERNAL_ERROR,msg):this.closeWithError(f.id,"Internal error while processing message",defs.constants.INTERNAL_ERROR,new Error(msg.toString()))}},C.handleConfirm=function(handle,f){var tag=f.deliveryTag;if(f.multiple){var confirmed=this.unconfirmed.splice(0,tag-this.lwm+1);this.lwm=tag+1,confirmed.forEach(handle)}else{var c;if(tag===this.lwm)for(c=this.unconfirmed.shift(),this.lwm++;null===this.unconfirmed[0];)this.unconfirmed.shift(),this.lwm++;else c=this.unconfirmed[tag-this.lwm],this.unconfirmed[tag-this.lwm]=null;handle(c)}},C.pushConfirmCallback=function(cb){this.unconfirmed.push(cb||!1)},C.accept=function(f){switch(f.id){case void 0:case defs.BasicDeliver:case defs.BasicReturn:case defs.BasicProperties:return this.acceptMessageFrame(f);case defs.BasicAck:return this.emit("ack",f.fields);case defs.BasicNack:return this.emit("nack",f.fields);case defs.BasicCancel:return this.emit("cancel",f.fields);case defs.ChannelClose:if(this.reply){var reply=this.reply;this.reply=null,reply(f)}var emsg="Channel closed by server: "+closeMsg(f);this.sendImmediately(defs.ChannelCloseOk,{});var error=new Error(emsg);error.code=f.fields.replyCode,error.classId=f.fields.classId,error.methodId=f.fields.methodId,this.emit("error",error);var s=stackCapture(emsg);return void this.toClosed(s);case defs.BasicFlow:return this.closeWithError(f.id,"Flow not implemented",defs.constants.NOT_IMPLEMENTED,new Error("Flow not implemented"));default:reply=this.reply;if(this.reply=null,this.pending.length>0){var send=this.pending.shift();this.reply=send.reply,this.sendImmediately(send.method,send.fields)}return reply(null,f)}},C.onBufferDrain=function(){this.emit("drain")},inherits(BaseChannel,Channel),module.exports.BaseChannel=BaseChannel,BaseChannel.prototype.registerConsumer=function(tag,callback){this.consumers[tag]=callback},BaseChannel.prototype.unregisterConsumer=function(tag){delete this.consumers[tag]},BaseChannel.prototype.dispatchMessage=function(fields,message){var consumerTag=fields.consumerTag,consumer=this.consumers[consumerTag];if(consumer)return consumer(message);throw new Error("Unknown consumer: "+consumerTag)},BaseChannel.prototype.handleDelivery=function(message){return this.dispatchMessage(message.fields,message)},BaseChannel.prototype.handleCancel=function(fields){return this.dispatchMessage(fields,null)}},function(module,exports,__webpack_require__){"use strict";module.exports=function(fn,thisArg){return function(){for(var args=new Array(arguments.length),i=0;i<args.length;i++)args[i]=arguments[i];return fn.apply(thisArg,args)}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(value){return!(!value||!value.__CANCEL__)}},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(3),normalizeHeaderName=__webpack_require__(195),DEFAULT_CONTENT_TYPE={"Content-Type":"application/x-www-form-urlencoded"};function setContentTypeIfUnset(headers,value){!utils.isUndefined(headers)&&utils.isUndefined(headers["Content-Type"])&&(headers["Content-Type"]=value)}var adapter,defaults={adapter:("undefined"!=typeof XMLHttpRequest?adapter=__webpack_require__(196):"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process)&&(adapter=__webpack_require__(202)),adapter),transformRequest:[function(data,headers){return normalizeHeaderName(headers,"Accept"),normalizeHeaderName(headers,"Content-Type"),utils.isFormData(data)||utils.isArrayBuffer(data)||utils.isBuffer(data)||utils.isStream(data)||utils.isFile(data)||utils.isBlob(data)?data:utils.isArrayBufferView(data)?data.buffer:utils.isURLSearchParams(data)?(setContentTypeIfUnset(headers,"application/x-www-form-urlencoded;charset=utf-8"),data.toString()):utils.isObject(data)?(setContentTypeIfUnset(headers,"application/json;charset=utf-8"),JSON.stringify(data)):data}],transformResponse:[function(data){if("string"==typeof data)try{data=JSON.parse(data)}catch(e){}return data}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(status){return status>=200&&status<300}};defaults.headers={common:{Accept:"application/json, text/plain, */*"}},utils.forEach(["delete","get","head"],(function(method){defaults.headers[method]={}})),utils.forEach(["post","put","patch"],(function(method){defaults.headers[method]=utils.merge(DEFAULT_CONTENT_TYPE)})),module.exports=defaults},function(module,exports,__webpack_require__){"use strict";var createError=__webpack_require__(51);module.exports=function(resolve,reject,response){var validateStatus=response.config.validateStatus;response.status&&validateStatus&&!validateStatus(response.status)?reject(createError("Request failed with status code "+response.status,response.config,null,response.request,response)):resolve(response)}},function(module,exports,__webpack_require__){"use strict";module.exports=function(error,config,code,request,response){return error.config=config,code&&(error.code=code),error.request=request,error.response=response,error.isAxiosError=!0,error.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},error}},function(module,exports,__webpack_require__){"use strict";var isAbsoluteURL=__webpack_require__(198),combineURLs=__webpack_require__(199);module.exports=function(baseURL,requestedURL){return baseURL&&!isAbsoluteURL(requestedURL)?combineURLs(baseURL,requestedURL):requestedURL}},function(module,exports,__webpack_require__){var url=__webpack_require__(31),URL=url.URL,http=__webpack_require__(35),https=__webpack_require__(52),Writable=__webpack_require__(6).Writable,assert=__webpack_require__(46),debug=__webpack_require__(203),eventHandlers=Object.create(null);["abort","aborted","connect","error","socket","timeout"].forEach((function(event){eventHandlers[event]=function(arg1,arg2,arg3){this._redirectable.emit(event,arg1,arg2,arg3)}}));var RedirectionError=createErrorType("ERR_FR_REDIRECTION_FAILURE",""),TooManyRedirectsError=createErrorType("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded"),MaxBodyLengthExceededError=createErrorType("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),WriteAfterEndError=createErrorType("ERR_STREAM_WRITE_AFTER_END","write after end");function RedirectableRequest(options,responseCallback){Writable.call(this),this._sanitizeOptions(options),this._options=options,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],responseCallback&&this.on("response",responseCallback);var self=this;this._onNativeResponse=function(response){self._processResponse(response)},this._performRequest()}function startTimer(request,msecs){clearTimeout(request._timeout),request._timeout=setTimeout((function(){request.emit("timeout")}),msecs)}function clearTimer(){clearTimeout(this._timeout)}function wrap(protocols){var exports={maxRedirects:21,maxBodyLength:10485760},nativeProtocols={};return Object.keys(protocols).forEach((function(scheme){var protocol=scheme+":",nativeProtocol=nativeProtocols[protocol]=protocols[scheme],wrappedProtocol=exports[scheme]=Object.create(nativeProtocol);wrappedProtocol.request=function(input,options,callback){if("string"==typeof input){var urlStr=input;try{input=urlToOptions(new URL(urlStr))}catch(err){input=url.parse(urlStr)}}else URL&&input instanceof URL?input=urlToOptions(input):(callback=options,options=input,input={protocol:protocol});return"function"==typeof options&&(callback=options,options=null),(options=Object.assign({maxRedirects:exports.maxRedirects,maxBodyLength:exports.maxBodyLength},input,options)).nativeProtocols=nativeProtocols,assert.equal(options.protocol,protocol,"protocol mismatch"),debug("options",options),new RedirectableRequest(options,callback)},wrappedProtocol.get=function(input,options,callback){var request=wrappedProtocol.request(input,options,callback);return request.end(),request}})),exports}function noop(){}function urlToOptions(urlObject){var options={protocol:urlObject.protocol,hostname:urlObject.hostname.startsWith("[")?urlObject.hostname.slice(1,-1):urlObject.hostname,hash:urlObject.hash,search:urlObject.search,pathname:urlObject.pathname,path:urlObject.pathname+urlObject.search,href:urlObject.href};return""!==urlObject.port&&(options.port=Number(urlObject.port)),options}function removeMatchingHeaders(regex,headers){var lastValue;for(var header in headers)regex.test(header)&&(lastValue=headers[header],delete headers[header]);return lastValue}function createErrorType(code,defaultMessage){function CustomError(message){Error.captureStackTrace(this,this.constructor),this.message=message||defaultMessage}return CustomError.prototype=new Error,CustomError.prototype.constructor=CustomError,CustomError.prototype.name="Error ["+code+"]",CustomError.prototype.code=code,CustomError}RedirectableRequest.prototype=Object.create(Writable.prototype),RedirectableRequest.prototype.write=function(data,encoding,callback){if(this._ending)throw new WriteAfterEndError;if(!("string"==typeof data||"object"==typeof data&&"length"in data))throw new TypeError("data should be a string, Buffer or Uint8Array");"function"==typeof encoding&&(callback=encoding,encoding=null),0!==data.length?this._requestBodyLength+data.length<=this._options.maxBodyLength?(this._requestBodyLength+=data.length,this._requestBodyBuffers.push({data:data,encoding:encoding}),this._currentRequest.write(data,encoding,callback)):(this.emit("error",new MaxBodyLengthExceededError),this.abort()):callback&&callback()},RedirectableRequest.prototype.end=function(data,encoding,callback){if("function"==typeof data?(callback=data,data=encoding=null):"function"==typeof encoding&&(callback=encoding,encoding=null),data){var self=this,currentRequest=this._currentRequest;this.write(data,encoding,(function(){self._ended=!0,currentRequest.end(null,null,callback)})),this._ending=!0}else this._ended=this._ending=!0,this._currentRequest.end(null,null,callback)},RedirectableRequest.prototype.setHeader=function(name,value){this._options.headers[name]=value,this._currentRequest.setHeader(name,value)},RedirectableRequest.prototype.removeHeader=function(name){delete this._options.headers[name],this._currentRequest.removeHeader(name)},RedirectableRequest.prototype.setTimeout=function(msecs,callback){if(callback&&this.once("timeout",callback),this.socket)startTimer(this,msecs);else{var self=this;this._currentRequest.once("socket",(function(){startTimer(self,msecs)}))}return this.once("response",clearTimer),this.once("error",clearTimer),this},["abort","flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach((function(method){RedirectableRequest.prototype[method]=function(a,b){return this._currentRequest[method](a,b)}})),["aborted","connection","socket"].forEach((function(property){Object.defineProperty(RedirectableRequest.prototype,property,{get:function(){return this._currentRequest[property]}})})),RedirectableRequest.prototype._sanitizeOptions=function(options){if(options.headers||(options.headers={}),options.host&&(options.hostname||(options.hostname=options.host),delete options.host),!options.pathname&&options.path){var searchPos=options.path.indexOf("?");searchPos<0?options.pathname=options.path:(options.pathname=options.path.substring(0,searchPos),options.search=options.path.substring(searchPos))}},RedirectableRequest.prototype._performRequest=function(){var protocol=this._options.protocol,nativeProtocol=this._options.nativeProtocols[protocol];if(nativeProtocol){if(this._options.agents){var scheme=protocol.substr(0,protocol.length-1);this._options.agent=this._options.agents[scheme]}var request=this._currentRequest=nativeProtocol.request(this._options,this._onNativeResponse);for(var event in this._currentUrl=url.format(this._options),request._redirectable=this,eventHandlers)event&&request.on(event,eventHandlers[event]);if(this._isRedirect){var i=0,self=this,buffers=this._requestBodyBuffers;!function writeNext(error){if(request===self._currentRequest)if(error)self.emit("error",error);else if(i<buffers.length){var buffer=buffers[i++];request.finished||request.write(buffer.data,buffer.encoding,writeNext)}else self._ended&&request.end()}()}}else this.emit("error",new TypeError("Unsupported protocol "+protocol))},RedirectableRequest.prototype._processResponse=function(response){var statusCode=response.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:response.headers,statusCode:statusCode});var location=response.headers.location;if(location&&!1!==this._options.followRedirects&&statusCode>=300&&statusCode<400){if(this._currentRequest.removeAllListeners(),this._currentRequest.on("error",noop),this._currentRequest.abort(),response.destroy(),++this._redirectCount>this._options.maxRedirects)return void this.emit("error",new TooManyRedirectsError);((301===statusCode||302===statusCode)&&"POST"===this._options.method||303===statusCode&&!/^(?:GET|HEAD)$/.test(this._options.method))&&(this._options.method="GET",this._requestBodyBuffers=[],removeMatchingHeaders(/^content-/i,this._options.headers));var previousHostName=removeMatchingHeaders(/^host$/i,this._options.headers)||url.parse(this._currentUrl).hostname,redirectUrl=url.resolve(this._currentUrl,location);debug("redirecting to",redirectUrl),this._isRedirect=!0;var redirectUrlParts=url.parse(redirectUrl);if(Object.assign(this._options,redirectUrlParts),redirectUrlParts.hostname!==previousHostName&&removeMatchingHeaders(/^authorization$/i,this._options.headers),"function"==typeof this._options.beforeRedirect){var responseDetails={headers:response.headers};try{this._options.beforeRedirect.call(null,this._options,responseDetails)}catch(err){return void this.emit("error",err)}this._sanitizeOptions(this._options)}try{this._performRequest()}catch(cause){var error=new RedirectionError("Redirected request failed: "+cause.message);error.cause=cause,this.emit("error",error)}}else response.responseUrl=this._currentUrl,response.redirects=this._redirects,this.emit("response",response),this._requestBodyBuffers=[]},module.exports=wrap({http:http,https:https}),module.exports.wrap=wrap},function(module,exports,__webpack_require__){module.exports=function(env){function createDebug(namespace){let prevTime;function debug(...args){if(!debug.enabled)return;const self=debug,curr=Number(new Date),ms=curr-(prevTime||curr);self.diff=ms,self.prev=prevTime,self.curr=curr,prevTime=curr,args[0]=createDebug.coerce(args[0]),"string"!=typeof args[0]&&args.unshift("%O");let index=0;args[0]=args[0].replace(/%([a-zA-Z%])/g,((match,format)=>{if("%%"===match)return match;index++;const formatter=createDebug.formatters[format];if("function"==typeof formatter){const val=args[index];match=formatter.call(self,val),args.splice(index,1),index--}return match})),createDebug.formatArgs.call(self,args);(self.log||createDebug.log).apply(self,args)}return debug.namespace=namespace,debug.enabled=createDebug.enabled(namespace),debug.useColors=createDebug.useColors(),debug.color=createDebug.selectColor(namespace),debug.destroy=destroy,debug.extend=extend,"function"==typeof createDebug.init&&createDebug.init(debug),createDebug.instances.push(debug),debug}function destroy(){const index=createDebug.instances.indexOf(this);return-1!==index&&(createDebug.instances.splice(index,1),!0)}function extend(namespace,delimiter){const newDebug=createDebug(this.namespace+(void 0===delimiter?":":delimiter)+namespace);return newDebug.log=this.log,newDebug}function toNamespace(regexp){return regexp.toString().substring(2,regexp.toString().length-2).replace(/\.\*\?$/,"*")}return createDebug.debug=createDebug,createDebug.default=createDebug,createDebug.coerce=function(val){if(val instanceof Error)return val.stack||val.message;return val},createDebug.disable=function(){const namespaces=[...createDebug.names.map(toNamespace),...createDebug.skips.map(toNamespace).map((namespace=>"-"+namespace))].join(",");return createDebug.enable(""),namespaces},createDebug.enable=function(namespaces){let i;createDebug.save(namespaces),createDebug.names=[],createDebug.skips=[];const split=("string"==typeof namespaces?namespaces:"").split(/[\s,]+/),len=split.length;for(i=0;i<len;i++)split[i]&&("-"===(namespaces=split[i].replace(/\*/g,".*?"))[0]?createDebug.skips.push(new RegExp("^"+namespaces.substr(1)+"$")):createDebug.names.push(new RegExp("^"+namespaces+"$")));for(i=0;i<createDebug.instances.length;i++){const instance=createDebug.instances[i];instance.enabled=createDebug.enabled(instance.namespace)}},createDebug.enabled=function(name){if("*"===name[name.length-1])return!0;let i,len;for(i=0,len=createDebug.skips.length;i<len;i++)if(createDebug.skips[i].test(name))return!1;for(i=0,len=createDebug.names.length;i<len;i++)if(createDebug.names[i].test(name))return!0;return!1},createDebug.humanize=__webpack_require__(205),Object.keys(env).forEach((key=>{createDebug[key]=env[key]})),createDebug.instances=[],createDebug.names=[],createDebug.skips=[],createDebug.formatters={},createDebug.selectColor=function(namespace){let hash=0;for(let i=0;i<namespace.length;i++)hash=(hash<<5)-hash+namespace.charCodeAt(i),hash|=0;return createDebug.colors[Math.abs(hash)%createDebug.colors.length]},createDebug.enable(createDebug.load()),createDebug}},function(module,exports){module.exports=require("os")},function(module,exports){module.exports=require("zlib")},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(3);module.exports=function(config1,config2){config2=config2||{};var config={},valueFromConfig2Keys=["url","method","data"],mergeDeepPropertiesKeys=["headers","auth","proxy","params"],defaultToConfig2Keys=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],directMergeKeys=["validateStatus"];function getMergedValue(target,source){return utils.isPlainObject(target)&&utils.isPlainObject(source)?utils.merge(target,source):utils.isPlainObject(source)?utils.merge({},source):utils.isArray(source)?source.slice():source}function mergeDeepProperties(prop){utils.isUndefined(config2[prop])?utils.isUndefined(config1[prop])||(config[prop]=getMergedValue(void 0,config1[prop])):config[prop]=getMergedValue(config1[prop],config2[prop])}utils.forEach(valueFromConfig2Keys,(function(prop){utils.isUndefined(config2[prop])||(config[prop]=getMergedValue(void 0,config2[prop]))})),utils.forEach(mergeDeepPropertiesKeys,mergeDeepProperties),utils.forEach(defaultToConfig2Keys,(function(prop){utils.isUndefined(config2[prop])?utils.isUndefined(config1[prop])||(config[prop]=getMergedValue(void 0,config1[prop])):config[prop]=getMergedValue(void 0,config2[prop])})),utils.forEach(directMergeKeys,(function(prop){prop in config2?config[prop]=getMergedValue(config1[prop],config2[prop]):prop in config1&&(config[prop]=getMergedValue(void 0,config1[prop]))}));var axiosKeys=valueFromConfig2Keys.concat(mergeDeepPropertiesKeys).concat(defaultToConfig2Keys).concat(directMergeKeys),otherKeys=Object.keys(config1).concat(Object.keys(config2)).filter((function(key){return-1===axiosKeys.indexOf(key)}));return utils.forEach(otherKeys,mergeDeepProperties),config}},function(module,exports,__webpack_require__){"use strict";function Cancel(message){this.message=message}Cancel.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},Cancel.prototype.__CANCEL__=!0,module.exports=Cancel},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const tslib_1=__webpack_require__(11),async_mqtt_1=tslib_1.__importDefault(__webpack_require__(215)),fs_1=tslib_1.__importDefault(__webpack_require__(33)),lodash_clonedeep_1=tslib_1.__importDefault(__webpack_require__(48)),util_1=__webpack_require__(0),spacebunny_1=tslib_1.__importDefault(__webpack_require__(49)),utils_1=__webpack_require__(30);class MqttClient extends spacebunny_1.default{constructor(opts={}){super(opts),this.mqttListeners={},this.topics=[],this.onMessage=(callback,opts={qos:1})=>tslib_1.__awaiter(this,void 0,void 0,(function*(){const topic=this.topicFor(null,this.inboxTopic);this.addMqttListener(topic,callback,topic),yield this.subscribe(topic,opts)})),this.publish=(channel,message,opts={qos:1})=>tslib_1.__awaiter(this,void 0,void 0,(function*(){if(!this.isConnected())throw new Error(`${this.getClassName()} - Error sending message on channel ${channel} when client is not connected.`);{const topic=this.topicFor(null,channel);try{const bufferedMessage=Buffer.from(utils_1.encapsulateContent(message));return yield this.mqttClient.publish(topic,bufferedMessage,opts),this.log("silly","Published message on topic "+topic),!0}catch(error){throw this.log("error","Error publishing on topic "+topic),error}}})),this.connect=(opts={})=>tslib_1.__awaiter(this,void 0,void 0,(function*(){if(this.isConnected())return this.mqttClient;yield this.getEndpointConfigs();try{const clientId=this.connectionParams.deviceId||this.connectionParams.client;let mqttConnectionParams={host:this.connectionParams.host,protocol:this.tls?"mqtts":"mqtt",port:this.tls?this.connectionParams.protocols.mqtt.tlsPort:this.connectionParams.protocols.mqtt.port,username:`${this.connectionParams.vhost}:${clientId}`,password:this.connectionParams.secret,clientId:clientId,connectTimeout:opts.connectTimeout||this.connectionTimeout,reconnectPeriod:this.autoReconnect?opts.reconnectPeriod||this.reconnectTimeout:0,clean:!!util_1.isNullOrUndefined(opts.clean)||opts.clean,keepalive:opts.keepalive||this.heartbeat};this.tls&&(mqttConnectionParams=Object.assign(Object.assign({},mqttConnectionParams),this.tlsOpts)),this.mqttClient=yield async_mqtt_1.default.connectAsync(null,mqttConnectionParams,this.autoReconnect);const onError=err=>{err&&(this.emit("error",err),this.log("error",err)),util_1.isNullOrUndefined(this.mqttClient)||(this.mqttClient.removeAllListeners(),this.mqttClient=void 0)};return this.mqttClient.on("error",onError),this.mqttClient.on("close",onError),this.mqttClient.on("message",((msgTopic,message)=>{try{let msg={};try{msg=JSON.parse(message.toString())}catch(e){msg=message.toString()}Object.entries(this.mqttListeners).forEach((([,listener])=>{const{callback:callback,topics:topics}=listener;0===topics.length||topics.includes(msgTopic)?(this.log("debug","Received message for topic "+msgTopic,msg),callback(msgTopic,msg)):this.log("silly","Received unlistened message for topic "+msgTopic,msg)}))}catch(error){this.log("error","Error consuming message"),this.log("error",error)}})),this.emit("connect"),this.log("debug","Client connected!"),this.mqttClient}catch(error){if(util_1.isNullOrUndefined(this.mqttClient)||(this.mqttClient.removeAllListeners(),this.mqttClient=void 0),this.log("error","Error during connection"),!this.autoReconnect)throw error;{this.log("error",error.message);const timeout=util_1.promisify(setTimeout);yield timeout(this.reconnectTimeout),this.connect(opts)}}})),this.isConnected=()=>!util_1.isNullOrUndefined(this.mqttClient)&&this.mqttClient.connected,this.addMqttListener=(name,callback,topics)=>{this.mqttListeners[name]={callback:callback,topics:Array.isArray(topics)?topics:[topics]}},this.removeMqttListener=name=>{delete this.mqttListeners[name]},this.subscribe=(topics,opts={qos:1})=>tslib_1.__awaiter(this,void 0,void 0,(function*(){if(!this.isConnected())throw new Error(this.getClassName()+" - Trying to subscribe when client is not connected");{const topicsToSubscribe=Array.isArray(topics)?topics:[topics];yield this.mqttClient.subscribe(topicsToSubscribe,opts),this.topics.push(...topicsToSubscribe),this.log("info","Client subscribed to topics: "+topicsToSubscribe.join(","))}})),this.topicFor=(deviceId,channel)=>`${deviceId||this.getDeviceId()}/${channel}`,this.publishCachedMessages=()=>tslib_1.__awaiter(this,void 0,void 0,(function*(){if(this.isConnected()&&this.cachedMessages.length>0){const cachedMessagesToSend=lodash_clonedeep_1.default(this.cachedMessages);this.log("debug",`Publishing ${cachedMessagesToSend.length} cached messages...`);for(let index=0;index<cachedMessagesToSend.length;index+=1){const cachedMessage=cachedMessagesToSend[index];this.log("silly",`Sending message ${index+1} from cache`);const{message:message,channel:channel,options:options}=cachedMessage;if(yield this.publish(channel,message,Object.assign({qos:1},options))){const itemToRemove=this.cachedMessages.findIndex((el=>util_1.isDeepStrictEqual(el,cachedMessage)));this.cachedMessages.splice(itemToRemove,1)}}this.writeCachedMessagesFile()}})),this.topics=[],this.mqttClient=void 0,this.protocol="mqtt",this.tlsProtocol="mqtts",this.connectionOpts={qos:1,clean:!0};const{cert:cert,key:key,passphrase:passphrase,ca:ca,pfx:pfx,disableCertCheck:disableCertCheck}=opts;this.tlsOpts={},cert&&(this.tlsOpts.cert=fs_1.default.readFileSync(cert)),key&&(this.tlsOpts.key=fs_1.default.readFileSync(key)),passphrase&&(this.tlsOpts.passphrase=passphrase),ca&&(Array.isArray(ca)?this.tlsOpts.ca=ca.map((element=>fs_1.default.readFileSync(element))):this.tlsOpts.ca=[fs_1.default.readFileSync(ca)]),pfx&&(this.tlsOpts.pfx=fs_1.default.readFileSync(pfx)),this.tlsOpts.rejectUnauthorized=!disableCertCheck,this.on("connect",(()=>{this.publishCachedMessages()}))}disconnect(){return tslib_1.__awaiter(this,void 0,void 0,(function*(){if(this.isConnected())try{yield this.unsubscribe(),this.mqttClient.removeAllListeners(),yield this.mqttClient.end()}catch(error){throw this.log("error","Error disconnecting client."),error}return this.mqttClient=void 0,this.mqttListeners={},this.topics=[],this.emit("disconnected"),this.log("info","disconnected"),!0}))}unsubscribe(topics=[]){return tslib_1.__awaiter(this,void 0,void 0,(function*(){let topicsToUnsubscribe=this.topics.length>0&&0===topics.length?this.topics:topics;if(topicsToUnsubscribe=Array.isArray(topicsToUnsubscribe)?topicsToUnsubscribe:[topicsToUnsubscribe],!this.isConnected())throw new Error(`${this.getClassName()} - Error trying to unsucscribe from ${topicsToUnsubscribe.join(",")} on an invalid connection`);topicsToUnsubscribe.length>0&&(yield this.mqttClient.unsubscribe(topicsToUnsubscribe));for(let index=0;index<topicsToUnsubscribe.length;index+=1){const topic=topicsToUnsubscribe[index];for(let idx=0;idx<this.topics.length;idx+=1)this.topics[idx]===topic&&this.topics.splice(idx,1)}this.log("info","Client unsubscribed from topics: "+topicsToUnsubscribe.join(","))}))}}exports.default=MqttClient},function(module,exports,__webpack_require__){"use strict";var EventEmitter=__webpack_require__(4).EventEmitter,Store=__webpack_require__(53),mqttPacket=__webpack_require__(275),Writable=__webpack_require__(20).Writable,inherits=__webpack_require__(2),reInterval=__webpack_require__(288),validations=__webpack_require__(289),xtend=__webpack_require__(54),debug=__webpack_require__(13)("mqttjs:client"),nextTick=process?process.nextTick:function(callback){setTimeout(callback,0)},setImmediate=global.setImmediate||function(callback){nextTick(callback)},defaultConnectOptions={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:3e4,clean:!0,resubscribe:!0},socketErrors=["ECONNREFUSED","EADDRINUSE","ECONNRESET","ENOTFOUND"],errors={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};function sendPacket(client,packet,cb){debug("sendPacket :: packet: %O",packet),debug("sendPacket :: emitting `packetsend`"),client.emit("packetsend",packet),debug("sendPacket :: writing to stream");var result=mqttPacket.writeToStream(packet,client.stream,client.options);debug("sendPacket :: writeToStream result %s",result),!result&&cb?(debug("sendPacket :: handle events on `drain` once through callback."),client.stream.once("drain",cb)):cb&&(debug("sendPacket :: invoking cb"),cb())}function flush(queue){queue&&(debug("flush: queue exists? %b",!!queue),Object.keys(queue).forEach((function(messageId){"function"==typeof queue[messageId].cb&&(queue[messageId].cb(new Error("Connection closed")),delete queue[messageId])})))}function storeAndSend(client,packet,cb,cbStorePut){debug("storeAndSend :: store packet with cmd %s to outgoingStore",packet.cmd),client.outgoingStore.put(packet,(function(err){if(err)return cb&&cb(err);cbStorePut(),sendPacket(client,packet,cb)}))}function nop(error){debug("nop ::",error)}function MqttClient(streamBuilder,options){var k,that=this;if(!(this instanceof MqttClient))return new MqttClient(streamBuilder,options);for(k in this.options=options||{},defaultConnectOptions)void 0===this.options[k]?this.options[k]=defaultConnectOptions[k]:this.options[k]=options[k];debug("MqttClient :: options.protocol",options.protocol),debug("MqttClient :: options.protocolVersion",options.protocolVersion),debug("MqttClient :: options.username",options.username),debug("MqttClient :: options.keepalive",options.keepalive),debug("MqttClient :: options.reconnectPeriod",options.reconnectPeriod),debug("MqttClient :: options.rejectUnauthorized",options.rejectUnauthorized),this.options.clientId="string"==typeof options.clientId?options.clientId:"mqttjs_"+Math.random().toString(16).substr(2,8),debug("MqttClient :: clientId",this.options.clientId),this.options.customHandleAcks=5===options.protocolVersion&&options.customHandleAcks?options.customHandleAcks:function(){arguments[3](0)},this.streamBuilder=streamBuilder,this.outgoingStore=options.outgoingStore||new Store,this.incomingStore=options.incomingStore||new Store,this.queueQoSZero=void 0===options.queueQoSZero||options.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.pingTimer=null,this.connected=!1,this.disconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={},this.nextId=Math.max(1,Math.floor(65535*Math.random())),this.outgoing={},this._firstConnection=!0,this.on("connect",(function(){var queue=this.queue;debug("connect :: sending queued packets"),function deliver(){var packet,entry=queue.shift();debug("deliver :: entry %o",entry),entry&&(packet=entry.packet,debug("deliver :: call _sendPacket for %o",packet),that._sendPacket(packet,(function(err){entry.cb&&entry.cb(err),deliver()})))}()})),this.on("close",(function(){debug("close :: connected set to `false`"),this.connected=!1,debug("close :: clearing connackTimer"),clearTimeout(this.connackTimer),debug("close :: clearing ping timer"),null!==that.pingTimer&&(that.pingTimer.clear(),that.pingTimer=null),debug("close :: calling _setupReconnect"),this._setupReconnect()})),EventEmitter.call(this),debug("MqttClient :: setting up stream"),this._setupStream()}inherits(MqttClient,EventEmitter),MqttClient.prototype._setupStream=function(){var connectPacket,that=this,writable=new Writable,parser=mqttPacket.parser(this.options),completeParse=null,packets=[];function nextTickWork(){if(packets.length)nextTick(work);else{var done=completeParse;completeParse=null,done()}}function work(){debug("work :: getting next packet in queue");var packet=packets.shift();if(packet)debug("work :: packet pulled from queue"),that._handlePacket(packet,nextTickWork);else{debug("work :: no packets in queue");var done=completeParse;completeParse=null,debug("work :: done flag is %s",!!done),done&&done()}}if(debug("_setupStream :: calling method to clear reconnect"),this._clearReconnect(),debug("_setupStream :: using streamBuilder provided to client to create stream"),this.stream=this.streamBuilder(this),parser.on("packet",(function(packet){debug("parser :: on packet push to packets array."),packets.push(packet)})),writable._write=function(buf,enc,done){completeParse=done,debug("writable stream :: parsing buffer"),parser.parse(buf),work()},debug("_setupStream :: pipe stream to writable stream"),this.stream.pipe(writable),this.stream.on("error",(function(error){debug("streamErrorHandler :: error",error.message),socketErrors.includes(error.code)?(debug("streamErrorHandler :: emitting error"),that.emit("error",error)):nop(error)})),this.stream.on("close",(function(){var queue;debug("(%s)stream :: on close",that.options.clientId),(queue=that.outgoing)&&(debug("flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function"),Object.keys(queue).forEach((function(messageId){queue[messageId].volatile&&"function"==typeof queue[messageId].cb&&(queue[messageId].cb(new Error("Connection closed")),delete queue[messageId])}))),debug("stream: emit close to MqttClient"),that.emit("close")})),debug("_setupStream: sending packet `connect`"),(connectPacket=Object.create(this.options)).cmd="connect",sendPacket(this,connectPacket),parser.on("error",this.emit.bind(this,"error")),this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData)return that.end((()=>this.emit("error",new Error("Packet has no Authentication Method")))),this;if(this.options.properties.authenticationMethod&&this.options.authPacket&&"object"==typeof this.options.authPacket)sendPacket(this,xtend({cmd:"auth",reasonCode:0},this.options.authPacket))}this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout((function(){debug("!!connectTimeout hit!! Calling _cleanUp with force `true`"),that._cleanUp(!0)}),this.options.connectTimeout)},MqttClient.prototype._handlePacket=function(packet,done){var options=this.options;if(5===options.protocolVersion&&options.properties&&options.properties.maximumPacketSize&&options.properties.maximumPacketSize<packet.length)return this.emit("error",new Error("exceeding packets size "+packet.cmd)),this.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}}),this;switch(debug("_handlePacket :: emitting packetreceive"),this.emit("packetreceive",packet),packet.cmd){case"publish":this._handlePublish(packet,done);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":this._handleAck(packet),done();break;case"pubrel":this._handlePubrel(packet,done);break;case"connack":this._handleConnack(packet),done();break;case"pingresp":this._handlePingresp(packet),done();break;case"disconnect":this._handleDisconnect(packet),done()}},MqttClient.prototype._checkDisconnecting=function(callback){return this.disconnecting&&(callback?callback(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting},MqttClient.prototype.publish=function(topic,message,opts,callback){var packet;debug("publish :: message `%s` to topic `%s`",message,topic);var options=this.options;"function"==typeof opts&&(callback=opts,opts=null);if(opts=xtend({qos:0,retain:!1,dup:!1},opts),this._checkDisconnecting(callback))return this;switch(packet={cmd:"publish",topic:topic,payload:message,qos:opts.qos,retain:opts.retain,messageId:this._nextId(),dup:opts.dup},5===options.protocolVersion&&(packet.properties=opts.properties,(!options.properties&&packet.properties&&packet.properties.topicAlias||opts.properties&&options.properties&&(opts.properties.topicAlias&&options.properties.topicAliasMaximum&&opts.properties.topicAlias>options.properties.topicAliasMaximum||!options.properties.topicAliasMaximum&&opts.properties.topicAlias))&&delete packet.properties.topicAlias),debug("publish :: qos",opts.qos),opts.qos){case 1:case 2:this.outgoing[packet.messageId]={volatile:!1,cb:callback||nop},this._storeProcessing?(debug("_storeProcessing enabled"),this._packetIdsDuringStoreProcessing[packet.messageId]=!1,this._storePacket(packet,void 0,opts.cbStorePut)):(debug("MqttClient:publish: packet cmd: %s",packet.cmd),this._sendPacket(packet,void 0,opts.cbStorePut));break;default:this._storeProcessing?(debug("_storeProcessing enabled"),this._storePacket(packet,callback,opts.cbStorePut)):(debug("MqttClient:publish: packet cmd: %s",packet.cmd),this._sendPacket(packet,callback,opts.cbStorePut))}return this},MqttClient.prototype.subscribe=function(){for(var packet,args=new Array(arguments.length),i=0;i<arguments.length;i++)args[i]=arguments[i];var invalidTopic,subs=[],obj=args.shift(),resubscribe=obj.resubscribe,callback=args.pop()||nop,opts=args.pop(),that=this,version=this.options.protocolVersion;if(delete obj.resubscribe,"string"==typeof obj&&(obj=[obj]),"function"!=typeof callback&&(opts=callback,callback=nop),null!==(invalidTopic=validations.validateTopics(obj)))return setImmediate(callback,new Error("Invalid topic "+invalidTopic)),this;if(this._checkDisconnecting(callback))return debug("subscribe: discconecting true"),this;var defaultOpts={qos:0};if(5===version&&(defaultOpts.nl=!1,defaultOpts.rap=!1,defaultOpts.rh=0),opts=xtend(defaultOpts,opts),Array.isArray(obj)?obj.forEach((function(topic){if(debug("subscribe: array topic %s",topic),!that._resubscribeTopics.hasOwnProperty(topic)||that._resubscribeTopics[topic].qos<opts.qos||resubscribe){var currentOpts={topic:topic,qos:opts.qos};5===version&&(currentOpts.nl=opts.nl,currentOpts.rap=opts.rap,currentOpts.rh=opts.rh,currentOpts.properties=opts.properties),debug("subscribe: pushing topic `%s` and qos `%s` to subs list",currentOpts.topic,currentOpts.qos),subs.push(currentOpts)}})):Object.keys(obj).forEach((function(k){if(debug("subscribe: object topic %s",k),!that._resubscribeTopics.hasOwnProperty(k)||that._resubscribeTopics[k].qos<obj[k].qos||resubscribe){var currentOpts={topic:k,qos:obj[k].qos};5===version&&(currentOpts.nl=obj[k].nl,currentOpts.rap=obj[k].rap,currentOpts.rh=obj[k].rh,currentOpts.properties=opts.properties),debug("subscribe: pushing `%s` to subs list",currentOpts),subs.push(currentOpts)}})),packet={cmd:"subscribe",subscriptions:subs,qos:1,retain:!1,dup:!1,messageId:this._nextId()},opts.properties&&(packet.properties=opts.properties),subs.length){if(this.options.resubscribe){debug("subscribe :: resubscribe true");var topics=[];subs.forEach((function(sub){if(that.options.reconnectPeriod>0){var topic={qos:sub.qos};5===version&&(topic.nl=sub.nl||!1,topic.rap=sub.rap||!1,topic.rh=sub.rh||0,topic.properties=sub.properties),that._resubscribeTopics[sub.topic]=topic,topics.push(sub.topic)}})),that.messageIdToTopic[packet.messageId]=topics}return this.outgoing[packet.messageId]={volatile:!0,cb:function(err,packet){if(!err)for(var granted=packet.granted,i=0;i<granted.length;i+=1)subs[i].qos=granted[i];callback(err,subs)}},debug("subscribe :: call _sendPacket"),this._sendPacket(packet),this}callback(null,[])},MqttClient.prototype.unsubscribe=function(){for(var packet={cmd:"unsubscribe",qos:1,messageId:this._nextId()},that=this,args=new Array(arguments.length),i=0;i<arguments.length;i++)args[i]=arguments[i];var topic=args.shift(),callback=args.pop()||nop,opts=args.pop();return"string"==typeof topic&&(topic=[topic]),"function"!=typeof callback&&(opts=callback,callback=nop),this._checkDisconnecting(callback)||("string"==typeof topic?packet.unsubscriptions=[topic]:Array.isArray(topic)&&(packet.unsubscriptions=topic),this.options.resubscribe&&packet.unsubscriptions.forEach((function(topic){delete that._resubscribeTopics[topic]})),"object"==typeof opts&&opts.properties&&(packet.properties=opts.properties),this.outgoing[packet.messageId]={volatile:!0,cb:callback},debug("unsubscribe: call _sendPacket"),this._sendPacket(packet)),this},MqttClient.prototype.end=function(force,opts,cb){var that=this;function closeStores(){debug("end :: closeStores: closing incoming and outgoing stores"),that.disconnected=!0,that.incomingStore.close((function(e1){that.outgoingStore.close((function(e2){if(debug("end :: closeStores: emitting end"),that.emit("end"),cb){let err=e1||e2;debug("end :: closeStores: invoking callback with args"),cb(err)}}))})),that._deferredReconnect&&that._deferredReconnect()}function finish(){debug("end :: (%s) :: finish :: calling _cleanUp with force %s",that.options.clientId,force),that._cleanUp(force,(()=>{debug("end :: finish :: calling process.nextTick on closeStores"),nextTick(closeStores.bind(that))}),opts)}return debug("end :: (%s)",this.options.clientId),null!=force&&"boolean"==typeof force||(cb=opts||nop,opts=force,force=!1,"object"!=typeof opts&&(cb=opts,opts=null,"function"!=typeof cb&&(cb=nop))),"object"!=typeof opts&&(cb=opts,opts=null),debug("end :: cb? %s",!!cb),cb=cb||nop,this.disconnecting?(cb(),this):(this._clearReconnect(),this.disconnecting=!0,!force&&Object.keys(this.outgoing).length>0?(debug("end :: (%s) :: calling finish in 10ms once outgoing is empty",that.options.clientId),this.once("outgoingEmpty",setTimeout.bind(null,finish,10))):(debug("end :: (%s) :: immediately calling finish",that.options.clientId),finish()),this)},MqttClient.prototype.removeOutgoingMessage=function(messageId){var cb=this.outgoing[messageId]?this.outgoing[messageId].cb:null;return delete this.outgoing[messageId],this.outgoingStore.del({messageId:messageId},(function(){cb(new Error("Message removed"))})),this},MqttClient.prototype.reconnect=function(opts){debug("client reconnect");var that=this,f=function(){opts?(that.options.incomingStore=opts.incomingStore,that.options.outgoingStore=opts.outgoingStore):(that.options.incomingStore=null,that.options.outgoingStore=null),that.incomingStore=that.options.incomingStore||new Store,that.outgoingStore=that.options.outgoingStore||new Store,that.disconnecting=!1,that.disconnected=!1,that._deferredReconnect=null,that._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=f:f(),this},MqttClient.prototype._reconnect=function(){debug("_reconnect: emitting reconnect to client"),this.emit("reconnect"),debug("_reconnect: calling _setupStream"),this._setupStream()},MqttClient.prototype._setupReconnect=function(){var that=this;!that.disconnecting&&!that.reconnectTimer&&that.options.reconnectPeriod>0?(this.reconnecting||(debug("_setupReconnect :: emit `offline` state"),this.emit("offline"),debug("_setupReconnect :: set `reconnecting` to `true`"),this.reconnecting=!0),debug("_setupReconnect :: setting reconnectTimer for %d ms",that.options.reconnectPeriod),that.reconnectTimer=setInterval((function(){debug("reconnectTimer :: reconnect triggered!"),that._reconnect()}),that.options.reconnectPeriod)):debug("_setupReconnect :: doing nothing...")},MqttClient.prototype._clearReconnect=function(){debug("_clearReconnect : clearing reconnect timer"),this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)},MqttClient.prototype._cleanUp=function(forced,done){var opts=arguments[2];if(done&&(debug("_cleanUp :: done callback provided for on stream close"),this.stream.on("close",done)),debug("_cleanUp :: forced? %s",forced),forced)0===this.options.reconnectPeriod&&this.options.clean&&flush(this.outgoing),debug("_cleanUp :: (%s) :: destroying stream",this.options.clientId),this.stream.destroy();else{var packet=xtend({cmd:"disconnect"},opts);debug("_cleanUp :: (%s) :: call _sendPacket with disconnect packet",this.options.clientId),this._sendPacket(packet,setImmediate.bind(null,this.stream.end.bind(this.stream)))}this.disconnecting||(debug("_cleanUp :: client not disconnecting. Clearing and resetting reconnect."),this._clearReconnect(),this._setupReconnect()),null!==this.pingTimer&&(debug("_cleanUp :: clearing pingTimer"),this.pingTimer.clear(),this.pingTimer=null),done&&!this.connected&&(debug("_cleanUp :: (%s) :: removing stream `done` callback `close` listener",this.options.clientId),this.stream.removeListener("close",done),done())},MqttClient.prototype._sendPacket=function(packet,cb,cbStorePut){if(debug("_sendPacket :: (%s) ::  start",this.options.clientId),cbStorePut=cbStorePut||nop,!this.connected)return debug("_sendPacket :: client not connected. Storing packet offline."),void this._storePacket(packet,cb,cbStorePut);switch(this._shiftPingInterval(),packet.cmd){case"publish":break;case"pubrel":return void storeAndSend(this,packet,cb,cbStorePut);default:return void sendPacket(this,packet,cb)}switch(packet.qos){case 2:case 1:storeAndSend(this,packet,cb,cbStorePut);break;case 0:default:sendPacket(this,packet,cb)}debug("_sendPacket :: (%s) ::  end",this.options.clientId)},MqttClient.prototype._storePacket=function(packet,cb,cbStorePut){debug("_storePacket :: packet: %o",packet),debug("_storePacket :: cb? %s",!!cb),cbStorePut=cbStorePut||nop,0===(packet.qos||0)&&this.queueQoSZero||"publish"!==packet.cmd?this.queue.push({packet:packet,cb:cb}):packet.qos>0?(cb=this.outgoing[packet.messageId]?this.outgoing[packet.messageId].cb:null,this.outgoingStore.put(packet,(function(err){if(err)return cb&&cb(err);cbStorePut()}))):cb&&cb(new Error("No connection to broker"))},MqttClient.prototype._setupPingTimer=function(){debug("_setupPingTimer :: keepalive %d (seconds)",this.options.keepalive);var that=this;!this.pingTimer&&this.options.keepalive&&(this.pingResp=!0,this.pingTimer=reInterval((function(){that._checkPing()}),1e3*this.options.keepalive))},MqttClient.prototype._shiftPingInterval=function(){this.pingTimer&&this.options.keepalive&&this.options.reschedulePings&&this.pingTimer.reschedule(1e3*this.options.keepalive)},MqttClient.prototype._checkPing=function(){debug("_checkPing :: checking ping..."),this.pingResp?(debug("_checkPing :: ping response received. Clearing flag and sending `pingreq`"),this.pingResp=!1,this._sendPacket({cmd:"pingreq"})):(debug("_checkPing :: calling _cleanUp with force true"),this._cleanUp(!0))},MqttClient.prototype._handlePingresp=function(){this.pingResp=!0},MqttClient.prototype._handleConnack=function(packet){debug("_handleConnack");var options=this.options,rc=5===options.protocolVersion?packet.reasonCode:packet.returnCode;if(clearTimeout(this.connackTimer),packet.properties&&(packet.properties.topicAliasMaximum&&(options.properties||(options.properties={}),options.properties.topicAliasMaximum=packet.properties.topicAliasMaximum),packet.properties.serverKeepAlive&&options.keepalive&&(options.keepalive=packet.properties.serverKeepAlive,this._shiftPingInterval()),packet.properties.maximumPacketSize&&(options.properties||(options.properties={}),options.properties.maximumPacketSize=packet.properties.maximumPacketSize)),0===rc)this.reconnecting=!1,this._onConnect(packet);else if(rc>0){var err=new Error("Connection refused: "+errors[rc]);err.code=rc,this.emit("error",err)}},MqttClient.prototype._handlePublish=function(packet,done){debug("_handlePublish: packet %o",packet),done=void 0!==done?done:nop;var topic=packet.topic.toString(),message=packet.payload,qos=packet.qos,messageId=packet.messageId,that=this,options=this.options,validReasonCodes=[0,16,128,131,135,144,145,151,153];switch(debug("_handlePublish: qos %d",qos),qos){case 2:options.customHandleAcks(topic,message,packet,(function(error,code){return error instanceof Error||(code=error,error=null),error?that.emit("error",error):-1===validReasonCodes.indexOf(code)?that.emit("error",new Error("Wrong reason code for pubrec")):void(code?that._sendPacket({cmd:"pubrec",messageId:messageId,reasonCode:code},done):that.incomingStore.put(packet,(function(){that._sendPacket({cmd:"pubrec",messageId:messageId},done)})))}));break;case 1:options.customHandleAcks(topic,message,packet,(function(error,code){return error instanceof Error||(code=error,error=null),error?that.emit("error",error):-1===validReasonCodes.indexOf(code)?that.emit("error",new Error("Wrong reason code for puback")):(code||that.emit("message",topic,message,packet),void that.handleMessage(packet,(function(err){if(err)return done&&done(err);that._sendPacket({cmd:"puback",messageId:messageId,reasonCode:code},done)})))}));break;case 0:this.emit("message",topic,message,packet),this.handleMessage(packet,done);break;default:debug("_handlePublish: unknown QoS. Doing nothing.")}},MqttClient.prototype.handleMessage=function(packet,callback){callback()},MqttClient.prototype._handleAck=function(packet){var err,messageId=packet.messageId,type=packet.cmd,response=null,cb=this.outgoing[messageId]?this.outgoing[messageId].cb:null,that=this;if(cb){switch(debug("_handleAck :: packet type",type),type){case"pubcomp":case"puback":var pubackRC=packet.reasonCode;pubackRC&&pubackRC>0&&16!==pubackRC&&((err=new Error("Publish error: "+errors[pubackRC])).code=pubackRC,cb(err,packet)),delete this.outgoing[messageId],this.outgoingStore.del(packet,cb);break;case"pubrec":response={cmd:"pubrel",qos:2,messageId:messageId};var pubrecRC=packet.reasonCode;pubrecRC&&pubrecRC>0&&16!==pubrecRC?((err=new Error("Publish error: "+errors[pubrecRC])).code=pubrecRC,cb(err,packet)):this._sendPacket(response);break;case"suback":delete this.outgoing[messageId];for(var grantedI=0;grantedI<packet.granted.length;grantedI++)if(0!=(128&packet.granted[grantedI])){var topics=this.messageIdToTopic[messageId];topics&&topics.forEach((function(topic){delete that._resubscribeTopics[topic]}))}cb(null,packet);break;case"unsuback":delete this.outgoing[messageId],cb(null);break;default:that.emit("error",new Error("unrecognized packet type"))}this.disconnecting&&0===Object.keys(this.outgoing).length&&this.emit("outgoingEmpty")}else debug("_handleAck :: Server sent an ack in error. Ignoring.")},MqttClient.prototype._handlePubrel=function(packet,callback){debug("handling pubrel packet"),callback=void 0!==callback?callback:nop;var messageId=packet.messageId,that=this,comp={cmd:"pubcomp",messageId:messageId};that.incomingStore.get(packet,(function(err,pub){err?that._sendPacket(comp,callback):(that.emit("message",pub.topic,pub.payload,pub),that.handleMessage(pub,(function(err){if(err)return callback(err);that.incomingStore.del(pub,nop),that._sendPacket(comp,callback)})))}))},MqttClient.prototype._handleDisconnect=function(packet){this.emit("disconnect",packet)},MqttClient.prototype._nextId=function(){var id=this.nextId++;return 65536===this.nextId&&(this.nextId=1),id},MqttClient.prototype.getLastMessageId=function(){return 1===this.nextId?65535:this.nextId-1},MqttClient.prototype._resubscribe=function(connack){debug("_resubscribe");var _resubscribeTopicsKeys=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||5===this.options.protocolVersion&&!connack.sessionPresent)&&_resubscribeTopicsKeys.length>0)if(this.options.resubscribe)if(5===this.options.protocolVersion){debug("_resubscribe: protocolVersion 5");for(var topicI=0;topicI<_resubscribeTopicsKeys.length;topicI++){var resubscribeTopic={};resubscribeTopic[_resubscribeTopicsKeys[topicI]]=this._resubscribeTopics[_resubscribeTopicsKeys[topicI]],resubscribeTopic.resubscribe=!0,this.subscribe(resubscribeTopic,{properties:resubscribeTopic[_resubscribeTopicsKeys[topicI]].properties})}}else this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics);else this._resubscribeTopics={};this._firstConnection=!1},MqttClient.prototype._onConnect=function(packet){if(this.disconnected)this.emit("connect",packet);else{var that=this;this._setupPingTimer(),this._resubscribe(packet),this.connected=!0,function startStreamProcess(){var outStore=that.outgoingStore.createStream();function clearStoreProcessing(){that._storeProcessing=!1,that._packetIdsDuringStoreProcessing={}}function remove(){outStore.destroy(),outStore=null,clearStoreProcessing()}that.once("close",remove),outStore.on("error",(function(err){clearStoreProcessing(),that.removeListener("close",remove),that.emit("error",err)})),outStore.on("end",(function(){var allProcessed=!0;for(var id in that._packetIdsDuringStoreProcessing)if(!that._packetIdsDuringStoreProcessing[id]){allProcessed=!1;break}allProcessed?(clearStoreProcessing(),that.removeListener("close",remove),that.emit("connect",packet)):startStreamProcess()})),function storeDeliver(){if(outStore){that._storeProcessing=!0;var cb,packet=outStore.read(1);packet?that._packetIdsDuringStoreProcessing[packet.messageId]?storeDeliver():that.disconnecting||that.reconnectTimer?outStore.destroy&&outStore.destroy():(cb=that.outgoing[packet.messageId]?that.outgoing[packet.messageId].cb:null,that.outgoing[packet.messageId]={volatile:!1,cb:function(err,status){cb&&cb(err,status),storeDeliver()}},that._packetIdsDuringStoreProcessing[packet.messageId]=!0,that._sendPacket(packet)):outStore.once("readable",storeDeliver)}}()}()}},module.exports=MqttClient},function(module,exports,__webpack_require__){"use strict";var pna=__webpack_require__(32);module.exports=Readable;var Duplex,isArray=__webpack_require__(217);Readable.ReadableState=ReadableState;__webpack_require__(4).EventEmitter;var EElistenerCount=function(emitter,type){return emitter.listeners(type).length},Stream=__webpack_require__(90),Buffer=__webpack_require__(36).Buffer,OurUint8Array=global.Uint8Array||function(){};var util=Object.create(__webpack_require__(7));util.inherits=__webpack_require__(2);var debugUtil=__webpack_require__(0),debug=void 0;debug=debugUtil&&debugUtil.debuglog?debugUtil.debuglog("stream"):function(){};var StringDecoder,BufferList=__webpack_require__(218),destroyImpl=__webpack_require__(91);util.inherits(Readable,Stream);var kProxyEvents=["error","close","destroy","pause","resume"];function ReadableState(options,stream){options=options||{};var isDuplex=stream instanceof(Duplex=Duplex||__webpack_require__(21));this.objectMode=!!options.objectMode,isDuplex&&(this.objectMode=this.objectMode||!!options.readableObjectMode);var hwm=options.highWaterMark,readableHwm=options.readableHighWaterMark,defaultHwm=this.objectMode?16:16384;this.highWaterMark=hwm||0===hwm?hwm:isDuplex&&(readableHwm||0===readableHwm)?readableHwm:defaultHwm,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new BufferList,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=options.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,options.encoding&&(StringDecoder||(StringDecoder=__webpack_require__(94).StringDecoder),this.decoder=new StringDecoder(options.encoding),this.encoding=options.encoding)}function Readable(options){if(Duplex=Duplex||__webpack_require__(21),!(this instanceof Readable))return new Readable(options);this._readableState=new ReadableState(options,this),this.readable=!0,options&&("function"==typeof options.read&&(this._read=options.read),"function"==typeof options.destroy&&(this._destroy=options.destroy)),Stream.call(this)}function readableAddChunk(stream,chunk,encoding,addToFront,skipChunkCheck){var er,state=stream._readableState;null===chunk?(state.reading=!1,function(stream,state){if(state.ended)return;if(state.decoder){var chunk=state.decoder.end();chunk&&chunk.length&&(state.buffer.push(chunk),state.length+=state.objectMode?1:chunk.length)}state.ended=!0,emitReadable(stream)}(stream,state)):(skipChunkCheck||(er=function(state,chunk){var er;obj=chunk,Buffer.isBuffer(obj)||obj instanceof OurUint8Array||"string"==typeof chunk||void 0===chunk||state.objectMode||(er=new TypeError("Invalid non-string/buffer chunk"));var obj;return er}(state,chunk)),er?stream.emit("error",er):state.objectMode||chunk&&chunk.length>0?("string"==typeof chunk||state.objectMode||Object.getPrototypeOf(chunk)===Buffer.prototype||(chunk=function(chunk){return Buffer.from(chunk)}(chunk)),addToFront?state.endEmitted?stream.emit("error",new Error("stream.unshift() after end event")):addChunk(stream,state,chunk,!0):state.ended?stream.emit("error",new Error("stream.push() after EOF")):(state.reading=!1,state.decoder&&!encoding?(chunk=state.decoder.write(chunk),state.objectMode||0!==chunk.length?addChunk(stream,state,chunk,!1):maybeReadMore(stream,state)):addChunk(stream,state,chunk,!1))):addToFront||(state.reading=!1));return function(state){return!state.ended&&(state.needReadable||state.length<state.highWaterMark||0===state.length)}(state)}function addChunk(stream,state,chunk,addToFront){state.flowing&&0===state.length&&!state.sync?(stream.emit("data",chunk),stream.read(0)):(state.length+=state.objectMode?1:chunk.length,addToFront?state.buffer.unshift(chunk):state.buffer.push(chunk),state.needReadable&&emitReadable(stream)),maybeReadMore(stream,state)}Object.defineProperty(Readable.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(value){this._readableState&&(this._readableState.destroyed=value)}}),Readable.prototype.destroy=destroyImpl.destroy,Readable.prototype._undestroy=destroyImpl.undestroy,Readable.prototype._destroy=function(err,cb){this.push(null),cb(err)},Readable.prototype.push=function(chunk,encoding){var skipChunkCheck,state=this._readableState;return state.objectMode?skipChunkCheck=!0:"string"==typeof chunk&&((encoding=encoding||state.defaultEncoding)!==state.encoding&&(chunk=Buffer.from(chunk,encoding),encoding=""),skipChunkCheck=!0),readableAddChunk(this,chunk,encoding,!1,skipChunkCheck)},Readable.prototype.unshift=function(chunk){return readableAddChunk(this,chunk,null,!0,!1)},Readable.prototype.isPaused=function(){return!1===this._readableState.flowing},Readable.prototype.setEncoding=function(enc){return StringDecoder||(StringDecoder=__webpack_require__(94).StringDecoder),this._readableState.decoder=new StringDecoder(enc),this._readableState.encoding=enc,this};function howMuchToRead(n,state){return n<=0||0===state.length&&state.ended?0:state.objectMode?1:n!=n?state.flowing&&state.length?state.buffer.head.data.length:state.length:(n>state.highWaterMark&&(state.highWaterMark=function(n){return n>=8388608?n=8388608:(n--,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n++),n}(n)),n<=state.length?n:state.ended?state.length:(state.needReadable=!0,0))}function emitReadable(stream){var state=stream._readableState;state.needReadable=!1,state.emittedReadable||(debug("emitReadable",state.flowing),state.emittedReadable=!0,state.sync?pna.nextTick(emitReadable_,stream):emitReadable_(stream))}function emitReadable_(stream){debug("emit readable"),stream.emit("readable"),flow(stream)}function maybeReadMore(stream,state){state.readingMore||(state.readingMore=!0,pna.nextTick(maybeReadMore_,stream,state))}function maybeReadMore_(stream,state){for(var len=state.length;!state.reading&&!state.flowing&&!state.ended&&state.length<state.highWaterMark&&(debug("maybeReadMore read 0"),stream.read(0),len!==state.length);)len=state.length;state.readingMore=!1}function nReadingNextTick(self){debug("readable nexttick read 0"),self.read(0)}function resume_(stream,state){state.reading||(debug("resume read 0"),stream.read(0)),state.resumeScheduled=!1,state.awaitDrain=0,stream.emit("resume"),flow(stream),state.flowing&&!state.reading&&stream.read(0)}function flow(stream){var state=stream._readableState;for(debug("flow",state.flowing);state.flowing&&null!==stream.read(););}function fromList(n,state){return 0===state.length?null:(state.objectMode?ret=state.buffer.shift():!n||n>=state.length?(ret=state.decoder?state.buffer.join(""):1===state.buffer.length?state.buffer.head.data:state.buffer.concat(state.length),state.buffer.clear()):ret=function(n,list,hasStrings){var ret;n<list.head.data.length?(ret=list.head.data.slice(0,n),list.head.data=list.head.data.slice(n)):ret=n===list.head.data.length?list.shift():hasStrings?function(n,list){var p=list.head,c=1,ret=p.data;n-=ret.length;for(;p=p.next;){var str=p.data,nb=n>str.length?str.length:n;if(nb===str.length?ret+=str:ret+=str.slice(0,n),0===(n-=nb)){nb===str.length?(++c,p.next?list.head=p.next:list.head=list.tail=null):(list.head=p,p.data=str.slice(nb));break}++c}return list.length-=c,ret}(n,list):function(n,list){var ret=Buffer.allocUnsafe(n),p=list.head,c=1;p.data.copy(ret),n-=p.data.length;for(;p=p.next;){var buf=p.data,nb=n>buf.length?buf.length:n;if(buf.copy(ret,ret.length-n,0,nb),0===(n-=nb)){nb===buf.length?(++c,p.next?list.head=p.next:list.head=list.tail=null):(list.head=p,p.data=buf.slice(nb));break}++c}return list.length-=c,ret}(n,list);return ret}(n,state.buffer,state.decoder),ret);var ret}function endReadable(stream){var state=stream._readableState;if(state.length>0)throw new Error('"endReadable()" called on non-empty stream');state.endEmitted||(state.ended=!0,pna.nextTick(endReadableNT,state,stream))}function endReadableNT(state,stream){state.endEmitted||0!==state.length||(state.endEmitted=!0,stream.readable=!1,stream.emit("end"))}function indexOf(xs,x){for(var i=0,l=xs.length;i<l;i++)if(xs[i]===x)return i;return-1}Readable.prototype.read=function(n){debug("read",n),n=parseInt(n,10);var state=this._readableState,nOrig=n;if(0!==n&&(state.emittedReadable=!1),0===n&&state.needReadable&&(state.length>=state.highWaterMark||state.ended))return debug("read: emitReadable",state.length,state.ended),0===state.length&&state.ended?endReadable(this):emitReadable(this),null;if(0===(n=howMuchToRead(n,state))&&state.ended)return 0===state.length&&endReadable(this),null;var ret,doRead=state.needReadable;return debug("need readable",doRead),(0===state.length||state.length-n<state.highWaterMark)&&debug("length less than watermark",doRead=!0),state.ended||state.reading?debug("reading or ended",doRead=!1):doRead&&(debug("do read"),state.reading=!0,state.sync=!0,0===state.length&&(state.needReadable=!0),this._read(state.highWaterMark),state.sync=!1,state.reading||(n=howMuchToRead(nOrig,state))),null===(ret=n>0?fromList(n,state):null)?(state.needReadable=!0,n=0):state.length-=n,0===state.length&&(state.ended||(state.needReadable=!0),nOrig!==n&&state.ended&&endReadable(this)),null!==ret&&this.emit("data",ret),ret},Readable.prototype._read=function(n){this.emit("error",new Error("_read() is not implemented"))},Readable.prototype.pipe=function(dest,pipeOpts){var src=this,state=this._readableState;switch(state.pipesCount){case 0:state.pipes=dest;break;case 1:state.pipes=[state.pipes,dest];break;default:state.pipes.push(dest)}state.pipesCount+=1,debug("pipe count=%d opts=%j",state.pipesCount,pipeOpts);var endFn=(!pipeOpts||!1!==pipeOpts.end)&&dest!==process.stdout&&dest!==process.stderr?onend:unpipe;function onunpipe(readable,unpipeInfo){debug("onunpipe"),readable===src&&unpipeInfo&&!1===unpipeInfo.hasUnpiped&&(unpipeInfo.hasUnpiped=!0,debug("cleanup"),dest.removeListener("close",onclose),dest.removeListener("finish",onfinish),dest.removeListener("drain",ondrain),dest.removeListener("error",onerror),dest.removeListener("unpipe",onunpipe),src.removeListener("end",onend),src.removeListener("end",unpipe),src.removeListener("data",ondata),cleanedUp=!0,!state.awaitDrain||dest._writableState&&!dest._writableState.needDrain||ondrain())}function onend(){debug("onend"),dest.end()}state.endEmitted?pna.nextTick(endFn):src.once("end",endFn),dest.on("unpipe",onunpipe);var ondrain=function(src){return function(){var state=src._readableState;debug("pipeOnDrain",state.awaitDrain),state.awaitDrain&&state.awaitDrain--,0===state.awaitDrain&&EElistenerCount(src,"data")&&(state.flowing=!0,flow(src))}}(src);dest.on("drain",ondrain);var cleanedUp=!1;var increasedAwaitDrain=!1;function ondata(chunk){debug("ondata"),increasedAwaitDrain=!1,!1!==dest.write(chunk)||increasedAwaitDrain||((1===state.pipesCount&&state.pipes===dest||state.pipesCount>1&&-1!==indexOf(state.pipes,dest))&&!cleanedUp&&(debug("false write response, pause",src._readableState.awaitDrain),src._readableState.awaitDrain++,increasedAwaitDrain=!0),src.pause())}function onerror(er){debug("onerror",er),unpipe(),dest.removeListener("error",onerror),0===EElistenerCount(dest,"error")&&dest.emit("error",er)}function onclose(){dest.removeListener("finish",onfinish),unpipe()}function onfinish(){debug("onfinish"),dest.removeListener("close",onclose),unpipe()}function unpipe(){debug("unpipe"),src.unpipe(dest)}return src.on("data",ondata),function(emitter,event,fn){if("function"==typeof emitter.prependListener)return emitter.prependListener(event,fn);emitter._events&&emitter._events[event]?isArray(emitter._events[event])?emitter._events[event].unshift(fn):emitter._events[event]=[fn,emitter._events[event]]:emitter.on(event,fn)}(dest,"error",onerror),dest.once("close",onclose),dest.once("finish",onfinish),dest.emit("pipe",src),state.flowing||(debug("pipe resume"),src.resume()),dest},Readable.prototype.unpipe=function(dest){var state=this._readableState,unpipeInfo={hasUnpiped:!1};if(0===state.pipesCount)return this;if(1===state.pipesCount)return dest&&dest!==state.pipes||(dest||(dest=state.pipes),state.pipes=null,state.pipesCount=0,state.flowing=!1,dest&&dest.emit("unpipe",this,unpipeInfo)),this;if(!dest){var dests=state.pipes,len=state.pipesCount;state.pipes=null,state.pipesCount=0,state.flowing=!1;for(var i=0;i<len;i++)dests[i].emit("unpipe",this,unpipeInfo);return this}var index=indexOf(state.pipes,dest);return-1===index||(state.pipes.splice(index,1),state.pipesCount-=1,1===state.pipesCount&&(state.pipes=state.pipes[0]),dest.emit("unpipe",this,unpipeInfo)),this},Readable.prototype.on=function(ev,fn){var res=Stream.prototype.on.call(this,ev,fn);if("data"===ev)!1!==this._readableState.flowing&&this.resume();else if("readable"===ev){var state=this._readableState;state.endEmitted||state.readableListening||(state.readableListening=state.needReadable=!0,state.emittedReadable=!1,state.reading?state.length&&emitReadable(this):pna.nextTick(nReadingNextTick,this))}return res},Readable.prototype.addListener=Readable.prototype.on,Readable.prototype.resume=function(){var state=this._readableState;return state.flowing||(debug("resume"),state.flowing=!0,function(stream,state){state.resumeScheduled||(state.resumeScheduled=!0,pna.nextTick(resume_,stream,state))}(this,state)),this},Readable.prototype.pause=function(){return debug("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(debug("pause"),this._readableState.flowing=!1,this.emit("pause")),this},Readable.prototype.wrap=function(stream){var _this=this,state=this._readableState,paused=!1;for(var i in stream.on("end",(function(){if(debug("wrapped end"),state.decoder&&!state.ended){var chunk=state.decoder.end();chunk&&chunk.length&&_this.push(chunk)}_this.push(null)})),stream.on("data",(function(chunk){(debug("wrapped data"),state.decoder&&(chunk=state.decoder.write(chunk)),state.objectMode&&null==chunk)||(state.objectMode||chunk&&chunk.length)&&(_this.push(chunk)||(paused=!0,stream.pause()))})),stream)void 0===this[i]&&"function"==typeof stream[i]&&(this[i]=function(method){return function(){return stream[method].apply(stream,arguments)}}(i));for(var n=0;n<kProxyEvents.length;n++)stream.on(kProxyEvents[n],this.emit.bind(this,kProxyEvents[n]));return this._read=function(n){debug("wrapped _read",n),paused&&(paused=!1,stream.resume())},this},Object.defineProperty(Readable.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Readable._fromList=fromList},function(module,exports,__webpack_require__){module.exports=__webpack_require__(6)},function(module,exports,__webpack_require__){"use strict";var pna=__webpack_require__(32);function emitErrorNT(self,err){self.emit("error",err)}module.exports={destroy:function(err,cb){var _this=this,readableDestroyed=this._readableState&&this._readableState.destroyed,writableDestroyed=this._writableState&&this._writableState.destroyed;return readableDestroyed||writableDestroyed?(cb?cb(err):!err||this._writableState&&this._writableState.errorEmitted||pna.nextTick(emitErrorNT,this,err),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(err||null,(function(err){!cb&&err?(pna.nextTick(emitErrorNT,_this,err),_this._writableState&&(_this._writableState.errorEmitted=!0)):cb&&cb(err)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(module,exports,__webpack_require__){"use strict";var pna=__webpack_require__(32);function CorkedRequest(state){var _this=this;this.next=null,this.entry=null,this.finish=function(){!function(corkReq,state,err){var entry=corkReq.entry;corkReq.entry=null;for(;entry;){var cb=entry.callback;state.pendingcb--,cb(err),entry=entry.next}state.corkedRequestsFree?state.corkedRequestsFree.next=corkReq:state.corkedRequestsFree=corkReq}(_this,state)}}module.exports=Writable;var Duplex,asyncWrite=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:pna.nextTick;Writable.WritableState=WritableState;var util=Object.create(__webpack_require__(7));util.inherits=__webpack_require__(2);var internalUtil={deprecate:__webpack_require__(93)},Stream=__webpack_require__(90),Buffer=__webpack_require__(36).Buffer,OurUint8Array=global.Uint8Array||function(){};var realHasInstance,destroyImpl=__webpack_require__(91);function nop(){}function WritableState(options,stream){Duplex=Duplex||__webpack_require__(21),options=options||{};var isDuplex=stream instanceof Duplex;this.objectMode=!!options.objectMode,isDuplex&&(this.objectMode=this.objectMode||!!options.writableObjectMode);var hwm=options.highWaterMark,writableHwm=options.writableHighWaterMark,defaultHwm=this.objectMode?16:16384;this.highWaterMark=hwm||0===hwm?hwm:isDuplex&&(writableHwm||0===writableHwm)?writableHwm:defaultHwm,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var noDecode=!1===options.decodeStrings;this.decodeStrings=!noDecode,this.defaultEncoding=options.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(er){!function(stream,er){var state=stream._writableState,sync=state.sync,cb=state.writecb;if(function(state){state.writing=!1,state.writecb=null,state.length-=state.writelen,state.writelen=0}(state),er)!function(stream,state,sync,er,cb){--state.pendingcb,sync?(pna.nextTick(cb,er),pna.nextTick(finishMaybe,stream,state),stream._writableState.errorEmitted=!0,stream.emit("error",er)):(cb(er),stream._writableState.errorEmitted=!0,stream.emit("error",er),finishMaybe(stream,state))}(stream,state,sync,er,cb);else{var finished=needFinish(state);finished||state.corked||state.bufferProcessing||!state.bufferedRequest||clearBuffer(stream,state),sync?asyncWrite(afterWrite,stream,state,finished,cb):afterWrite(stream,state,finished,cb)}}(stream,er)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new CorkedRequest(this)}function Writable(options){if(Duplex=Duplex||__webpack_require__(21),!(realHasInstance.call(Writable,this)||this instanceof Duplex))return new Writable(options);this._writableState=new WritableState(options,this),this.writable=!0,options&&("function"==typeof options.write&&(this._write=options.write),"function"==typeof options.writev&&(this._writev=options.writev),"function"==typeof options.destroy&&(this._destroy=options.destroy),"function"==typeof options.final&&(this._final=options.final)),Stream.call(this)}function doWrite(stream,state,writev,len,chunk,encoding,cb){state.writelen=len,state.writecb=cb,state.writing=!0,state.sync=!0,writev?stream._writev(chunk,state.onwrite):stream._write(chunk,encoding,state.onwrite),state.sync=!1}function afterWrite(stream,state,finished,cb){finished||function(stream,state){0===state.length&&state.needDrain&&(state.needDrain=!1,stream.emit("drain"))}(stream,state),state.pendingcb--,cb(),finishMaybe(stream,state)}function clearBuffer(stream,state){state.bufferProcessing=!0;var entry=state.bufferedRequest;if(stream._writev&&entry&&entry.next){var l=state.bufferedRequestCount,buffer=new Array(l),holder=state.corkedRequestsFree;holder.entry=entry;for(var count=0,allBuffers=!0;entry;)buffer[count]=entry,entry.isBuf||(allBuffers=!1),entry=entry.next,count+=1;buffer.allBuffers=allBuffers,doWrite(stream,state,!0,state.length,buffer,"",holder.finish),state.pendingcb++,state.lastBufferedRequest=null,holder.next?(state.corkedRequestsFree=holder.next,holder.next=null):state.corkedRequestsFree=new CorkedRequest(state),state.bufferedRequestCount=0}else{for(;entry;){var chunk=entry.chunk,encoding=entry.encoding,cb=entry.callback;if(doWrite(stream,state,!1,state.objectMode?1:chunk.length,chunk,encoding,cb),entry=entry.next,state.bufferedRequestCount--,state.writing)break}null===entry&&(state.lastBufferedRequest=null)}state.bufferedRequest=entry,state.bufferProcessing=!1}function needFinish(state){return state.ending&&0===state.length&&null===state.bufferedRequest&&!state.finished&&!state.writing}function callFinal(stream,state){stream._final((function(err){state.pendingcb--,err&&stream.emit("error",err),state.prefinished=!0,stream.emit("prefinish"),finishMaybe(stream,state)}))}function finishMaybe(stream,state){var need=needFinish(state);return need&&(!function(stream,state){state.prefinished||state.finalCalled||("function"==typeof stream._final?(state.pendingcb++,state.finalCalled=!0,pna.nextTick(callFinal,stream,state)):(state.prefinished=!0,stream.emit("prefinish")))}(stream,state),0===state.pendingcb&&(state.finished=!0,stream.emit("finish"))),need}util.inherits(Writable,Stream),WritableState.prototype.getBuffer=function(){for(var current=this.bufferedRequest,out=[];current;)out.push(current),current=current.next;return out},function(){try{Object.defineProperty(WritableState.prototype,"buffer",{get:internalUtil.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(_){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(realHasInstance=Function.prototype[Symbol.hasInstance],Object.defineProperty(Writable,Symbol.hasInstance,{value:function(object){return!!realHasInstance.call(this,object)||this===Writable&&(object&&object._writableState instanceof WritableState)}})):realHasInstance=function(object){return object instanceof this},Writable.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},Writable.prototype.write=function(chunk,encoding,cb){var obj,state=this._writableState,ret=!1,isBuf=!state.objectMode&&(obj=chunk,Buffer.isBuffer(obj)||obj instanceof OurUint8Array);return isBuf&&!Buffer.isBuffer(chunk)&&(chunk=function(chunk){return Buffer.from(chunk)}(chunk)),"function"==typeof encoding&&(cb=encoding,encoding=null),isBuf?encoding="buffer":encoding||(encoding=state.defaultEncoding),"function"!=typeof cb&&(cb=nop),state.ended?function(stream,cb){var er=new Error("write after end");stream.emit("error",er),pna.nextTick(cb,er)}(this,cb):(isBuf||function(stream,state,chunk,cb){var valid=!0,er=!1;return null===chunk?er=new TypeError("May not write null values to stream"):"string"==typeof chunk||void 0===chunk||state.objectMode||(er=new TypeError("Invalid non-string/buffer chunk")),er&&(stream.emit("error",er),pna.nextTick(cb,er),valid=!1),valid}(this,state,chunk,cb))&&(state.pendingcb++,ret=function(stream,state,isBuf,chunk,encoding,cb){if(!isBuf){var newChunk=function(state,chunk,encoding){state.objectMode||!1===state.decodeStrings||"string"!=typeof chunk||(chunk=Buffer.from(chunk,encoding));return chunk}(state,chunk,encoding);chunk!==newChunk&&(isBuf=!0,encoding="buffer",chunk=newChunk)}var len=state.objectMode?1:chunk.length;state.length+=len;var ret=state.length<state.highWaterMark;ret||(state.needDrain=!0);if(state.writing||state.corked){var last=state.lastBufferedRequest;state.lastBufferedRequest={chunk:chunk,encoding:encoding,isBuf:isBuf,callback:cb,next:null},last?last.next=state.lastBufferedRequest:state.bufferedRequest=state.lastBufferedRequest,state.bufferedRequestCount+=1}else doWrite(stream,state,!1,len,chunk,encoding,cb);return ret}(this,state,isBuf,chunk,encoding,cb)),ret},Writable.prototype.cork=function(){this._writableState.corked++},Writable.prototype.uncork=function(){var state=this._writableState;state.corked&&(state.corked--,state.writing||state.corked||state.finished||state.bufferProcessing||!state.bufferedRequest||clearBuffer(this,state))},Writable.prototype.setDefaultEncoding=function(encoding){if("string"==typeof encoding&&(encoding=encoding.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((encoding+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+encoding);return this._writableState.defaultEncoding=encoding,this},Object.defineProperty(Writable.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Writable.prototype._write=function(chunk,encoding,cb){cb(new Error("_write() is not implemented"))},Writable.prototype._writev=null,Writable.prototype.end=function(chunk,encoding,cb){var state=this._writableState;"function"==typeof chunk?(cb=chunk,chunk=null,encoding=null):"function"==typeof encoding&&(cb=encoding,encoding=null),null!=chunk&&this.write(chunk,encoding),state.corked&&(state.corked=1,this.uncork()),state.ending||state.finished||function(stream,state,cb){state.ending=!0,finishMaybe(stream,state),cb&&(state.finished?pna.nextTick(cb):stream.once("finish",cb));state.ended=!0,stream.writable=!1}(this,state,cb)},Object.defineProperty(Writable.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(value){this._writableState&&(this._writableState.destroyed=value)}}),Writable.prototype.destroy=destroyImpl.destroy,Writable.prototype._undestroy=destroyImpl.undestroy,Writable.prototype._destroy=function(err,cb){this.end(),cb(err)}},function(module,exports,__webpack_require__){module.exports=__webpack_require__(0).deprecate},function(module,exports,__webpack_require__){"use strict";var Buffer=__webpack_require__(36).Buffer,isEncoding=Buffer.isEncoding||function(encoding){switch((encoding=""+encoding)&&encoding.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function StringDecoder(encoding){var nb;switch(this.encoding=function(enc){var nenc=function(enc){if(!enc)return"utf8";for(var retried;;)switch(enc){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return enc;default:if(retried)return;enc=(""+enc).toLowerCase(),retried=!0}}(enc);if("string"!=typeof nenc&&(Buffer.isEncoding===isEncoding||!isEncoding(enc)))throw new Error("Unknown encoding: "+enc);return nenc||enc}(encoding),this.encoding){case"utf16le":this.text=utf16Text,this.end=utf16End,nb=4;break;case"utf8":this.fillLast=utf8FillLast,nb=4;break;case"base64":this.text=base64Text,this.end=base64End,nb=3;break;default:return this.write=simpleWrite,void(this.end=simpleEnd)}this.lastNeed=0,this.lastTotal=0,this.lastChar=Buffer.allocUnsafe(nb)}function utf8CheckByte(byte){return byte<=127?0:byte>>5==6?2:byte>>4==14?3:byte>>3==30?4:byte>>6==2?-1:-2}function utf8FillLast(buf){var p=this.lastTotal-this.lastNeed,r=function(self,buf,p){if(128!=(192&buf[0]))return self.lastNeed=0,"";if(self.lastNeed>1&&buf.length>1){if(128!=(192&buf[1]))return self.lastNeed=1,"";if(self.lastNeed>2&&buf.length>2&&128!=(192&buf[2]))return self.lastNeed=2,""}}(this,buf);return void 0!==r?r:this.lastNeed<=buf.length?(buf.copy(this.lastChar,p,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(buf.copy(this.lastChar,p,0,buf.length),void(this.lastNeed-=buf.length))}function utf16Text(buf,i){if((buf.length-i)%2==0){var r=buf.toString("utf16le",i);if(r){var c=r.charCodeAt(r.length-1);if(c>=55296&&c<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=buf[buf.length-2],this.lastChar[1]=buf[buf.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=buf[buf.length-1],buf.toString("utf16le",i,buf.length-1)}function utf16End(buf){var r=buf&&buf.length?this.write(buf):"";if(this.lastNeed){var end=this.lastTotal-this.lastNeed;return r+this.lastChar.toString("utf16le",0,end)}return r}function base64Text(buf,i){var n=(buf.length-i)%3;return 0===n?buf.toString("base64",i):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=buf[buf.length-1]:(this.lastChar[0]=buf[buf.length-2],this.lastChar[1]=buf[buf.length-1]),buf.toString("base64",i,buf.length-n))}function base64End(buf){var r=buf&&buf.length?this.write(buf):"";return this.lastNeed?r+this.lastChar.toString("base64",0,3-this.lastNeed):r}function simpleWrite(buf){return buf.toString(this.encoding)}function simpleEnd(buf){return buf&&buf.length?this.write(buf):""}exports.StringDecoder=StringDecoder,StringDecoder.prototype.write=function(buf){if(0===buf.length)return"";var r,i;if(this.lastNeed){if(void 0===(r=this.fillLast(buf)))return"";i=this.lastNeed,this.lastNeed=0}else i=0;return i<buf.length?r?r+this.text(buf,i):this.text(buf,i):r||""},StringDecoder.prototype.end=function(buf){var r=buf&&buf.length?this.write(buf):"";return this.lastNeed?r+"":r},StringDecoder.prototype.text=function(buf,i){var total=function(self,buf,i){var j=buf.length-1;if(j<i)return 0;var nb=utf8CheckByte(buf[j]);if(nb>=0)return nb>0&&(self.lastNeed=nb-1),nb;if(--j<i||-2===nb)return 0;if((nb=utf8CheckByte(buf[j]))>=0)return nb>0&&(self.lastNeed=nb-2),nb;if(--j<i||-2===nb)return 0;if((nb=utf8CheckByte(buf[j]))>=0)return nb>0&&(2===nb?nb=0:self.lastNeed=nb-3),nb;return 0}(this,buf,i);if(!this.lastNeed)return buf.toString("utf8",i);this.lastTotal=total;var end=buf.length-(total-this.lastNeed);return buf.copy(this.lastChar,0,end),buf.toString("utf8",i,end)},StringDecoder.prototype.fillLast=function(buf){if(this.lastNeed<=buf.length)return buf.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);buf.copy(this.lastChar,this.lastTotal-this.lastNeed,0,buf.length),this.lastNeed-=buf.length}},function(module,exports,__webpack_require__){"use strict";module.exports=Transform;var Duplex=__webpack_require__(21),util=Object.create(__webpack_require__(7));function afterTransform(er,data){var ts=this._transformState;ts.transforming=!1;var cb=ts.writecb;if(!cb)return this.emit("error",new Error("write callback called multiple times"));ts.writechunk=null,ts.writecb=null,null!=data&&this.push(data),cb(er);var rs=this._readableState;rs.reading=!1,(rs.needReadable||rs.length<rs.highWaterMark)&&this._read(rs.highWaterMark)}function Transform(options){if(!(this instanceof Transform))return new Transform(options);Duplex.call(this,options),this._transformState={afterTransform:afterTransform.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,options&&("function"==typeof options.transform&&(this._transform=options.transform),"function"==typeof options.flush&&(this._flush=options.flush)),this.on("prefinish",prefinish)}function prefinish(){var _this=this;"function"==typeof this._flush?this._flush((function(er,data){done(_this,er,data)})):done(this,null,null)}function done(stream,er,data){if(er)return stream.emit("error",er);if(null!=data&&stream.push(data),stream._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(stream._transformState.transforming)throw new Error("Calling transform done when still transforming");return stream.push(null)}util.inherits=__webpack_require__(2),util.inherits(Transform,Duplex),Transform.prototype.push=function(chunk,encoding){return this._transformState.needTransform=!1,Duplex.prototype.push.call(this,chunk,encoding)},Transform.prototype._transform=function(chunk,encoding,cb){throw new Error("_transform() is not implemented")},Transform.prototype._write=function(chunk,encoding,cb){var ts=this._transformState;if(ts.writecb=cb,ts.writechunk=chunk,ts.writeencoding=encoding,!ts.transforming){var rs=this._readableState;(ts.needTransform||rs.needReadable||rs.length<rs.highWaterMark)&&this._read(rs.highWaterMark)}},Transform.prototype._read=function(n){var ts=this._transformState;null!==ts.writechunk&&ts.writecb&&!ts.transforming?(ts.transforming=!0,this._transform(ts.writechunk,ts.writeencoding,ts.afterTransform)):ts.needTransform=!0},Transform.prototype._destroy=function(err,cb){var _this2=this;Duplex.prototype._destroy.call(this,err,(function(err2){cb(err2),_this2.emit("close")}))}},function(module,exports,__webpack_require__){"use strict";var value=__webpack_require__(9);module.exports=function(){return value(this).length=0,this}},function(module,exports,__webpack_require__){"use strict";var toInteger=__webpack_require__(228),max=Math.max;module.exports=function(value){return max(0,toInteger(value))}},function(module,exports,__webpack_require__){"use strict";var create=Object.create,getPrototypeOf=Object.getPrototypeOf,plainObject={};module.exports=function(){var setPrototypeOf=Object.setPrototypeOf,customCreate=arguments[0]||create;return"function"==typeof setPrototypeOf&&getPrototypeOf(setPrototypeOf(customCreate(null),plainObject))===plainObject}},function(module,exports,__webpack_require__){"use strict";var validate,status,fn,set,isObject=__webpack_require__(232),value=__webpack_require__(9),objIsPrototypeOf=Object.prototype.isPrototypeOf,defineProperty=Object.defineProperty,nullDesc={configurable:!0,enumerable:!1,writable:!0,value:void 0};validate=function(obj,prototype){if(value(obj),null===prototype||isObject(prototype))return obj;throw new TypeError("Prototype must be null or an object")},module.exports=(status=function(){var set,tmpObj1=Object.create(null),tmpObj2={},desc=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(desc){try{(set=desc.set).call(tmpObj1,tmpObj2)}catch(ignore){}if(Object.getPrototypeOf(tmpObj1)===tmpObj2)return{set:set,level:2}}return tmpObj1.__proto__=tmpObj2,Object.getPrototypeOf(tmpObj1)===tmpObj2?{level:2}:((tmpObj1={}).__proto__=tmpObj2,Object.getPrototypeOf(tmpObj1)===tmpObj2&&{level:1})}())?(2===status.level?status.set?(set=status.set,fn=function(obj,prototype){return set.call(validate(obj,prototype),prototype),obj}):fn=function(obj,prototype){return validate(obj,prototype).__proto__=prototype,obj}:fn=function self(obj,prototype){var isNullBase;return validate(obj,prototype),(isNullBase=objIsPrototypeOf.call(self.nullPolyfill,obj))&&delete self.nullPolyfill.__proto__,null===prototype&&(prototype=self.nullPolyfill),obj.__proto__=prototype,isNullBase&&defineProperty(self.nullPolyfill,"__proto__",nullDesc),obj},Object.defineProperty(fn,"level",{configurable:!1,enumerable:!1,writable:!1,value:status.level})):null,__webpack_require__(233)},function(module,exports,__webpack_require__){"use strict";var isFunction=__webpack_require__(234),classRe=/^\s*class[\s{/}]/,functionToString=Function.prototype.toString;module.exports=function(value){return!!isFunction(value)&&!classRe.test(functionToString.call(value))}},function(module,exports,__webpack_require__){"use strict";var isValue=__webpack_require__(22),forEach=Array.prototype.forEach,create=Object.create,process=function(src,obj){var key;for(key in src)obj[key]=src[key]};module.exports=function(opts1){var result=create(null);return forEach.call(arguments,(function(options){isValue(options)&&process(Object(options),result)})),result}},function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(241)()?String.prototype.contains:__webpack_require__(242)},function(module,exports,__webpack_require__){"use strict";var isSymbol=__webpack_require__(248);module.exports=function(value){if(!isSymbol(value))throw new TypeError(value+" is not a symbol");return value}},function(module,exports,__webpack_require__){"use strict";var isIterable=__webpack_require__(252);module.exports=function(value){if(!isIterable(value))throw new TypeError(value+" is not iterable");return value}},function(module,exports,__webpack_require__){"use strict";var isValue=__webpack_require__(23),isObject=__webpack_require__(55),stringCoerce=__webpack_require__(258),toShortString=__webpack_require__(259),resolveMessage=function(message,value){return message.replace("%v",toShortString(value))};module.exports=function(value,defaultMessage,inputOptions){if(!isObject(inputOptions))throw new TypeError(resolveMessage(defaultMessage,value));if(!isValue(value)){if("default"in inputOptions)return inputOptions.default;if(inputOptions.isOptional)return null}var errorMessage=stringCoerce(inputOptions.errorMessage);throw isValue(errorMessage)||(errorMessage=defaultMessage),new TypeError(resolveMessage(errorMessage,value))}},function(module,exports,__webpack_require__){"use strict";var Duplex;module.exports=Readable,Readable.ReadableState=ReadableState;__webpack_require__(4).EventEmitter;var EElistenerCount=function(emitter,type){return emitter.listeners(type).length},Stream=__webpack_require__(107),Buffer=__webpack_require__(5).Buffer,OurUint8Array=global.Uint8Array||function(){};var debug,debugUtil=__webpack_require__(0);debug=debugUtil&&debugUtil.debuglog?debugUtil.debuglog("stream"):function(){};var StringDecoder,createReadableStreamAsyncIterator,from,BufferList=__webpack_require__(279),destroyImpl=__webpack_require__(108),getHighWaterMark=__webpack_require__(109).getHighWaterMark,_require$codes=__webpack_require__(17).codes,ERR_INVALID_ARG_TYPE=_require$codes.ERR_INVALID_ARG_TYPE,ERR_STREAM_PUSH_AFTER_EOF=_require$codes.ERR_STREAM_PUSH_AFTER_EOF,ERR_METHOD_NOT_IMPLEMENTED=_require$codes.ERR_METHOD_NOT_IMPLEMENTED,ERR_STREAM_UNSHIFT_AFTER_END_EVENT=_require$codes.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;__webpack_require__(2)(Readable,Stream);var errorOrDestroy=destroyImpl.errorOrDestroy,kProxyEvents=["error","close","destroy","pause","resume"];function ReadableState(options,stream,isDuplex){Duplex=Duplex||__webpack_require__(24),options=options||{},"boolean"!=typeof isDuplex&&(isDuplex=stream instanceof Duplex),this.objectMode=!!options.objectMode,isDuplex&&(this.objectMode=this.objectMode||!!options.readableObjectMode),this.highWaterMark=getHighWaterMark(this,options,"readableHighWaterMark",isDuplex),this.buffer=new BufferList,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==options.emitClose,this.autoDestroy=!!options.autoDestroy,this.destroyed=!1,this.defaultEncoding=options.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,options.encoding&&(StringDecoder||(StringDecoder=__webpack_require__(111).StringDecoder),this.decoder=new StringDecoder(options.encoding),this.encoding=options.encoding)}function Readable(options){if(Duplex=Duplex||__webpack_require__(24),!(this instanceof Readable))return new Readable(options);var isDuplex=this instanceof Duplex;this._readableState=new ReadableState(options,this,isDuplex),this.readable=!0,options&&("function"==typeof options.read&&(this._read=options.read),"function"==typeof options.destroy&&(this._destroy=options.destroy)),Stream.call(this)}function readableAddChunk(stream,chunk,encoding,addToFront,skipChunkCheck){debug("readableAddChunk",chunk);var er,state=stream._readableState;if(null===chunk)state.reading=!1,function(stream,state){if(debug("onEofChunk"),state.ended)return;if(state.decoder){var chunk=state.decoder.end();chunk&&chunk.length&&(state.buffer.push(chunk),state.length+=state.objectMode?1:chunk.length)}state.ended=!0,state.sync?emitReadable(stream):(state.needReadable=!1,state.emittedReadable||(state.emittedReadable=!0,emitReadable_(stream)))}(stream,state);else if(skipChunkCheck||(er=function(state,chunk){var er;obj=chunk,Buffer.isBuffer(obj)||obj instanceof OurUint8Array||"string"==typeof chunk||void 0===chunk||state.objectMode||(er=new ERR_INVALID_ARG_TYPE("chunk",["string","Buffer","Uint8Array"],chunk));var obj;return er}(state,chunk)),er)errorOrDestroy(stream,er);else if(state.objectMode||chunk&&chunk.length>0)if("string"==typeof chunk||state.objectMode||Object.getPrototypeOf(chunk)===Buffer.prototype||(chunk=function(chunk){return Buffer.from(chunk)}(chunk)),addToFront)state.endEmitted?errorOrDestroy(stream,new ERR_STREAM_UNSHIFT_AFTER_END_EVENT):addChunk(stream,state,chunk,!0);else if(state.ended)errorOrDestroy(stream,new ERR_STREAM_PUSH_AFTER_EOF);else{if(state.destroyed)return!1;state.reading=!1,state.decoder&&!encoding?(chunk=state.decoder.write(chunk),state.objectMode||0!==chunk.length?addChunk(stream,state,chunk,!1):maybeReadMore(stream,state)):addChunk(stream,state,chunk,!1)}else addToFront||(state.reading=!1,maybeReadMore(stream,state));return!state.ended&&(state.length<state.highWaterMark||0===state.length)}function addChunk(stream,state,chunk,addToFront){state.flowing&&0===state.length&&!state.sync?(state.awaitDrain=0,stream.emit("data",chunk)):(state.length+=state.objectMode?1:chunk.length,addToFront?state.buffer.unshift(chunk):state.buffer.push(chunk),state.needReadable&&emitReadable(stream)),maybeReadMore(stream,state)}Object.defineProperty(Readable.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(value){this._readableState&&(this._readableState.destroyed=value)}}),Readable.prototype.destroy=destroyImpl.destroy,Readable.prototype._undestroy=destroyImpl.undestroy,Readable.prototype._destroy=function(err,cb){cb(err)},Readable.prototype.push=function(chunk,encoding){var skipChunkCheck,state=this._readableState;return state.objectMode?skipChunkCheck=!0:"string"==typeof chunk&&((encoding=encoding||state.defaultEncoding)!==state.encoding&&(chunk=Buffer.from(chunk,encoding),encoding=""),skipChunkCheck=!0),readableAddChunk(this,chunk,encoding,!1,skipChunkCheck)},Readable.prototype.unshift=function(chunk){return readableAddChunk(this,chunk,null,!0,!1)},Readable.prototype.isPaused=function(){return!1===this._readableState.flowing},Readable.prototype.setEncoding=function(enc){StringDecoder||(StringDecoder=__webpack_require__(111).StringDecoder);var decoder=new StringDecoder(enc);this._readableState.decoder=decoder,this._readableState.encoding=this._readableState.decoder.encoding;for(var p=this._readableState.buffer.head,content="";null!==p;)content+=decoder.write(p.data),p=p.next;return this._readableState.buffer.clear(),""!==content&&this._readableState.buffer.push(content),this._readableState.length=content.length,this};function howMuchToRead(n,state){return n<=0||0===state.length&&state.ended?0:state.objectMode?1:n!=n?state.flowing&&state.length?state.buffer.head.data.length:state.length:(n>state.highWaterMark&&(state.highWaterMark=function(n){return n>=1073741824?n=1073741824:(n--,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n++),n}(n)),n<=state.length?n:state.ended?state.length:(state.needReadable=!0,0))}function emitReadable(stream){var state=stream._readableState;debug("emitReadable",state.needReadable,state.emittedReadable),state.needReadable=!1,state.emittedReadable||(debug("emitReadable",state.flowing),state.emittedReadable=!0,process.nextTick(emitReadable_,stream))}function emitReadable_(stream){var state=stream._readableState;debug("emitReadable_",state.destroyed,state.length,state.ended),state.destroyed||!state.length&&!state.ended||(stream.emit("readable"),state.emittedReadable=!1),state.needReadable=!state.flowing&&!state.ended&&state.length<=state.highWaterMark,flow(stream)}function maybeReadMore(stream,state){state.readingMore||(state.readingMore=!0,process.nextTick(maybeReadMore_,stream,state))}function maybeReadMore_(stream,state){for(;!state.reading&&!state.ended&&(state.length<state.highWaterMark||state.flowing&&0===state.length);){var len=state.length;if(debug("maybeReadMore read 0"),stream.read(0),len===state.length)break}state.readingMore=!1}function updateReadableListening(self){var state=self._readableState;state.readableListening=self.listenerCount("readable")>0,state.resumeScheduled&&!state.paused?state.flowing=!0:self.listenerCount("data")>0&&self.resume()}function nReadingNextTick(self){debug("readable nexttick read 0"),self.read(0)}function resume_(stream,state){debug("resume",state.reading),state.reading||stream.read(0),state.resumeScheduled=!1,stream.emit("resume"),flow(stream),state.flowing&&!state.reading&&stream.read(0)}function flow(stream){var state=stream._readableState;for(debug("flow",state.flowing);state.flowing&&null!==stream.read(););}function fromList(n,state){return 0===state.length?null:(state.objectMode?ret=state.buffer.shift():!n||n>=state.length?(ret=state.decoder?state.buffer.join(""):1===state.buffer.length?state.buffer.first():state.buffer.concat(state.length),state.buffer.clear()):ret=state.buffer.consume(n,state.decoder),ret);var ret}function endReadable(stream){var state=stream._readableState;debug("endReadable",state.endEmitted),state.endEmitted||(state.ended=!0,process.nextTick(endReadableNT,state,stream))}function endReadableNT(state,stream){if(debug("endReadableNT",state.endEmitted,state.length),!state.endEmitted&&0===state.length&&(state.endEmitted=!0,stream.readable=!1,stream.emit("end"),state.autoDestroy)){var wState=stream._writableState;(!wState||wState.autoDestroy&&wState.finished)&&stream.destroy()}}function indexOf(xs,x){for(var i=0,l=xs.length;i<l;i++)if(xs[i]===x)return i;return-1}Readable.prototype.read=function(n){debug("read",n),n=parseInt(n,10);var state=this._readableState,nOrig=n;if(0!==n&&(state.emittedReadable=!1),0===n&&state.needReadable&&((0!==state.highWaterMark?state.length>=state.highWaterMark:state.length>0)||state.ended))return debug("read: emitReadable",state.length,state.ended),0===state.length&&state.ended?endReadable(this):emitReadable(this),null;if(0===(n=howMuchToRead(n,state))&&state.ended)return 0===state.length&&endReadable(this),null;var ret,doRead=state.needReadable;return debug("need readable",doRead),(0===state.length||state.length-n<state.highWaterMark)&&debug("length less than watermark",doRead=!0),state.ended||state.reading?debug("reading or ended",doRead=!1):doRead&&(debug("do read"),state.reading=!0,state.sync=!0,0===state.length&&(state.needReadable=!0),this._read(state.highWaterMark),state.sync=!1,state.reading||(n=howMuchToRead(nOrig,state))),null===(ret=n>0?fromList(n,state):null)?(state.needReadable=state.length<=state.highWaterMark,n=0):(state.length-=n,state.awaitDrain=0),0===state.length&&(state.ended||(state.needReadable=!0),nOrig!==n&&state.ended&&endReadable(this)),null!==ret&&this.emit("data",ret),ret},Readable.prototype._read=function(n){errorOrDestroy(this,new ERR_METHOD_NOT_IMPLEMENTED("_read()"))},Readable.prototype.pipe=function(dest,pipeOpts){var src=this,state=this._readableState;switch(state.pipesCount){case 0:state.pipes=dest;break;case 1:state.pipes=[state.pipes,dest];break;default:state.pipes.push(dest)}state.pipesCount+=1,debug("pipe count=%d opts=%j",state.pipesCount,pipeOpts);var endFn=(!pipeOpts||!1!==pipeOpts.end)&&dest!==process.stdout&&dest!==process.stderr?onend:unpipe;function onunpipe(readable,unpipeInfo){debug("onunpipe"),readable===src&&unpipeInfo&&!1===unpipeInfo.hasUnpiped&&(unpipeInfo.hasUnpiped=!0,debug("cleanup"),dest.removeListener("close",onclose),dest.removeListener("finish",onfinish),dest.removeListener("drain",ondrain),dest.removeListener("error",onerror),dest.removeListener("unpipe",onunpipe),src.removeListener("end",onend),src.removeListener("end",unpipe),src.removeListener("data",ondata),cleanedUp=!0,!state.awaitDrain||dest._writableState&&!dest._writableState.needDrain||ondrain())}function onend(){debug("onend"),dest.end()}state.endEmitted?process.nextTick(endFn):src.once("end",endFn),dest.on("unpipe",onunpipe);var ondrain=function(src){return function(){var state=src._readableState;debug("pipeOnDrain",state.awaitDrain),state.awaitDrain&&state.awaitDrain--,0===state.awaitDrain&&EElistenerCount(src,"data")&&(state.flowing=!0,flow(src))}}(src);dest.on("drain",ondrain);var cleanedUp=!1;function ondata(chunk){debug("ondata");var ret=dest.write(chunk);debug("dest.write",ret),!1===ret&&((1===state.pipesCount&&state.pipes===dest||state.pipesCount>1&&-1!==indexOf(state.pipes,dest))&&!cleanedUp&&(debug("false write response, pause",state.awaitDrain),state.awaitDrain++),src.pause())}function onerror(er){debug("onerror",er),unpipe(),dest.removeListener("error",onerror),0===EElistenerCount(dest,"error")&&errorOrDestroy(dest,er)}function onclose(){dest.removeListener("finish",onfinish),unpipe()}function onfinish(){debug("onfinish"),dest.removeListener("close",onclose),unpipe()}function unpipe(){debug("unpipe"),src.unpipe(dest)}return src.on("data",ondata),function(emitter,event,fn){if("function"==typeof emitter.prependListener)return emitter.prependListener(event,fn);emitter._events&&emitter._events[event]?Array.isArray(emitter._events[event])?emitter._events[event].unshift(fn):emitter._events[event]=[fn,emitter._events[event]]:emitter.on(event,fn)}(dest,"error",onerror),dest.once("close",onclose),dest.once("finish",onfinish),dest.emit("pipe",src),state.flowing||(debug("pipe resume"),src.resume()),dest},Readable.prototype.unpipe=function(dest){var state=this._readableState,unpipeInfo={hasUnpiped:!1};if(0===state.pipesCount)return this;if(1===state.pipesCount)return dest&&dest!==state.pipes||(dest||(dest=state.pipes),state.pipes=null,state.pipesCount=0,state.flowing=!1,dest&&dest.emit("unpipe",this,unpipeInfo)),this;if(!dest){var dests=state.pipes,len=state.pipesCount;state.pipes=null,state.pipesCount=0,state.flowing=!1;for(var i=0;i<len;i++)dests[i].emit("unpipe",this,{hasUnpiped:!1});return this}var index=indexOf(state.pipes,dest);return-1===index||(state.pipes.splice(index,1),state.pipesCount-=1,1===state.pipesCount&&(state.pipes=state.pipes[0]),dest.emit("unpipe",this,unpipeInfo)),this},Readable.prototype.on=function(ev,fn){var res=Stream.prototype.on.call(this,ev,fn),state=this._readableState;return"data"===ev?(state.readableListening=this.listenerCount("readable")>0,!1!==state.flowing&&this.resume()):"readable"===ev&&(state.endEmitted||state.readableListening||(state.readableListening=state.needReadable=!0,state.flowing=!1,state.emittedReadable=!1,debug("on readable",state.length,state.reading),state.length?emitReadable(this):state.reading||process.nextTick(nReadingNextTick,this))),res},Readable.prototype.addListener=Readable.prototype.on,Readable.prototype.removeListener=function(ev,fn){var res=Stream.prototype.removeListener.call(this,ev,fn);return"readable"===ev&&process.nextTick(updateReadableListening,this),res},Readable.prototype.removeAllListeners=function(ev){var res=Stream.prototype.removeAllListeners.apply(this,arguments);return"readable"!==ev&&void 0!==ev||process.nextTick(updateReadableListening,this),res},Readable.prototype.resume=function(){var state=this._readableState;return state.flowing||(debug("resume"),state.flowing=!state.readableListening,function(stream,state){state.resumeScheduled||(state.resumeScheduled=!0,process.nextTick(resume_,stream,state))}(this,state)),state.paused=!1,this},Readable.prototype.pause=function(){return debug("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(debug("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},Readable.prototype.wrap=function(stream){var _this=this,state=this._readableState,paused=!1;for(var i in stream.on("end",(function(){if(debug("wrapped end"),state.decoder&&!state.ended){var chunk=state.decoder.end();chunk&&chunk.length&&_this.push(chunk)}_this.push(null)})),stream.on("data",(function(chunk){(debug("wrapped data"),state.decoder&&(chunk=state.decoder.write(chunk)),state.objectMode&&null==chunk)||(state.objectMode||chunk&&chunk.length)&&(_this.push(chunk)||(paused=!0,stream.pause()))})),stream)void 0===this[i]&&"function"==typeof stream[i]&&(this[i]=function(method){return function(){return stream[method].apply(stream,arguments)}}(i));for(var n=0;n<kProxyEvents.length;n++)stream.on(kProxyEvents[n],this.emit.bind(this,kProxyEvents[n]));return this._read=function(n){debug("wrapped _read",n),paused&&(paused=!1,stream.resume())},this},"function"==typeof Symbol&&(Readable.prototype[Symbol.asyncIterator]=function(){return void 0===createReadableStreamAsyncIterator&&(createReadableStreamAsyncIterator=__webpack_require__(280)),createReadableStreamAsyncIterator(this)}),Object.defineProperty(Readable.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(Readable.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(Readable.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(state){this._readableState&&(this._readableState.flowing=state)}}),Readable._fromList=fromList,Object.defineProperty(Readable.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(Readable.from=function(iterable,opts){return void 0===from&&(from=__webpack_require__(281)),from(Readable,iterable,opts)})},function(module,exports,__webpack_require__){module.exports=__webpack_require__(6)},function(module,exports,__webpack_require__){"use strict";function emitErrorAndCloseNT(self,err){emitErrorNT(self,err),emitCloseNT(self)}function emitCloseNT(self){self._writableState&&!self._writableState.emitClose||self._readableState&&!self._readableState.emitClose||self.emit("close")}function emitErrorNT(self,err){self.emit("error",err)}module.exports={destroy:function(err,cb){var _this=this,readableDestroyed=this._readableState&&this._readableState.destroyed,writableDestroyed=this._writableState&&this._writableState.destroyed;return readableDestroyed||writableDestroyed?(cb?cb(err):err&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(emitErrorNT,this,err)):process.nextTick(emitErrorNT,this,err)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(err||null,(function(err){!cb&&err?_this._writableState?_this._writableState.errorEmitted?process.nextTick(emitCloseNT,_this):(_this._writableState.errorEmitted=!0,process.nextTick(emitErrorAndCloseNT,_this,err)):process.nextTick(emitErrorAndCloseNT,_this,err):cb?(process.nextTick(emitCloseNT,_this),cb(err)):process.nextTick(emitCloseNT,_this)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(stream,err){var rState=stream._readableState,wState=stream._writableState;rState&&rState.autoDestroy||wState&&wState.autoDestroy?stream.destroy(err):stream.emit("error",err)}}},function(module,exports,__webpack_require__){"use strict";var ERR_INVALID_OPT_VALUE=__webpack_require__(17).codes.ERR_INVALID_OPT_VALUE;module.exports={getHighWaterMark:function(state,options,duplexKey,isDuplex){var hwm=function(options,isDuplex,duplexKey){return null!=options.highWaterMark?options.highWaterMark:isDuplex?options[duplexKey]:null}(options,isDuplex,duplexKey);if(null!=hwm){if(!isFinite(hwm)||Math.floor(hwm)!==hwm||hwm<0)throw new ERR_INVALID_OPT_VALUE(isDuplex?duplexKey:"highWaterMark",hwm);return Math.floor(hwm)}return state.objectMode?16:16384}}},function(module,exports,__webpack_require__){"use strict";function CorkedRequest(state){var _this=this;this.next=null,this.entry=null,this.finish=function(){!function(corkReq,state,err){var entry=corkReq.entry;corkReq.entry=null;for(;entry;){var cb=entry.callback;state.pendingcb--,cb(err),entry=entry.next}state.corkedRequestsFree.next=corkReq}(_this,state)}}var Duplex;module.exports=Writable,Writable.WritableState=WritableState;var internalUtil={deprecate:__webpack_require__(93)},Stream=__webpack_require__(107),Buffer=__webpack_require__(5).Buffer,OurUint8Array=global.Uint8Array||function(){};var realHasInstance,destroyImpl=__webpack_require__(108),getHighWaterMark=__webpack_require__(109).getHighWaterMark,_require$codes=__webpack_require__(17).codes,ERR_INVALID_ARG_TYPE=_require$codes.ERR_INVALID_ARG_TYPE,ERR_METHOD_NOT_IMPLEMENTED=_require$codes.ERR_METHOD_NOT_IMPLEMENTED,ERR_MULTIPLE_CALLBACK=_require$codes.ERR_MULTIPLE_CALLBACK,ERR_STREAM_CANNOT_PIPE=_require$codes.ERR_STREAM_CANNOT_PIPE,ERR_STREAM_DESTROYED=_require$codes.ERR_STREAM_DESTROYED,ERR_STREAM_NULL_VALUES=_require$codes.ERR_STREAM_NULL_VALUES,ERR_STREAM_WRITE_AFTER_END=_require$codes.ERR_STREAM_WRITE_AFTER_END,ERR_UNKNOWN_ENCODING=_require$codes.ERR_UNKNOWN_ENCODING,errorOrDestroy=destroyImpl.errorOrDestroy;function nop(){}function WritableState(options,stream,isDuplex){Duplex=Duplex||__webpack_require__(24),options=options||{},"boolean"!=typeof isDuplex&&(isDuplex=stream instanceof Duplex),this.objectMode=!!options.objectMode,isDuplex&&(this.objectMode=this.objectMode||!!options.writableObjectMode),this.highWaterMark=getHighWaterMark(this,options,"writableHighWaterMark",isDuplex),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var noDecode=!1===options.decodeStrings;this.decodeStrings=!noDecode,this.defaultEncoding=options.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(er){!function(stream,er){var state=stream._writableState,sync=state.sync,cb=state.writecb;if("function"!=typeof cb)throw new ERR_MULTIPLE_CALLBACK;if(function(state){state.writing=!1,state.writecb=null,state.length-=state.writelen,state.writelen=0}(state),er)!function(stream,state,sync,er,cb){--state.pendingcb,sync?(process.nextTick(cb,er),process.nextTick(finishMaybe,stream,state),stream._writableState.errorEmitted=!0,errorOrDestroy(stream,er)):(cb(er),stream._writableState.errorEmitted=!0,errorOrDestroy(stream,er),finishMaybe(stream,state))}(stream,state,sync,er,cb);else{var finished=needFinish(state)||stream.destroyed;finished||state.corked||state.bufferProcessing||!state.bufferedRequest||clearBuffer(stream,state),sync?process.nextTick(afterWrite,stream,state,finished,cb):afterWrite(stream,state,finished,cb)}}(stream,er)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==options.emitClose,this.autoDestroy=!!options.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new CorkedRequest(this)}function Writable(options){var isDuplex=this instanceof(Duplex=Duplex||__webpack_require__(24));if(!isDuplex&&!realHasInstance.call(Writable,this))return new Writable(options);this._writableState=new WritableState(options,this,isDuplex),this.writable=!0,options&&("function"==typeof options.write&&(this._write=options.write),"function"==typeof options.writev&&(this._writev=options.writev),"function"==typeof options.destroy&&(this._destroy=options.destroy),"function"==typeof options.final&&(this._final=options.final)),Stream.call(this)}function doWrite(stream,state,writev,len,chunk,encoding,cb){state.writelen=len,state.writecb=cb,state.writing=!0,state.sync=!0,state.destroyed?state.onwrite(new ERR_STREAM_DESTROYED("write")):writev?stream._writev(chunk,state.onwrite):stream._write(chunk,encoding,state.onwrite),state.sync=!1}function afterWrite(stream,state,finished,cb){finished||function(stream,state){0===state.length&&state.needDrain&&(state.needDrain=!1,stream.emit("drain"))}(stream,state),state.pendingcb--,cb(),finishMaybe(stream,state)}function clearBuffer(stream,state){state.bufferProcessing=!0;var entry=state.bufferedRequest;if(stream._writev&&entry&&entry.next){var l=state.bufferedRequestCount,buffer=new Array(l),holder=state.corkedRequestsFree;holder.entry=entry;for(var count=0,allBuffers=!0;entry;)buffer[count]=entry,entry.isBuf||(allBuffers=!1),entry=entry.next,count+=1;buffer.allBuffers=allBuffers,doWrite(stream,state,!0,state.length,buffer,"",holder.finish),state.pendingcb++,state.lastBufferedRequest=null,holder.next?(state.corkedRequestsFree=holder.next,holder.next=null):state.corkedRequestsFree=new CorkedRequest(state),state.bufferedRequestCount=0}else{for(;entry;){var chunk=entry.chunk,encoding=entry.encoding,cb=entry.callback;if(doWrite(stream,state,!1,state.objectMode?1:chunk.length,chunk,encoding,cb),entry=entry.next,state.bufferedRequestCount--,state.writing)break}null===entry&&(state.lastBufferedRequest=null)}state.bufferedRequest=entry,state.bufferProcessing=!1}function needFinish(state){return state.ending&&0===state.length&&null===state.bufferedRequest&&!state.finished&&!state.writing}function callFinal(stream,state){stream._final((function(err){state.pendingcb--,err&&errorOrDestroy(stream,err),state.prefinished=!0,stream.emit("prefinish"),finishMaybe(stream,state)}))}function finishMaybe(stream,state){var need=needFinish(state);if(need&&(function(stream,state){state.prefinished||state.finalCalled||("function"!=typeof stream._final||state.destroyed?(state.prefinished=!0,stream.emit("prefinish")):(state.pendingcb++,state.finalCalled=!0,process.nextTick(callFinal,stream,state)))}(stream,state),0===state.pendingcb&&(state.finished=!0,stream.emit("finish"),state.autoDestroy))){var rState=stream._readableState;(!rState||rState.autoDestroy&&rState.endEmitted)&&stream.destroy()}return need}__webpack_require__(2)(Writable,Stream),WritableState.prototype.getBuffer=function(){for(var current=this.bufferedRequest,out=[];current;)out.push(current),current=current.next;return out},function(){try{Object.defineProperty(WritableState.prototype,"buffer",{get:internalUtil.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(_){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(realHasInstance=Function.prototype[Symbol.hasInstance],Object.defineProperty(Writable,Symbol.hasInstance,{value:function(object){return!!realHasInstance.call(this,object)||this===Writable&&(object&&object._writableState instanceof WritableState)}})):realHasInstance=function(object){return object instanceof this},Writable.prototype.pipe=function(){errorOrDestroy(this,new ERR_STREAM_CANNOT_PIPE)},Writable.prototype.write=function(chunk,encoding,cb){var obj,state=this._writableState,ret=!1,isBuf=!state.objectMode&&(obj=chunk,Buffer.isBuffer(obj)||obj instanceof OurUint8Array);return isBuf&&!Buffer.isBuffer(chunk)&&(chunk=function(chunk){return Buffer.from(chunk)}(chunk)),"function"==typeof encoding&&(cb=encoding,encoding=null),isBuf?encoding="buffer":encoding||(encoding=state.defaultEncoding),"function"!=typeof cb&&(cb=nop),state.ending?function(stream,cb){var er=new ERR_STREAM_WRITE_AFTER_END;errorOrDestroy(stream,er),process.nextTick(cb,er)}(this,cb):(isBuf||function(stream,state,chunk,cb){var er;return null===chunk?er=new ERR_STREAM_NULL_VALUES:"string"==typeof chunk||state.objectMode||(er=new ERR_INVALID_ARG_TYPE("chunk",["string","Buffer"],chunk)),!er||(errorOrDestroy(stream,er),process.nextTick(cb,er),!1)}(this,state,chunk,cb))&&(state.pendingcb++,ret=function(stream,state,isBuf,chunk,encoding,cb){if(!isBuf){var newChunk=function(state,chunk,encoding){state.objectMode||!1===state.decodeStrings||"string"!=typeof chunk||(chunk=Buffer.from(chunk,encoding));return chunk}(state,chunk,encoding);chunk!==newChunk&&(isBuf=!0,encoding="buffer",chunk=newChunk)}var len=state.objectMode?1:chunk.length;state.length+=len;var ret=state.length<state.highWaterMark;ret||(state.needDrain=!0);if(state.writing||state.corked){var last=state.lastBufferedRequest;state.lastBufferedRequest={chunk:chunk,encoding:encoding,isBuf:isBuf,callback:cb,next:null},last?last.next=state.lastBufferedRequest:state.bufferedRequest=state.lastBufferedRequest,state.bufferedRequestCount+=1}else doWrite(stream,state,!1,len,chunk,encoding,cb);return ret}(this,state,isBuf,chunk,encoding,cb)),ret},Writable.prototype.cork=function(){this._writableState.corked++},Writable.prototype.uncork=function(){var state=this._writableState;state.corked&&(state.corked--,state.writing||state.corked||state.bufferProcessing||!state.bufferedRequest||clearBuffer(this,state))},Writable.prototype.setDefaultEncoding=function(encoding){if("string"==typeof encoding&&(encoding=encoding.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((encoding+"").toLowerCase())>-1))throw new ERR_UNKNOWN_ENCODING(encoding);return this._writableState.defaultEncoding=encoding,this},Object.defineProperty(Writable.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(Writable.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Writable.prototype._write=function(chunk,encoding,cb){cb(new ERR_METHOD_NOT_IMPLEMENTED("_write()"))},Writable.prototype._writev=null,Writable.prototype.end=function(chunk,encoding,cb){var state=this._writableState;return"function"==typeof chunk?(cb=chunk,chunk=null,encoding=null):"function"==typeof encoding&&(cb=encoding,encoding=null),null!=chunk&&this.write(chunk,encoding),state.corked&&(state.corked=1,this.uncork()),state.ending||function(stream,state,cb){state.ending=!0,finishMaybe(stream,state),cb&&(state.finished?process.nextTick(cb):stream.once("finish",cb));state.ended=!0,stream.writable=!1}(this,state,cb),this},Object.defineProperty(Writable.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(Writable.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(value){this._writableState&&(this._writableState.destroyed=value)}}),Writable.prototype.destroy=destroyImpl.destroy,Writable.prototype._undestroy=destroyImpl.undestroy,Writable.prototype._destroy=function(err,cb){cb(err)}},function(module,exports,__webpack_require__){"use strict";var Buffer=__webpack_require__(112).Buffer,isEncoding=Buffer.isEncoding||function(encoding){switch((encoding=""+encoding)&&encoding.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function StringDecoder(encoding){var nb;switch(this.encoding=function(enc){var nenc=function(enc){if(!enc)return"utf8";for(var retried;;)switch(enc){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return enc;default:if(retried)return;enc=(""+enc).toLowerCase(),retried=!0}}(enc);if("string"!=typeof nenc&&(Buffer.isEncoding===isEncoding||!isEncoding(enc)))throw new Error("Unknown encoding: "+enc);return nenc||enc}(encoding),this.encoding){case"utf16le":this.text=utf16Text,this.end=utf16End,nb=4;break;case"utf8":this.fillLast=utf8FillLast,nb=4;break;case"base64":this.text=base64Text,this.end=base64End,nb=3;break;default:return this.write=simpleWrite,void(this.end=simpleEnd)}this.lastNeed=0,this.lastTotal=0,this.lastChar=Buffer.allocUnsafe(nb)}function utf8CheckByte(byte){return byte<=127?0:byte>>5==6?2:byte>>4==14?3:byte>>3==30?4:byte>>6==2?-1:-2}function utf8FillLast(buf){var p=this.lastTotal-this.lastNeed,r=function(self,buf,p){if(128!=(192&buf[0]))return self.lastNeed=0,"";if(self.lastNeed>1&&buf.length>1){if(128!=(192&buf[1]))return self.lastNeed=1,"";if(self.lastNeed>2&&buf.length>2&&128!=(192&buf[2]))return self.lastNeed=2,""}}(this,buf);return void 0!==r?r:this.lastNeed<=buf.length?(buf.copy(this.lastChar,p,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(buf.copy(this.lastChar,p,0,buf.length),void(this.lastNeed-=buf.length))}function utf16Text(buf,i){if((buf.length-i)%2==0){var r=buf.toString("utf16le",i);if(r){var c=r.charCodeAt(r.length-1);if(c>=55296&&c<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=buf[buf.length-2],this.lastChar[1]=buf[buf.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=buf[buf.length-1],buf.toString("utf16le",i,buf.length-1)}function utf16End(buf){var r=buf&&buf.length?this.write(buf):"";if(this.lastNeed){var end=this.lastTotal-this.lastNeed;return r+this.lastChar.toString("utf16le",0,end)}return r}function base64Text(buf,i){var n=(buf.length-i)%3;return 0===n?buf.toString("base64",i):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=buf[buf.length-1]:(this.lastChar[0]=buf[buf.length-2],this.lastChar[1]=buf[buf.length-1]),buf.toString("base64",i,buf.length-n))}function base64End(buf){var r=buf&&buf.length?this.write(buf):"";return this.lastNeed?r+this.lastChar.toString("base64",0,3-this.lastNeed):r}function simpleWrite(buf){return buf.toString(this.encoding)}function simpleEnd(buf){return buf&&buf.length?this.write(buf):""}exports.StringDecoder=StringDecoder,StringDecoder.prototype.write=function(buf){if(0===buf.length)return"";var r,i;if(this.lastNeed){if(void 0===(r=this.fillLast(buf)))return"";i=this.lastNeed,this.lastNeed=0}else i=0;return i<buf.length?r?r+this.text(buf,i):this.text(buf,i):r||""},StringDecoder.prototype.end=function(buf){var r=buf&&buf.length?this.write(buf):"";return this.lastNeed?r+"":r},StringDecoder.prototype.text=function(buf,i){var total=function(self,buf,i){var j=buf.length-1;if(j<i)return 0;var nb=utf8CheckByte(buf[j]);if(nb>=0)return nb>0&&(self.lastNeed=nb-1),nb;if(--j<i||-2===nb)return 0;if((nb=utf8CheckByte(buf[j]))>=0)return nb>0&&(self.lastNeed=nb-2),nb;if(--j<i||-2===nb)return 0;if((nb=utf8CheckByte(buf[j]))>=0)return nb>0&&(2===nb?nb=0:self.lastNeed=nb-3),nb;return 0}(this,buf,i);if(!this.lastNeed)return buf.toString("utf8",i);this.lastTotal=total;var end=buf.length-(total-this.lastNeed);return buf.copy(this.lastChar,0,end),buf.toString("utf8",i,end)},StringDecoder.prototype.fillLast=function(buf){if(this.lastNeed<=buf.length)return buf.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);buf.copy(this.lastChar,this.lastTotal-this.lastNeed,0,buf.length),this.lastNeed-=buf.length}},function(module,exports,__webpack_require__){
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
var buffer=__webpack_require__(5),Buffer=buffer.Buffer;function copyProps(src,dst){for(var key in src)dst[key]=src[key]}function SafeBuffer(arg,encodingOrOffset,length){return Buffer(arg,encodingOrOffset,length)}Buffer.from&&Buffer.alloc&&Buffer.allocUnsafe&&Buffer.allocUnsafeSlow?module.exports=buffer:(copyProps(buffer,exports),exports.Buffer=SafeBuffer),SafeBuffer.prototype=Object.create(Buffer.prototype),copyProps(Buffer,SafeBuffer),SafeBuffer.from=function(arg,encodingOrOffset,length){if("number"==typeof arg)throw new TypeError("Argument must not be a number");return Buffer(arg,encodingOrOffset,length)},SafeBuffer.alloc=function(size,fill,encoding){if("number"!=typeof size)throw new TypeError("Argument must be a number");var buf=Buffer(size);return void 0!==fill?"string"==typeof encoding?buf.fill(fill,encoding):buf.fill(fill):buf.fill(0),buf},SafeBuffer.allocUnsafe=function(size){if("number"!=typeof size)throw new TypeError("Argument must be a number");return Buffer(size)},SafeBuffer.allocUnsafeSlow=function(size){if("number"!=typeof size)throw new TypeError("Argument must be a number");return buffer.SlowBuffer(size)}},function(module,exports,__webpack_require__){"use strict";module.exports=Transform;var _require$codes=__webpack_require__(17).codes,ERR_METHOD_NOT_IMPLEMENTED=_require$codes.ERR_METHOD_NOT_IMPLEMENTED,ERR_MULTIPLE_CALLBACK=_require$codes.ERR_MULTIPLE_CALLBACK,ERR_TRANSFORM_ALREADY_TRANSFORMING=_require$codes.ERR_TRANSFORM_ALREADY_TRANSFORMING,ERR_TRANSFORM_WITH_LENGTH_0=_require$codes.ERR_TRANSFORM_WITH_LENGTH_0,Duplex=__webpack_require__(24);function afterTransform(er,data){var ts=this._transformState;ts.transforming=!1;var cb=ts.writecb;if(null===cb)return this.emit("error",new ERR_MULTIPLE_CALLBACK);ts.writechunk=null,ts.writecb=null,null!=data&&this.push(data),cb(er);var rs=this._readableState;rs.reading=!1,(rs.needReadable||rs.length<rs.highWaterMark)&&this._read(rs.highWaterMark)}function Transform(options){if(!(this instanceof Transform))return new Transform(options);Duplex.call(this,options),this._transformState={afterTransform:afterTransform.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,options&&("function"==typeof options.transform&&(this._transform=options.transform),"function"==typeof options.flush&&(this._flush=options.flush)),this.on("prefinish",prefinish)}function prefinish(){var _this=this;"function"!=typeof this._flush||this._readableState.destroyed?done(this,null,null):this._flush((function(er,data){done(_this,er,data)}))}function done(stream,er,data){if(er)return stream.emit("error",er);if(null!=data&&stream.push(data),stream._writableState.length)throw new ERR_TRANSFORM_WITH_LENGTH_0;if(stream._transformState.transforming)throw new ERR_TRANSFORM_ALREADY_TRANSFORMING;return stream.push(null)}__webpack_require__(2)(Transform,Duplex),Transform.prototype.push=function(chunk,encoding){return this._transformState.needTransform=!1,Duplex.prototype.push.call(this,chunk,encoding)},Transform.prototype._transform=function(chunk,encoding,cb){cb(new ERR_METHOD_NOT_IMPLEMENTED("_transform()"))},Transform.prototype._write=function(chunk,encoding,cb){var ts=this._transformState;if(ts.writecb=cb,ts.writechunk=chunk,ts.writeencoding=encoding,!ts.transforming){var rs=this._readableState;(ts.needTransform||rs.needReadable||rs.length<rs.highWaterMark)&&this._read(rs.highWaterMark)}},Transform.prototype._read=function(n){var ts=this._transformState;null===ts.writechunk||ts.transforming?ts.needTransform=!0:(ts.transforming=!0,this._transform(ts.writechunk,ts.writeencoding,ts.afterTransform))},Transform.prototype._destroy=function(err,cb){Duplex.prototype._destroy.call(this,err,(function(err2){cb(err2)}))}},function(module,exports){const protocol=module.exports;protocol.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"},protocol.codes={};for(const k in protocol.types){const v=protocol.types[k];protocol.codes[v]=k}protocol.CMD_SHIFT=4,protocol.CMD_MASK=240,protocol.DUP_MASK=8,protocol.QOS_MASK=3,protocol.QOS_SHIFT=1,protocol.RETAIN_MASK=1,protocol.VARBYTEINT_MASK=127,protocol.VARBYTEINT_FIN_MASK=128,protocol.SESSIONPRESENT_MASK=1,protocol.SESSIONPRESENT_HEADER=Buffer.from([protocol.SESSIONPRESENT_MASK]),protocol.CONNACK_HEADER=Buffer.from([protocol.codes.connack<<protocol.CMD_SHIFT]),protocol.USERNAME_MASK=128,protocol.PASSWORD_MASK=64,protocol.WILL_RETAIN_MASK=32,protocol.WILL_QOS_MASK=24,protocol.WILL_QOS_SHIFT=3,protocol.WILL_FLAG_MASK=4,protocol.CLEAN_SESSION_MASK=2,protocol.CONNECT_HEADER=Buffer.from([protocol.codes.connect<<protocol.CMD_SHIFT]),protocol.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11},protocol.propertiesCodes={};for(const prop in protocol.properties){const id=protocol.properties[prop];protocol.propertiesCodes[id]=prop}function genHeader(type){return[0,1,2].map((qos=>[0,1].map((dup=>[0,1].map((retain=>{const buf=Buffer.alloc(1);return buf.writeUInt8(protocol.codes[type]<<protocol.CMD_SHIFT|(dup?protocol.DUP_MASK:0)|qos<<protocol.QOS_SHIFT|retain,0,!0),buf}))))))}protocol.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"},protocol.PUBLISH_HEADER=genHeader("publish"),protocol.SUBSCRIBE_HEADER=genHeader("subscribe"),protocol.SUBSCRIBE_OPTIONS_QOS_MASK=3,protocol.SUBSCRIBE_OPTIONS_NL_MASK=1,protocol.SUBSCRIBE_OPTIONS_NL_SHIFT=2,protocol.SUBSCRIBE_OPTIONS_RAP_MASK=1,protocol.SUBSCRIBE_OPTIONS_RAP_SHIFT=3,protocol.SUBSCRIBE_OPTIONS_RH_MASK=3,protocol.SUBSCRIBE_OPTIONS_RH_SHIFT=4,protocol.SUBSCRIBE_OPTIONS_RH=[0,16,32],protocol.SUBSCRIBE_OPTIONS_NL=4,protocol.SUBSCRIBE_OPTIONS_RAP=8,protocol.SUBSCRIBE_OPTIONS_QOS=[0,1,2],protocol.UNSUBSCRIBE_HEADER=genHeader("unsubscribe"),protocol.ACKS={unsuback:genHeader("unsuback"),puback:genHeader("puback"),pubcomp:genHeader("pubcomp"),pubrel:genHeader("pubrel"),pubrec:genHeader("pubrec")},protocol.SUBACK_HEADER=Buffer.from([protocol.codes.suback<<protocol.CMD_SHIFT]),protocol.VERSION3=Buffer.from([3]),protocol.VERSION4=Buffer.from([4]),protocol.VERSION5=Buffer.from([5]),protocol.QOS=[0,1,2].map((qos=>Buffer.from([qos]))),protocol.EMPTY={pingreq:Buffer.from([protocol.codes.pingreq<<4,0]),pingresp:Buffer.from([protocol.codes.pingresp<<4,0]),disconnect:Buffer.from([protocol.codes.disconnect<<4,0])}},function(module,exports,__webpack_require__){const protocol=__webpack_require__(114),empty=Buffer.allocUnsafe(0),zeroBuf=Buffer.from([0]),numbers=__webpack_require__(287),nextTick=__webpack_require__(32).nextTick,debug=__webpack_require__(13)("mqtt-packet:writeToStream"),numCache=numbers.cache,generateNumber=numbers.generateNumber,generateCache=numbers.generateCache,genBufVariableByteInt=numbers.genBufVariableByteInt,generate4ByteBuffer=numbers.generate4ByteBuffer;let writeNumber=writeNumberCached,toGenerate=!0;function generate(packet,stream,opts){switch(debug("generate called"),stream.cork&&(stream.cork(),nextTick(uncork,stream)),toGenerate&&(toGenerate=!1,generateCache()),debug("generate: packet.cmd: %s",packet.cmd),packet.cmd){case"connect":return function(packet,stream,opts){const settings=packet||{},protocolId=settings.protocolId||"MQTT",protocolVersion=settings.protocolVersion||4,will=settings.will;let clean=settings.clean;const keepalive=settings.keepalive||0,clientId=settings.clientId||"",username=settings.username,password=settings.password,properties=settings.properties;void 0===clean&&(clean=!0);let length=0;if(!protocolId||"string"!=typeof protocolId&&!Buffer.isBuffer(protocolId))return stream.emit("error",new Error("Invalid protocolId")),!1;length+=protocolId.length+2;if(3!==protocolVersion&&4!==protocolVersion&&5!==protocolVersion)return stream.emit("error",new Error("Invalid protocol version")),!1;length+=1;if("string"!=typeof clientId&&!Buffer.isBuffer(clientId)||!clientId&&4!==protocolVersion||!clientId&&!clean){if(protocolVersion<4)return stream.emit("error",new Error("clientId must be supplied before 3.1.1")),!1;if(1*clean==0)return stream.emit("error",new Error("clientId must be given if cleanSession set to 0")),!1}else length+=clientId.length+2;if("number"!=typeof keepalive||keepalive<0||keepalive>65535||keepalive%1!=0)return stream.emit("error",new Error("Invalid keepalive")),!1;length+=2;if(length+=1,5===protocolVersion){var propertiesData=getProperties(stream,properties);if(!propertiesData)return!1;length+=propertiesData.length}if(will){if("object"!=typeof will)return stream.emit("error",new Error("Invalid will")),!1;if(!will.topic||"string"!=typeof will.topic)return stream.emit("error",new Error("Invalid will topic")),!1;if(length+=Buffer.byteLength(will.topic)+2,length+=2,will.payload){if(!(will.payload.length>=0))return stream.emit("error",new Error("Invalid will payload")),!1;"string"==typeof will.payload?length+=Buffer.byteLength(will.payload):length+=will.payload.length}var willProperties={};if(5===protocolVersion){if(!(willProperties=getProperties(stream,will.properties)))return!1;length+=willProperties.length}}let providedUsername=!1;if(null!=username){if(!isStringOrBuffer(username))return stream.emit("error",new Error("Invalid username")),!1;providedUsername=!0,length+=Buffer.byteLength(username)+2}if(null!=password){if(!providedUsername)return stream.emit("error",new Error("Username is required to use password")),!1;if(!isStringOrBuffer(password))return stream.emit("error",new Error("Invalid password")),!1;length+=byteLength(password)+2}stream.write(protocol.CONNECT_HEADER),writeVarByteInt(stream,length),writeStringOrBuffer(stream,protocolId),stream.write(4===protocolVersion?protocol.VERSION4:5===protocolVersion?protocol.VERSION5:protocol.VERSION3);let flags=0;flags|=null!=username?protocol.USERNAME_MASK:0,flags|=null!=password?protocol.PASSWORD_MASK:0,flags|=will&&will.retain?protocol.WILL_RETAIN_MASK:0,flags|=will&&will.qos?will.qos<<protocol.WILL_QOS_SHIFT:0,flags|=will?protocol.WILL_FLAG_MASK:0,flags|=clean?protocol.CLEAN_SESSION_MASK:0,stream.write(Buffer.from([flags])),writeNumber(stream,keepalive),5===protocolVersion&&propertiesData.write();writeStringOrBuffer(stream,clientId),will&&(5===protocolVersion&&willProperties.write(),writeString(stream,will.topic),writeStringOrBuffer(stream,will.payload));null!=username&&writeStringOrBuffer(stream,username);null!=password&&writeStringOrBuffer(stream,password);return!0}(packet,stream);case"connack":return function(packet,stream,opts){const version=opts?opts.protocolVersion:4,settings=packet||{},rc=5===version?settings.reasonCode:settings.returnCode,properties=settings.properties;let length=2;if("number"!=typeof rc)return stream.emit("error",new Error("Invalid return code")),!1;let propertiesData=null;if(5===version){if(propertiesData=getProperties(stream,properties),!propertiesData)return!1;length+=propertiesData.length}stream.write(protocol.CONNACK_HEADER),writeVarByteInt(stream,length),stream.write(settings.sessionPresent?protocol.SESSIONPRESENT_HEADER:zeroBuf),stream.write(Buffer.from([rc])),null!=propertiesData&&propertiesData.write();return!0}(packet,stream,opts);case"publish":return function(packet,stream,opts){debug("publish: packet: %o",packet);const version=opts?opts.protocolVersion:4,settings=packet||{},qos=settings.qos||0,retain=settings.retain?protocol.RETAIN_MASK:0,topic=settings.topic,payload=settings.payload||empty,id=settings.messageId,properties=settings.properties;let length=0;if("string"==typeof topic)length+=Buffer.byteLength(topic)+2;else{if(!Buffer.isBuffer(topic))return stream.emit("error",new Error("Invalid topic")),!1;length+=topic.length+2}Buffer.isBuffer(payload)?length+=payload.length:length+=Buffer.byteLength(payload);if(qos&&"number"!=typeof id)return stream.emit("error",new Error("Invalid messageId")),!1;qos&&(length+=2);let propertiesData=null;if(5===version){if(propertiesData=getProperties(stream,properties),!propertiesData)return!1;length+=propertiesData.length}stream.write(protocol.PUBLISH_HEADER[qos][settings.dup?1:0][retain?1:0]),writeVarByteInt(stream,length),writeNumber(stream,byteLength(topic)),stream.write(topic),qos>0&&writeNumber(stream,id);null!=propertiesData&&propertiesData.write();return debug("publish: payload: %o",payload),stream.write(payload)}(packet,stream,opts);case"puback":case"pubrec":case"pubrel":case"pubcomp":return function(packet,stream,opts){const version=opts?opts.protocolVersion:4,settings=packet||{},type=settings.cmd||"puback",id=settings.messageId,dup=settings.dup&&"pubrel"===type?protocol.DUP_MASK:0;let qos=0;const reasonCode=settings.reasonCode,properties=settings.properties;let length=5===version?3:2;"pubrel"===type&&(qos=1);if("number"!=typeof id)return stream.emit("error",new Error("Invalid messageId")),!1;let propertiesData=null;if(5===version&&"object"==typeof properties){if(propertiesData=getPropertiesByMaximumPacketSize(stream,properties,opts,length),!propertiesData)return!1;length+=propertiesData.length}stream.write(protocol.ACKS[type][qos][dup][0]),writeVarByteInt(stream,length),writeNumber(stream,id),5===version&&stream.write(Buffer.from([reasonCode]));null!==propertiesData&&propertiesData.write();return!0}(packet,stream,opts);case"subscribe":return function(packet,stream,opts){debug("subscribe: packet: ");const version=opts?opts.protocolVersion:4,settings=packet||{},dup=settings.dup?protocol.DUP_MASK:0,id=settings.messageId,subs=settings.subscriptions,properties=settings.properties;let length=0;if("number"!=typeof id)return stream.emit("error",new Error("Invalid messageId")),!1;length+=2;let propertiesData=null;if(5===version){if(propertiesData=getProperties(stream,properties),!propertiesData)return!1;length+=propertiesData.length}if("object"!=typeof subs||!subs.length)return stream.emit("error",new Error("Invalid subscriptions")),!1;for(let i=0;i<subs.length;i+=1){const itopic=subs[i].topic,iqos=subs[i].qos;if("string"!=typeof itopic)return stream.emit("error",new Error("Invalid subscriptions - invalid topic")),!1;if("number"!=typeof iqos)return stream.emit("error",new Error("Invalid subscriptions - invalid qos")),!1;if(5===version){if("boolean"!=typeof(subs[i].nl||!1))return stream.emit("error",new Error("Invalid subscriptions - invalid No Local")),!1;if("boolean"!=typeof(subs[i].rap||!1))return stream.emit("error",new Error("Invalid subscriptions - invalid Retain as Published")),!1;const rh=subs[i].rh||0;if("number"!=typeof rh||rh>2)return stream.emit("error",new Error("Invalid subscriptions - invalid Retain Handling")),!1}length+=Buffer.byteLength(itopic)+2+1}debug("subscribe: writing to stream: %o",protocol.SUBSCRIBE_HEADER),stream.write(protocol.SUBSCRIBE_HEADER[1][dup?1:0][0]),writeVarByteInt(stream,length),writeNumber(stream,id),null!==propertiesData&&propertiesData.write();let result=!0;for(const sub of subs){const jtopic=sub.topic,jqos=sub.qos,jnl=+sub.nl,jrap=+sub.rap,jrh=sub.rh;let joptions;writeString(stream,jtopic),joptions=protocol.SUBSCRIBE_OPTIONS_QOS[jqos],5===version&&(joptions|=jnl?protocol.SUBSCRIBE_OPTIONS_NL:0,joptions|=jrap?protocol.SUBSCRIBE_OPTIONS_RAP:0,joptions|=jrh?protocol.SUBSCRIBE_OPTIONS_RH[jrh]:0),result=stream.write(Buffer.from([joptions]))}return result}(packet,stream,opts);case"suback":return function(packet,stream,opts){const version=opts?opts.protocolVersion:4,settings=packet||{},id=settings.messageId,granted=settings.granted,properties=settings.properties;let length=0;if("number"!=typeof id)return stream.emit("error",new Error("Invalid messageId")),!1;length+=2;if("object"!=typeof granted||!granted.length)return stream.emit("error",new Error("Invalid qos vector")),!1;for(let i=0;i<granted.length;i+=1){if("number"!=typeof granted[i])return stream.emit("error",new Error("Invalid qos vector")),!1;length+=1}let propertiesData=null;if(5===version){if(propertiesData=getPropertiesByMaximumPacketSize(stream,properties,opts,length),!propertiesData)return!1;length+=propertiesData.length}stream.write(protocol.SUBACK_HEADER),writeVarByteInt(stream,length),writeNumber(stream,id),null!==propertiesData&&propertiesData.write();return stream.write(Buffer.from(granted))}(packet,stream,opts);case"unsubscribe":return function(packet,stream,opts){const version=opts?opts.protocolVersion:4,settings=packet||{},id=settings.messageId,dup=settings.dup?protocol.DUP_MASK:0,unsubs=settings.unsubscriptions,properties=settings.properties;let length=0;if("number"!=typeof id)return stream.emit("error",new Error("Invalid messageId")),!1;length+=2;if("object"!=typeof unsubs||!unsubs.length)return stream.emit("error",new Error("Invalid unsubscriptions")),!1;for(let i=0;i<unsubs.length;i+=1){if("string"!=typeof unsubs[i])return stream.emit("error",new Error("Invalid unsubscriptions")),!1;length+=Buffer.byteLength(unsubs[i])+2}let propertiesData=null;if(5===version){if(propertiesData=getProperties(stream,properties),!propertiesData)return!1;length+=propertiesData.length}stream.write(protocol.UNSUBSCRIBE_HEADER[1][dup?1:0][0]),writeVarByteInt(stream,length),writeNumber(stream,id),null!==propertiesData&&propertiesData.write();let result=!0;for(let j=0;j<unsubs.length;j++)result=writeString(stream,unsubs[j]);return result}(packet,stream,opts);case"unsuback":return function(packet,stream,opts){const version=opts?opts.protocolVersion:4,settings=packet||{},id=settings.messageId,dup=settings.dup?protocol.DUP_MASK:0,granted=settings.granted,properties=settings.properties,type=settings.cmd,qos=0;let length=2;if("number"!=typeof id)return stream.emit("error",new Error("Invalid messageId")),!1;if(5===version){if("object"!=typeof granted||!granted.length)return stream.emit("error",new Error("Invalid qos vector")),!1;for(let i=0;i<granted.length;i+=1){if("number"!=typeof granted[i])return stream.emit("error",new Error("Invalid qos vector")),!1;length+=1}}let propertiesData=null;if(5===version){if(propertiesData=getPropertiesByMaximumPacketSize(stream,properties,opts,length),!propertiesData)return!1;length+=propertiesData.length}stream.write(protocol.ACKS[type][qos][dup][0]),writeVarByteInt(stream,length),writeNumber(stream,id),null!==propertiesData&&propertiesData.write();5===version&&stream.write(Buffer.from(granted));return!0}(packet,stream,opts);case"pingreq":case"pingresp":return function(packet,stream,opts){return stream.write(protocol.EMPTY[packet.cmd])}(packet,stream);case"disconnect":return function(packet,stream,opts){const version=opts?opts.protocolVersion:4,settings=packet||{},reasonCode=settings.reasonCode,properties=settings.properties;let length=5===version?1:0,propertiesData=null;if(5===version){if(propertiesData=getPropertiesByMaximumPacketSize(stream,properties,opts,length),!propertiesData)return!1;length+=propertiesData.length}stream.write(Buffer.from([protocol.codes.disconnect<<4])),writeVarByteInt(stream,length),5===version&&stream.write(Buffer.from([reasonCode]));null!==propertiesData&&propertiesData.write();return!0}(packet,stream,opts);case"auth":return function(packet,stream,opts){const version=opts?opts.protocolVersion:4,settings=packet||{},reasonCode=settings.reasonCode,properties=settings.properties;let length=5===version?1:0;5!==version&&stream.emit("error",new Error("Invalid mqtt version for auth packet"));const propertiesData=getPropertiesByMaximumPacketSize(stream,properties,opts,length);if(!propertiesData)return!1;length+=propertiesData.length,stream.write(Buffer.from([protocol.codes.auth<<4])),writeVarByteInt(stream,length),stream.write(Buffer.from([reasonCode])),null!==propertiesData&&propertiesData.write();return!0}(packet,stream,opts);default:return stream.emit("error",new Error("Unknown command")),!1}}function uncork(stream){stream.uncork()}Object.defineProperty(generate,"cacheNumbers",{get:()=>writeNumber===writeNumberCached,set(value){value?(numCache&&0!==Object.keys(numCache).length||(toGenerate=!0),writeNumber=writeNumberCached):(toGenerate=!1,writeNumber=writeNumberGenerated)}});const varByteIntCache={};function writeVarByteInt(stream,num){let buffer=varByteIntCache[num];buffer||(buffer=genBufVariableByteInt(num),num<16384&&(varByteIntCache[num]=buffer)),debug("writeVarByteInt: writing to stream: %o",buffer),stream.write(buffer)}function writeString(stream,string){const strlen=Buffer.byteLength(string);return writeNumber(stream,strlen),debug("writeString: %s",string),stream.write(string,"utf8")}function writeStringPair(stream,name,value){writeString(stream,name),writeString(stream,value)}function writeNumberCached(stream,number){return debug("writeNumberCached: number: %d",number),debug("writeNumberCached: %o",numCache[number]),stream.write(numCache[number])}function writeNumberGenerated(stream,number){const generatedNumber=generateNumber(number);return debug("writeNumberGenerated: %o",generatedNumber),stream.write(generatedNumber)}function writeStringOrBuffer(stream,toWrite){"string"==typeof toWrite?writeString(stream,toWrite):toWrite?(writeNumber(stream,toWrite.length),stream.write(toWrite)):writeNumber(stream,0)}function getProperties(stream,properties){if("object"!=typeof properties||null!=properties.length)return{length:1,write(){writeProperties(stream,{},0)}};let propertiesLength=0;function getLengthProperty(name,value){let length=0;switch(protocol.propertiesTypes[name]){case"byte":if("boolean"!=typeof value)return stream.emit("error",new Error(`Invalid ${name}: ${value}`)),!1;length+=2;break;case"int8":if("number"!=typeof value||value<0||value>255)return stream.emit("error",new Error(`Invalid ${name}: ${value}`)),!1;length+=2;break;case"binary":if(value&&null===value)return stream.emit("error",new Error(`Invalid ${name}: ${value}`)),!1;length+=1+Buffer.byteLength(value)+2;break;case"int16":if("number"!=typeof value||value<0||value>65535)return stream.emit("error",new Error(`Invalid ${name}: ${value}`)),!1;length+=3;break;case"int32":if("number"!=typeof value||value<0||value>4294967295)return stream.emit("error",new Error(`Invalid ${name}: ${value}`)),!1;length+=5;break;case"var":if("number"!=typeof value||value<0||value>268435455)return stream.emit("error",new Error(`Invalid ${name}: ${value}`)),!1;length+=1+Buffer.byteLength(genBufVariableByteInt(value));break;case"string":if("string"!=typeof value)return stream.emit("error",new Error(`Invalid ${name}: ${value}`)),!1;length+=3+Buffer.byteLength(value.toString());break;case"pair":if("object"!=typeof value)return stream.emit("error",new Error(`Invalid ${name}: ${value}`)),!1;length+=Object.getOwnPropertyNames(value).reduce(((result,name)=>{const currentValue=value[name];return Array.isArray(currentValue)?result+=currentValue.reduce(((currentLength,value)=>currentLength+=3+Buffer.byteLength(name.toString())+2+Buffer.byteLength(value.toString())),0):result+=3+Buffer.byteLength(name.toString())+2+Buffer.byteLength(value[name].toString()),result}),0);break;default:return stream.emit("error",new Error(`Invalid property ${name}: ${value}`)),!1}return length}if(properties)for(const propName in properties){let propLength=0,propValueLength=0;const propValue=properties[propName];if(Array.isArray(propValue))for(let valueIndex=0;valueIndex<propValue.length;valueIndex++){if(propValueLength=getLengthProperty(propName,propValue[valueIndex]),!propValueLength)return!1;propLength+=propValueLength}else{if(propValueLength=getLengthProperty(propName,propValue),!propValueLength)return!1;propLength=propValueLength}if(!propLength)return!1;propertiesLength+=propLength}return{length:Buffer.byteLength(genBufVariableByteInt(propertiesLength))+propertiesLength,write(){writeProperties(stream,properties,propertiesLength)}}}function getPropertiesByMaximumPacketSize(stream,properties,opts,length){const mayEmptyProps=["reasonString","userProperties"],maximumPacketSize=opts&&opts.properties&&opts.properties.maximumPacketSize?opts.properties.maximumPacketSize:0;let propertiesData=getProperties(stream,properties);if(maximumPacketSize)for(;length+propertiesData.length>maximumPacketSize;){const currentMayEmptyProp=mayEmptyProps.shift();if(!currentMayEmptyProp||!properties[currentMayEmptyProp])return!1;delete properties[currentMayEmptyProp],propertiesData=getProperties(stream,properties)}return propertiesData}function writeProperty(stream,propName,value){switch(protocol.propertiesTypes[propName]){case"byte":stream.write(Buffer.from([protocol.properties[propName]])),stream.write(Buffer.from([+value]));break;case"int8":stream.write(Buffer.from([protocol.properties[propName]])),stream.write(Buffer.from([value]));break;case"binary":stream.write(Buffer.from([protocol.properties[propName]])),writeStringOrBuffer(stream,value);break;case"int16":stream.write(Buffer.from([protocol.properties[propName]])),writeNumber(stream,value);break;case"int32":stream.write(Buffer.from([protocol.properties[propName]])),function(stream,number){const generated4ByteBuffer=generate4ByteBuffer(number);debug("write4ByteNumber: %o",generated4ByteBuffer),stream.write(generated4ByteBuffer)}(stream,value);break;case"var":stream.write(Buffer.from([protocol.properties[propName]])),writeVarByteInt(stream,value);break;case"string":stream.write(Buffer.from([protocol.properties[propName]])),writeString(stream,value);break;case"pair":Object.getOwnPropertyNames(value).forEach((name=>{const currentValue=value[name];Array.isArray(currentValue)?currentValue.forEach((value=>{stream.write(Buffer.from([protocol.properties[propName]])),writeStringPair(stream,name.toString(),value.toString())})):(stream.write(Buffer.from([protocol.properties[propName]])),writeStringPair(stream,name.toString(),currentValue.toString()))}));break;default:return stream.emit("error",new Error(`Invalid property ${propName} value: ${value}`)),!1}}function writeProperties(stream,properties,propertiesLength){writeVarByteInt(stream,propertiesLength);for(const propName in properties)if(Object.prototype.hasOwnProperty.call(properties,propName)&&null!==properties[propName]){const value=properties[propName];if(Array.isArray(value))for(let valueIndex=0;valueIndex<value.length;valueIndex++)writeProperty(stream,propName,value[valueIndex]);else writeProperty(stream,propName,value)}}function byteLength(bufOrString){return bufOrString?bufOrString instanceof Buffer?bufOrString.length:Buffer.byteLength(bufOrString):0}function isStringOrBuffer(field){return"string"==typeof field||field instanceof Buffer}module.exports=generate},function(module,exports,__webpack_require__){"use strict";var net=__webpack_require__(34),debug=__webpack_require__(13)("mqttjs:tcp");module.exports=function(client,opts){var port,host;return opts.port=opts.port||1883,opts.hostname=opts.hostname||opts.host||"localhost",port=opts.port,host=opts.hostname,debug("port %d and host %s",port,host),net.createConnection(port,host)}},function(module,exports,__webpack_require__){"use strict";var socketTask,proxy,stream,Transform=__webpack_require__(20).Transform,duplexify=__webpack_require__(60);module.exports=function(client,opts){if(opts.hostname=opts.hostname||opts.host,!opts.hostname)throw new Error("Could not determine host. Specify host manually.");var websocketSubProtocol="MQIsdp"===opts.protocolId&&3===opts.protocolVersion?"mqttv3.1":"mqtt";!function(opts){opts.hostname||(opts.hostname="localhost"),opts.path||(opts.path="/"),opts.wsOptions||(opts.wsOptions={})}(opts);var url=function(opts,client){var protocol="wxs"===opts.protocol?"wss":"ws",url=protocol+"://"+opts.hostname+opts.path;return opts.port&&80!==opts.port&&443!==opts.port&&(url=protocol+"://"+opts.hostname+":"+opts.port+opts.path),"function"==typeof opts.transformWsUrl&&(url=opts.transformWsUrl(url,opts,client)),url}(opts,client);socketTask=wx.connectSocket({url:url,protocols:[websocketSubProtocol]}),proxy=function(){var proxy=new Transform;return proxy._write=function(chunk,encoding,next){socketTask.send({data:chunk.buffer,success:function(){next()},fail:function(errMsg){next(new Error(errMsg))}})},proxy._flush=function(done){socketTask.close({success:function(){done()}})},proxy}(),(stream=duplexify.obj())._destroy=function(err,cb){socketTask.close({success:function(){cb&&cb(err)}})};var destroyRef=stream.destroy;return stream.destroy=function(){stream.destroy=destroyRef;var self=this;setTimeout((function(){socketTask.close({fail:function(){self._destroy(new Error)}})}),0)}.bind(stream),socketTask.onOpen((function(){stream.setReadable(proxy),stream.setWritable(proxy),stream.emit("connect")})),socketTask.onMessage((function(res){var data=res.data;data=data instanceof ArrayBuffer?Buffer.from(data):Buffer.from(data,"utf8"),proxy.push(data)})),socketTask.onClose((function(){stream.end(),stream.destroy()})),socketTask.onError((function(res){stream.destroy(new Error(res.errMsg))})),stream}},function(module,exports,__webpack_require__){"use strict";var my,proxy,stream,Transform=__webpack_require__(20).Transform,duplexify=__webpack_require__(60),base64=__webpack_require__(295),isInitialized=!1;module.exports=function(client,opts){if(opts.hostname=opts.hostname||opts.host,!opts.hostname)throw new Error("Could not determine host. Specify host manually.");var websocketSubProtocol="MQIsdp"===opts.protocolId&&3===opts.protocolVersion?"mqttv3.1":"mqtt";!function(opts){opts.hostname||(opts.hostname="localhost"),opts.path||(opts.path="/"),opts.wsOptions||(opts.wsOptions={})}(opts);var url=function(opts,client){var protocol="alis"===opts.protocol?"wss":"ws",url=protocol+"://"+opts.hostname+opts.path;return opts.port&&80!==opts.port&&443!==opts.port&&(url=protocol+"://"+opts.hostname+":"+opts.port+opts.path),"function"==typeof opts.transformWsUrl&&(url=opts.transformWsUrl(url,opts,client)),url}(opts,client);return(my=opts.my).connectSocket({url:url,protocols:websocketSubProtocol}),proxy=function(){var proxy=new Transform;return proxy._write=function(chunk,encoding,next){my.sendSocketMessage({data:chunk.buffer,success:function(){next()},fail:function(){next(new Error)}})},proxy._flush=function(done){my.closeSocket({success:function(){done()}})},proxy}(),stream=duplexify.obj(),isInitialized||(isInitialized=!0,my.onSocketOpen((function(){stream.setReadable(proxy),stream.setWritable(proxy),stream.emit("connect")})),my.onSocketMessage((function(res){if("string"==typeof res.data){var array=base64.toByteArray(res.data),buffer=Buffer.from(array);proxy.push(buffer)}else{var reader=new FileReader;reader.addEventListener("load",(function(){var data=reader.result;data=data instanceof ArrayBuffer?Buffer.from(data):Buffer.from(data,"utf8"),proxy.push(data)})),reader.readAsArrayBuffer(res.data)}})),my.onSocketClose((function(){stream.end(),stream.destroy()})),my.onSocketError((function(res){stream.destroy(res)}))),stream}},function(module,exports,__webpack_require__){"use strict";const WS=__webpack_require__(296),debug=__webpack_require__(13)("mqttjs:ws"),duplexify=__webpack_require__(60),Buffer=__webpack_require__(112).Buffer,urlModule=__webpack_require__(31),Transform=__webpack_require__(20).Transform;let WSS_OPTIONS=["rejectUnauthorized","ca","cert","key","pfx","passphrase"];const IS_BROWSER="undefined"!=typeof process&&"browser"===process.title||"function"==typeof __webpack_require__;function buildUrl(opts,client){let url=opts.protocol+"://"+opts.hostname+":"+opts.port+opts.path;return"function"==typeof opts.transformWsUrl&&(url=opts.transformWsUrl(url,opts,client)),url}function setDefaultOpts(opts){let options=opts;return opts.hostname||(options.hostname="localhost"),opts.port||("wss"===opts.protocol?options.port=443:options.port=80),opts.path||(options.path="/"),opts.wsOptions||(options.wsOptions={}),IS_BROWSER||"wss"!==opts.protocol||WSS_OPTIONS.forEach((function(prop){opts.hasOwnProperty(prop)&&!opts.wsOptions.hasOwnProperty(prop)&&(options.wsOptions[prop]=opts[prop])})),options}module.exports=IS_BROWSER?function(client,opts){let stream;debug("browserStreamBuilder");const bufferSize=function(opts){let options=setDefaultOpts(opts);if(options.hostname||(options.hostname=options.host),!options.hostname){if("undefined"==typeof document)throw new Error("Could not determine host. Specify host manually.");const parsed=urlModule.parse(document.URL);options.hostname=parsed.hostname,options.port||(options.port=parsed.port)}return void 0===options.objectMode&&(options.objectMode=!(!0===options.binary||void 0===options.binary)),options}(opts).browserBufferSize||524288,bufferTimeout=opts.browserBufferTimeout||1e3,coerceToBuffer=!opts.objectMode;let socket=function(client,opts){const websocketSubProtocol="MQIsdp"===opts.protocolId&&3===opts.protocolVersion?"mqttv3.1":"mqtt";let url=buildUrl(opts,client),socket=new WebSocket(url,[websocketSubProtocol]);return socket.binaryType="arraybuffer",socket}(client,opts),proxy=function(options,socketWrite,socketEnd){let proxy=new Transform({objectModeMode:options.objectMode});return proxy._write=socketWrite,proxy._flush=socketEnd,proxy}(opts,(function socketWriteBrowser(chunk,enc,next){socket.bufferedAmount>bufferSize&&setTimeout(socketWriteBrowser,bufferTimeout,chunk,enc,next),coerceToBuffer&&"string"==typeof chunk&&(chunk=Buffer.from(chunk,"utf8"));try{socket.send(chunk)}catch(err){return next(err)}next()}),(function(done){socket.close(),done()}));opts.objectMode||(proxy._writev=writev),proxy.on("close",(()=>{socket.close()}));const eventListenerSupport=void 0===socket.addEventListener;function onopen(){stream.setReadable(proxy),stream.setWritable(proxy),stream.emit("connect")}function onclose(){stream.end(),stream.destroy()}function onerror(err){stream.destroy(err)}function onmessage(event){let data=event.data;data=data instanceof ArrayBuffer?Buffer.from(data):Buffer.from(data,"utf8"),proxy.push(data)}function writev(chunks,cb){const buffers=new Array(chunks.length);for(let i=0;i<chunks.length;i++)"string"==typeof chunks[i].chunk?buffers[i]=Buffer.from(chunks[i],"utf8"):buffers[i]=chunks[i].chunk;this._write(Buffer.concat(buffers),"binary",cb)}return socket.readyState===socket.OPEN?stream=proxy:(stream=stream=duplexify(void 0,void 0,opts),opts.objectMode||(stream._writev=writev),eventListenerSupport?socket.addEventListener("open",onopen):socket.onopen=onopen),stream.socket=socket,eventListenerSupport?(socket.addEventListener("close",onclose),socket.addEventListener("error",onerror),socket.addEventListener("message",onmessage)):(socket.onclose=onclose,socket.onerror=onerror,socket.onmessage=onmessage),stream}:function(client,opts){debug("streamBuilder");let options=setDefaultOpts(opts);const url=buildUrl(options,client);let socket=function(client,url,opts){debug("createWebSocket"),debug("protocol: "+opts.protocolId+" "+opts.protocolVersion);const websocketSubProtocol="MQIsdp"===opts.protocolId&&3===opts.protocolVersion?"mqttv3.1":"mqtt";return debug("creating new Websocket for url: "+url+" and protocol: "+websocketSubProtocol),new WS(url,[websocketSubProtocol],opts.wsOptions)}(0,url,options),webSocketStream=WS.createWebSocketStream(socket,options.wsOptions);return webSocketStream.url=url,webSocketStream}},function(module,exports,__webpack_require__){"use strict";const EventEmitter=__webpack_require__(4),https=__webpack_require__(52),http=__webpack_require__(35),net=__webpack_require__(34),tls=__webpack_require__(47),{randomBytes:randomBytes,createHash:createHash}=__webpack_require__(10),{URL:URL}=__webpack_require__(31),PerMessageDeflate=__webpack_require__(41),Receiver=__webpack_require__(122),Sender=__webpack_require__(124),{BINARY_TYPES:BINARY_TYPES,EMPTY_BUFFER:EMPTY_BUFFER,GUID:GUID,kStatusCode:kStatusCode,kWebSocket:kWebSocket,NOOP:NOOP}=__webpack_require__(25),{addEventListener:addEventListener,removeEventListener:removeEventListener}=__webpack_require__(303),{format:format,parse:parse}=__webpack_require__(125),{toBuffer:toBuffer}=__webpack_require__(42),readyStates=["CONNECTING","OPEN","CLOSING","CLOSED"],protocolVersions=[8,13];class WebSocket extends EventEmitter{constructor(address,protocols,options){super(),this.readyState=WebSocket.CONNECTING,this.protocol="",this._binaryType=BINARY_TYPES[0],this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage="",this._closeTimer=null,this._closeCode=1006,this._extensions={},this._receiver=null,this._sender=null,this._socket=null,null!==address?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,Array.isArray(protocols)?protocols=protocols.join(", "):"object"==typeof protocols&&null!==protocols&&(options=protocols,protocols=void 0),initAsClient(this,address,protocols,options)):this._isServer=!0}get CONNECTING(){return WebSocket.CONNECTING}get CLOSING(){return WebSocket.CLOSING}get CLOSED(){return WebSocket.CLOSED}get OPEN(){return WebSocket.OPEN}get binaryType(){return this._binaryType}set binaryType(type){BINARY_TYPES.includes(type)&&(this._binaryType=type,this._receiver&&(this._receiver._binaryType=type))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}setSocket(socket,head,maxPayload){const receiver=new Receiver(this._binaryType,this._extensions,this._isServer,maxPayload);this._sender=new Sender(socket,this._extensions),this._receiver=receiver,this._socket=socket,receiver[kWebSocket]=this,socket[kWebSocket]=this,receiver.on("conclude",receiverOnConclude),receiver.on("drain",receiverOnDrain),receiver.on("error",receiverOnError),receiver.on("message",receiverOnMessage),receiver.on("ping",receiverOnPing),receiver.on("pong",receiverOnPong),socket.setTimeout(0),socket.setNoDelay(),head.length>0&&socket.unshift(head),socket.on("close",socketOnClose),socket.on("data",socketOnData),socket.on("end",socketOnEnd),socket.on("error",socketOnError),this.readyState=WebSocket.OPEN,this.emit("open")}emitClose(){if(!this._socket)return this.readyState=WebSocket.CLOSED,void this.emit("close",this._closeCode,this._closeMessage);this._extensions[PerMessageDeflate.extensionName]&&this._extensions[PerMessageDeflate.extensionName].cleanup(),this._receiver.removeAllListeners(),this.readyState=WebSocket.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(code,data){if(this.readyState!==WebSocket.CLOSED){if(this.readyState===WebSocket.CONNECTING){const msg="WebSocket was closed before the connection was established";return abortHandshake(this,this._req,msg)}this.readyState!==WebSocket.CLOSING?(this.readyState=WebSocket.CLOSING,this._sender.close(code,data,!this._isServer,(err=>{err||(this._closeFrameSent=!0,this._closeFrameReceived&&this._socket.end())})),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),3e4)):this._closeFrameSent&&this._closeFrameReceived&&this._socket.end()}}ping(data,mask,cb){if(this.readyState===WebSocket.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof data?(cb=data,data=mask=void 0):"function"==typeof mask&&(cb=mask,mask=void 0),"number"==typeof data&&(data=data.toString()),this.readyState===WebSocket.OPEN?(void 0===mask&&(mask=!this._isServer),this._sender.ping(data||EMPTY_BUFFER,mask,cb)):sendAfterClose(this,data,cb)}pong(data,mask,cb){if(this.readyState===WebSocket.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof data?(cb=data,data=mask=void 0):"function"==typeof mask&&(cb=mask,mask=void 0),"number"==typeof data&&(data=data.toString()),this.readyState===WebSocket.OPEN?(void 0===mask&&(mask=!this._isServer),this._sender.pong(data||EMPTY_BUFFER,mask,cb)):sendAfterClose(this,data,cb)}send(data,options,cb){if(this.readyState===WebSocket.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof options&&(cb=options,options={}),"number"==typeof data&&(data=data.toString()),this.readyState!==WebSocket.OPEN)return void sendAfterClose(this,data,cb);const opts={binary:"string"!=typeof data,mask:!this._isServer,compress:!0,fin:!0,...options};this._extensions[PerMessageDeflate.extensionName]||(opts.compress=!1),this._sender.send(data||EMPTY_BUFFER,opts,cb)}terminate(){if(this.readyState!==WebSocket.CLOSED){if(this.readyState===WebSocket.CONNECTING){const msg="WebSocket was closed before the connection was established";return abortHandshake(this,this._req,msg)}this._socket&&(this.readyState=WebSocket.CLOSING,this._socket.destroy())}}}function initAsClient(websocket,address,protocols,options){const opts={protocolVersion:protocolVersions[1],maxPayload:104857600,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...options,createConnection:void 0,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:void 0,host:void 0,path:void 0,port:void 0};if(!protocolVersions.includes(opts.protocolVersion))throw new RangeError(`Unsupported protocol version: ${opts.protocolVersion} (supported versions: ${protocolVersions.join(", ")})`);let parsedUrl;address instanceof URL?(parsedUrl=address,websocket.url=address.href):(parsedUrl=new URL(address),websocket.url=address);const isUnixSocket="ws+unix:"===parsedUrl.protocol;if(!(parsedUrl.host||isUnixSocket&&parsedUrl.pathname))throw new Error("Invalid URL: "+websocket.url);const isSecure="wss:"===parsedUrl.protocol||"https:"===parsedUrl.protocol,defaultPort=isSecure?443:80,key=randomBytes(16).toString("base64"),get=isSecure?https.get:http.get;let perMessageDeflate;if(opts.createConnection=isSecure?tlsConnect:netConnect,opts.defaultPort=opts.defaultPort||defaultPort,opts.port=parsedUrl.port||defaultPort,opts.host=parsedUrl.hostname.startsWith("[")?parsedUrl.hostname.slice(1,-1):parsedUrl.hostname,opts.headers={"Sec-WebSocket-Version":opts.protocolVersion,"Sec-WebSocket-Key":key,Connection:"Upgrade",Upgrade:"websocket",...opts.headers},opts.path=parsedUrl.pathname+parsedUrl.search,opts.timeout=opts.handshakeTimeout,opts.perMessageDeflate&&(perMessageDeflate=new PerMessageDeflate(!0!==opts.perMessageDeflate?opts.perMessageDeflate:{},!1,opts.maxPayload),opts.headers["Sec-WebSocket-Extensions"]=format({[PerMessageDeflate.extensionName]:perMessageDeflate.offer()})),protocols&&(opts.headers["Sec-WebSocket-Protocol"]=protocols),opts.origin&&(opts.protocolVersion<13?opts.headers["Sec-WebSocket-Origin"]=opts.origin:opts.headers.Origin=opts.origin),(parsedUrl.username||parsedUrl.password)&&(opts.auth=`${parsedUrl.username}:${parsedUrl.password}`),isUnixSocket){const parts=opts.path.split(":");opts.socketPath=parts[0],opts.path=parts[1]}let req=websocket._req=get(opts);opts.timeout&&req.on("timeout",(()=>{abortHandshake(websocket,req,"Opening handshake has timed out")})),req.on("error",(err=>{websocket._req.aborted||(req=websocket._req=null,websocket.readyState=WebSocket.CLOSING,websocket.emit("error",err),websocket.emitClose())})),req.on("response",(res=>{const location=res.headers.location,statusCode=res.statusCode;if(location&&opts.followRedirects&&statusCode>=300&&statusCode<400){if(++websocket._redirects>opts.maxRedirects)return void abortHandshake(websocket,req,"Maximum redirects exceeded");req.abort();const addr=new URL(location,address);initAsClient(websocket,addr,protocols,options)}else websocket.emit("unexpected-response",req,res)||abortHandshake(websocket,req,"Unexpected server response: "+res.statusCode)})),req.on("upgrade",((res,socket,head)=>{if(websocket.emit("upgrade",res),websocket.readyState!==WebSocket.CONNECTING)return;req=websocket._req=null;const digest=createHash("sha1").update(key+GUID).digest("base64");if(res.headers["sec-websocket-accept"]!==digest)return void abortHandshake(websocket,socket,"Invalid Sec-WebSocket-Accept header");const serverProt=res.headers["sec-websocket-protocol"],protList=(protocols||"").split(/, */);let protError;if(!protocols&&serverProt?protError="Server sent a subprotocol but none was requested":protocols&&!serverProt?protError="Server sent no subprotocol":serverProt&&!protList.includes(serverProt)&&(protError="Server sent an invalid subprotocol"),protError)abortHandshake(websocket,socket,protError);else{if(serverProt&&(websocket.protocol=serverProt),perMessageDeflate)try{const extensions=parse(res.headers["sec-websocket-extensions"]);extensions[PerMessageDeflate.extensionName]&&(perMessageDeflate.accept(extensions[PerMessageDeflate.extensionName]),websocket._extensions[PerMessageDeflate.extensionName]=perMessageDeflate)}catch(err){return void abortHandshake(websocket,socket,"Invalid Sec-WebSocket-Extensions header")}websocket.setSocket(socket,head,opts.maxPayload)}}))}function netConnect(options){return options.path=options.socketPath,net.connect(options)}function tlsConnect(options){return options.path=void 0,options.servername||""===options.servername||(options.servername=options.host),tls.connect(options)}function abortHandshake(websocket,stream,message){websocket.readyState=WebSocket.CLOSING;const err=new Error(message);Error.captureStackTrace(err,abortHandshake),stream.setHeader?(stream.abort(),stream.once("abort",websocket.emitClose.bind(websocket)),websocket.emit("error",err)):(stream.destroy(err),stream.once("error",websocket.emit.bind(websocket,"error")),stream.once("close",websocket.emitClose.bind(websocket)))}function sendAfterClose(websocket,data,cb){if(data){const length=toBuffer(data).length;websocket._socket?websocket._sender._bufferedBytes+=length:websocket._bufferedAmount+=length}if(cb){cb(new Error(`WebSocket is not open: readyState ${websocket.readyState} (${readyStates[websocket.readyState]})`))}}function receiverOnConclude(code,reason){const websocket=this[kWebSocket];websocket._socket.removeListener("data",socketOnData),websocket._socket.resume(),websocket._closeFrameReceived=!0,websocket._closeMessage=reason,websocket._closeCode=code,1005===code?websocket.close():websocket.close(code,reason)}function receiverOnDrain(){this[kWebSocket]._socket.resume()}function receiverOnError(err){const websocket=this[kWebSocket];websocket._socket.removeListener("data",socketOnData),websocket.readyState=WebSocket.CLOSING,websocket._closeCode=err[kStatusCode],websocket.emit("error",err),websocket._socket.destroy()}function receiverOnFinish(){this[kWebSocket].emitClose()}function receiverOnMessage(data){this[kWebSocket].emit("message",data)}function receiverOnPing(data){const websocket=this[kWebSocket];websocket.pong(data,!websocket._isServer,NOOP),websocket.emit("ping",data)}function receiverOnPong(data){this[kWebSocket].emit("pong",data)}function socketOnClose(){const websocket=this[kWebSocket];this.removeListener("close",socketOnClose),this.removeListener("end",socketOnEnd),websocket.readyState=WebSocket.CLOSING,websocket._socket.read(),websocket._receiver.end(),this.removeListener("data",socketOnData),this[kWebSocket]=void 0,clearTimeout(websocket._closeTimer),websocket._receiver._writableState.finished||websocket._receiver._writableState.errorEmitted?websocket.emitClose():(websocket._receiver.on("error",receiverOnFinish),websocket._receiver.on("finish",receiverOnFinish))}function socketOnData(chunk){this[kWebSocket]._receiver.write(chunk)||this.pause()}function socketOnEnd(){const websocket=this[kWebSocket];websocket.readyState=WebSocket.CLOSING,websocket._receiver.end(),this.end()}function socketOnError(){const websocket=this[kWebSocket];this.removeListener("error",socketOnError),this.on("error",NOOP),websocket&&(websocket.readyState=WebSocket.CLOSING,this.destroy())}readyStates.forEach(((readyState,i)=>{WebSocket[readyState]=i})),["open","error","close","message"].forEach((method=>{Object.defineProperty(WebSocket.prototype,"on"+method,{get(){const listeners=this.listeners(method);for(let i=0;i<listeners.length;i++)if(listeners[i]._listener)return listeners[i]._listener},set(listener){const listeners=this.listeners(method);for(let i=0;i<listeners.length;i++)listeners[i]._listener&&this.removeListener(method,listeners[i]);this.addEventListener(method,listener)}})})),WebSocket.prototype.addEventListener=addEventListener,WebSocket.prototype.removeEventListener=removeEventListener,module.exports=WebSocket},function(module,exports,__webpack_require__){var fs=__webpack_require__(33),path=__webpack_require__(298),os=__webpack_require__(83),runtimeRequire=require,abi=process.versions.modules,runtime=!(!process.versions||!process.versions.electron)||!!process.env.ELECTRON_RUN_AS_NODE||"undefined"!=typeof window&&window.process&&"renderer"===window.process.type?"electron":"node",arch=os.arch(),platform=os.platform();function load(dir){return runtimeRequire(load.path(dir))}function getFirst(dir,filter){try{var files=fs.readdirSync(dir).filter(filter);return files[0]&&path.join(dir,files[0])}catch(err){return null}}function matchNapiRuntime(name){return name===runtime+"-napi.node"}function matchNapi(name){return"node-napi.node"===name}function matchPrebuild(name){var parts=name.split("-");return parts[0]===runtime&&parts[1]===abi+".node"}function matchBuild(name){return/\.node$/.test(name)}module.exports=load,load.path=function(dir){dir=path.resolve(dir||".");try{var name=runtimeRequire(path.join(dir,"package.json")).name.toUpperCase().replace(/-/g,"_");process.env[name+"_PREBUILD"]&&(dir=process.env[name+"_PREBUILD"])}catch(err){}var release=getFirst(path.join(dir,"build/Release"),matchBuild);if(release)return release;var debug=getFirst(path.join(dir,"build/Debug"),matchBuild);if(debug)return debug;var prebuild=getFirst(path.join(dir,"prebuilds/"+platform+"-"+arch),matchPrebuild);if(prebuild)return prebuild;var napiRuntime=getFirst(path.join(dir,"prebuilds/"+platform+"-"+arch),matchNapiRuntime);if(napiRuntime)return napiRuntime;var napi=getFirst(path.join(dir,"prebuilds/"+platform+"-"+arch),matchNapi);if(napi)return napi;throw new Error("No native build was found for runtime="+runtime+" abi="+abi+" platform="+platform+" arch="+arch)}},function(module,exports,__webpack_require__){"use strict";const{Writable:Writable}=__webpack_require__(6),PerMessageDeflate=__webpack_require__(41),{BINARY_TYPES:BINARY_TYPES,EMPTY_BUFFER:EMPTY_BUFFER,kStatusCode:kStatusCode,kWebSocket:kWebSocket}=__webpack_require__(25),{concat:concat,toArrayBuffer:toArrayBuffer,unmask:unmask}=__webpack_require__(42),{isValidStatusCode:isValidStatusCode,isValidUTF8:isValidUTF8}=__webpack_require__(123);function error(ErrorCtor,message,prefix,statusCode){const err=new ErrorCtor(prefix?"Invalid WebSocket frame: "+message:message);return Error.captureStackTrace(err,error),err[kStatusCode]=statusCode,err}module.exports=class extends Writable{constructor(binaryType,extensions,isServer,maxPayload){super(),this._binaryType=binaryType||BINARY_TYPES[0],this[kWebSocket]=void 0,this._extensions=extensions||{},this._isServer=!!isServer,this._maxPayload=0|maxPayload,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._state=0,this._loop=!1}_write(chunk,encoding,cb){if(8===this._opcode&&0==this._state)return cb();this._bufferedBytes+=chunk.length,this._buffers.push(chunk),this.startLoop(cb)}consume(n){if(this._bufferedBytes-=n,n===this._buffers[0].length)return this._buffers.shift();if(n<this._buffers[0].length){const buf=this._buffers[0];return this._buffers[0]=buf.slice(n),buf.slice(0,n)}const dst=Buffer.allocUnsafe(n);do{const buf=this._buffers[0],offset=dst.length-n;n>=buf.length?dst.set(this._buffers.shift(),offset):(dst.set(new Uint8Array(buf.buffer,buf.byteOffset,n),offset),this._buffers[0]=buf.slice(n)),n-=buf.length}while(n>0);return dst}startLoop(cb){let err;this._loop=!0;do{switch(this._state){case 0:err=this.getInfo();break;case 1:err=this.getPayloadLength16();break;case 2:err=this.getPayloadLength64();break;case 3:this.getMask();break;case 4:err=this.getData(cb);break;default:return void(this._loop=!1)}}while(this._loop);cb(err)}getInfo(){if(this._bufferedBytes<2)return void(this._loop=!1);const buf=this.consume(2);if(0!=(48&buf[0]))return this._loop=!1,error(RangeError,"RSV2 and RSV3 must be clear",!0,1002);const compressed=64==(64&buf[0]);if(compressed&&!this._extensions[PerMessageDeflate.extensionName])return this._loop=!1,error(RangeError,"RSV1 must be clear",!0,1002);if(this._fin=128==(128&buf[0]),this._opcode=15&buf[0],this._payloadLength=127&buf[1],0===this._opcode){if(compressed)return this._loop=!1,error(RangeError,"RSV1 must be clear",!0,1002);if(!this._fragmented)return this._loop=!1,error(RangeError,"invalid opcode 0",!0,1002);this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented)return this._loop=!1,error(RangeError,"invalid opcode "+this._opcode,!0,1002);this._compressed=compressed}else{if(!(this._opcode>7&&this._opcode<11))return this._loop=!1,error(RangeError,"invalid opcode "+this._opcode,!0,1002);if(!this._fin)return this._loop=!1,error(RangeError,"FIN must be set",!0,1002);if(compressed)return this._loop=!1,error(RangeError,"RSV1 must be clear",!0,1002);if(this._payloadLength>125)return this._loop=!1,error(RangeError,"invalid payload length "+this._payloadLength,!0,1002)}if(this._fin||this._fragmented||(this._fragmented=this._opcode),this._masked=128==(128&buf[1]),this._isServer){if(!this._masked)return this._loop=!1,error(RangeError,"MASK must be set",!0,1002)}else if(this._masked)return this._loop=!1,error(RangeError,"MASK must be clear",!0,1002);if(126===this._payloadLength)this._state=1;else{if(127!==this._payloadLength)return this.haveLength();this._state=2}}getPayloadLength16(){if(!(this._bufferedBytes<2))return this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength();this._loop=!1}getPayloadLength64(){if(this._bufferedBytes<8)return void(this._loop=!1);const buf=this.consume(8),num=buf.readUInt32BE(0);return num>Math.pow(2,21)-1?(this._loop=!1,error(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009)):(this._payloadLength=num*Math.pow(2,32)+buf.readUInt32BE(4),this.haveLength())}haveLength(){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0))return this._loop=!1,error(RangeError,"Max payload size exceeded",!1,1009);this._masked?this._state=3:this._state=4}getMask(){this._bufferedBytes<4?this._loop=!1:(this._mask=this.consume(4),this._state=4)}getData(cb){let data=EMPTY_BUFFER;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength)return void(this._loop=!1);data=this.consume(this._payloadLength),this._masked&&unmask(data,this._mask)}return this._opcode>7?this.controlMessage(data):this._compressed?(this._state=5,void this.decompress(data,cb)):(data.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(data)),this.dataMessage())}decompress(data,cb){this._extensions[PerMessageDeflate.extensionName].decompress(data,this._fin,((err,buf)=>{if(err)return cb(err);if(buf.length){if(this._messageLength+=buf.length,this._messageLength>this._maxPayload&&this._maxPayload>0)return cb(error(RangeError,"Max payload size exceeded",!1,1009));this._fragments.push(buf)}const er=this.dataMessage();if(er)return cb(er);this.startLoop(cb)}))}dataMessage(){if(this._fin){const messageLength=this._messageLength,fragments=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){let data;data="nodebuffer"===this._binaryType?concat(fragments,messageLength):"arraybuffer"===this._binaryType?toArrayBuffer(concat(fragments,messageLength)):fragments,this.emit("message",data)}else{const buf=concat(fragments,messageLength);if(!isValidUTF8(buf))return this._loop=!1,error(Error,"invalid UTF-8 sequence",!0,1007);this.emit("message",buf.toString())}}this._state=0}controlMessage(data){if(8===this._opcode)if(this._loop=!1,0===data.length)this.emit("conclude",1005,""),this.end();else{if(1===data.length)return error(RangeError,"invalid payload length 1",!0,1002);{const code=data.readUInt16BE(0);if(!isValidStatusCode(code))return error(RangeError,"invalid status code "+code,!0,1002);const buf=data.slice(2);if(!isValidUTF8(buf))return error(Error,"invalid UTF-8 sequence",!0,1007);this.emit("conclude",code,buf.toString()),this.end()}}else 9===this._opcode?this.emit("ping",data):this.emit("pong",data);this._state=0}}},function(module,exports,__webpack_require__){"use strict";try{const isValidUTF8=__webpack_require__(301);exports.isValidUTF8="object"==typeof isValidUTF8?isValidUTF8.Validation.isValidUTF8:isValidUTF8}catch(e){exports.isValidUTF8=()=>!0}exports.isValidStatusCode=code=>code>=1e3&&code<=1014&&1004!==code&&1005!==code&&1006!==code||code>=3e3&&code<=4999},function(module,exports,__webpack_require__){"use strict";const{randomFillSync:randomFillSync}=__webpack_require__(10),PerMessageDeflate=__webpack_require__(41),{EMPTY_BUFFER:EMPTY_BUFFER}=__webpack_require__(25),{isValidStatusCode:isValidStatusCode}=__webpack_require__(123),{mask:applyMask,toBuffer:toBuffer}=__webpack_require__(42),mask=Buffer.alloc(4);class Sender{constructor(socket,extensions){this._extensions=extensions||{},this._socket=socket,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(data,options){const merge=options.mask&&options.readOnly;let offset=options.mask?6:2,payloadLength=data.length;data.length>=65536?(offset+=8,payloadLength=127):data.length>125&&(offset+=2,payloadLength=126);const target=Buffer.allocUnsafe(merge?data.length+offset:offset);return target[0]=options.fin?128|options.opcode:options.opcode,options.rsv1&&(target[0]|=64),target[1]=payloadLength,126===payloadLength?target.writeUInt16BE(data.length,2):127===payloadLength&&(target.writeUInt32BE(0,2),target.writeUInt32BE(data.length,6)),options.mask?(randomFillSync(mask,0,4),target[1]|=128,target[offset-4]=mask[0],target[offset-3]=mask[1],target[offset-2]=mask[2],target[offset-1]=mask[3],merge?(applyMask(data,mask,target,offset,data.length),[target]):(applyMask(data,mask,data,0,data.length),[target,data])):[target,data]}close(code,data,mask,cb){let buf;if(void 0===code)buf=EMPTY_BUFFER;else{if("number"!=typeof code||!isValidStatusCode(code))throw new TypeError("First argument must be a valid error code number");if(void 0===data||""===data)buf=Buffer.allocUnsafe(2),buf.writeUInt16BE(code,0);else{const length=Buffer.byteLength(data);if(length>123)throw new RangeError("The message must not be greater than 123 bytes");buf=Buffer.allocUnsafe(2+length),buf.writeUInt16BE(code,0),buf.write(data,2)}}this._deflating?this.enqueue([this.doClose,buf,mask,cb]):this.doClose(buf,mask,cb)}doClose(data,mask,cb){this.sendFrame(Sender.frame(data,{fin:!0,rsv1:!1,opcode:8,mask:mask,readOnly:!1}),cb)}ping(data,mask,cb){const buf=toBuffer(data);if(buf.length>125)throw new RangeError("The data size must not be greater than 125 bytes");this._deflating?this.enqueue([this.doPing,buf,mask,toBuffer.readOnly,cb]):this.doPing(buf,mask,toBuffer.readOnly,cb)}doPing(data,mask,readOnly,cb){this.sendFrame(Sender.frame(data,{fin:!0,rsv1:!1,opcode:9,mask:mask,readOnly:readOnly}),cb)}pong(data,mask,cb){const buf=toBuffer(data);if(buf.length>125)throw new RangeError("The data size must not be greater than 125 bytes");this._deflating?this.enqueue([this.doPong,buf,mask,toBuffer.readOnly,cb]):this.doPong(buf,mask,toBuffer.readOnly,cb)}doPong(data,mask,readOnly,cb){this.sendFrame(Sender.frame(data,{fin:!0,rsv1:!1,opcode:10,mask:mask,readOnly:readOnly}),cb)}send(data,options,cb){const buf=toBuffer(data),perMessageDeflate=this._extensions[PerMessageDeflate.extensionName];let opcode=options.binary?2:1,rsv1=options.compress;if(this._firstFragment?(this._firstFragment=!1,rsv1&&perMessageDeflate&&(rsv1=buf.length>=perMessageDeflate._threshold),this._compress=rsv1):(rsv1=!1,opcode=0),options.fin&&(this._firstFragment=!0),perMessageDeflate){const opts={fin:options.fin,rsv1:rsv1,opcode:opcode,mask:options.mask,readOnly:toBuffer.readOnly};this._deflating?this.enqueue([this.dispatch,buf,this._compress,opts,cb]):this.dispatch(buf,this._compress,opts,cb)}else this.sendFrame(Sender.frame(buf,{fin:options.fin,rsv1:!1,opcode:opcode,mask:options.mask,readOnly:toBuffer.readOnly}),cb)}dispatch(data,compress,options,cb){if(!compress)return void this.sendFrame(Sender.frame(data,options),cb);const perMessageDeflate=this._extensions[PerMessageDeflate.extensionName];this._bufferedBytes+=data.length,this._deflating=!0,perMessageDeflate.compress(data,options.fin,((_,buf)=>{if(this._socket.destroyed){const err=new Error("The socket was closed while data was being compressed");"function"==typeof cb&&cb(err);for(let i=0;i<this._queue.length;i++){const callback=this._queue[i][4];"function"==typeof callback&&callback(err)}}else this._bufferedBytes-=data.length,this._deflating=!1,options.readOnly=!1,this.sendFrame(Sender.frame(buf,options),cb),this.dequeue()}))}dequeue(){for(;!this._deflating&&this._queue.length;){const params=this._queue.shift();this._bufferedBytes-=params[1].length,Reflect.apply(params[0],this,params.slice(1))}}enqueue(params){this._bufferedBytes+=params[1].length,this._queue.push(params)}sendFrame(list,cb){2===list.length?(this._socket.cork(),this._socket.write(list[0]),this._socket.write(list[1],cb),this._socket.uncork()):this._socket.write(list[0],cb)}}module.exports=Sender},function(module,exports,__webpack_require__){"use strict";const tokenChars=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function push(dest,name,elem){void 0===dest[name]?dest[name]=[elem]:dest[name].push(elem)}module.exports={format:function(extensions){return Object.keys(extensions).map((extension=>{let configurations=extensions[extension];return Array.isArray(configurations)||(configurations=[configurations]),configurations.map((params=>[extension].concat(Object.keys(params).map((k=>{let values=params[k];return Array.isArray(values)||(values=[values]),values.map((v=>!0===v?k:`${k}=${v}`)).join("; ")}))).join("; "))).join(", ")})).join(", ")},parse:function(header){const offers=Object.create(null);if(void 0===header||""===header)return offers;let extensionName,paramName,params=Object.create(null),mustUnescape=!1,isEscaping=!1,inQuotes=!1,start=-1,end=-1,i=0;for(;i<header.length;i++){const code=header.charCodeAt(i);if(void 0===extensionName)if(-1===end&&1===tokenChars[code])-1===start&&(start=i);else if(32===code||9===code)-1===end&&-1!==start&&(end=i);else{if(59!==code&&44!==code)throw new SyntaxError("Unexpected character at index "+i);{if(-1===start)throw new SyntaxError("Unexpected character at index "+i);-1===end&&(end=i);const name=header.slice(start,end);44===code?(push(offers,name,params),params=Object.create(null)):extensionName=name,start=end=-1}}else if(void 0===paramName)if(-1===end&&1===tokenChars[code])-1===start&&(start=i);else if(32===code||9===code)-1===end&&-1!==start&&(end=i);else if(59===code||44===code){if(-1===start)throw new SyntaxError("Unexpected character at index "+i);-1===end&&(end=i),push(params,header.slice(start,end),!0),44===code&&(push(offers,extensionName,params),params=Object.create(null),extensionName=void 0),start=end=-1}else{if(61!==code||-1===start||-1!==end)throw new SyntaxError("Unexpected character at index "+i);paramName=header.slice(start,i),start=end=-1}else if(isEscaping){if(1!==tokenChars[code])throw new SyntaxError("Unexpected character at index "+i);-1===start?start=i:mustUnescape||(mustUnescape=!0),isEscaping=!1}else if(inQuotes)if(1===tokenChars[code])-1===start&&(start=i);else if(34===code&&-1!==start)inQuotes=!1,end=i;else{if(92!==code)throw new SyntaxError("Unexpected character at index "+i);isEscaping=!0}else if(34===code&&61===header.charCodeAt(i-1))inQuotes=!0;else if(-1===end&&1===tokenChars[code])-1===start&&(start=i);else if(-1===start||32!==code&&9!==code){if(59!==code&&44!==code)throw new SyntaxError("Unexpected character at index "+i);{if(-1===start)throw new SyntaxError("Unexpected character at index "+i);-1===end&&(end=i);let value=header.slice(start,end);mustUnescape&&(value=value.replace(/\\/g,""),mustUnescape=!1),push(params,paramName,value),44===code&&(push(offers,extensionName,params),params=Object.create(null),extensionName=void 0),paramName=void 0,start=end=-1}}else-1===end&&(end=i)}if(-1===start||inQuotes)throw new SyntaxError("Unexpected end of input");-1===end&&(end=i);const token=header.slice(start,end);return void 0===extensionName?push(offers,token,params):(void 0===paramName?push(params,token,!0):push(params,paramName,mustUnescape?token.replace(/\\/g,""):token),push(offers,extensionName,params)),offers}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const tslib_1=__webpack_require__(11),lodash_clonedeep_1=tslib_1.__importDefault(__webpack_require__(48)),util_1=__webpack_require__(0),stompjs_1=__webpack_require__(307),stompMessage_1=tslib_1.__importDefault(__webpack_require__(308)),spacebunny_1=tslib_1.__importDefault(__webpack_require__(49)),utils_1=__webpack_require__(30);class StompClient extends spacebunny_1.default{constructor(opts={}){super(opts),this.stompListeners={},this.onMessage=(callback,opts={})=>new Promise(((resolve,reject)=>{try{const topic=this.subcriptionFor(this.existingQueuePrefix,this.inboxTopic),name=this.addStompListener(callback,topic,opts);this.isConnected()&&this.bindStompListner(name),resolve()}catch(error){this.log("error",error),reject(error)}})),this.publish=(channel,message,opts={})=>new Promise(((resolve,reject)=>{if(this.isConnected())try{const{routingKey:routingKey,topic:topic}=opts,destination=this.destinationFor({channel:channel,routingKey:routingKey,topic:topic});this.stompClient.publish({destination:destination,headers:{},body:utils_1.encapsulateContent(message)}),resolve(!0)}catch(error){this.log("error","Error publishing on channel "+channel),reject(error)}else reject(new Error(`${this.getClassName()} - Error sending message on channel ${channel} when client is not connected`))})),this.disconnect=()=>new Promise(((resolve,reject)=>{if(this.isConnected())try{const listeners=Object.keys(this.stompListeners);for(let index=0;index<listeners.length;index+=1){const name=listeners[index],{subscription:subscription}=this.stompListeners[name];util_1.isNullOrUndefined(subscription)||subscription.unsubscribe(),delete this.stompListeners[name]}this.stompClient.deactivate(),this.stompClient=void 0,this.emit("disconnect"),resolve(!0)}catch(error){reject(error)}else resolve(!0)})),this.connect=(opts={})=>tslib_1.__awaiter(this,void 0,void 0,(function*(){return this.isConnected()?this.stompClient:(yield this.getEndpointConfigs(),new Promise(((resolve,reject)=>{try{const protocol=this.tls?this.tlsProtocol:this.protocol,port=this.tls?this.connectionParams.protocols.webStomp.tlsPort:this.connectionParams.protocols.webStomp.port,connectionString=`${protocol}://${this.connectionParams.host}:${port}/ws`,stompConfig={connectHeaders:Object.assign(Object.assign({},this.connectionHeaders),{login:this.connectionParams.deviceId||this.connectionParams.client,passcode:this.connectionParams.secret,host:this.connectionParams.vhost}),brokerURL:connectionString,reconnectDelay:this.autoReconnect?opts.reconnectDelay||this.reconnectTimeout:0,heartbeatIncoming:opts.heartbeatIncoming||this.heartbeat,heartbeatOutgoing:opts.heartbeatOutgoing||this.heartbeat,onConnect:()=>{this.emit("connect"),this.log("info","Client connected!"),resolve(this.stompClient)}};this.stompClient=new stompjs_1.Client(stompConfig),this.stompClient.activate()}catch(error){this.stompClient=void 0,reject(error)}})))})),this.isConnected=()=>!util_1.isNullOrUndefined(this.stompClient)&&this.stompClient.connected,this.removeStompListener=name=>{delete this.stompListeners[name]},this.consumeCallback=(callback,opts={},message)=>{try{const stompMessage=new stompMessage_1.default({message:message,receiverId:this.getDeviceId(),subscriptionOpts:opts}),ackNeeded=this.autoAck(opts.ack);if(stompMessage.blackListed())return void(ackNeeded&&message.nack());callback(stompMessage),ackNeeded&&message.ack()}catch(error){this.log("error","Error consuming message"),this.log("error",error)}},this.addStompListener=(callback,topic,opts={})=>{const name="subscription-"+(new Date).getTime();return this.stompListeners[name]={callback:callback,topic:topic,opts:opts},name},this.bindStompListners=()=>{const names=Object.keys(this.stompListeners);for(let index=0;index<names.length;index+=1){const name=names[index];this.bindStompListner(name)}},this.bindStompListner=name=>{if(util_1.isNullOrUndefined(this.stompListeners[name]))return void this.log("error",`Listner ${name} does not exist.`);if(!util_1.isNullOrUndefined(this.stompListeners[name].subscription))return void this.log("warn",`Listner ${name} already bound to a subscription.`);const{callback:callback,opts:opts,topic:topic}=this.stompListeners[name];if(!this.isConnected())throw new Error(this.getClassName()+" - Trying to subscribe when client is not connected");this.stompListeners[name].subscription=this.stompClient.subscribe(topic,this.consumeCallback.bind(this,callback,opts)),this.topics.includes(topic)||this.topics.push(topic),this.log("info","Client subscribed to topics: "+topic)},this.subcriptionFor=(type,channel)=>`/${type}/${this.getDeviceId()}.${channel}`,this.destinationFor=(params={})=>{const{type:type=this.defaultResource,channel:channel="",topic:topic="",routingKey:routingKey=""}=params;let messageRoutingKey;return routingKey.length>0?messageRoutingKey=routingKey:(messageRoutingKey=this.getDeviceId(),!util_1.isNullOrUndefined(channel)&&channel.length>0&&(messageRoutingKey+="."+(channel||"")),!util_1.isNullOrUndefined(topic)&&topic.length>0&&(messageRoutingKey+="."+(topic||""))),`/${type}/${this.getDeviceId()}/${messageRoutingKey}`},this.autoAck=ack=>{if(ack)switch(this.ackTypes.includes(ack)||this.emit("error","Wrong acknowledge type"),ack){case"client":return!1;default:return!0}return!1},this.publishCachedMessages=()=>tslib_1.__awaiter(this,void 0,void 0,(function*(){if(this.isConnected()&&this.cachedMessages.length>0){const cachedMessagesToSend=lodash_clonedeep_1.default(this.cachedMessages);this.log("debug",`Publishing ${cachedMessagesToSend.length} cached messages...`);for(let index=0;index<cachedMessagesToSend.length;index+=1){const cachedMessage=cachedMessagesToSend[index];this.log("silly",`Sending message ${index+1} from cache`);const{message:message,channel:channel,options:options}=cachedMessage;if(yield this.publish(channel,message,options)){const itemToRemove=this.cachedMessages.findIndex((el=>util_1.isDeepStrictEqual(el,cachedMessage)));this.cachedMessages.splice(itemToRemove,1)}}this.writeCachedMessagesFile()}})),this.stompListeners={},this.protocol="ws",this.tlsProtocol="wss",this.wsEndpoint="ws",this.connectionHeaders={max_hbrlck_fails:"10","accept-version":"1.0,1.1,1.2","heart-beat":"10000,10000"},this.connectionOpts={},this.existingQueuePrefix="amq/queue",this.defaultResource="exchange",this.ackTypes=["client"],this.on("connect",(()=>{this.bindStompListners(),this.publishCachedMessages()})),this.on("disconnect",(()=>{this.stompListeners={}}))}}exports.default=StompClient},function(module,exports){var charenc={utf8:{stringToBytes:function(str){return charenc.bin.stringToBytes(unescape(encodeURIComponent(str)))},bytesToString:function(bytes){return decodeURIComponent(escape(charenc.bin.bytesToString(bytes)))}},bin:{stringToBytes:function(str){for(var bytes=[],i=0;i<str.length;i++)bytes.push(255&str.charCodeAt(i));return bytes},bytesToString:function(bytes){for(var str=[],i=0;i<bytes.length;i++)str.push(String.fromCharCode(bytes[i]));return str.join("")}}};module.exports=charenc},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.StompStreamClient=exports.MqttStreamClient=exports.StreamClient=exports.AmqpStreamClient=exports.StompClient=exports.MqttClient=exports.AmqpClient=exports.Client=void 0;const tslib_1=__webpack_require__(11),amqpClient_1=tslib_1.__importDefault(__webpack_require__(61));exports.Client=amqpClient_1.default,exports.AmqpClient=amqpClient_1.default;const amqpStreamClient_1=tslib_1.__importDefault(__webpack_require__(214));exports.AmqpStreamClient=amqpStreamClient_1.default,exports.StreamClient=amqpStreamClient_1.default;const mqttClient_1=tslib_1.__importDefault(__webpack_require__(87));exports.MqttClient=mqttClient_1.default;const mqttStreamClient_1=tslib_1.__importDefault(__webpack_require__(306));exports.MqttStreamClient=mqttStreamClient_1.default;const stompClient_1=tslib_1.__importDefault(__webpack_require__(126));exports.StompClient=stompClient_1.default;const stompStreamClient_1=tslib_1.__importDefault(__webpack_require__(309));exports.StompStreamClient=stompStreamClient_1.default},function(module,exports,__webpack_require__){var raw_connect=__webpack_require__(130).connect,ChannelModel=__webpack_require__(155).ChannelModel,Promise=__webpack_require__(70);module.exports.connect=function(url,connOptions){return Promise.fromCallback((function(cb){return raw_connect(url,connOptions,cb)})).then((function(conn){return new ChannelModel(conn)}))},module.exports.credentials=__webpack_require__(69),module.exports.IllegalOperationError=__webpack_require__(29).IllegalOperationError},function(module,exports,__webpack_require__){"use strict";var URL=__webpack_require__(131),QS=__webpack_require__(134),Connection=__webpack_require__(135).Connection,fmt=__webpack_require__(0).format,credentials=__webpack_require__(69);function copyInto(obj,target){for(var keys=Object.keys(obj),i=keys.length;i--;){var k=keys[i];target[k]=obj[k]}return target}var CLIENT_PROPERTIES={product:"amqplib",version:__webpack_require__(154).version,platform:fmt("Node.JS %s",process.version),information:"http://squaremo.github.io/amqp.node",capabilities:{publisher_confirms:!0,exchange_exchange_bindings:!0,"basic.nack":!0,consumer_cancel_notify:!0,"connection.blocked":!0,authentication_failure_close:!0}};function openFrames(vhost,query,credentials,extraClientProperties){vhost=vhost?QS.unescape(vhost):"/";query=query||{};function intOrDefault(val,def){return void 0===val?def:parseInt(val)}return{clientProperties:copyInto(extraClientProperties,Object.create(CLIENT_PROPERTIES)),mechanism:credentials.mechanism,response:credentials.response(),locale:query.locale||"en_US",channelMax:intOrDefault(query.channelMax,0),frameMax:intOrDefault(query.frameMax,4096),heartbeat:intOrDefault(query.heartbeat,0),virtualHost:vhost,capabilities:"",insist:0}}function credentialsFromUrl(parts){var user="guest",passwd="guest";return""==parts.username&&""==parts.password||(user=parts.username?unescape(parts.username):"",passwd=parts.password?unescape(parts.password):""),credentials.plain(user,passwd)}module.exports.connect=function(url,socketOptions,openCallback){var sockopts=copyInto(socketOptions||{},{});url=url||"amqp://localhost";var protocol,fields,noDelay=!!sockopts.noDelay,timeout=sockopts.timeout,keepAlive=!!sockopts.keepAlive,keepAliveDelay=sockopts.keepAliveDelay||0,extraClientProperties=sockopts.clientProperties||{};if("object"==typeof url){var user,pass;protocol=(url.protocol||"amqp")+":",sockopts.host=url.hostname,sockopts.port=url.port||("amqp:"===protocol?5672:5671),null==url.username&&null==url.password?(user="guest",pass="guest"):(user=url.username||"",pass=url.password||"");var config={locale:url.locale,channelMax:url.channelMax,frameMax:url.frameMax,heartbeat:url.heartbeat};fields=openFrames(url.vhost,config,sockopts.credentials||credentials.plain(user,pass),extraClientProperties)}else{var parts=URL(url,!0);protocol=parts.protocol,sockopts.host=parts.hostname,sockopts.port=parseInt(parts.port)||("amqp:"===protocol?5672:5671);var vhost=parts.pathname?parts.pathname.substr(1):null;fields=openFrames(vhost,parts.query,sockopts.credentials||credentialsFromUrl(parts),extraClientProperties)}var sock,sockok=!1;function onConnect(){sockok=!0,sock.setNoDelay(noDelay),keepAlive&&sock.setKeepAlive(keepAlive,keepAliveDelay);var c=new Connection(sock);c.open(fields,(function(err,ok){timeout&&sock.setTimeout(0),null===err?openCallback(null,c):openCallback(err)}))}if("amqp:"===protocol)sock=__webpack_require__(34).connect(sockopts,onConnect);else{if("amqps:"!==protocol)throw new Error("Expected amqp: or amqps: as the protocol; got "+protocol);sock=__webpack_require__(47).connect(sockopts,onConnect)}timeout&&sock.setTimeout(timeout,(function(){sock.end(),sock.destroy(),openCallback(new Error("connect ETIMEDOUT"))})),sock.once("error",(function(err){sockok||openCallback(err)}))},module.exports.credentialsFromUrl=credentialsFromUrl},function(module,exports,__webpack_require__){"use strict";var required=__webpack_require__(132),qs=__webpack_require__(133),slashes=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,protocolre=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,left=new RegExp("^[\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF]+");function trimLeft(str){return(str||"").toString().replace(left,"")}var rules=[["#","hash"],["?","query"],function(address){return address.replace("\\","/")},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],ignore={hash:1,query:1};function lolcation(loc){var key,location=("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{}).location||{},finaldestination={},type=typeof(loc=loc||location);if("blob:"===loc.protocol)finaldestination=new Url(unescape(loc.pathname),{});else if("string"===type)for(key in finaldestination=new Url(loc,{}),ignore)delete finaldestination[key];else if("object"===type){for(key in loc)key in ignore||(finaldestination[key]=loc[key]);void 0===finaldestination.slashes&&(finaldestination.slashes=slashes.test(loc.href))}return finaldestination}function extractProtocol(address){address=trimLeft(address);var match=protocolre.exec(address);return{protocol:match[1]?match[1].toLowerCase():"",slashes:!!match[2],rest:match[3]}}function Url(address,location,parser){if(address=trimLeft(address),!(this instanceof Url))return new Url(address,location,parser);var relative,extracted,parse,instruction,index,key,instructions=rules.slice(),type=typeof location,url=this,i=0;for("object"!==type&&"string"!==type&&(parser=location,location=null),parser&&"function"!=typeof parser&&(parser=qs.parse),location=lolcation(location),relative=!(extracted=extractProtocol(address||"")).protocol&&!extracted.slashes,url.slashes=extracted.slashes||relative&&location.slashes,url.protocol=extracted.protocol||location.protocol||"",address=extracted.rest,extracted.slashes||(instructions[3]=[/(.*)/,"pathname"]);i<instructions.length;i++)"function"!=typeof(instruction=instructions[i])?(parse=instruction[0],key=instruction[1],parse!=parse?url[key]=address:"string"==typeof parse?~(index=address.indexOf(parse))&&("number"==typeof instruction[2]?(url[key]=address.slice(0,index),address=address.slice(index+instruction[2])):(url[key]=address.slice(index),address=address.slice(0,index))):(index=parse.exec(address))&&(url[key]=index[1],address=address.slice(0,index.index)),url[key]=url[key]||relative&&instruction[3]&&location[key]||"",instruction[4]&&(url[key]=url[key].toLowerCase())):address=instruction(address);parser&&(url.query=parser(url.query)),relative&&location.slashes&&"/"!==url.pathname.charAt(0)&&(""!==url.pathname||""!==location.pathname)&&(url.pathname=function(relative,base){if(""===relative)return base;for(var path=(base||"/").split("/").slice(0,-1).concat(relative.split("/")),i=path.length,last=path[i-1],unshift=!1,up=0;i--;)"."===path[i]?path.splice(i,1):".."===path[i]?(path.splice(i,1),up++):up&&(0===i&&(unshift=!0),path.splice(i,1),up--);return unshift&&path.unshift(""),"."!==last&&".."!==last||path.push(""),path.join("/")}(url.pathname,location.pathname)),required(url.port,url.protocol)||(url.host=url.hostname,url.port=""),url.username=url.password="",url.auth&&(instruction=url.auth.split(":"),url.username=instruction[0]||"",url.password=instruction[1]||""),url.origin=url.protocol&&url.host&&"file:"!==url.protocol?url.protocol+"//"+url.host:"null",url.href=url.toString()}Url.prototype={set:function(part,value,fn){var url=this;switch(part){case"query":"string"==typeof value&&value.length&&(value=(fn||qs.parse)(value)),url[part]=value;break;case"port":url[part]=value,required(value,url.protocol)?value&&(url.host=url.hostname+":"+value):(url.host=url.hostname,url[part]="");break;case"hostname":url[part]=value,url.port&&(value+=":"+url.port),url.host=value;break;case"host":url[part]=value,/:\d+$/.test(value)?(value=value.split(":"),url.port=value.pop(),url.hostname=value.join(":")):(url.hostname=value,url.port="");break;case"protocol":url.protocol=value.toLowerCase(),url.slashes=!fn;break;case"pathname":case"hash":if(value){var char="pathname"===part?"/":"#";url[part]=value.charAt(0)!==char?char+value:value}else url[part]=value;break;default:url[part]=value}for(var i=0;i<rules.length;i++){var ins=rules[i];ins[4]&&(url[ins[1]]=url[ins[1]].toLowerCase())}return url.origin=url.protocol&&url.host&&"file:"!==url.protocol?url.protocol+"//"+url.host:"null",url.href=url.toString(),url},toString:function(stringify){stringify&&"function"==typeof stringify||(stringify=qs.stringify);var query,url=this,protocol=url.protocol;protocol&&":"!==protocol.charAt(protocol.length-1)&&(protocol+=":");var result=protocol+(url.slashes?"//":"");return url.username&&(result+=url.username,url.password&&(result+=":"+url.password),result+="@"),result+=url.host+url.pathname,(query="object"==typeof url.query?stringify(url.query):url.query)&&(result+="?"!==query.charAt(0)?"?"+query:query),url.hash&&(result+=url.hash),result}},Url.extractProtocol=extractProtocol,Url.location=lolcation,Url.trimLeft=trimLeft,Url.qs=qs,module.exports=Url},function(module,exports,__webpack_require__){"use strict";module.exports=function(port,protocol){if(protocol=protocol.split(":")[0],!(port=+port))return!1;switch(protocol){case"http":case"ws":return 80!==port;case"https":case"wss":return 443!==port;case"ftp":return 21!==port;case"gopher":return 70!==port;case"file":return!1}return 0!==port}},function(module,exports,__webpack_require__){"use strict";var has=Object.prototype.hasOwnProperty;function decode(input){try{return decodeURIComponent(input.replace(/\+/g," "))}catch(e){return null}}function encode(input){try{return encodeURIComponent(input)}catch(e){return null}}exports.stringify=function(obj,prefix){prefix=prefix||"";var value,key,pairs=[];for(key in"string"!=typeof prefix&&(prefix="?"),obj)if(has.call(obj,key)){if((value=obj[key])||null!=value&&!isNaN(value)||(value=""),key=encode(key),value=encode(value),null===key||null===value)continue;pairs.push(key+"="+value)}return pairs.length?prefix+pairs.join("&"):""},exports.parse=function(query){for(var part,parser=/([^=?#&]+)=?([^&]*)/g,result={};part=parser.exec(query);){var key=decode(part[1]),value=decode(part[2]);null===key||null===value||key in result||(result[key]=value)}return result}},function(module,exports){module.exports=require("querystring")},function(module,exports,__webpack_require__){"use strict";var defs=__webpack_require__(26),constants=defs.constants,frame=__webpack_require__(63),HEARTBEAT=frame.HEARTBEAT,Mux=__webpack_require__(143).Mux,Buffer=__webpack_require__(27).Buffer,Duplex=__webpack_require__(6).Duplex||__webpack_require__(144),EventEmitter=__webpack_require__(4).EventEmitter,Heart=__webpack_require__(149).Heart,methodName=__webpack_require__(19).methodName,closeMsg=__webpack_require__(19).closeMessage,inspect=__webpack_require__(19).inspect,BitSet=__webpack_require__(150).BitSet,inherits=__webpack_require__(0).inherits,fmt=__webpack_require__(0).format,PassThrough=__webpack_require__(6).PassThrough||__webpack_require__(151),IllegalOperationError=__webpack_require__(29).IllegalOperationError,stackCapture=__webpack_require__(29).stackCapture;function Connection(underlying){EventEmitter.call(this);var connection,stream=this.stream=function(s){if(s instanceof Duplex)return s;var ws=new Duplex;return ws.wrap(s),ws._write=function(chunk,encoding,callback){return s.write(chunk,encoding,callback)},ws}(underlying);this.muxer=new Mux(stream),this.rest=Buffer.alloc(0),this.frameMax=constants.FRAME_MIN_SIZE,this.sentSinceLastCheck=!1,this.recvSinceLastCheck=!1,this.expectSocketClose=!1,this.freeChannels=new BitSet,this.channels=[{channel:{accept:(connection=this,function(f){if(f===HEARTBEAT);else if(f.id===defs.ConnectionClose){connection.sendMethod(0,defs.ConnectionCloseOk,{});var emsg=fmt("Connection closed: %s",closeMsg(f)),s=stackCapture(emsg),e=new Error(emsg);e.code=f.fields.replyCode,isFatalError(e)&&connection.emit("error",e),connection.toClosed(s,e)}else f.id===defs.ConnectionBlocked?connection.emit("blocked",f.fields.reason):f.id===defs.ConnectionUnblocked?connection.emit("unblocked"):connection.closeWithError(fmt("Unexpected frame on channel 0"),constants.UNEXPECTED_FRAME,new Error(fmt("Unexpected frame on channel 0: %s",inspect(f,!1))))})},buffer:underlying}]}inherits(Connection,EventEmitter);var C=Connection.prototype;function mainAccept(frame){var rec=this.channels[frame.channel];if(rec)return rec.channel.accept(frame);this.closeWithError(fmt("Frame on unknown channel %d",frame.channel),constants.CHANNEL_ERROR,new Error(fmt("Frame on unknown channel: %s",inspect(frame,!1))))}function invalidOp(msg,stack){return function(){throw new IllegalOperationError(msg,stack)}}function invalidateSend(conn,msg,stack){conn.sendMethod=conn.sendContent=conn.sendMessage=invalidOp(msg,stack)}C.sendProtocolHeader=function(){this.sendBytes(frame.PROTOCOL_HEADER)},C.open=function(allFields,openCallback0){var self=this,openCallback=openCallback0||function(){},tunedOptions=Object.create(allFields);function wait(k){self.step((function(err,frame){null!==err?bail(err):0!==frame.channel?bail(new Error(fmt("Frame on channel != 0 during handshake: %s",inspect(frame,!1)))):k(frame)}))}function expect(Method,k){wait((function(frame){frame.id===Method?k(frame):bail(new Error(fmt("Expected %s; got %s",methodName(Method),inspect(frame,!1))))}))}function bail(err){openCallback(err)}function send(Method){try{self.sendMethod(0,Method,tunedOptions)}catch(err){bail(err)}}function negotiate(server,desired){return 0===server||0===desired?Math.max(server,desired):Math.min(server,desired)}function afterStartOk(reply){switch(reply.id){case defs.ConnectionSecure:bail(new Error("Wasn't expecting to have to go through secure"));break;case defs.ConnectionClose:bail(new Error(fmt("Handshake terminated by server: %s",closeMsg(reply))));break;case defs.ConnectionTune:var fields=reply.fields;tunedOptions.frameMax=negotiate(fields.frameMax,allFields.frameMax),tunedOptions.channelMax=negotiate(fields.channelMax,allFields.channelMax),tunedOptions.heartbeat=negotiate(fields.heartbeat,allFields.heartbeat),send(defs.ConnectionTuneOk),send(defs.ConnectionOpen),expect(defs.ConnectionOpenOk,onOpenOk);break;default:bail(new Error(fmt("Expected connection.secure, connection.close, or connection.tune during handshake; got %s",inspect(reply,!1))))}}function onOpenOk(openOk){var ok;self.channelMax=tunedOptions.channelMax||65535,self.frameMax=tunedOptions.frameMax||4294967295,self.heartbeat=tunedOptions.heartbeat,self.heartbeater=self.startHeartbeater(),self.accept=mainAccept,ok=openOk,self.stream.removeListener("end",endWhileOpening),self.stream.removeListener("error",endWhileOpening),self.stream.on("error",self.onSocketError.bind(self)),self.stream.on("end",self.onSocketError.bind(self,new Error("Unexpected close"))),self.on("frameError",self.onSocketError.bind(self)),self.acceptLoop(),openCallback(null,ok)}function endWhileOpening(err){bail(err||new Error("Socket closed abruptly during opening handshake"))}this.stream.on("end",endWhileOpening),this.stream.on("error",endWhileOpening),this.sendProtocolHeader(),expect(defs.ConnectionStart,(function(start){start.fields.mechanisms.toString().split(" ").indexOf(allFields.mechanism)<0?bail(new Error(fmt("SASL mechanism %s is not provided by the server",allFields.mechanism))):(self.serverProperties=start.fields.serverProperties,send(defs.ConnectionStartOk),wait(afterStartOk))}))},C.close=function(closeCallback){var k=closeCallback&&function(){closeCallback(null)};this.closeBecause("Cheers, thanks",constants.REPLY_SUCCESS,k)},C.closeBecause=function(reason,code,k){this.sendMethod(0,defs.ConnectionClose,{replyText:reason,replyCode:code,methodId:0,classId:0});var s=stackCapture("closeBecause called: "+reason);this.toClosing(s,k)},C.closeWithError=function(reason,code,error){this.emit("error",error),this.closeBecause(reason,code)},C.onSocketError=function(err){if(!this.expectSocketClose){this.expectSocketClose=!0,this.emit("error",err);var s=stackCapture("Socket error");this.toClosed(s,err)}},C.toClosing=function(capturedStack,k){var send=this.sendMethod.bind(this);this.accept=function(f){if(f.id===defs.ConnectionCloseOk){k&&k();var s=stackCapture("ConnectionCloseOk received");this.toClosed(s,void 0)}else f.id===defs.ConnectionClose&&send(0,defs.ConnectionCloseOk,{})},invalidateSend(this,"Connection closing",capturedStack)},C._closeChannels=function(capturedStack){for(var i=1;i<this.channels.length;i++){var ch=this.channels[i];null!==ch&&ch.channel.toClosed(capturedStack)}},C.toClosed=function(capturedStack,maybeErr){this._closeChannels(capturedStack);var info=fmt("Connection closed (%s)",maybeErr?maybeErr.toString():"by client");invalidateSend(this,info,capturedStack),this.accept=invalidOp(info,capturedStack),this.close=function(cb){cb&&cb(new IllegalOperationError(info,capturedStack))},this.heartbeater&&this.heartbeater.clear(),this.expectSocketClose=!0,this.stream.end(),this.emit("close",maybeErr)},C.startHeartbeater=function(){if(0===this.heartbeat)return null;var self=this,hb=new Heart(this.heartbeat,this.checkSend.bind(this),this.checkRecv.bind(this));return hb.on("timeout",(function(){var hberr=new Error("Heartbeat timeout");self.emit("error",hberr);var s=stackCapture("Heartbeat timeout");self.toClosed(s,hberr)})),hb.on("beat",(function(){self.sendHeartbeat()})),hb},C.freshChannel=function(channel,options){var next=this.freeChannels.nextClearBit(1);if(next<0||next>this.channelMax)throw new Error("No channels left to allocate");this.freeChannels.set(next);var hwm=options&&options.highWaterMark||1024,writeBuffer=new PassThrough({objectMode:!0,highWaterMark:hwm});return this.channels[next]={channel:channel,buffer:writeBuffer},writeBuffer.on("drain",(function(){channel.onBufferDrain()})),this.muxer.pipeFrom(writeBuffer),next},C.releaseChannel=function(channel){this.freeChannels.clear(channel),this.channels[channel].buffer.end(),this.channels[channel]=null},C.acceptLoop=function(){var self=this;function go(){try{for(var f;f=self.recvFrame();)self.accept(f)}catch(e){self.emit("frameError",e)}}self.stream.on("readable",go),go()},C.step=function(cb){var self=this;!function recv(){var f;try{f=self.recvFrame()}catch(e){return void cb(e,null)}f?cb(null,f):self.stream.once("readable",recv)}()},C.checkSend=function(){var check=this.sentSinceLastCheck;return this.sentSinceLastCheck=!1,check},C.checkRecv=function(){var check=this.recvSinceLastCheck;return this.recvSinceLastCheck=!1,check},C.sendBytes=function(bytes){this.sentSinceLastCheck=!0,this.stream.write(bytes)},C.sendHeartbeat=function(){return this.sendBytes(frame.HEARTBEAT_BUF)};var encodeMethod=defs.encodeMethod,encodeProperties=defs.encodeProperties;C.sendMethod=function(channel,Method,fields){var frame=encodeMethod(Method,channel,fields);return this.sentSinceLastCheck=!0,this.channels[channel].buffer.write(frame)},C.sendMessage=function(channel,Method,fields,Properties,props,content){if(!Buffer.isBuffer(content))throw new TypeError("content is not a buffer");var mframe=encodeMethod(Method,channel,fields),pframe=encodeProperties(Properties,channel,content.length,props),buffer=this.channels[channel].buffer;this.sentSinceLastCheck=!0;var methodHeaderLen=mframe.length+pframe.length,bodyLen=content.length>0?content.length+FRAME_OVERHEAD:0,allLen=methodHeaderLen+bodyLen;if(allLen<2048){var all=Buffer.alloc(allLen),offset=mframe.copy(all,0);return offset+=pframe.copy(all,offset),bodyLen>0&&makeBodyFrame(channel,content).copy(all,offset),buffer.write(all)}if(methodHeaderLen<2048){var both=Buffer.alloc(methodHeaderLen);offset=mframe.copy(both,0);pframe.copy(both,offset),buffer.write(both)}else buffer.write(mframe),buffer.write(pframe);return this.sendContent(channel,content)};var FRAME_OVERHEAD=defs.FRAME_OVERHEAD,makeBodyFrame=frame.makeBodyFrame;C.sendContent=function(channel,body){if(!Buffer.isBuffer(body))throw new TypeError(fmt("Expected buffer; got %s",body));for(var writeResult=!0,buffer=this.channels[channel].buffer,maxBody=this.frameMax-FRAME_OVERHEAD,offset=0;offset<body.length;offset+=maxBody){var end=offset+maxBody,slice=end>body.length?body.slice(offset):body.slice(offset,end),bodyFrame=makeBodyFrame(channel,slice);writeResult=buffer.write(bodyFrame)}return this.sentSinceLastCheck=!0,writeResult};var parseFrame=frame.parseFrame,decodeFrame=frame.decodeFrame;function isFatalError(error){switch(error&&error.code){case defs.constants.CONNECTION_FORCED:case defs.constants.REPLY_SUCCESS:return!1;default:return!0}}C.recvFrame=function(){var frame=parseFrame(this.rest,this.frameMax);if(frame)return this.rest=frame.rest,decodeFrame(frame);var incoming=this.stream.read();return null!==incoming&&(this.recvSinceLastCheck=!0,this.rest=Buffer.concat([this.rest,incoming]),this.recvFrame())},module.exports.Connection=Connection,module.exports.isFatalError=isFatalError},function(module,exports,__webpack_require__){"use strict";module.exports.parse=__webpack_require__(43).parse,module.exports.match=__webpack_require__(64).match,module.exports.build=__webpack_require__(45).build,module.exports.write=__webpack_require__(45).write,module.exports.matcher=module.exports.compile=__webpack_require__(67).compile,module.exports.builder=__webpack_require__(67).compile_builder},function(module,exports,__webpack_require__){"use strict";function set(values){var s={};for(var i in values)s[values[i]]=1;return s}function variable(name,size,specifiers0){var specifiers=set(specifiers0),segment={name:name};return segment.type=type_in(specifiers),specs(segment,segment.type,specifiers),segment.size=size_of(segment,segment.type,size,segment.unit),segment}module.exports.variable=variable,module.exports.rest=function(){return variable("_",!0,["binary"])},module.exports.value=function(val,size,specifiers0){var specifiers=set(specifiers0),segment={value:val};return segment.type=type_in(specifiers),specs(segment,segment.type,specifiers),segment.size=size_of(segment,segment.type,size,segment.unit),segment},module.exports.string=function(val){return{value:val,type:"string"}};var TYPES={integer:1,binary:1,float:1};function type_in(specifiers){for(var t in specifiers)if(TYPES[t])return t;return"integer"}function specs(segment,type,specifiers){switch(type){case"integer":segment.signed=function(specifiers){return specifiers.signed}(specifiers);case"float":segment.bigendian=function(specifiers){return!specifiers.little}(specifiers);default:segment.unit=function(specifiers,type){for(var s in specifiers){if("unit:"==s.substr(0,5))return parseInt(s.substr(5))}switch(type){case"binary":return 8;case"integer":case"float":return 1}}(specifiers,segment.type)}return segment}function size_of(segment,type,size,unit){if(void 0!==size&&""!==size)return size;switch(type){case"integer":return 8;case"float":return 64;case"binary":return!0}}},function(module,exports){module.exports=function(){function quote(s){return'"'+s.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}var result={parse:function(input,startRule){var parseFunctions={start:function(){var result0,result1,result2,result3,pos0,pos1;if(pos0=pos,pos1=pos,null!==(result0=parse_ws()))if(null!==(result1=parse_segment())){for(result2=[],result3=parse_segmentTail();null!==result3;)result2.push(result3),result3=parse_segmentTail();null!==result2?result0=[result0,result1,result2]:(result0=null,pos=pos1)}else result0=null,pos=pos1;else result0=null,pos=pos1;null!==result0&&(head=result0[1],(tail=result0[2]).unshift(head),result0=tail);var head,tail;null===result0&&(pos=pos0);return result0},segmentTail:parse_segmentTail,segment:parse_segment,string:parse_string,chars:parse_chars,char:parse_char,hexDigit:parse_hexDigit,identifier:parse_identifier,number:parse_number,size:parse_size,specifierList:parse_specifierList,specifierTail:parse_specifierTail,specifier:parse_specifier,unit:parse_unit,ws:parse_ws};if(void 0!==startRule){if(void 0===parseFunctions[startRule])throw new Error("Invalid rule name: "+quote(startRule)+".")}else startRule="start";var pos=0,rightmostFailuresPos=0,rightmostFailuresExpected=[];function matchFailed(failure){pos<rightmostFailuresPos||(pos>rightmostFailuresPos&&(rightmostFailuresPos=pos,rightmostFailuresExpected=[]),rightmostFailuresExpected.push(failure))}function parse_segmentTail(){var result0,result1,result2,result3,pos0,pos1;return pos0=pos,pos1=pos,null!==(result0=parse_ws())?(44===input.charCodeAt(pos)?(result1=",",pos++):(result1=null,matchFailed('","')),null!==result1&&null!==(result2=parse_ws())&&null!==(result3=parse_segment())?result0=[result0,result1,result2,result3]:(result0=null,pos=pos1)):(result0=null,pos=pos1),null!==result0&&(result0=result0[3]),null===result0&&(pos=pos0),result0}function parse_segment(){var result0,result1,result2,pos0,pos1,v,size,specs;return pos0=pos,null!==(result0=parse_string())&&(result0={string:result0}),null===result0&&(pos=pos0),null===result0&&(pos0=pos,pos1=pos,null!==(result0=parse_identifier())&&null!==(result1=null!==(result1=parse_size())?result1:"")&&null!==(result2=null!==(result2=parse_specifierList())?result2:"")?result0=[result0,result1,result2]:(result0=null,pos=pos1),null!==result0&&(v=result0[0],size=result0[1],specs=result0[2],result0={name:v,size:size,specifiers:specs}),null===result0&&(pos=pos0),null===result0&&(pos0=pos,pos1=pos,null!==(result0=parse_number())&&null!==(result1=null!==(result1=parse_size())?result1:"")&&null!==(result2=null!==(result2=parse_specifierList())?result2:"")?result0=[result0,result1,result2]:(result0=null,pos=pos1),null!==result0&&(result0=function(offset,v,size,specs){return{value:v,size:size,specifiers:specs}}(0,result0[0],result0[1],result0[2])),null===result0&&(pos=pos0))),result0}function parse_string(){var result0,result1,result2,pos0,pos1;return pos0=pos,pos1=pos,34===input.charCodeAt(pos)?(result0='"',pos++):(result0=null,matchFailed('"\\""')),null!==result0?(34===input.charCodeAt(pos)?(result1='"',pos++):(result1=null,matchFailed('"\\""')),null!==result1?result0=[result0,result1]:(result0=null,pos=pos1)):(result0=null,pos=pos1),null!==result0&&(result0=""),null===result0&&(pos=pos0),null===result0&&(pos0=pos,pos1=pos,34===input.charCodeAt(pos)?(result0='"',pos++):(result0=null,matchFailed('"\\""')),null!==result0&&null!==(result1=parse_chars())?(34===input.charCodeAt(pos)?(result2='"',pos++):(result2=null,matchFailed('"\\""')),null!==result2?result0=[result0,result1,result2]:(result0=null,pos=pos1)):(result0=null,pos=pos1),null!==result0&&(result0=result0[1]),null===result0&&(pos=pos0)),result0}function parse_chars(){var result0,result1,pos0;if(pos0=pos,null!==(result1=parse_char()))for(result0=[];null!==result1;)result0.push(result1),result1=parse_char();else result0=null;return null!==result0&&(result0=result0.join("")),null===result0&&(pos=pos0),result0}function parse_char(){var result0,result1,result2,result3,result4,pos0,pos1,h1,h2,h3,h4;return/^[^"\\\0-\x1F]/.test(input.charAt(pos))?(result0=input.charAt(pos),pos++):(result0=null,matchFailed('[^"\\\\\\0-\\x1F]')),null===result0&&(pos0=pos,'\\"'===input.substr(pos,2)?(result0='\\"',pos+=2):(result0=null,matchFailed('"\\\\\\""')),null!==result0&&(result0='"'),null===result0&&(pos=pos0),null===result0&&(pos0=pos,"\\\\"===input.substr(pos,2)?(result0="\\\\",pos+=2):(result0=null,matchFailed('"\\\\\\\\"')),null!==result0&&(result0="\\"),null===result0&&(pos=pos0),null===result0&&(pos0=pos,"\\/"===input.substr(pos,2)?(result0="\\/",pos+=2):(result0=null,matchFailed('"\\\\/"')),null!==result0&&(result0="/"),null===result0&&(pos=pos0),null===result0&&(pos0=pos,"\\b"===input.substr(pos,2)?(result0="\\b",pos+=2):(result0=null,matchFailed('"\\\\b"')),null!==result0&&(result0="\b"),null===result0&&(pos=pos0),null===result0&&(pos0=pos,"\\f"===input.substr(pos,2)?(result0="\\f",pos+=2):(result0=null,matchFailed('"\\\\f"')),null!==result0&&(result0="\f"),null===result0&&(pos=pos0),null===result0&&(pos0=pos,"\\n"===input.substr(pos,2)?(result0="\\n",pos+=2):(result0=null,matchFailed('"\\\\n"')),null!==result0&&(result0="\n"),null===result0&&(pos=pos0),null===result0&&(pos0=pos,"\\r"===input.substr(pos,2)?(result0="\\r",pos+=2):(result0=null,matchFailed('"\\\\r"')),null!==result0&&(result0="\r"),null===result0&&(pos=pos0),null===result0&&(pos0=pos,"\\t"===input.substr(pos,2)?(result0="\\t",pos+=2):(result0=null,matchFailed('"\\\\t"')),null!==result0&&(result0="\t"),null===result0&&(pos=pos0),null===result0&&(pos0=pos,pos1=pos,"\\u"===input.substr(pos,2)?(result0="\\u",pos+=2):(result0=null,matchFailed('"\\\\u"')),null!==result0&&null!==(result1=parse_hexDigit())&&null!==(result2=parse_hexDigit())&&null!==(result3=parse_hexDigit())&&null!==(result4=parse_hexDigit())?result0=[result0,result1,result2,result3,result4]:(result0=null,pos=pos1),null!==result0&&(h1=result0[1],h2=result0[2],h3=result0[3],h4=result0[4],result0=String.fromCharCode(parseInt("0x"+h1+h2+h3+h4))),null===result0&&(pos=pos0)))))))))),result0}function parse_hexDigit(){var result0;return/^[0-9a-fA-F]/.test(input.charAt(pos))?(result0=input.charAt(pos),pos++):(result0=null,matchFailed("[0-9a-fA-F]")),result0}function parse_identifier(){var result0,result1,result2,pos0,pos1,head,tail;if(pos0=pos,pos1=pos,/^[_a-zA-Z]/.test(input.charAt(pos))?(result0=input.charAt(pos),pos++):(result0=null,matchFailed("[_a-zA-Z]")),null!==result0){for(result1=[],/^[_a-zA-Z0-9]/.test(input.charAt(pos))?(result2=input.charAt(pos),pos++):(result2=null,matchFailed("[_a-zA-Z0-9]"));null!==result2;)result1.push(result2),/^[_a-zA-Z0-9]/.test(input.charAt(pos))?(result2=input.charAt(pos),pos++):(result2=null,matchFailed("[_a-zA-Z0-9]"));null!==result1?result0=[result0,result1]:(result0=null,pos=pos1)}else result0=null,pos=pos1;return null!==result0&&(head=result0[0],tail=result0[1],result0=head+tail.join("")),null===result0&&(pos=pos0),result0}function parse_number(){var result0,result1,result2,pos0,pos1,head,tail;if(pos0=pos,48===input.charCodeAt(pos)?(result0="0",pos++):(result0=null,matchFailed('"0"')),null!==result0&&(result0=0),null===result0&&(pos=pos0),null===result0){if(pos0=pos,pos1=pos,/^[1-9]/.test(input.charAt(pos))?(result0=input.charAt(pos),pos++):(result0=null,matchFailed("[1-9]")),null!==result0){for(result1=[],/^[0-9]/.test(input.charAt(pos))?(result2=input.charAt(pos),pos++):(result2=null,matchFailed("[0-9]"));null!==result2;)result1.push(result2),/^[0-9]/.test(input.charAt(pos))?(result2=input.charAt(pos),pos++):(result2=null,matchFailed("[0-9]"));null!==result1?result0=[result0,result1]:(result0=null,pos=pos1)}else result0=null,pos=pos1;null!==result0&&(head=result0[0],tail=result0[1],result0=parseInt(head+tail.join(""))),null===result0&&(pos=pos0)}return result0}function parse_size(){var result0,result1,pos0,pos1;return pos0=pos,pos1=pos,58===input.charCodeAt(pos)?(result0=":",pos++):(result0=null,matchFailed('":"')),null!==result0&&null!==(result1=parse_number())?result0=[result0,result1]:(result0=null,pos=pos1),null!==result0&&(result0=result0[1]),null===result0&&(pos=pos0),null===result0&&(pos0=pos,pos1=pos,58===input.charCodeAt(pos)?(result0=":",pos++):(result0=null,matchFailed('":"')),null!==result0&&null!==(result1=parse_identifier())?result0=[result0,result1]:(result0=null,pos=pos1),null!==result0&&(result0=result0[1]),null===result0&&(pos=pos0)),result0}function parse_specifierList(){var result0,result1,result2,result3,pos0,pos1,head,tail;if(pos0=pos,pos1=pos,47===input.charCodeAt(pos)?(result0="/",pos++):(result0=null,matchFailed('"/"')),null!==result0)if(null!==(result1=parse_specifier())){for(result2=[],result3=parse_specifierTail();null!==result3;)result2.push(result3),result3=parse_specifierTail();null!==result2?result0=[result0,result1,result2]:(result0=null,pos=pos1)}else result0=null,pos=pos1;else result0=null,pos=pos1;return null!==result0&&(head=result0[1],(tail=result0[2]).unshift(head),result0=tail),null===result0&&(pos=pos0),result0}function parse_specifierTail(){var result0,result1,pos0,pos1;return pos0=pos,pos1=pos,45===input.charCodeAt(pos)?(result0="-",pos++):(result0=null,matchFailed('"-"')),null!==result0&&null!==(result1=parse_specifier())?result0=[result0,result1]:(result0=null,pos=pos1),null!==result0&&(result0=result0[1]),null===result0&&(pos=pos0),result0}function parse_specifier(){var result0;return"little"===input.substr(pos,6)?(result0="little",pos+=6):(result0=null,matchFailed('"little"')),null===result0&&("big"===input.substr(pos,3)?(result0="big",pos+=3):(result0=null,matchFailed('"big"')),null===result0&&("signed"===input.substr(pos,6)?(result0="signed",pos+=6):(result0=null,matchFailed('"signed"')),null===result0&&("unsigned"===input.substr(pos,8)?(result0="unsigned",pos+=8):(result0=null,matchFailed('"unsigned"')),null===result0&&("integer"===input.substr(pos,7)?(result0="integer",pos+=7):(result0=null,matchFailed('"integer"')),null===result0&&("binary"===input.substr(pos,6)?(result0="binary",pos+=6):(result0=null,matchFailed('"binary"')),null===result0&&("float"===input.substr(pos,5)?(result0="float",pos+=5):(result0=null,matchFailed('"float"')),null===result0&&(result0=parse_unit()))))))),result0}function parse_unit(){var result0,result1,pos0,pos1;return pos0=pos,pos1=pos,"unit:"===input.substr(pos,5)?(result0="unit:",pos+=5):(result0=null,matchFailed('"unit:"')),null!==result0&&null!==(result1=parse_number())?result0=[result0,result1]:(result0=null,pos=pos1),null!==result0&&(result0="unit:"+result0[1]),null===result0&&(pos=pos0),result0}function parse_ws(){var result0,result1;for(result0=[],/^[ \t\n]/.test(input.charAt(pos))?(result1=input.charAt(pos),pos++):(result1=null,matchFailed("[ \\t\\n]"));null!==result1;)result0.push(result1),/^[ \t\n]/.test(input.charAt(pos))?(result1=input.charAt(pos),pos++):(result1=null,matchFailed("[ \\t\\n]"));return result0}var result=parseFunctions[startRule]();if(null===result||pos!==input.length){var offset=Math.max(pos,rightmostFailuresPos),found=offset<input.length?input.charAt(offset):null,errorPosition=function(){for(var line=1,column=1,seenCR=!1,i=0;i<Math.max(pos,rightmostFailuresPos);i++){var ch=input.charAt(i);"\n"===ch?(seenCR||line++,column=1,seenCR=!1):"\r"===ch||"\u2028"===ch||"\u2029"===ch?(line++,column=1,seenCR=!0):(column++,seenCR=!1)}return{line:line,column:column}}();throw new this.SyntaxError(function(expected){expected.sort();for(var lastExpected=null,cleanExpected=[],i=0;i<expected.length;i++)expected[i]!==lastExpected&&(cleanExpected.push(expected[i]),lastExpected=expected[i]);return cleanExpected}(rightmostFailuresExpected),found,offset,errorPosition.line,errorPosition.column)}return result},toSource:function(){return this._source},SyntaxError:function(expected,found,offset,line,column){this.name="SyntaxError",this.expected=expected,this.found=found,this.message=function(expected,found){var expectedHumanized;switch(expected.length){case 0:expectedHumanized="end of input";break;case 1:expectedHumanized=expected[0];break;default:expectedHumanized=expected.slice(0,expected.length-1).join(", ")+" or "+expected[expected.length-1]}return"Expected "+expectedHumanized+" but "+(found?quote(found):"end of input")+" found."}(expected,found),this.offset=offset,this.line=line,this.column=column}};return result.SyntaxError.prototype=Error.prototype,result}()},function(module,exports,__webpack_require__){"undefined"!=typeof process&&"renderer"===process.type?module.exports=__webpack_require__(140):module.exports=__webpack_require__(142)},function(module,exports,__webpack_require__){function load(){var r;try{r=exports.storage.debug}catch(e){}return!r&&"undefined"!=typeof process&&"env"in process&&(r=process.env.DEBUG),r}(exports=module.exports=__webpack_require__(65)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},exports.formatArgs=function(args){var useColors=this.useColors;if(args[0]=(useColors?"%c":"")+this.namespace+(useColors?" %c":" ")+args[0]+(useColors?"%c ":" ")+"+"+exports.humanize(this.diff),!useColors)return;var c="color: "+this.color;args.splice(1,0,c,"color: inherit");var index=0,lastC=0;args[0].replace(/%[a-zA-Z%]/g,(function(match){"%%"!==match&&(index++,"%c"===match&&(lastC=index))})),args.splice(lastC,0,c)},exports.save=function(namespaces){try{null==namespaces?exports.storage.removeItem("debug"):exports.storage.debug=namespaces}catch(e){}},exports.load=load,exports.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},exports.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),exports.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],exports.formatters.j=function(v){try{return JSON.stringify(v)}catch(err){return"[UnexpectedJSONParseError]: "+err.message}},exports.enable(load())},function(module,exports){var s=1e3,m=60*s,h=60*m,d=24*h,y=365.25*d;function plural(ms,n,name){if(!(ms<n))return ms<1.5*n?Math.floor(ms/n)+" "+name:Math.ceil(ms/n)+" "+name+"s"}module.exports=function(val,options){options=options||{};var ms,type=typeof val;if("string"===type&&val.length>0)return function(str){if((str=String(str)).length>100)return;var match=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(str);if(!match)return;var n=parseFloat(match[1]);switch((match[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*y;case"days":case"day":case"d":return n*d;case"hours":case"hour":case"hrs":case"hr":case"h":return n*h;case"minutes":case"minute":case"mins":case"min":case"m":return n*m;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}(val);if("number"===type&&!1===isNaN(val))return options.long?plural(ms=val,d,"day")||plural(ms,h,"hour")||plural(ms,m,"minute")||plural(ms,s,"second")||ms+" ms":function(ms){if(ms>=d)return Math.round(ms/d)+"d";if(ms>=h)return Math.round(ms/h)+"h";if(ms>=m)return Math.round(ms/m)+"m";if(ms>=s)return Math.round(ms/s)+"s";return ms+"ms"}(val);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(val))}},function(module,exports,__webpack_require__){var tty=__webpack_require__(44),util=__webpack_require__(0);(exports=module.exports=__webpack_require__(65)).init=function(debug){debug.inspectOpts={};for(var keys=Object.keys(exports.inspectOpts),i=0;i<keys.length;i++)debug.inspectOpts[keys[i]]=exports.inspectOpts[keys[i]]},exports.log=function(){return stream.write(util.format.apply(util,arguments)+"\n")},exports.formatArgs=function(args){var name=this.namespace;if(this.useColors){var c=this.color,prefix="  [3"+c+";1m"+name+" [0m";args[0]=prefix+args[0].split("\n").join("\n"+prefix),args.push("[3"+c+"m+"+exports.humanize(this.diff)+"[0m")}else args[0]=(new Date).toUTCString()+" "+name+" "+args[0]},exports.save=function(namespaces){null==namespaces?delete process.env.DEBUG:process.env.DEBUG=namespaces},exports.load=load,exports.useColors=function(){return"colors"in exports.inspectOpts?Boolean(exports.inspectOpts.colors):tty.isatty(fd)},exports.colors=[6,2,3,4,5,1],exports.inspectOpts=Object.keys(process.env).filter((function(key){return/^debug_/i.test(key)})).reduce((function(obj,key){var prop=key.substring(6).toLowerCase().replace(/_([a-z])/g,(function(_,k){return k.toUpperCase()})),val=process.env[key];return val=!!/^(yes|on|true|enabled)$/i.test(val)||!/^(no|off|false|disabled)$/i.test(val)&&("null"===val?null:Number(val)),obj[prop]=val,obj}),{});var fd=parseInt(process.env.DEBUG_FD,10)||2;1!==fd&&2!==fd&&util.deprecate((function(){}),"except for stderr(2) and stdout(1), any other usage of DEBUG_FD is deprecated. Override debug.log if you want to use a different log function (https://git.io/debug_fd)")();var stream=1===fd?process.stdout:2===fd?process.stderr:function(fd){var stream;switch(process.binding("tty_wrap").guessHandleType(fd)){case"TTY":(stream=new tty.WriteStream(fd))._type="tty",stream._handle&&stream._handle.unref&&stream._handle.unref();break;case"FILE":var fs=__webpack_require__(33);(stream=new fs.SyncWriteStream(fd,{autoClose:!1}))._type="fs";break;case"PIPE":case"TCP":var net=__webpack_require__(34);(stream=new net.Socket({fd:fd,readable:!1,writable:!0})).readable=!1,stream.read=null,stream._type="pipe",stream._handle&&stream._handle.unref&&stream._handle.unref();break;default:throw new Error("Implement me. Unknown stream file type!")}return stream.fd=fd,stream._isStdio=!0,stream}(fd);function load(){return process.env.DEBUG}exports.formatters.o=function(v){return this.inspectOpts.colors=this.useColors,util.inspect(v,this.inspectOpts).split("\n").map((function(str){return str.trim()})).join(" ")},exports.formatters.O=function(v){return this.inspectOpts.colors=this.useColors,util.inspect(v,this.inspectOpts)},exports.enable(load())},function(module,exports,__webpack_require__){"use strict";__webpack_require__(0).inherits;var assert=__webpack_require__(46),schedule="function"==typeof setImmediate?setImmediate:process.nextTick;function Mux(downstream){this.newStreams=[],this.oldStreams=[],this.blocked=!1,this.scheduledRead=!1,this.out=downstream;var self=this;downstream.on("drain",(function(){self.blocked=!1,self._readIncoming()}))}Mux.prototype._readIncoming=function(){if(!this.blocked){var accepting=!0,out=this.out;roundrobin(this.newStreams),accepting?(assert.equal(0,this.newStreams.length),roundrobin(this.oldStreams)):(assert(this.newStreams.length>0,"Expect some new streams to remain"),this.oldStreams=this.oldStreams.concat(this.newStreams),this.newStreams=[]),this.blocked=!accepting}function roundrobin(streams){for(var s;accepting&&(s=streams.shift());){var chunk=s.read();null!==chunk&&(accepting=out.write(chunk),streams.push(s))}}},Mux.prototype._scheduleRead=function(){var self=this;self.scheduledRead||(schedule((function(){self.scheduledRead=!1,self._readIncoming()})),self.scheduledRead=!0)},Mux.prototype.pipeFrom=function(readable){var self=this;function enqueue(){self.newStreams.push(readable),self._scheduleRead()}function cleanup(){readable.removeListener("readable",enqueue),readable.removeListener("error",cleanup),readable.removeListener("end",cleanup),readable.removeListener("unpipeFrom",cleanupIfMe)}function cleanupIfMe(dest){dest===self&&cleanup()}readable.on("unpipeFrom",cleanupIfMe),readable.on("end",cleanup),readable.on("error",cleanup),readable.on("readable",enqueue)},Mux.prototype.unpipeFrom=function(readable){readable.emit("unpipeFrom",this)},module.exports.Mux=Mux},function(module,exports,__webpack_require__){module.exports=__webpack_require__(18)},function(module,exports){"function"==typeof Object.create?module.exports=function(ctor,superCtor){superCtor&&(ctor.super_=superCtor,ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:!1,writable:!0,configurable:!0}}))}:module.exports=function(ctor,superCtor){if(superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype,ctor.prototype=new TempCtor,ctor.prototype.constructor=ctor}}},function(module,exports,__webpack_require__){module.exports=Readable;var isArray=__webpack_require__(147),Buffer=__webpack_require__(5).Buffer;Readable.ReadableState=ReadableState;var EE=__webpack_require__(4).EventEmitter;EE.listenerCount||(EE.listenerCount=function(emitter,type){return emitter.listeners(type).length});var StringDecoder,Stream=__webpack_require__(6),util=__webpack_require__(7);util.inherits=__webpack_require__(2);var debug=__webpack_require__(0);function ReadableState(options,stream){var Duplex=__webpack_require__(18),hwm=(options=options||{}).highWaterMark,defaultHwm=options.objectMode?16:16384;this.highWaterMark=hwm||0===hwm?hwm:defaultHwm,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!options.objectMode,stream instanceof Duplex&&(this.objectMode=this.objectMode||!!options.readableObjectMode),this.defaultEncoding=options.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,options.encoding&&(StringDecoder||(StringDecoder=__webpack_require__(68).StringDecoder),this.decoder=new StringDecoder(options.encoding),this.encoding=options.encoding)}function Readable(options){__webpack_require__(18);if(!(this instanceof Readable))return new Readable(options);this._readableState=new ReadableState(options,this),this.readable=!0,Stream.call(this)}function readableAddChunk(stream,state,chunk,encoding,addToFront){var er=function(state,chunk){var er=null;util.isBuffer(chunk)||util.isString(chunk)||util.isNullOrUndefined(chunk)||state.objectMode||(er=new TypeError("Invalid non-string/buffer chunk"));return er}(state,chunk);if(er)stream.emit("error",er);else if(util.isNullOrUndefined(chunk))state.reading=!1,state.ended||function(stream,state){if(state.decoder&&!state.ended){var chunk=state.decoder.end();chunk&&chunk.length&&(state.buffer.push(chunk),state.length+=state.objectMode?1:chunk.length)}state.ended=!0,emitReadable(stream)}(stream,state);else if(state.objectMode||chunk&&chunk.length>0)if(state.ended&&!addToFront){var e=new Error("stream.push() after EOF");stream.emit("error",e)}else if(state.endEmitted&&addToFront){e=new Error("stream.unshift() after end event");stream.emit("error",e)}else!state.decoder||addToFront||encoding||(chunk=state.decoder.write(chunk)),addToFront||(state.reading=!1),state.flowing&&0===state.length&&!state.sync?(stream.emit("data",chunk),stream.read(0)):(state.length+=state.objectMode?1:chunk.length,addToFront?state.buffer.unshift(chunk):state.buffer.push(chunk),state.needReadable&&emitReadable(stream)),function(stream,state){state.readingMore||(state.readingMore=!0,process.nextTick((function(){!function(stream,state){var len=state.length;for(;!state.reading&&!state.flowing&&!state.ended&&state.length<state.highWaterMark&&(debug("maybeReadMore read 0"),stream.read(0),len!==state.length);)len=state.length;state.readingMore=!1}(stream,state)})))}(stream,state);else addToFront||(state.reading=!1);return function(state){return!state.ended&&(state.needReadable||state.length<state.highWaterMark||0===state.length)}(state)}debug=debug&&debug.debuglog?debug.debuglog("stream"):function(){},util.inherits(Readable,Stream),Readable.prototype.push=function(chunk,encoding){var state=this._readableState;return util.isString(chunk)&&!state.objectMode&&(encoding=encoding||state.defaultEncoding)!==state.encoding&&(chunk=new Buffer(chunk,encoding),encoding=""),readableAddChunk(this,state,chunk,encoding,!1)},Readable.prototype.unshift=function(chunk){return readableAddChunk(this,this._readableState,chunk,"",!0)},Readable.prototype.setEncoding=function(enc){return StringDecoder||(StringDecoder=__webpack_require__(68).StringDecoder),this._readableState.decoder=new StringDecoder(enc),this._readableState.encoding=enc,this};function howMuchToRead(n,state){return 0===state.length&&state.ended?0:state.objectMode?0===n?0:1:isNaN(n)||util.isNull(n)?state.flowing&&state.buffer.length?state.buffer[0].length:state.length:n<=0?0:(n>state.highWaterMark&&(state.highWaterMark=function(n){if(n>=8388608)n=8388608;else{n--;for(var p=1;p<32;p<<=1)n|=n>>p;n++}return n}(n)),n>state.length?state.ended?state.length:(state.needReadable=!0,0):n)}function emitReadable(stream){var state=stream._readableState;state.needReadable=!1,state.emittedReadable||(debug("emitReadable",state.flowing),state.emittedReadable=!0,state.sync?process.nextTick((function(){emitReadable_(stream)})):emitReadable_(stream))}function emitReadable_(stream){debug("emit readable"),stream.emit("readable"),flow(stream)}function flow(stream){var state=stream._readableState;if(debug("flow",state.flowing),state.flowing)do{var chunk=stream.read()}while(null!==chunk&&state.flowing)}function fromList(n,state){var ret,list=state.buffer,length=state.length,stringMode=!!state.decoder,objectMode=!!state.objectMode;if(0===list.length)return null;if(0===length)ret=null;else if(objectMode)ret=list.shift();else if(!n||n>=length)ret=stringMode?list.join(""):Buffer.concat(list,length),list.length=0;else{if(n<list[0].length)ret=(buf=list[0]).slice(0,n),list[0]=buf.slice(n);else if(n===list[0].length)ret=list.shift();else{ret=stringMode?"":new Buffer(n);for(var c=0,i=0,l=list.length;i<l&&c<n;i++){var buf=list[0],cpy=Math.min(n-c,buf.length);stringMode?ret+=buf.slice(0,cpy):buf.copy(ret,c,0,cpy),cpy<buf.length?list[0]=buf.slice(cpy):list.shift(),c+=cpy}}}return ret}function endReadable(stream){var state=stream._readableState;if(state.length>0)throw new Error("endReadable called on non-empty stream");state.endEmitted||(state.ended=!0,process.nextTick((function(){state.endEmitted||0!==state.length||(state.endEmitted=!0,stream.readable=!1,stream.emit("end"))})))}Readable.prototype.read=function(n){debug("read",n);var state=this._readableState,nOrig=n;if((!util.isNumber(n)||n>0)&&(state.emittedReadable=!1),0===n&&state.needReadable&&(state.length>=state.highWaterMark||state.ended))return debug("read: emitReadable",state.length,state.ended),0===state.length&&state.ended?endReadable(this):emitReadable(this),null;if(0===(n=howMuchToRead(n,state))&&state.ended)return 0===state.length&&endReadable(this),null;var ret,doRead=state.needReadable;return debug("need readable",doRead),(0===state.length||state.length-n<state.highWaterMark)&&debug("length less than watermark",doRead=!0),(state.ended||state.reading)&&debug("reading or ended",doRead=!1),doRead&&(debug("do read"),state.reading=!0,state.sync=!0,0===state.length&&(state.needReadable=!0),this._read(state.highWaterMark),state.sync=!1),doRead&&!state.reading&&(n=howMuchToRead(nOrig,state)),ret=n>0?fromList(n,state):null,util.isNull(ret)&&(state.needReadable=!0,n=0),state.length-=n,0!==state.length||state.ended||(state.needReadable=!0),nOrig!==n&&state.ended&&0===state.length&&endReadable(this),util.isNull(ret)||this.emit("data",ret),ret},Readable.prototype._read=function(n){this.emit("error",new Error("not implemented"))},Readable.prototype.pipe=function(dest,pipeOpts){var src=this,state=this._readableState;switch(state.pipesCount){case 0:state.pipes=dest;break;case 1:state.pipes=[state.pipes,dest];break;default:state.pipes.push(dest)}state.pipesCount+=1,debug("pipe count=%d opts=%j",state.pipesCount,pipeOpts);var endFn=(!pipeOpts||!1!==pipeOpts.end)&&dest!==process.stdout&&dest!==process.stderr?onend:cleanup;function onunpipe(readable){debug("onunpipe"),readable===src&&cleanup()}function onend(){debug("onend"),dest.end()}state.endEmitted?process.nextTick(endFn):src.once("end",endFn),dest.on("unpipe",onunpipe);var ondrain=function(src){return function(){var state=src._readableState;debug("pipeOnDrain",state.awaitDrain),state.awaitDrain&&state.awaitDrain--,0===state.awaitDrain&&EE.listenerCount(src,"data")&&(state.flowing=!0,flow(src))}}(src);function cleanup(){debug("cleanup"),dest.removeListener("close",onclose),dest.removeListener("finish",onfinish),dest.removeListener("drain",ondrain),dest.removeListener("error",onerror),dest.removeListener("unpipe",onunpipe),src.removeListener("end",onend),src.removeListener("end",cleanup),src.removeListener("data",ondata),!state.awaitDrain||dest._writableState&&!dest._writableState.needDrain||ondrain()}function ondata(chunk){debug("ondata"),!1===dest.write(chunk)&&(debug("false write response, pause",src._readableState.awaitDrain),src._readableState.awaitDrain++,src.pause())}function onerror(er){debug("onerror",er),unpipe(),dest.removeListener("error",onerror),0===EE.listenerCount(dest,"error")&&dest.emit("error",er)}function onclose(){dest.removeListener("finish",onfinish),unpipe()}function onfinish(){debug("onfinish"),dest.removeListener("close",onclose),unpipe()}function unpipe(){debug("unpipe"),src.unpipe(dest)}return dest.on("drain",ondrain),src.on("data",ondata),dest._events&&dest._events.error?isArray(dest._events.error)?dest._events.error.unshift(onerror):dest._events.error=[onerror,dest._events.error]:dest.on("error",onerror),dest.once("close",onclose),dest.once("finish",onfinish),dest.emit("pipe",src),state.flowing||(debug("pipe resume"),src.resume()),dest},Readable.prototype.unpipe=function(dest){var state=this._readableState;if(0===state.pipesCount)return this;if(1===state.pipesCount)return dest&&dest!==state.pipes||(dest||(dest=state.pipes),state.pipes=null,state.pipesCount=0,state.flowing=!1,dest&&dest.emit("unpipe",this)),this;if(!dest){var dests=state.pipes,len=state.pipesCount;state.pipes=null,state.pipesCount=0,state.flowing=!1;for(var i=0;i<len;i++)dests[i].emit("unpipe",this);return this}return-1===(i=function(xs,x){for(var i=0,l=xs.length;i<l;i++)if(xs[i]===x)return i;return-1}(state.pipes,dest))||(state.pipes.splice(i,1),state.pipesCount-=1,1===state.pipesCount&&(state.pipes=state.pipes[0]),dest.emit("unpipe",this)),this},Readable.prototype.on=function(ev,fn){var res=Stream.prototype.on.call(this,ev,fn);if("data"===ev&&!1!==this._readableState.flowing&&this.resume(),"readable"===ev&&this.readable){var state=this._readableState;if(!state.readableListening)if(state.readableListening=!0,state.emittedReadable=!1,state.needReadable=!0,state.reading)state.length&&emitReadable(this);else{var self=this;process.nextTick((function(){debug("readable nexttick read 0"),self.read(0)}))}}return res},Readable.prototype.addListener=Readable.prototype.on,Readable.prototype.resume=function(){var state=this._readableState;return state.flowing||(debug("resume"),state.flowing=!0,state.reading||(debug("resume read 0"),this.read(0)),function(stream,state){state.resumeScheduled||(state.resumeScheduled=!0,process.nextTick((function(){!function(stream,state){state.resumeScheduled=!1,stream.emit("resume"),flow(stream),state.flowing&&!state.reading&&stream.read(0)}(stream,state)})))}(this,state)),this},Readable.prototype.pause=function(){return debug("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(debug("pause"),this._readableState.flowing=!1,this.emit("pause")),this},Readable.prototype.wrap=function(stream){var state=this._readableState,paused=!1,self=this;for(var i in stream.on("end",(function(){if(debug("wrapped end"),state.decoder&&!state.ended){var chunk=state.decoder.end();chunk&&chunk.length&&self.push(chunk)}self.push(null)})),stream.on("data",(function(chunk){(debug("wrapped data"),state.decoder&&(chunk=state.decoder.write(chunk)),chunk&&(state.objectMode||chunk.length))&&(self.push(chunk)||(paused=!0,stream.pause()))})),stream)util.isFunction(stream[i])&&util.isUndefined(this[i])&&(this[i]=function(method){return function(){return stream[method].apply(stream,arguments)}}(i));return function(xs,f){for(var i=0,l=xs.length;i<l;i++)f(xs[i],i)}(["error","close","destroy","pause","resume"],(function(ev){stream.on(ev,self.emit.bind(self,ev))})),self._read=function(n){debug("wrapped _read",n),paused&&(paused=!1,stream.resume())},self},Readable._fromList=fromList},function(module,exports){module.exports=Array.isArray||function(arr){return"[object Array]"==Object.prototype.toString.call(arr)}},function(module,exports,__webpack_require__){module.exports=Writable;var Buffer=__webpack_require__(5).Buffer;Writable.WritableState=WritableState;var util=__webpack_require__(7);util.inherits=__webpack_require__(2);var Stream=__webpack_require__(6);function WriteReq(chunk,encoding,cb){this.chunk=chunk,this.encoding=encoding,this.callback=cb}function WritableState(options,stream){var Duplex=__webpack_require__(18),hwm=(options=options||{}).highWaterMark,defaultHwm=options.objectMode?16:16384;this.highWaterMark=hwm||0===hwm?hwm:defaultHwm,this.objectMode=!!options.objectMode,stream instanceof Duplex&&(this.objectMode=this.objectMode||!!options.writableObjectMode),this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var noDecode=!1===options.decodeStrings;this.decodeStrings=!noDecode,this.defaultEncoding=options.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(er){!function(stream,er){var state=stream._writableState,sync=state.sync,cb=state.writecb;if(function(state){state.writing=!1,state.writecb=null,state.length-=state.writelen,state.writelen=0}(state),er)!function(stream,state,sync,er,cb){sync?process.nextTick((function(){state.pendingcb--,cb(er)})):(state.pendingcb--,cb(er));stream._writableState.errorEmitted=!0,stream.emit("error",er)}(stream,state,sync,er,cb);else{var finished=needFinish(stream,state);finished||state.corked||state.bufferProcessing||!state.buffer.length||clearBuffer(stream,state),sync?process.nextTick((function(){afterWrite(stream,state,finished,cb)})):afterWrite(stream,state,finished,cb)}}(stream,er)},this.writecb=null,this.writelen=0,this.buffer=[],this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1}function Writable(options){var Duplex=__webpack_require__(18);if(!(this instanceof Writable||this instanceof Duplex))return new Writable(options);this._writableState=new WritableState(options,this),this.writable=!0,Stream.call(this)}function doWrite(stream,state,writev,len,chunk,encoding,cb){state.writelen=len,state.writecb=cb,state.writing=!0,state.sync=!0,writev?stream._writev(chunk,state.onwrite):stream._write(chunk,encoding,state.onwrite),state.sync=!1}function afterWrite(stream,state,finished,cb){finished||function(stream,state){0===state.length&&state.needDrain&&(state.needDrain=!1,stream.emit("drain"))}(stream,state),state.pendingcb--,cb(),finishMaybe(stream,state)}function clearBuffer(stream,state){if(state.bufferProcessing=!0,stream._writev&&state.buffer.length>1){for(var cbs=[],c=0;c<state.buffer.length;c++)cbs.push(state.buffer[c].callback);state.pendingcb++,doWrite(stream,state,!0,state.length,state.buffer,"",(function(err){for(var i=0;i<cbs.length;i++)state.pendingcb--,cbs[i](err)})),state.buffer=[]}else{for(c=0;c<state.buffer.length;c++){var entry=state.buffer[c],chunk=entry.chunk,encoding=entry.encoding,cb=entry.callback,len=state.objectMode?1:chunk.length;if(doWrite(stream,state,!1,len,chunk,encoding,cb),state.writing){c++;break}}c<state.buffer.length?state.buffer=state.buffer.slice(c):state.buffer.length=0}state.bufferProcessing=!1}function needFinish(stream,state){return state.ending&&0===state.length&&!state.finished&&!state.writing}function prefinish(stream,state){state.prefinished||(state.prefinished=!0,stream.emit("prefinish"))}function finishMaybe(stream,state){var need=needFinish(0,state);return need&&(0===state.pendingcb?(prefinish(stream,state),state.finished=!0,stream.emit("finish")):prefinish(stream,state)),need}util.inherits(Writable,Stream),Writable.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},Writable.prototype.write=function(chunk,encoding,cb){var state=this._writableState,ret=!1;return util.isFunction(encoding)&&(cb=encoding,encoding=null),util.isBuffer(chunk)?encoding="buffer":encoding||(encoding=state.defaultEncoding),util.isFunction(cb)||(cb=function(){}),state.ended?function(stream,state,cb){var er=new Error("write after end");stream.emit("error",er),process.nextTick((function(){cb(er)}))}(this,0,cb):function(stream,state,chunk,cb){var valid=!0;if(!(util.isBuffer(chunk)||util.isString(chunk)||util.isNullOrUndefined(chunk)||state.objectMode)){var er=new TypeError("Invalid non-string/buffer chunk");stream.emit("error",er),process.nextTick((function(){cb(er)})),valid=!1}return valid}(this,state,chunk,cb)&&(state.pendingcb++,ret=function(stream,state,chunk,encoding,cb){chunk=function(state,chunk,encoding){!state.objectMode&&!1!==state.decodeStrings&&util.isString(chunk)&&(chunk=new Buffer(chunk,encoding));return chunk}(state,chunk,encoding),util.isBuffer(chunk)&&(encoding="buffer");var len=state.objectMode?1:chunk.length;state.length+=len;var ret=state.length<state.highWaterMark;ret||(state.needDrain=!0);state.writing||state.corked?state.buffer.push(new WriteReq(chunk,encoding,cb)):doWrite(stream,state,!1,len,chunk,encoding,cb);return ret}(this,state,chunk,encoding,cb)),ret},Writable.prototype.cork=function(){this._writableState.corked++},Writable.prototype.uncork=function(){var state=this._writableState;state.corked&&(state.corked--,state.writing||state.corked||state.finished||state.bufferProcessing||!state.buffer.length||clearBuffer(this,state))},Writable.prototype._write=function(chunk,encoding,cb){cb(new Error("not implemented"))},Writable.prototype._writev=null,Writable.prototype.end=function(chunk,encoding,cb){var state=this._writableState;util.isFunction(chunk)?(cb=chunk,chunk=null,encoding=null):util.isFunction(encoding)&&(cb=encoding,encoding=null),util.isNullOrUndefined(chunk)||this.write(chunk,encoding),state.corked&&(state.corked=1,this.uncork()),state.ending||state.finished||function(stream,state,cb){state.ending=!0,finishMaybe(stream,state),cb&&(state.finished?process.nextTick(cb):stream.once("finish",cb));state.ended=!0}(this,state,cb)}},function(module,exports,__webpack_require__){"use strict";var inherits=__webpack_require__(0).inherits,EventEmitter=__webpack_require__(4).EventEmitter;function Heart(interval,checkSend,checkRecv){EventEmitter.call(this),this.interval=interval;var intervalMs=interval*module.exports.UNITS_TO_MS,beat=this.emit.bind(this,"beat"),timeout=this.emit.bind(this,"timeout");this.sendTimer=setInterval(this.runHeartbeat.bind(this,checkSend,beat),intervalMs/2);var recvMissed=0;this.recvTimer=setInterval(this.runHeartbeat.bind(this,(function(){return checkRecv()?(recvMissed=0,!0):++recvMissed<2}),timeout),intervalMs)}module.exports.UNITS_TO_MS=1e3,inherits(Heart,EventEmitter),module.exports.Heart=Heart,Heart.prototype.clear=function(){clearInterval(this.sendTimer),clearInterval(this.recvTimer)},Heart.prototype.runHeartbeat=function(check,fail){check()||fail()}},function(module,exports,__webpack_require__){"use strict";function BitSet(size){if(size){var numWords=Math.ceil(size/32);this.words=new Array(numWords)}else this.words=[];this.wordsInUse=0}var P=BitSet.prototype;function wordIndex(bitIndex){return Math.floor(bitIndex/32)}function trailingZeros(i){if(0===i)return 32;var y,n=31;return 0!=(y=i<<16)&&(n-=16,i=y),0!=(y=i<<8)&&(n-=8,i=y),0!=(y=i<<4)&&(n-=4,i=y),0!=(y=i<<2)&&(n-=2,i=y),n-(i<<1>>>31)}P.ensureSize=function(numWords){var wordsPresent=this.words.length;wordsPresent<numWords&&(this.words=this.words.concat(new Array(numWords-wordsPresent)))},P.set=function(bitIndex){var w=wordIndex(bitIndex);w>=this.wordsInUse&&(this.ensureSize(w+1),this.wordsInUse=w+1);var bit=1<<bitIndex;this.words[w]|=bit},P.clear=function(bitIndex){var w=wordIndex(bitIndex);if(!(w>=this.wordsInUse)){var mask=~(1<<bitIndex);this.words[w]&=mask}},P.get=function(bitIndex){var w=wordIndex(bitIndex);if(w>=this.wordsInUse)return!1;var bit=1<<bitIndex;return!!(this.words[w]&bit)},P.nextSetBit=function(fromIndex){var w=wordIndex(fromIndex);if(w>=this.wordsInUse)return-1;for(var word=this.words[w]&4294967295<<fromIndex;;){if(word)return 32*w+trailingZeros(word);if(++w===this.wordsInUse)return-1;word=this.words[w]}},P.nextClearBit=function(fromIndex){var w=wordIndex(fromIndex);if(w>=this.wordsInUse)return fromIndex;for(var word=~this.words[w]&4294967295<<fromIndex;;){if(word)return 32*w+trailingZeros(word);if(++w==this.wordsInUse)return 32*w;word=~this.words[w]}},module.exports.BitSet=BitSet},function(module,exports,__webpack_require__){module.exports=__webpack_require__(152)},function(module,exports,__webpack_require__){module.exports=PassThrough;var Transform=__webpack_require__(153),util=__webpack_require__(7);function PassThrough(options){if(!(this instanceof PassThrough))return new PassThrough(options);Transform.call(this,options)}util.inherits=__webpack_require__(2),util.inherits(PassThrough,Transform),PassThrough.prototype._transform=function(chunk,encoding,cb){cb(null,chunk)}},function(module,exports,__webpack_require__){module.exports=Transform;var Duplex=__webpack_require__(18),util=__webpack_require__(7);function TransformState(options,stream){this.afterTransform=function(er,data){return function(stream,er,data){var ts=stream._transformState;ts.transforming=!1;var cb=ts.writecb;if(!cb)return stream.emit("error",new Error("no writecb in Transform class"));ts.writechunk=null,ts.writecb=null,util.isNullOrUndefined(data)||stream.push(data);cb&&cb(er);var rs=stream._readableState;rs.reading=!1,(rs.needReadable||rs.length<rs.highWaterMark)&&stream._read(rs.highWaterMark)}(stream,er,data)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function Transform(options){if(!(this instanceof Transform))return new Transform(options);Duplex.call(this,options),this._transformState=new TransformState(options,this);var stream=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("prefinish",(function(){util.isFunction(this._flush)?this._flush((function(er){done(stream,er)})):done(stream)}))}function done(stream,er){if(er)return stream.emit("error",er);var ws=stream._writableState,ts=stream._transformState;if(ws.length)throw new Error("calling transform done when ws.length != 0");if(ts.transforming)throw new Error("calling transform done when still transforming");return stream.push(null)}util.inherits=__webpack_require__(2),util.inherits(Transform,Duplex),Transform.prototype.push=function(chunk,encoding){return this._transformState.needTransform=!1,Duplex.prototype.push.call(this,chunk,encoding)},Transform.prototype._transform=function(chunk,encoding,cb){throw new Error("not implemented")},Transform.prototype._write=function(chunk,encoding,cb){var ts=this._transformState;if(ts.writecb=cb,ts.writechunk=chunk,ts.writeencoding=encoding,!ts.transforming){var rs=this._readableState;(ts.needTransform||rs.needReadable||rs.length<rs.highWaterMark)&&this._read(rs.highWaterMark)}},Transform.prototype._read=function(n){var ts=this._transformState;util.isNull(ts.writechunk)||!ts.writecb||ts.transforming?ts.needTransform=!0:(ts.transforming=!0,this._transform(ts.writechunk,ts.writeencoding,ts.afterTransform))}},function(module){module.exports=JSON.parse('{"name":"amqplib","homepage":"http://squaremo.github.io/amqp.node/","main":"./channel_api.js","version":"0.6.0","description":"An AMQP 0-9-1 (e.g., RabbitMQ) library and client.","repository":{"type":"git","url":"https://github.com/squaremo/amqp.node.git"},"engines":{"node":">=0.8 <=14"},"dependencies":{"bitsyntax":"~0.1.0","bluebird":"^3.5.2","buffer-more-ints":"~1.0.0","readable-stream":"1.x >=1.1.9","safe-buffer":"~5.1.2","url-parse":"~1.4.3"},"devDependencies":{"claire":"0.4.1","istanbul":"0.1.x","mocha":"^3.5.3","uglify-js":"2.6.x"},"scripts":{"test":"make test","prepare":"make"},"keywords":["AMQP","AMQP 0-9-1","RabbitMQ"],"author":"Michael Bridgen <mikeb@squaremobius.net>","license":"MIT"}')},function(module,exports,__webpack_require__){"use strict";var defs=__webpack_require__(26),Promise=__webpack_require__(70),inherits=__webpack_require__(0).inherits,EventEmitter=__webpack_require__(4).EventEmitter,BaseChannel=__webpack_require__(74).BaseChannel,acceptMessage=__webpack_require__(74).acceptMessage,Args=__webpack_require__(186);function ChannelModel(connection){if(!(this instanceof ChannelModel))return new ChannelModel(connection);EventEmitter.call(this),this.connection=connection;var self=this;["error","close","blocked","unblocked"].forEach((function(ev){connection.on(ev,self.emit.bind(self,ev))}))}inherits(ChannelModel,EventEmitter),module.exports.ChannelModel=ChannelModel;var CM=ChannelModel.prototype;function Channel(connection){BaseChannel.call(this,connection),this.on("delivery",this.handleDelivery.bind(this)),this.on("cancel",this.handleCancel.bind(this))}CM.close=function(){return Promise.fromCallback(this.connection.close.bind(this.connection))},inherits(Channel,BaseChannel),module.exports.Channel=Channel,CM.createChannel=function(){var c=new Channel(this.connection);return c.open().then((function(openOk){return c}))};var C=Channel.prototype;function ConfirmChannel(connection){Channel.call(this,connection)}C.rpc=function(method,fields,expect){var self=this;return Promise.fromCallback((function(cb){return self._rpc(method,fields,expect,cb)})).then((function(f){return f.fields}))},C.open=function(){return Promise.try(this.allocate.bind(this)).then((function(ch){return ch.rpc(defs.ChannelOpen,{outOfBand:""},defs.ChannelOpenOk)}))},C.close=function(){var self=this;return Promise.fromCallback((function(cb){return self.closeBecause("Goodbye",defs.constants.REPLY_SUCCESS,cb)}))},C.assertQueue=function(queue,options){return this.rpc(defs.QueueDeclare,Args.assertQueue(queue,options),defs.QueueDeclareOk)},C.checkQueue=function(queue){return this.rpc(defs.QueueDeclare,Args.checkQueue(queue),defs.QueueDeclareOk)},C.deleteQueue=function(queue,options){return this.rpc(defs.QueueDelete,Args.deleteQueue(queue,options),defs.QueueDeleteOk)},C.purgeQueue=function(queue){return this.rpc(defs.QueuePurge,Args.purgeQueue(queue),defs.QueuePurgeOk)},C.bindQueue=function(queue,source,pattern,argt){return this.rpc(defs.QueueBind,Args.bindQueue(queue,source,pattern,argt),defs.QueueBindOk)},C.unbindQueue=function(queue,source,pattern,argt){return this.rpc(defs.QueueUnbind,Args.unbindQueue(queue,source,pattern,argt),defs.QueueUnbindOk)},C.assertExchange=function(exchange,type,options){return this.rpc(defs.ExchangeDeclare,Args.assertExchange(exchange,type,options),defs.ExchangeDeclareOk).then((function(_ok){return{exchange:exchange}}))},C.checkExchange=function(exchange){return this.rpc(defs.ExchangeDeclare,Args.checkExchange(exchange),defs.ExchangeDeclareOk)},C.deleteExchange=function(name,options){return this.rpc(defs.ExchangeDelete,Args.deleteExchange(name,options),defs.ExchangeDeleteOk)},C.bindExchange=function(dest,source,pattern,argt){return this.rpc(defs.ExchangeBind,Args.bindExchange(dest,source,pattern,argt),defs.ExchangeBindOk)},C.unbindExchange=function(dest,source,pattern,argt){return this.rpc(defs.ExchangeUnbind,Args.unbindExchange(dest,source,pattern,argt),defs.ExchangeUnbindOk)},C.publish=function(exchange,routingKey,content,options){var fieldsAndProps=Args.publish(exchange,routingKey,options);return this.sendMessage(fieldsAndProps,fieldsAndProps,content)},C.sendToQueue=function(queue,content,options){return this.publish("",queue,content,options)},C.consume=function(queue,callback,options){var self=this,fields=Args.consume(queue,options);return Promise.fromCallback((function(cb){self._rpc(defs.BasicConsume,fields,defs.BasicConsumeOk,cb)})).then((function(ok){return self.registerConsumer(ok.fields.consumerTag,callback),ok.fields}))},C.cancel=function(consumerTag){var self=this;return Promise.fromCallback((function(cb){self._rpc(defs.BasicCancel,Args.cancel(consumerTag),defs.BasicCancelOk,cb)})).then((function(ok){return self.unregisterConsumer(consumerTag),ok.fields}))},C.get=function(queue,options){var self=this,fields=Args.get(queue,options);return Promise.fromCallback((function(cb){return self.sendOrEnqueue(defs.BasicGet,fields,cb)})).then((function(f){if(f.id===defs.BasicGetEmpty)return!1;if(f.id===defs.BasicGetOk){var fields=f.fields;return new Promise((function(resolve){self.handleMessage=acceptMessage((function(m){m.fields=fields,resolve(m)}))}))}throw new Error("Unexpected response to BasicGet: "+inspect(f))}))},C.ack=function(message,allUpTo){this.sendImmediately(defs.BasicAck,Args.ack(message.fields.deliveryTag,allUpTo))},C.ackAll=function(){this.sendImmediately(defs.BasicAck,Args.ack(0,!0))},C.nack=function(message,allUpTo,requeue){this.sendImmediately(defs.BasicNack,Args.nack(message.fields.deliveryTag,allUpTo,requeue))},C.nackAll=function(requeue){this.sendImmediately(defs.BasicNack,Args.nack(0,!0,requeue))},C.reject=function(message,requeue){this.sendImmediately(defs.BasicReject,Args.reject(message.fields.deliveryTag,requeue))},C.prefetch=C.qos=function(count,global){return this.rpc(defs.BasicQos,Args.prefetch(count,global),defs.BasicQosOk)},C.recover=function(){return this.rpc(defs.BasicRecover,Args.recover(),defs.BasicRecoverOk)},inherits(ConfirmChannel,Channel),module.exports.ConfirmChannel=ConfirmChannel,CM.createConfirmChannel=function(){var c=new ConfirmChannel(this.connection);return c.open().then((function(openOk){return c.rpc(defs.ConfirmSelect,{nowait:!1},defs.ConfirmSelectOk)})).then((function(){return c}))};var CC=ConfirmChannel.prototype;CC.publish=function(exchange,routingKey,content,options,cb){return this.pushConfirmCallback(cb),C.publish.call(this,exchange,routingKey,content,options)},CC.sendToQueue=function(queue,content,options,cb){return this.publish("",queue,content,options,cb)},CC.waitForConfirms=function(){var awaiting=[],unconfirmed=this.unconfirmed;return unconfirmed.forEach((function(val,index){if(null===val);else{var confirmed=new Promise((function(resolve,reject){unconfirmed[index]=function(err){val&&val(err),null===err?resolve():reject(err)}}));awaiting.push(confirmed)}})),Promise.all(awaiting)}},function(module,exports,__webpack_require__){"use strict";module.exports=function(){var makeSelfResolutionError=function(){return new TypeError("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},reflectHandler=function(){return new Promise.PromiseInspection(this._target())},apiRejection=function(msg){return Promise.reject(new TypeError(msg))};function Proxyable(){}var UNDEFINED_BINDING={},util=__webpack_require__(1);util.setReflectHandler(reflectHandler);var getDomain=function(){var domain=process.domain;return void 0===domain?null:domain},getContextDomain=function(){return{domain:getDomain(),async:null}},AsyncResource=util.isNode&&util.nodeSupportsAsyncResource?__webpack_require__(71).AsyncResource:null,getContextAsyncHooks=function(){return{domain:getDomain(),async:new AsyncResource("Bluebird::Promise")}},getContext=util.isNode?getContextDomain:function(){return null};util.notEnumerableProp(Promise,"_getContext",getContext);var es5=__webpack_require__(15),Async=__webpack_require__(157),async=new Async;es5.defineProperty(Promise,"_async",{value:async});var errors=__webpack_require__(12),TypeError=Promise.TypeError=errors.TypeError;Promise.RangeError=errors.RangeError;var CancellationError=Promise.CancellationError=errors.CancellationError;Promise.TimeoutError=errors.TimeoutError,Promise.OperationalError=errors.OperationalError,Promise.RejectionError=errors.OperationalError,Promise.AggregateError=errors.AggregateError;var INTERNAL=function(){},APPLY={},NEXT_FILTER={},tryConvertToPromise=__webpack_require__(160)(Promise,INTERNAL),PromiseArray=__webpack_require__(161)(Promise,INTERNAL,tryConvertToPromise,apiRejection,Proxyable),Context=__webpack_require__(162)(Promise),createContext=Context.create,debug=__webpack_require__(163)(Promise,Context,(function(){getContext=getContextAsyncHooks,util.notEnumerableProp(Promise,"_getContext",getContextAsyncHooks)}),(function(){getContext=getContextDomain,util.notEnumerableProp(Promise,"_getContext",getContextDomain)})),PassThroughHandlerContext=(debug.CapturedTrace,__webpack_require__(164)(Promise,tryConvertToPromise,NEXT_FILTER)),catchFilter=__webpack_require__(72)(NEXT_FILTER),nodebackForPromise=__webpack_require__(73),errorObj=util.errorObj,tryCatch=util.tryCatch;function Promise(executor){executor!==INTERNAL&&function(self,executor){if(null==self||self.constructor!==Promise)throw new TypeError("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!=typeof executor)throw new TypeError("expecting a function but got "+util.classString(executor))}(this,executor),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(executor),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function deferResolve(v){this.promise._resolveCallback(v)}function deferReject(v){this.promise._rejectCallback(v,!1)}function fillTypes(value){var p=new Promise(INTERNAL);p._fulfillmentHandler0=value,p._rejectionHandler0=value,p._promise0=value,p._receiver0=value}return Promise.prototype.toString=function(){return"[object Promise]"},Promise.prototype.caught=Promise.prototype.catch=function(fn){var len=arguments.length;if(len>1){var i,catchInstances=new Array(len-1),j=0;for(i=0;i<len-1;++i){var item=arguments[i];if(!util.isObject(item))return apiRejection("Catch statement predicate: expecting an object but got "+util.classString(item));catchInstances[j++]=item}if(catchInstances.length=j,"function"!=typeof(fn=arguments[i]))throw new TypeError("The last argument to .catch() must be a function, got "+util.toString(fn));return this.then(void 0,catchFilter(catchInstances,fn,this))}return this.then(void 0,fn)},Promise.prototype.reflect=function(){return this._then(reflectHandler,reflectHandler,void 0,this,void 0)},Promise.prototype.then=function(didFulfill,didReject){if(debug.warnings()&&arguments.length>0&&"function"!=typeof didFulfill&&"function"!=typeof didReject){var msg=".then() only accepts functions but was passed: "+util.classString(didFulfill);arguments.length>1&&(msg+=", "+util.classString(didReject)),this._warn(msg)}return this._then(didFulfill,didReject,void 0,void 0,void 0)},Promise.prototype.done=function(didFulfill,didReject){this._then(didFulfill,didReject,void 0,void 0,void 0)._setIsFinal()},Promise.prototype.spread=function(fn){return"function"!=typeof fn?apiRejection("expecting a function but got "+util.classString(fn)):this.all()._then(fn,void 0,void 0,APPLY,void 0)},Promise.prototype.toJSON=function(){var ret={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(ret.fulfillmentValue=this.value(),ret.isFulfilled=!0):this.isRejected()&&(ret.rejectionReason=this.reason(),ret.isRejected=!0),ret},Promise.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new PromiseArray(this).promise()},Promise.prototype.error=function(fn){return this.caught(util.originatesFromRejection,fn)},Promise.getNewLibraryCopy=module.exports,Promise.is=function(val){return val instanceof Promise},Promise.fromNode=Promise.fromCallback=function(fn){var ret=new Promise(INTERNAL);ret._captureStackTrace();var multiArgs=arguments.length>1&&!!Object(arguments[1]).multiArgs,result=tryCatch(fn)(nodebackForPromise(ret,multiArgs));return result===errorObj&&ret._rejectCallback(result.e,!0),ret._isFateSealed()||ret._setAsyncGuaranteed(),ret},Promise.all=function(promises){return new PromiseArray(promises).promise()},Promise.cast=function(obj){var ret=tryConvertToPromise(obj);return ret instanceof Promise||((ret=new Promise(INTERNAL))._captureStackTrace(),ret._setFulfilled(),ret._rejectionHandler0=obj),ret},Promise.resolve=Promise.fulfilled=Promise.cast,Promise.reject=Promise.rejected=function(reason){var ret=new Promise(INTERNAL);return ret._captureStackTrace(),ret._rejectCallback(reason,!0),ret},Promise.setScheduler=function(fn){if("function"!=typeof fn)throw new TypeError("expecting a function but got "+util.classString(fn));return async.setScheduler(fn)},Promise.prototype._then=function(didFulfill,didReject,_,receiver,internalData){var haveInternalData=void 0!==internalData,promise=haveInternalData?internalData:new Promise(INTERNAL),target=this._target(),bitField=target._bitField;haveInternalData||(promise._propagateFrom(this,3),promise._captureStackTrace(),void 0===receiver&&0!=(2097152&this._bitField)&&(receiver=0!=(50397184&bitField)?this._boundValue():target===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,promise));var context=getContext();if(0!=(50397184&bitField)){var handler,value,settler=target._settlePromiseCtx;0!=(33554432&bitField)?(value=target._rejectionHandler0,handler=didFulfill):0!=(16777216&bitField)?(value=target._fulfillmentHandler0,handler=didReject,target._unsetRejectionIsUnhandled()):(settler=target._settlePromiseLateCancellationObserver,value=new CancellationError("late cancellation observer"),target._attachExtraTrace(value),handler=didReject),async.invoke(settler,target,{handler:util.contextBind(context,handler),promise:promise,receiver:receiver,value:value})}else target._addCallbacks(didFulfill,didReject,promise,receiver,context);return promise},Promise.prototype._length=function(){return 65535&this._bitField},Promise.prototype._isFateSealed=function(){return 0!=(117506048&this._bitField)},Promise.prototype._isFollowing=function(){return 67108864==(67108864&this._bitField)},Promise.prototype._setLength=function(len){this._bitField=-65536&this._bitField|65535&len},Promise.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},Promise.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},Promise.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},Promise.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},Promise.prototype._isFinal=function(){return(4194304&this._bitField)>0},Promise.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},Promise.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},Promise.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},Promise.prototype._setAsyncGuaranteed=function(){if(!async.hasCustomScheduler()){var bitField=this._bitField;this._bitField=bitField|(536870912&bitField)>>2^134217728}},Promise.prototype._setNoAsyncGuarantee=function(){this._bitField=-134217729&(536870912|this._bitField)},Promise.prototype._receiverAt=function(index){var ret=0===index?this._receiver0:this[4*index-4+3];if(ret!==UNDEFINED_BINDING)return void 0===ret&&this._isBound()?this._boundValue():ret},Promise.prototype._promiseAt=function(index){return this[4*index-4+2]},Promise.prototype._fulfillmentHandlerAt=function(index){return this[4*index-4+0]},Promise.prototype._rejectionHandlerAt=function(index){return this[4*index-4+1]},Promise.prototype._boundValue=function(){},Promise.prototype._migrateCallback0=function(follower){follower._bitField;var fulfill=follower._fulfillmentHandler0,reject=follower._rejectionHandler0,promise=follower._promise0,receiver=follower._receiverAt(0);void 0===receiver&&(receiver=UNDEFINED_BINDING),this._addCallbacks(fulfill,reject,promise,receiver,null)},Promise.prototype._migrateCallbackAt=function(follower,index){var fulfill=follower._fulfillmentHandlerAt(index),reject=follower._rejectionHandlerAt(index),promise=follower._promiseAt(index),receiver=follower._receiverAt(index);void 0===receiver&&(receiver=UNDEFINED_BINDING),this._addCallbacks(fulfill,reject,promise,receiver,null)},Promise.prototype._addCallbacks=function(fulfill,reject,promise,receiver,context){var index=this._length();if(index>=65531&&(index=0,this._setLength(0)),0===index)this._promise0=promise,this._receiver0=receiver,"function"==typeof fulfill&&(this._fulfillmentHandler0=util.contextBind(context,fulfill)),"function"==typeof reject&&(this._rejectionHandler0=util.contextBind(context,reject));else{var base=4*index-4;this[base+2]=promise,this[base+3]=receiver,"function"==typeof fulfill&&(this[base+0]=util.contextBind(context,fulfill)),"function"==typeof reject&&(this[base+1]=util.contextBind(context,reject))}return this._setLength(index+1),index},Promise.prototype._proxy=function(proxyable,arg){this._addCallbacks(void 0,void 0,arg,proxyable,null)},Promise.prototype._resolveCallback=function(value,shouldBind){if(0==(117506048&this._bitField)){if(value===this)return this._rejectCallback(makeSelfResolutionError(),!1);var maybePromise=tryConvertToPromise(value,this);if(!(maybePromise instanceof Promise))return this._fulfill(value);shouldBind&&this._propagateFrom(maybePromise,2);var promise=maybePromise._target();if(promise!==this){var bitField=promise._bitField;if(0==(50397184&bitField)){var len=this._length();len>0&&promise._migrateCallback0(this);for(var i=1;i<len;++i)promise._migrateCallbackAt(this,i);this._setFollowing(),this._setLength(0),this._setFollowee(maybePromise)}else if(0!=(33554432&bitField))this._fulfill(promise._value());else if(0!=(16777216&bitField))this._reject(promise._reason());else{var reason=new CancellationError("late cancellation observer");promise._attachExtraTrace(reason),this._reject(reason)}}else this._reject(makeSelfResolutionError())}},Promise.prototype._rejectCallback=function(reason,synchronous,ignoreNonErrorWarnings){var trace=util.ensureErrorObject(reason),hasStack=trace===reason;if(!hasStack&&!ignoreNonErrorWarnings&&debug.warnings()){var message="a promise was rejected with a non-error: "+util.classString(reason);this._warn(message,!0)}this._attachExtraTrace(trace,!!synchronous&&hasStack),this._reject(reason)},Promise.prototype._resolveFromExecutor=function(executor){if(executor!==INTERNAL){var promise=this;this._captureStackTrace(),this._pushContext();var synchronous=!0,r=this._execute(executor,(function(value){promise._resolveCallback(value)}),(function(reason){promise._rejectCallback(reason,synchronous)}));synchronous=!1,this._popContext(),void 0!==r&&promise._rejectCallback(r,!0)}},Promise.prototype._settlePromiseFromHandler=function(handler,receiver,value,promise){var bitField=promise._bitField;if(0==(65536&bitField)){var x;promise._pushContext(),receiver===APPLY?value&&"number"==typeof value.length?x=tryCatch(handler).apply(this._boundValue(),value):(x=errorObj).e=new TypeError("cannot .spread() a non-array: "+util.classString(value)):x=tryCatch(handler).call(receiver,value);var promiseCreated=promise._popContext();0==(65536&(bitField=promise._bitField))&&(x===NEXT_FILTER?promise._reject(value):x===errorObj?promise._rejectCallback(x.e,!1):(debug.checkForgottenReturns(x,promiseCreated,"",promise,this),promise._resolveCallback(x)))}},Promise.prototype._target=function(){for(var ret=this;ret._isFollowing();)ret=ret._followee();return ret},Promise.prototype._followee=function(){return this._rejectionHandler0},Promise.prototype._setFollowee=function(promise){this._rejectionHandler0=promise},Promise.prototype._settlePromise=function(promise,handler,receiver,value){var isPromise=promise instanceof Promise,bitField=this._bitField,asyncGuaranteed=0!=(134217728&bitField);0!=(65536&bitField)?(isPromise&&promise._invokeInternalOnCancel(),receiver instanceof PassThroughHandlerContext&&receiver.isFinallyHandler()?(receiver.cancelPromise=promise,tryCatch(handler).call(receiver,value)===errorObj&&promise._reject(errorObj.e)):handler===reflectHandler?promise._fulfill(reflectHandler.call(receiver)):receiver instanceof Proxyable?receiver._promiseCancelled(promise):isPromise||promise instanceof PromiseArray?promise._cancel():receiver.cancel()):"function"==typeof handler?isPromise?(asyncGuaranteed&&promise._setAsyncGuaranteed(),this._settlePromiseFromHandler(handler,receiver,value,promise)):handler.call(receiver,value,promise):receiver instanceof Proxyable?receiver._isResolved()||(0!=(33554432&bitField)?receiver._promiseFulfilled(value,promise):receiver._promiseRejected(value,promise)):isPromise&&(asyncGuaranteed&&promise._setAsyncGuaranteed(),0!=(33554432&bitField)?promise._fulfill(value):promise._reject(value))},Promise.prototype._settlePromiseLateCancellationObserver=function(ctx){var handler=ctx.handler,promise=ctx.promise,receiver=ctx.receiver,value=ctx.value;"function"==typeof handler?promise instanceof Promise?this._settlePromiseFromHandler(handler,receiver,value,promise):handler.call(receiver,value,promise):promise instanceof Promise&&promise._reject(value)},Promise.prototype._settlePromiseCtx=function(ctx){this._settlePromise(ctx.promise,ctx.handler,ctx.receiver,ctx.value)},Promise.prototype._settlePromise0=function(handler,value,bitField){var promise=this._promise0,receiver=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(promise,handler,receiver,value)},Promise.prototype._clearCallbackDataAtIndex=function(index){var base=4*index-4;this[base+2]=this[base+3]=this[base+0]=this[base+1]=void 0},Promise.prototype._fulfill=function(value){var bitField=this._bitField;if(!((117506048&bitField)>>>16)){if(value===this){var err=makeSelfResolutionError();return this._attachExtraTrace(err),this._reject(err)}this._setFulfilled(),this._rejectionHandler0=value,(65535&bitField)>0&&(0!=(134217728&bitField)?this._settlePromises():async.settlePromises(this),this._dereferenceTrace())}},Promise.prototype._reject=function(reason){var bitField=this._bitField;if(!((117506048&bitField)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=reason,this._isFinal())return async.fatalError(reason,util.isNode);(65535&bitField)>0?async.settlePromises(this):this._ensurePossibleRejectionHandled()}},Promise.prototype._fulfillPromises=function(len,value){for(var i=1;i<len;i++){var handler=this._fulfillmentHandlerAt(i),promise=this._promiseAt(i),receiver=this._receiverAt(i);this._clearCallbackDataAtIndex(i),this._settlePromise(promise,handler,receiver,value)}},Promise.prototype._rejectPromises=function(len,reason){for(var i=1;i<len;i++){var handler=this._rejectionHandlerAt(i),promise=this._promiseAt(i),receiver=this._receiverAt(i);this._clearCallbackDataAtIndex(i),this._settlePromise(promise,handler,receiver,reason)}},Promise.prototype._settlePromises=function(){var bitField=this._bitField,len=65535&bitField;if(len>0){if(0!=(16842752&bitField)){var reason=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,reason,bitField),this._rejectPromises(len,reason)}else{var value=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,value,bitField),this._fulfillPromises(len,value)}this._setLength(0)}this._clearCancellationData()},Promise.prototype._settledValue=function(){var bitField=this._bitField;return 0!=(33554432&bitField)?this._rejectionHandler0:0!=(16777216&bitField)?this._fulfillmentHandler0:void 0},"undefined"!=typeof Symbol&&Symbol.toStringTag&&es5.defineProperty(Promise.prototype,Symbol.toStringTag,{get:function(){return"Object"}}),Promise.defer=Promise.pending=function(){return debug.deprecated("Promise.defer","new Promise"),{promise:new Promise(INTERNAL),resolve:deferResolve,reject:deferReject}},util.notEnumerableProp(Promise,"_makeSelfResolutionError",makeSelfResolutionError),__webpack_require__(165)(Promise,INTERNAL,tryConvertToPromise,apiRejection,debug),__webpack_require__(166)(Promise,INTERNAL,tryConvertToPromise,debug),__webpack_require__(167)(Promise,PromiseArray,apiRejection,debug),__webpack_require__(168)(Promise),__webpack_require__(169)(Promise),__webpack_require__(170)(Promise,PromiseArray,tryConvertToPromise,INTERNAL,async),Promise.Promise=Promise,Promise.version="3.7.2",__webpack_require__(171)(Promise),__webpack_require__(172)(Promise,apiRejection,INTERNAL,tryConvertToPromise,Proxyable,debug),__webpack_require__(173)(Promise,PromiseArray,apiRejection,tryConvertToPromise,INTERNAL,debug),__webpack_require__(174)(Promise),__webpack_require__(175)(Promise,INTERNAL),__webpack_require__(176)(Promise,PromiseArray,tryConvertToPromise,apiRejection),__webpack_require__(177)(Promise,INTERNAL,tryConvertToPromise,apiRejection),__webpack_require__(178)(Promise,PromiseArray,apiRejection,tryConvertToPromise,INTERNAL,debug),__webpack_require__(179)(Promise,PromiseArray,debug),__webpack_require__(180)(Promise,PromiseArray,apiRejection),__webpack_require__(181)(Promise,INTERNAL,debug),__webpack_require__(182)(Promise,apiRejection,tryConvertToPromise,createContext,INTERNAL,debug),__webpack_require__(183)(Promise),__webpack_require__(184)(Promise,INTERNAL),__webpack_require__(185)(Promise,INTERNAL),util.toFastProperties(Promise),util.toFastProperties(Promise.prototype),fillTypes({a:1}),fillTypes({b:2}),fillTypes({c:3}),fillTypes(1),fillTypes((function(){})),fillTypes(void 0),fillTypes(!1),fillTypes(new Promise(INTERNAL)),debug.setBounds(Async.firstLineError,util.lastLineError),Promise}},function(module,exports,__webpack_require__){"use strict";var firstLineError;try{throw new Error}catch(e){firstLineError=e}var schedule=__webpack_require__(158),Queue=__webpack_require__(159);function Async(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new Queue(16),this._normalQueue=new Queue(16),this._haveDrainedQueues=!1;var self=this;this.drainQueues=function(){self._drainQueues()},this._schedule=schedule}function _drainQueue(queue){for(;queue.length()>0;)_drainQueueStep(queue)}function _drainQueueStep(queue){var fn=queue.shift();if("function"!=typeof fn)fn._settlePromises();else{var receiver=queue.shift(),arg=queue.shift();fn.call(receiver,arg)}}Async.prototype.setScheduler=function(fn){var prev=this._schedule;return this._schedule=fn,this._customScheduler=!0,prev},Async.prototype.hasCustomScheduler=function(){return this._customScheduler},Async.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},Async.prototype.fatalError=function(e,isNode){isNode?(process.stderr.write("Fatal "+(e instanceof Error?e.stack:e)+"\n"),process.exit(2)):this.throwLater(e)},Async.prototype.throwLater=function(fn,arg){if(1===arguments.length&&(arg=fn,fn=function(){throw arg}),"undefined"!=typeof setTimeout)setTimeout((function(){fn(arg)}),0);else try{this._schedule((function(){fn(arg)}))}catch(e){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},Async.prototype.invokeLater=function(fn,receiver,arg){this._lateQueue.push(fn,receiver,arg),this._queueTick()},Async.prototype.invoke=function(fn,receiver,arg){this._normalQueue.push(fn,receiver,arg),this._queueTick()},Async.prototype.settlePromises=function(promise){this._normalQueue._pushOne(promise),this._queueTick()},Async.prototype._drainQueues=function(){_drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,_drainQueue(this._lateQueue)},Async.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},Async.prototype._reset=function(){this._isTickUsed=!1},module.exports=Async,module.exports.firstLineError=firstLineError},function(module,exports,__webpack_require__){"use strict";var schedule,util=__webpack_require__(1),NativePromise=util.getNativePromise();if(util.isNode&&"undefined"==typeof MutationObserver){var GlobalSetImmediate=global.setImmediate,ProcessNextTick=process.nextTick;schedule=util.isRecentNode?function(fn){GlobalSetImmediate.call(global,fn)}:function(fn){ProcessNextTick.call(process,fn)}}else if("function"==typeof NativePromise&&"function"==typeof NativePromise.resolve){var nativePromise=NativePromise.resolve();schedule=function(fn){nativePromise.then(fn)}}else schedule="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)||!("classList"in document.documentElement)?"undefined"!=typeof setImmediate?function(fn){setImmediate(fn)}:"undefined"!=typeof setTimeout?function(fn){setTimeout(fn,0)}:function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}:function(){var div=document.createElement("div"),opts={attributes:!0},toggleScheduled=!1,div2=document.createElement("div");new MutationObserver((function(){div.classList.toggle("foo"),toggleScheduled=!1})).observe(div2,opts);return function(fn){var o=new MutationObserver((function(){o.disconnect(),fn()}));o.observe(div,opts),toggleScheduled||(toggleScheduled=!0,div2.classList.toggle("foo"))}}();module.exports=schedule},function(module,exports,__webpack_require__){"use strict";function Queue(capacity){this._capacity=capacity,this._length=0,this._front=0}Queue.prototype._willBeOverCapacity=function(size){return this._capacity<size},Queue.prototype._pushOne=function(arg){var length=this.length();this._checkCapacity(length+1),this[this._front+length&this._capacity-1]=arg,this._length=length+1},Queue.prototype.push=function(fn,receiver,arg){var length=this.length()+3;if(this._willBeOverCapacity(length))return this._pushOne(fn),this._pushOne(receiver),void this._pushOne(arg);var j=this._front+length-3;this._checkCapacity(length);var wrapMask=this._capacity-1;this[j+0&wrapMask]=fn,this[j+1&wrapMask]=receiver,this[j+2&wrapMask]=arg,this._length=length},Queue.prototype.shift=function(){var front=this._front,ret=this[front];return this[front]=void 0,this._front=front+1&this._capacity-1,this._length--,ret},Queue.prototype.length=function(){return this._length},Queue.prototype._checkCapacity=function(size){this._capacity<size&&this._resizeTo(this._capacity<<1)},Queue.prototype._resizeTo=function(capacity){var oldCapacity=this._capacity;this._capacity=capacity,function(src,srcIndex,dst,dstIndex,len){for(var j=0;j<len;++j)dst[j+dstIndex]=src[j+srcIndex],src[j+srcIndex]=void 0}(this,0,this,oldCapacity,this._front+this._length&oldCapacity-1)},module.exports=Queue},function(module,exports,__webpack_require__){"use strict";module.exports=function(Promise,INTERNAL){var util=__webpack_require__(1),errorObj=util.errorObj,isObject=util.isObject;var hasProp={}.hasOwnProperty;return function(obj,context){if(isObject(obj)){if(obj instanceof Promise)return obj;var then=function(obj){try{return function(obj){return obj.then}(obj)}catch(e){return errorObj.e=e,errorObj}}(obj);if(then===errorObj){context&&context._pushContext();var ret=Promise.reject(then.e);return context&&context._popContext(),ret}if("function"==typeof then){if(function(obj){try{return hasProp.call(obj,"_promise0")}catch(e){return!1}}(obj)){ret=new Promise(INTERNAL);return obj._then(ret._fulfill,ret._reject,void 0,ret,null),ret}return function(x,then,context){var promise=new Promise(INTERNAL),ret=promise;context&&context._pushContext();promise._captureStackTrace(),context&&context._popContext();var synchronous=!0,result=util.tryCatch(then).call(x,resolve,reject);synchronous=!1,promise&&result===errorObj&&(promise._rejectCallback(result.e,!0,!0),promise=null);function resolve(value){promise&&(promise._resolveCallback(value),promise=null)}function reject(reason){promise&&(promise._rejectCallback(reason,synchronous,!0),promise=null)}return ret}(obj,then,context)}}return obj}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(Promise,INTERNAL,tryConvertToPromise,apiRejection,Proxyable){var util=__webpack_require__(1);util.isArray;function PromiseArray(values){var promise=this._promise=new Promise(INTERNAL);values instanceof Promise&&(promise._propagateFrom(values,3),values.suppressUnhandledRejections()),promise._setOnCancel(this),this._values=values,this._length=0,this._totalResolved=0,this._init(void 0,-2)}return util.inherits(PromiseArray,Proxyable),PromiseArray.prototype.length=function(){return this._length},PromiseArray.prototype.promise=function(){return this._promise},PromiseArray.prototype._init=function init(_,resolveValueIfEmpty){var values=tryConvertToPromise(this._values,this._promise);if(values instanceof Promise){var bitField=(values=values._target())._bitField;if(this._values=values,0==(50397184&bitField))return this._promise._setAsyncGuaranteed(),values._then(init,this._reject,void 0,this,resolveValueIfEmpty);if(0==(33554432&bitField))return 0!=(16777216&bitField)?this._reject(values._reason()):this._cancel();values=values._value()}if(null!==(values=util.asArray(values)))0!==values.length?this._iterate(values):-5===resolveValueIfEmpty?this._resolveEmptyArray():this._resolve(function(val){switch(val){case-2:return[];case-3:return{};case-6:return new Map}}(resolveValueIfEmpty));else{var err=apiRejection("expecting an array or an iterable object but got "+util.classString(values)).reason();this._promise._rejectCallback(err,!1)}},PromiseArray.prototype._iterate=function(values){var len=this.getActualLength(values.length);this._length=len,this._values=this.shouldCopyValues()?new Array(len):this._values;for(var result=this._promise,isResolved=!1,bitField=null,i=0;i<len;++i){var maybePromise=tryConvertToPromise(values[i],result);bitField=maybePromise instanceof Promise?(maybePromise=maybePromise._target())._bitField:null,isResolved?null!==bitField&&maybePromise.suppressUnhandledRejections():null!==bitField?0==(50397184&bitField)?(maybePromise._proxy(this,i),this._values[i]=maybePromise):isResolved=0!=(33554432&bitField)?this._promiseFulfilled(maybePromise._value(),i):0!=(16777216&bitField)?this._promiseRejected(maybePromise._reason(),i):this._promiseCancelled(i):isResolved=this._promiseFulfilled(maybePromise,i)}isResolved||result._setAsyncGuaranteed()},PromiseArray.prototype._isResolved=function(){return null===this._values},PromiseArray.prototype._resolve=function(value){this._values=null,this._promise._fulfill(value)},PromiseArray.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},PromiseArray.prototype._reject=function(reason){this._values=null,this._promise._rejectCallback(reason,!1)},PromiseArray.prototype._promiseFulfilled=function(value,index){return this._values[index]=value,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},PromiseArray.prototype._promiseCancelled=function(){return this._cancel(),!0},PromiseArray.prototype._promiseRejected=function(reason){return this._totalResolved++,this._reject(reason),!0},PromiseArray.prototype._resultCancelled=function(){if(!this._isResolved()){var values=this._values;if(this._cancel(),values instanceof Promise)values.cancel();else for(var i=0;i<values.length;++i)values[i]instanceof Promise&&values[i].cancel()}},PromiseArray.prototype.shouldCopyValues=function(){return!0},PromiseArray.prototype.getActualLength=function(len){return len},PromiseArray}},function(module,exports,__webpack_require__){"use strict";module.exports=function(Promise){var longStackTraces=!1,contextStack=[];function Context(){this._trace=new Context.CapturedTrace(peekContext())}function peekContext(){var lastIndex=contextStack.length-1;if(lastIndex>=0)return contextStack[lastIndex]}return Promise.prototype._promiseCreated=function(){},Promise.prototype._pushContext=function(){},Promise.prototype._popContext=function(){return null},Promise._peekContext=Promise.prototype._peekContext=function(){},Context.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,contextStack.push(this._trace))},Context.prototype._popContext=function(){if(void 0!==this._trace){var trace=contextStack.pop(),ret=trace._promiseCreated;return trace._promiseCreated=null,ret}return null},Context.CapturedTrace=null,Context.create=function(){if(longStackTraces)return new Context},Context.deactivateLongStackTraces=function(){},Context.activateLongStackTraces=function(){var Promise_pushContext=Promise.prototype._pushContext,Promise_popContext=Promise.prototype._popContext,Promise_PeekContext=Promise._peekContext,Promise_peekContext=Promise.prototype._peekContext,Promise_promiseCreated=Promise.prototype._promiseCreated;Context.deactivateLongStackTraces=function(){Promise.prototype._pushContext=Promise_pushContext,Promise.prototype._popContext=Promise_popContext,Promise._peekContext=Promise_PeekContext,Promise.prototype._peekContext=Promise_peekContext,Promise.prototype._promiseCreated=Promise_promiseCreated,longStackTraces=!1},longStackTraces=!0,Promise.prototype._pushContext=Context.prototype._pushContext,Promise.prototype._popContext=Context.prototype._popContext,Promise._peekContext=Promise.prototype._peekContext=peekContext,Promise.prototype._promiseCreated=function(){var ctx=this._peekContext();ctx&&null==ctx._promiseCreated&&(ctx._promiseCreated=this)}},Context}},function(module,exports,__webpack_require__){"use strict";module.exports=function(Promise,Context,enableAsyncHooks,disableAsyncHooks){var unhandledRejectionHandled,possiblyUnhandledRejection,printWarning,deferUnhandledRejectionCheck,async=Promise._async,Warning=__webpack_require__(12).Warning,util=__webpack_require__(1),es5=__webpack_require__(15),canAttachTrace=util.canAttachTrace,bluebirdFramePattern=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,nodeFramePattern=/\((?:timers\.js):\d+:\d+\)/,parseLinePattern=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,stackFramePattern=null,formatStack=null,indentStackFrames=!1,debugging=!(0==util.env("BLUEBIRD_DEBUG")||!util.env("BLUEBIRD_DEBUG")&&"development"!==util.env("NODE_ENV")),warnings=!(0==util.env("BLUEBIRD_WARNINGS")||!debugging&&!util.env("BLUEBIRD_WARNINGS")),longStackTraces=!(0==util.env("BLUEBIRD_LONG_STACK_TRACES")||!debugging&&!util.env("BLUEBIRD_LONG_STACK_TRACES")),wForgottenReturn=0!=util.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(warnings||!!util.env("BLUEBIRD_W_FORGOTTEN_RETURN"));!function(){var promises=[];function unhandledRejectionCheck(){for(var i=0;i<promises.length;++i)promises[i]._notifyUnhandledRejection();unhandledRejectionClear()}function unhandledRejectionClear(){promises.length=0}deferUnhandledRejectionCheck=function(promise){promises.push(promise),setTimeout(unhandledRejectionCheck,1)},es5.defineProperty(Promise,"_unhandledRejectionCheck",{value:unhandledRejectionCheck}),es5.defineProperty(Promise,"_unhandledRejectionClear",{value:unhandledRejectionClear})}(),Promise.prototype.suppressUnhandledRejections=function(){var target=this._target();target._bitField=-1048577&target._bitField|524288},Promise.prototype._ensurePossibleRejectionHandled=function(){0==(524288&this._bitField)&&(this._setRejectionIsUnhandled(),deferUnhandledRejectionCheck(this))},Promise.prototype._notifyUnhandledRejectionIsHandled=function(){fireRejectionEvent("rejectionHandled",unhandledRejectionHandled,void 0,this)},Promise.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},Promise.prototype._returnedNonUndefined=function(){return 0!=(268435456&this._bitField)},Promise.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var reason=this._settledValue();this._setUnhandledRejectionIsNotified(),fireRejectionEvent("unhandledRejection",possiblyUnhandledRejection,reason,this)}},Promise.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},Promise.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},Promise.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},Promise.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},Promise.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},Promise.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},Promise.prototype._warn=function(message,shouldUseOwnTrace,promise){return warn(message,shouldUseOwnTrace,promise||this)},Promise.onPossiblyUnhandledRejection=function(fn){var context=Promise._getContext();possiblyUnhandledRejection=util.contextBind(context,fn)},Promise.onUnhandledRejectionHandled=function(fn){var context=Promise._getContext();unhandledRejectionHandled=util.contextBind(context,fn)};var disableLongStackTraces=function(){};Promise.longStackTraces=function(){if(async.haveItemsQueued()&&!config.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!config.longStackTraces&&longStackTracesIsSupported()){var Promise_captureStackTrace=Promise.prototype._captureStackTrace,Promise_attachExtraTrace=Promise.prototype._attachExtraTrace,Promise_dereferenceTrace=Promise.prototype._dereferenceTrace;config.longStackTraces=!0,disableLongStackTraces=function(){if(async.haveItemsQueued()&&!config.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");Promise.prototype._captureStackTrace=Promise_captureStackTrace,Promise.prototype._attachExtraTrace=Promise_attachExtraTrace,Promise.prototype._dereferenceTrace=Promise_dereferenceTrace,Context.deactivateLongStackTraces(),config.longStackTraces=!1},Promise.prototype._captureStackTrace=longStackTracesCaptureStackTrace,Promise.prototype._attachExtraTrace=longStackTracesAttachExtraTrace,Promise.prototype._dereferenceTrace=longStackTracesDereferenceTrace,Context.activateLongStackTraces()}},Promise.hasLongStackTraces=function(){return config.longStackTraces&&longStackTracesIsSupported()};var legacyHandlers={unhandledrejection:{before:function(){var ret=util.global.onunhandledrejection;return util.global.onunhandledrejection=null,ret},after:function(fn){util.global.onunhandledrejection=fn}},rejectionhandled:{before:function(){var ret=util.global.onrejectionhandled;return util.global.onrejectionhandled=null,ret},after:function(fn){util.global.onrejectionhandled=fn}}},fireDomEvent=function(){var dispatch=function(legacy,e){if(!legacy)return!util.global.dispatchEvent(e);var fn;try{return fn=legacy.before(),!util.global.dispatchEvent(e)}finally{legacy.after(fn)}};try{if("function"==typeof CustomEvent){var event=new CustomEvent("CustomEvent");return util.global.dispatchEvent(event),function(name,event){name=name.toLowerCase();var domEvent=new CustomEvent(name,{detail:event,cancelable:!0});return es5.defineProperty(domEvent,"promise",{value:event.promise}),es5.defineProperty(domEvent,"reason",{value:event.reason}),dispatch(legacyHandlers[name],domEvent)}}if("function"==typeof Event){event=new Event("CustomEvent");return util.global.dispatchEvent(event),function(name,event){name=name.toLowerCase();var domEvent=new Event(name,{cancelable:!0});return domEvent.detail=event,es5.defineProperty(domEvent,"promise",{value:event.promise}),es5.defineProperty(domEvent,"reason",{value:event.reason}),dispatch(legacyHandlers[name],domEvent)}}return(event=document.createEvent("CustomEvent")).initCustomEvent("testingtheevent",!1,!0,{}),util.global.dispatchEvent(event),function(name,event){name=name.toLowerCase();var domEvent=document.createEvent("CustomEvent");return domEvent.initCustomEvent(name,!1,!0,event),dispatch(legacyHandlers[name],domEvent)}}catch(e){}return function(){return!1}}(),fireGlobalEvent=util.isNode?function(){return process.emit.apply(process,arguments)}:util.global?function(name){var methodName="on"+name.toLowerCase(),method=util.global[methodName];return!!method&&(method.apply(util.global,[].slice.call(arguments,1)),!0)}:function(){return!1};function generatePromiseLifecycleEventObject(name,promise){return{promise:promise}}var eventToObjectGenerator={promiseCreated:generatePromiseLifecycleEventObject,promiseFulfilled:generatePromiseLifecycleEventObject,promiseRejected:generatePromiseLifecycleEventObject,promiseResolved:generatePromiseLifecycleEventObject,promiseCancelled:generatePromiseLifecycleEventObject,promiseChained:function(name,promise,child){return{promise:promise,child:child}},warning:function(name,warning){return{warning:warning}},unhandledRejection:function(name,reason,promise){return{reason:reason,promise:promise}},rejectionHandled:generatePromiseLifecycleEventObject},activeFireEvent=function(name){var globalEventFired=!1;try{globalEventFired=fireGlobalEvent.apply(null,arguments)}catch(e){async.throwLater(e),globalEventFired=!0}var domEventFired=!1;try{domEventFired=fireDomEvent(name,eventToObjectGenerator[name].apply(null,arguments))}catch(e){async.throwLater(e),domEventFired=!0}return domEventFired||globalEventFired};function defaultFireEvent(){return!1}function cancellationExecute(executor,resolve,reject){var promise=this;try{executor(resolve,reject,(function(onCancel){if("function"!=typeof onCancel)throw new TypeError("onCancel must be a function, got: "+util.toString(onCancel));promise._attachCancellationCallback(onCancel)}))}catch(e){return e}}function cancellationAttachCancellationCallback(onCancel){if(!this._isCancellable())return this;var previousOnCancel=this._onCancel();void 0!==previousOnCancel?util.isArray(previousOnCancel)?previousOnCancel.push(onCancel):this._setOnCancel([previousOnCancel,onCancel]):this._setOnCancel(onCancel)}function cancellationOnCancel(){return this._onCancelField}function cancellationSetOnCancel(onCancel){this._onCancelField=onCancel}function cancellationClearCancellationData(){this._cancellationParent=void 0,this._onCancelField=void 0}function cancellationPropagateFrom(parent,flags){if(0!=(1&flags)){this._cancellationParent=parent;var branchesRemainingToCancel=parent._branchesRemainingToCancel;void 0===branchesRemainingToCancel&&(branchesRemainingToCancel=0),parent._branchesRemainingToCancel=branchesRemainingToCancel+1}0!=(2&flags)&&parent._isBound()&&this._setBoundTo(parent._boundTo)}Promise.config=function(opts){if("longStackTraces"in(opts=Object(opts))&&(opts.longStackTraces?Promise.longStackTraces():!opts.longStackTraces&&Promise.hasLongStackTraces()&&disableLongStackTraces()),"warnings"in opts){var warningsOption=opts.warnings;config.warnings=!!warningsOption,wForgottenReturn=config.warnings,util.isObject(warningsOption)&&"wForgottenReturn"in warningsOption&&(wForgottenReturn=!!warningsOption.wForgottenReturn)}if("cancellation"in opts&&opts.cancellation&&!config.cancellation){if(async.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");Promise.prototype._clearCancellationData=cancellationClearCancellationData,Promise.prototype._propagateFrom=cancellationPropagateFrom,Promise.prototype._onCancel=cancellationOnCancel,Promise.prototype._setOnCancel=cancellationSetOnCancel,Promise.prototype._attachCancellationCallback=cancellationAttachCancellationCallback,Promise.prototype._execute=cancellationExecute,propagateFromFunction=cancellationPropagateFrom,config.cancellation=!0}if("monitoring"in opts&&(opts.monitoring&&!config.monitoring?(config.monitoring=!0,Promise.prototype._fireEvent=activeFireEvent):!opts.monitoring&&config.monitoring&&(config.monitoring=!1,Promise.prototype._fireEvent=defaultFireEvent)),"asyncHooks"in opts&&util.nodeSupportsAsyncResource){var prev=config.asyncHooks,cur=!!opts.asyncHooks;prev!==cur&&(config.asyncHooks=cur,cur?enableAsyncHooks():disableAsyncHooks())}return Promise},Promise.prototype._fireEvent=defaultFireEvent,Promise.prototype._execute=function(executor,resolve,reject){try{executor(resolve,reject)}catch(e){return e}},Promise.prototype._onCancel=function(){},Promise.prototype._setOnCancel=function(handler){},Promise.prototype._attachCancellationCallback=function(onCancel){},Promise.prototype._captureStackTrace=function(){},Promise.prototype._attachExtraTrace=function(){},Promise.prototype._dereferenceTrace=function(){},Promise.prototype._clearCancellationData=function(){},Promise.prototype._propagateFrom=function(parent,flags){};var propagateFromFunction=function(parent,flags){0!=(2&flags)&&parent._isBound()&&this._setBoundTo(parent._boundTo)};function boundValueFunction(){var ret=this._boundTo;return void 0!==ret&&ret instanceof Promise?ret.isFulfilled()?ret.value():void 0:ret}function longStackTracesCaptureStackTrace(){this._trace=new CapturedTrace(this._peekContext())}function longStackTracesAttachExtraTrace(error,ignoreSelf){if(canAttachTrace(error)){var trace=this._trace;if(void 0!==trace&&ignoreSelf&&(trace=trace._parent),void 0!==trace)trace.attachExtraTrace(error);else if(!error.__stackCleaned__){var parsed=parseStackAndMessage(error);util.notEnumerableProp(error,"stack",parsed.message+"\n"+parsed.stack.join("\n")),util.notEnumerableProp(error,"__stackCleaned__",!0)}}}function longStackTracesDereferenceTrace(){this._trace=void 0}function warn(message,shouldUseOwnTrace,promise){if(config.warnings){var ctx,warning=new Warning(message);if(shouldUseOwnTrace)promise._attachExtraTrace(warning);else if(config.longStackTraces&&(ctx=Promise._peekContext()))ctx.attachExtraTrace(warning);else{var parsed=parseStackAndMessage(warning);warning.stack=parsed.message+"\n"+parsed.stack.join("\n")}activeFireEvent("warning",warning)||formatAndLogError(warning,"",!0)}}function cleanStack(stack){for(var ret=[],i=0;i<stack.length;++i){var line=stack[i],isTraceLine="    (No stack trace)"===line||stackFramePattern.test(line),isInternalFrame=isTraceLine&&shouldIgnore(line);isTraceLine&&!isInternalFrame&&(indentStackFrames&&" "!==line.charAt(0)&&(line="    "+line),ret.push(line))}return ret}function parseStackAndMessage(error){var stack=error.stack,message=error.toString();return stack="string"==typeof stack&&stack.length>0?function(error){for(var stack=error.stack.replace(/\s+$/g,"").split("\n"),i=0;i<stack.length;++i){var line=stack[i];if("    (No stack trace)"===line||stackFramePattern.test(line))break}return i>0&&"SyntaxError"!=error.name&&(stack=stack.slice(i)),stack}(error):["    (No stack trace)"],{message:message,stack:"SyntaxError"==error.name?stack:cleanStack(stack)}}function formatAndLogError(error,title,isSoft){if("undefined"!=typeof console){var message;if(util.isObject(error)){var stack=error.stack;message=title+formatStack(stack,error)}else message=title+String(error);"function"==typeof printWarning?printWarning(message,isSoft):"function"!=typeof console.log&&"object"!=typeof console.log||console.log(message)}}function fireRejectionEvent(name,localHandler,reason,promise){var localEventFired=!1;try{"function"==typeof localHandler&&(localEventFired=!0,"rejectionHandled"===name?localHandler(promise):localHandler(reason,promise))}catch(e){async.throwLater(e)}"unhandledRejection"===name?activeFireEvent(name,reason,promise)||localEventFired||formatAndLogError(reason,"Unhandled rejection "):activeFireEvent(name,promise)}function formatNonError(obj){var str;if("function"==typeof obj)str="[function "+(obj.name||"anonymous")+"]";else{str=obj&&"function"==typeof obj.toString?obj.toString():util.toString(obj);if(/\[object [a-zA-Z0-9$_]+\]/.test(str))try{str=JSON.stringify(obj)}catch(e){}0===str.length&&(str="(empty array)")}return"(<"+function(str){var maxChars=41;if(str.length<maxChars)return str;return str.substr(0,maxChars-3)+"..."}(str)+">, no stack trace)"}function longStackTracesIsSupported(){return"function"==typeof captureStackTrace}var shouldIgnore=function(){return!1},parseLineInfoRegex=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function parseLineInfo(line){var matches=line.match(parseLineInfoRegex);if(matches)return{fileName:matches[1],line:parseInt(matches[2],10)}}function CapturedTrace(parent){this._parent=parent,this._promisesCreated=0;var length=this._length=1+(void 0===parent?0:parent._length);captureStackTrace(this,CapturedTrace),length>32&&this.uncycle()}util.inherits(CapturedTrace,Error),Context.CapturedTrace=CapturedTrace,CapturedTrace.prototype.uncycle=function(){var length=this._length;if(!(length<2)){for(var nodes=[],stackToIndex={},i=0,node=this;void 0!==node;++i)nodes.push(node),node=node._parent;for(i=(length=this._length=i)-1;i>=0;--i){var stack=nodes[i].stack;void 0===stackToIndex[stack]&&(stackToIndex[stack]=i)}for(i=0;i<length;++i){var index=stackToIndex[nodes[i].stack];if(void 0!==index&&index!==i){index>0&&(nodes[index-1]._parent=void 0,nodes[index-1]._length=1),nodes[i]._parent=void 0,nodes[i]._length=1;var cycleEdgeNode=i>0?nodes[i-1]:this;index<length-1?(cycleEdgeNode._parent=nodes[index+1],cycleEdgeNode._parent.uncycle(),cycleEdgeNode._length=cycleEdgeNode._parent._length+1):(cycleEdgeNode._parent=void 0,cycleEdgeNode._length=1);for(var currentChildLength=cycleEdgeNode._length+1,j=i-2;j>=0;--j)nodes[j]._length=currentChildLength,currentChildLength++;return}}}},CapturedTrace.prototype.attachExtraTrace=function(error){if(!error.__stackCleaned__){this.uncycle();for(var parsed=parseStackAndMessage(error),message=parsed.message,stacks=[parsed.stack],trace=this;void 0!==trace;)stacks.push(cleanStack(trace.stack.split("\n"))),trace=trace._parent;!function(stacks){for(var current=stacks[0],i=1;i<stacks.length;++i){for(var prev=stacks[i],currentLastIndex=current.length-1,currentLastLine=current[currentLastIndex],commonRootMeetPoint=-1,j=prev.length-1;j>=0;--j)if(prev[j]===currentLastLine){commonRootMeetPoint=j;break}for(j=commonRootMeetPoint;j>=0;--j){var line=prev[j];if(current[currentLastIndex]!==line)break;current.pop(),currentLastIndex--}current=prev}}(stacks),function(stacks){for(var i=0;i<stacks.length;++i)(0===stacks[i].length||i+1<stacks.length&&stacks[i][0]===stacks[i+1][0])&&(stacks.splice(i,1),i--)}(stacks),util.notEnumerableProp(error,"stack",function(message,stacks){for(var i=0;i<stacks.length-1;++i)stacks[i].push("From previous event:"),stacks[i]=stacks[i].join("\n");return i<stacks.length&&(stacks[i]=stacks[i].join("\n")),message+"\n"+stacks.join("\n")}(message,stacks)),util.notEnumerableProp(error,"__stackCleaned__",!0)}};var captureStackTrace=function(){var v8stackFramePattern=/^\s*at\s*/,v8stackFormatter=function(stack,error){return"string"==typeof stack?stack:void 0!==error.name&&void 0!==error.message?error.toString():formatNonError(error)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,stackFramePattern=v8stackFramePattern,formatStack=v8stackFormatter;var captureStackTrace=Error.captureStackTrace;return shouldIgnore=function(line){return bluebirdFramePattern.test(line)},function(receiver,ignoreUntil){Error.stackTraceLimit+=6,captureStackTrace(receiver,ignoreUntil),Error.stackTraceLimit-=6}}var hasStackAfterThrow,err=new Error;if("string"==typeof err.stack&&err.stack.split("\n")[0].indexOf("stackDetection@")>=0)return stackFramePattern=/@/,formatStack=v8stackFormatter,indentStackFrames=!0,function(o){o.stack=(new Error).stack};try{throw new Error}catch(e){hasStackAfterThrow="stack"in e}return!("stack"in err)&&hasStackAfterThrow&&"number"==typeof Error.stackTraceLimit?(stackFramePattern=v8stackFramePattern,formatStack=v8stackFormatter,function(o){Error.stackTraceLimit+=6;try{throw new Error}catch(e){o.stack=e.stack}Error.stackTraceLimit-=6}):(formatStack=function(stack,error){return"string"==typeof stack?stack:"object"!=typeof error&&"function"!=typeof error||void 0===error.name||void 0===error.message?formatNonError(error):error.toString()},null)}();"undefined"!=typeof console&&void 0!==console.warn&&(printWarning=function(message){console.warn(message)},util.isNode&&process.stderr.isTTY?printWarning=function(message,isSoft){var color=isSoft?"[33m":"[31m";console.warn(color+message+"[0m\n")}:util.isNode||"string"!=typeof(new Error).stack||(printWarning=function(message,isSoft){console.warn("%c"+message,isSoft?"color: darkorange":"color: red")}));var config={warnings:warnings,longStackTraces:!1,cancellation:!1,monitoring:!1,asyncHooks:!1};return longStackTraces&&Promise.longStackTraces(),{asyncHooks:function(){return config.asyncHooks},longStackTraces:function(){return config.longStackTraces},warnings:function(){return config.warnings},cancellation:function(){return config.cancellation},monitoring:function(){return config.monitoring},propagateFromFunction:function(){return propagateFromFunction},boundValueFunction:function(){return boundValueFunction},checkForgottenReturns:function(returnValue,promiseCreated,name,promise,parent){if(void 0===returnValue&&null!==promiseCreated&&wForgottenReturn){if(void 0!==parent&&parent._returnedNonUndefined())return;if(0==(65535&promise._bitField))return;name&&(name+=" ");var handlerLine="",creatorLine="";if(promiseCreated._trace){for(var traceLines=promiseCreated._trace.stack.split("\n"),stack=cleanStack(traceLines),i=stack.length-1;i>=0;--i){var line=stack[i];if(!nodeFramePattern.test(line)){var lineMatches=line.match(parseLinePattern);lineMatches&&(handlerLine="at "+lineMatches[1]+":"+lineMatches[2]+":"+lineMatches[3]+" ");break}}if(stack.length>0){var firstUserLine=stack[0];for(i=0;i<traceLines.length;++i)if(traceLines[i]===firstUserLine){i>0&&(creatorLine="\n"+traceLines[i-1]);break}}}var msg="a promise was created in a "+name+"handler "+handlerLine+"but was not returned from it, see http://goo.gl/rRqMUw"+creatorLine;promise._warn(msg,!0,promiseCreated)}},setBounds:function(firstLineError,lastLineError){if(longStackTracesIsSupported()){for(var firstFileName,lastFileName,firstStackLines=(firstLineError.stack||"").split("\n"),lastStackLines=(lastLineError.stack||"").split("\n"),firstIndex=-1,lastIndex=-1,i=0;i<firstStackLines.length;++i){if(result=parseLineInfo(firstStackLines[i])){firstFileName=result.fileName,firstIndex=result.line;break}}for(i=0;i<lastStackLines.length;++i){var result;if(result=parseLineInfo(lastStackLines[i])){lastFileName=result.fileName,lastIndex=result.line;break}}firstIndex<0||lastIndex<0||!firstFileName||!lastFileName||firstFileName!==lastFileName||firstIndex>=lastIndex||(shouldIgnore=function(line){if(bluebirdFramePattern.test(line))return!0;var info=parseLineInfo(line);return!!(info&&info.fileName===firstFileName&&firstIndex<=info.line&&info.line<=lastIndex)})}},warn:warn,deprecated:function(name,replacement){var message=name+" is deprecated and will be removed in a future version.";return replacement&&(message+=" Use "+replacement+" instead."),warn(message)},CapturedTrace:CapturedTrace,fireDomEvent:fireDomEvent,fireGlobalEvent:fireGlobalEvent}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(Promise,tryConvertToPromise,NEXT_FILTER){var util=__webpack_require__(1),CancellationError=Promise.CancellationError,errorObj=util.errorObj,catchFilter=__webpack_require__(72)(NEXT_FILTER);function PassThroughHandlerContext(promise,type,handler){this.promise=promise,this.type=type,this.handler=handler,this.called=!1,this.cancelPromise=null}function FinallyHandlerCancelReaction(finallyHandler){this.finallyHandler=finallyHandler}function checkCancel(ctx,reason){return null!=ctx.cancelPromise&&(arguments.length>1?ctx.cancelPromise._reject(reason):ctx.cancelPromise._cancel(),ctx.cancelPromise=null,!0)}function succeed(){return finallyHandler.call(this,this.promise._target()._settledValue())}function fail(reason){if(!checkCancel(this,reason))return errorObj.e=reason,errorObj}function finallyHandler(reasonOrValue){var promise=this.promise,handler=this.handler;if(!this.called){this.called=!0;var ret=this.isFinallyHandler()?handler.call(promise._boundValue()):handler.call(promise._boundValue(),reasonOrValue);if(ret===NEXT_FILTER)return ret;if(void 0!==ret){promise._setReturnedNonUndefined();var maybePromise=tryConvertToPromise(ret,promise);if(maybePromise instanceof Promise){if(null!=this.cancelPromise){if(maybePromise._isCancelled()){var reason=new CancellationError("late cancellation observer");return promise._attachExtraTrace(reason),errorObj.e=reason,errorObj}maybePromise.isPending()&&maybePromise._attachCancellationCallback(new FinallyHandlerCancelReaction(this))}return maybePromise._then(succeed,fail,void 0,this,void 0)}}}return promise.isRejected()?(checkCancel(this),errorObj.e=reasonOrValue,errorObj):(checkCancel(this),reasonOrValue)}return PassThroughHandlerContext.prototype.isFinallyHandler=function(){return 0===this.type},FinallyHandlerCancelReaction.prototype._resultCancelled=function(){checkCancel(this.finallyHandler)},Promise.prototype._passThrough=function(handler,type,success,fail){return"function"!=typeof handler?this.then():this._then(success,fail,void 0,new PassThroughHandlerContext(this,type,handler),void 0)},Promise.prototype.lastly=Promise.prototype.finally=function(handler){return this._passThrough(handler,0,finallyHandler,finallyHandler)},Promise.prototype.tap=function(handler){return this._passThrough(handler,1,finallyHandler)},Promise.prototype.tapCatch=function(handlerOrPredicate){var len=arguments.length;if(1===len)return this._passThrough(handlerOrPredicate,1,void 0,finallyHandler);var i,catchInstances=new Array(len-1),j=0;for(i=0;i<len-1;++i){var item=arguments[i];if(!util.isObject(item))return Promise.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+util.classString(item)));catchInstances[j++]=item}catchInstances.length=j;var handler=arguments[i];return this._passThrough(catchFilter(catchInstances,handler,this),1,void 0,finallyHandler)},PassThroughHandlerContext}},function(module,exports,__webpack_require__){"use strict";module.exports=function(Promise,INTERNAL,tryConvertToPromise,apiRejection,debug){var util=__webpack_require__(1),tryCatch=util.tryCatch;Promise.method=function(fn){if("function"!=typeof fn)throw new Promise.TypeError("expecting a function but got "+util.classString(fn));return function(){var ret=new Promise(INTERNAL);ret._captureStackTrace(),ret._pushContext();var value=tryCatch(fn).apply(this,arguments),promiseCreated=ret._popContext();return debug.checkForgottenReturns(value,promiseCreated,"Promise.method",ret),ret._resolveFromSyncValue(value),ret}},Promise.attempt=Promise.try=function(fn){if("function"!=typeof fn)return apiRejection("expecting a function but got "+util.classString(fn));var value,ret=new Promise(INTERNAL);if(ret._captureStackTrace(),ret._pushContext(),arguments.length>1){debug.deprecated("calling Promise.try with more than 1 argument");var arg=arguments[1],ctx=arguments[2];value=util.isArray(arg)?tryCatch(fn).apply(ctx,arg):tryCatch(fn).call(ctx,arg)}else value=tryCatch(fn)();var promiseCreated=ret._popContext();return debug.checkForgottenReturns(value,promiseCreated,"Promise.try",ret),ret._resolveFromSyncValue(value),ret},Promise.prototype._resolveFromSyncValue=function(value){value===util.errorObj?this._rejectCallback(value.e,!1):this._resolveCallback(value,!0)}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(Promise,INTERNAL,tryConvertToPromise,debug){var calledBind=!1,rejectThis=function(_,e){this._reject(e)},targetRejected=function(e,context){context.promiseRejectionQueued=!0,context.bindingPromise._then(rejectThis,rejectThis,null,this,e)},bindingResolved=function(thisArg,context){0==(50397184&this._bitField)&&this._resolveCallback(context.target)},bindingRejected=function(e,context){context.promiseRejectionQueued||this._reject(e)};Promise.prototype.bind=function(thisArg){calledBind||(calledBind=!0,Promise.prototype._propagateFrom=debug.propagateFromFunction(),Promise.prototype._boundValue=debug.boundValueFunction());var maybePromise=tryConvertToPromise(thisArg),ret=new Promise(INTERNAL);ret._propagateFrom(this,1);var target=this._target();if(ret._setBoundTo(maybePromise),maybePromise instanceof Promise){var context={promiseRejectionQueued:!1,promise:ret,target:target,bindingPromise:maybePromise};target._then(INTERNAL,targetRejected,void 0,ret,context),maybePromise._then(bindingResolved,bindingRejected,void 0,ret,context),ret._setOnCancel(maybePromise)}else ret._resolveCallback(target);return ret},Promise.prototype._setBoundTo=function(obj){void 0!==obj?(this._bitField=2097152|this._bitField,this._boundTo=obj):this._bitField=-2097153&this._bitField},Promise.prototype._isBound=function(){return 2097152==(2097152&this._bitField)},Promise.bind=function(thisArg,value){return Promise.resolve(value).bind(thisArg)}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(Promise,PromiseArray,apiRejection,debug){var util=__webpack_require__(1),tryCatch=util.tryCatch,errorObj=util.errorObj,async=Promise._async;Promise.prototype.break=Promise.prototype.cancel=function(){if(!debug.cancellation())return this._warn("cancellation is disabled");for(var promise=this,child=promise;promise._isCancellable();){if(!promise._cancelBy(child)){child._isFollowing()?child._followee().cancel():child._cancelBranched();break}var parent=promise._cancellationParent;if(null==parent||!parent._isCancellable()){promise._isFollowing()?promise._followee().cancel():promise._cancelBranched();break}promise._isFollowing()&&promise._followee().cancel(),promise._setWillBeCancelled(),child=promise,promise=parent}},Promise.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},Promise.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},Promise.prototype._cancelBy=function(canceller){return canceller===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},Promise.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},Promise.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),async.invoke(this._cancelPromises,this,void 0))},Promise.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},Promise.prototype._unsetOnCancel=function(){this._onCancelField=void 0},Promise.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},Promise.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},Promise.prototype._doInvokeOnCancel=function(onCancelCallback,internalOnly){if(util.isArray(onCancelCallback))for(var i=0;i<onCancelCallback.length;++i)this._doInvokeOnCancel(onCancelCallback[i],internalOnly);else if(void 0!==onCancelCallback)if("function"==typeof onCancelCallback){if(!internalOnly){var e=tryCatch(onCancelCallback).call(this._boundValue());e===errorObj&&(this._attachExtraTrace(e.e),async.throwLater(e.e))}}else onCancelCallback._resultCancelled(this)},Promise.prototype._invokeOnCancel=function(){var onCancelCallback=this._onCancel();this._unsetOnCancel(),async.invoke(this._doInvokeOnCancel,this,onCancelCallback)},Promise.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},Promise.prototype._resultCancelled=function(){this.cancel()}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(Promise){function returner(){return this.value}function thrower(){throw this.reason}Promise.prototype.return=Promise.prototype.thenReturn=function(value){return value instanceof Promise&&value.suppressUnhandledRejections(),this._then(returner,void 0,void 0,{value:value},void 0)},Promise.prototype.throw=Promise.prototype.thenThrow=function(reason){return this._then(thrower,void 0,void 0,{reason:reason},void 0)},Promise.prototype.catchThrow=function(reason){if(arguments.length<=1)return this._then(void 0,thrower,void 0,{reason:reason},void 0);var _reason=arguments[1],handler=function(){throw _reason};return this.caught(reason,handler)},Promise.prototype.catchReturn=function(value){if(arguments.length<=1)return value instanceof Promise&&value.suppressUnhandledRejections(),this._then(void 0,returner,void 0,{value:value},void 0);var _value=arguments[1];_value instanceof Promise&&_value.suppressUnhandledRejections();var handler=function(){return _value};return this.caught(value,handler)}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(Promise){function PromiseInspection(promise){void 0!==promise?(promise=promise._target(),this._bitField=promise._bitField,this._settledValueField=promise._isFateSealed()?promise._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}PromiseInspection.prototype._settledValue=function(){return this._settledValueField};var value=PromiseInspection.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},reason=PromiseInspection.prototype.error=PromiseInspection.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},isFulfilled=PromiseInspection.prototype.isFulfilled=function(){return 0!=(33554432&this._bitField)},isRejected=PromiseInspection.prototype.isRejected=function(){return 0!=(16777216&this._bitField)},isPending=PromiseInspection.prototype.isPending=function(){return 0==(50397184&this._bitField)},isResolved=PromiseInspection.prototype.isResolved=function(){return 0!=(50331648&this._bitField)};PromiseInspection.prototype.isCancelled=function(){return 0!=(8454144&this._bitField)},Promise.prototype.__isCancelled=function(){return 65536==(65536&this._bitField)},Promise.prototype._isCancelled=function(){return this._target().__isCancelled()},Promise.prototype.isCancelled=function(){return 0!=(8454144&this._target()._bitField)},Promise.prototype.isPending=function(){return isPending.call(this._target())},Promise.prototype.isRejected=function(){return isRejected.call(this._target())},Promise.prototype.isFulfilled=function(){return isFulfilled.call(this._target())},Promise.prototype.isResolved=function(){return isResolved.call(this._target())},Promise.prototype.value=function(){return value.call(this._target())},Promise.prototype.reason=function(){var target=this._target();return target._unsetRejectionIsUnhandled(),reason.call(target)},Promise.prototype._value=function(){return this._settledValue()},Promise.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},Promise.PromiseInspection=PromiseInspection}},function(module,exports,__webpack_require__){"use strict";module.exports=function(Promise,PromiseArray,tryConvertToPromise,INTERNAL,async){var reject,util=__webpack_require__(1),canEvaluate=util.canEvaluate,tryCatch=util.tryCatch,errorObj=util.errorObj;if(canEvaluate){for(var thenCallback=function(i){return new Function("value","holder","                             \n            'use strict';                                                    \n            holder.pIndex = value;                                           \n            holder.checkFulfillment(this);                                   \n            ".replace(/Index/g,i))},promiseSetter=function(i){return new Function("promise","holder","                           \n            'use strict';                                                    \n            holder.pIndex = promise;                                         \n            ".replace(/Index/g,i))},generateHolderClass=function(total){for(var props=new Array(total),i=0;i<props.length;++i)props[i]="this.p"+(i+1);var assignment=props.join(" = ")+" = null;",cancellationCode="var promise;\n"+props.map((function(prop){return"                                                         \n                promise = "+prop+";                                      \n                if (promise instanceof Promise) {                            \n                    promise.cancel();                                        \n                }                                                            \n            "})).join("\n"),passedArguments=props.join(", "),name="Holder$"+total,code="return function(tryCatch, errorObj, Promise, async) {    \n            'use strict';                                                    \n            function [TheName](fn) {                                         \n                [TheProperties]                                              \n                this.fn = fn;                                                \n                this.asyncNeeded = true;                                     \n                this.now = 0;                                                \n            }                                                                \n                                                                             \n            [TheName].prototype._callFunction = function(promise) {          \n                promise._pushContext();                                      \n                var ret = tryCatch(this.fn)([ThePassedArguments]);           \n                promise._popContext();                                       \n                if (ret === errorObj) {                                      \n                    promise._rejectCallback(ret.e, false);                   \n                } else {                                                     \n                    promise._resolveCallback(ret);                           \n                }                                                            \n            };                                                               \n                                                                             \n            [TheName].prototype.checkFulfillment = function(promise) {       \n                var now = ++this.now;                                        \n                if (now === [TheTotal]) {                                    \n                    if (this.asyncNeeded) {                                  \n                        async.invoke(this._callFunction, this, promise);     \n                    } else {                                                 \n                        this._callFunction(promise);                         \n                    }                                                        \n                                                                             \n                }                                                            \n            };                                                               \n                                                                             \n            [TheName].prototype._resultCancelled = function() {              \n                [CancellationCode]                                           \n            };                                                               \n                                                                             \n            return [TheName];                                                \n        }(tryCatch, errorObj, Promise, async);                               \n        ";return code=code.replace(/\[TheName\]/g,name).replace(/\[TheTotal\]/g,total).replace(/\[ThePassedArguments\]/g,passedArguments).replace(/\[TheProperties\]/g,assignment).replace(/\[CancellationCode\]/g,cancellationCode),new Function("tryCatch","errorObj","Promise","async",code)(tryCatch,errorObj,Promise,async)},holderClasses=[],thenCallbacks=[],promiseSetters=[],i=0;i<8;++i)holderClasses.push(generateHolderClass(i+1)),thenCallbacks.push(thenCallback(i+1)),promiseSetters.push(promiseSetter(i+1));reject=function(reason){this._reject(reason)}}Promise.join=function(){var fn,last=arguments.length-1;if(last>0&&"function"==typeof arguments[last]&&(fn=arguments[last],last<=8&&canEvaluate)){(ret=new Promise(INTERNAL))._captureStackTrace();for(var HolderClass=holderClasses[last-1],holder=new HolderClass(fn),callbacks=thenCallbacks,i=0;i<last;++i){var maybePromise=tryConvertToPromise(arguments[i],ret);if(maybePromise instanceof Promise){var bitField=(maybePromise=maybePromise._target())._bitField;0==(50397184&bitField)?(maybePromise._then(callbacks[i],reject,void 0,ret,holder),promiseSetters[i](maybePromise,holder),holder.asyncNeeded=!1):0!=(33554432&bitField)?callbacks[i].call(ret,maybePromise._value(),holder):0!=(16777216&bitField)?ret._reject(maybePromise._reason()):ret._cancel()}else callbacks[i].call(ret,maybePromise,holder)}if(!ret._isFateSealed()){if(holder.asyncNeeded){var context=Promise._getContext();holder.fn=util.contextBind(context,holder.fn)}ret._setAsyncGuaranteed(),ret._setOnCancel(holder)}return ret}for(var $_len=arguments.length,args=new Array($_len),$_i=0;$_i<$_len;++$_i)args[$_i]=arguments[$_i];fn&&args.pop();var ret=new PromiseArray(args).promise();return void 0!==fn?ret.spread(fn):ret}}},function(module,exports,__webpack_require__){"use strict";var cr=Object.create;if(cr){var callerCache=cr(null),getterCache=cr(null);callerCache[" size"]=getterCache[" size"]=0}module.exports=function(Promise){var getMethodCaller,getGetter,util=__webpack_require__(1),canEvaluate=util.canEvaluate,isIdentifier=util.isIdentifier,makeMethodCaller=function(methodName){return new Function("ensureMethod","                                    \n        return function(obj) {                                               \n            'use strict'                                                     \n            var len = this.length;                                           \n            ensureMethod(obj, 'methodName');                                 \n            switch(len) {                                                    \n                case 1: return obj.methodName(this[0]);                      \n                case 2: return obj.methodName(this[0], this[1]);             \n                case 3: return obj.methodName(this[0], this[1], this[2]);    \n                case 0: return obj.methodName();                             \n                default:                                                     \n                    return obj.methodName.apply(obj, this);                  \n            }                                                                \n        };                                                                   \n        ".replace(/methodName/g,methodName))(ensureMethod)},makeGetter=function(propertyName){return new Function("obj","                                             \n        'use strict';                                                        \n        return obj.propertyName;                                             \n        ".replace("propertyName",propertyName))},getCompiled=function(name,compiler,cache){var ret=cache[name];if("function"!=typeof ret){if(!isIdentifier(name))return null;if(ret=compiler(name),cache[name]=ret,cache[" size"]++,cache[" size"]>512){for(var keys=Object.keys(cache),i=0;i<256;++i)delete cache[keys[i]];cache[" size"]=keys.length-256}}return ret};function ensureMethod(obj,methodName){var fn;if(null!=obj&&(fn=obj[methodName]),"function"!=typeof fn){var message="Object "+util.classString(obj)+" has no method '"+util.toString(methodName)+"'";throw new Promise.TypeError(message)}return fn}function caller(obj){return ensureMethod(obj,this.pop()).apply(obj,this)}function namedGetter(obj){return obj[this]}function indexedGetter(obj){var index=+this;return index<0&&(index=Math.max(0,index+obj.length)),obj[index]}getMethodCaller=function(name){return getCompiled(name,makeMethodCaller,callerCache)},getGetter=function(name){return getCompiled(name,makeGetter,getterCache)},Promise.prototype.call=function(methodName){for(var $_len=arguments.length,args=new Array(Math.max($_len-1,0)),$_i=1;$_i<$_len;++$_i)args[$_i-1]=arguments[$_i];if(canEvaluate){var maybeCaller=getMethodCaller(methodName);if(null!==maybeCaller)return this._then(maybeCaller,void 0,void 0,args,void 0)}return args.push(methodName),this._then(caller,void 0,void 0,args,void 0)},Promise.prototype.get=function(propertyName){var getter;if("number"==typeof propertyName)getter=indexedGetter;else if(canEvaluate){var maybeGetter=getGetter(propertyName);getter=null!==maybeGetter?maybeGetter:namedGetter}else getter=namedGetter;return this._then(getter,void 0,void 0,propertyName,void 0)}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(Promise,apiRejection,INTERNAL,tryConvertToPromise,Proxyable,debug){var TypeError=__webpack_require__(12).TypeError,util=__webpack_require__(1),errorObj=util.errorObj,tryCatch=util.tryCatch,yieldHandlers=[];function PromiseSpawn(generatorFunction,receiver,yieldHandler,stack){if(debug.cancellation()){var internal=new Promise(INTERNAL),_finallyPromise=this._finallyPromise=new Promise(INTERNAL);this._promise=internal.lastly((function(){return _finallyPromise})),internal._captureStackTrace(),internal._setOnCancel(this)}else{(this._promise=new Promise(INTERNAL))._captureStackTrace()}this._stack=stack,this._generatorFunction=generatorFunction,this._receiver=receiver,this._generator=void 0,this._yieldHandlers="function"==typeof yieldHandler?[yieldHandler].concat(yieldHandlers):yieldHandlers,this._yieldedPromise=null,this._cancellationPhase=!1}util.inherits(PromiseSpawn,Proxyable),PromiseSpawn.prototype._isResolved=function(){return null===this._promise},PromiseSpawn.prototype._cleanup=function(){this._promise=this._generator=null,debug.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},PromiseSpawn.prototype._promiseCancelled=function(){if(!this._isResolved()){var result;if(void 0!==this._generator.return)this._promise._pushContext(),result=tryCatch(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var reason=new Promise.CancellationError("generator .return() sentinel");Promise.coroutine.returnSentinel=reason,this._promise._attachExtraTrace(reason),this._promise._pushContext(),result=tryCatch(this._generator.throw).call(this._generator,reason),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(result)}},PromiseSpawn.prototype._promiseFulfilled=function(value){this._yieldedPromise=null,this._promise._pushContext();var result=tryCatch(this._generator.next).call(this._generator,value);this._promise._popContext(),this._continue(result)},PromiseSpawn.prototype._promiseRejected=function(reason){this._yieldedPromise=null,this._promise._attachExtraTrace(reason),this._promise._pushContext();var result=tryCatch(this._generator.throw).call(this._generator,reason);this._promise._popContext(),this._continue(result)},PromiseSpawn.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof Promise){var promise=this._yieldedPromise;this._yieldedPromise=null,promise.cancel()}},PromiseSpawn.prototype.promise=function(){return this._promise},PromiseSpawn.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},PromiseSpawn.prototype._continue=function(result){var promise=this._promise;if(result===errorObj)return this._cleanup(),this._cancellationPhase?promise.cancel():promise._rejectCallback(result.e,!1);var value=result.value;if(!0===result.done)return this._cleanup(),this._cancellationPhase?promise.cancel():promise._resolveCallback(value);var maybePromise=tryConvertToPromise(value,this._promise);if(maybePromise instanceof Promise||null!==(maybePromise=function(value,yieldHandlers,traceParent){for(var i=0;i<yieldHandlers.length;++i){traceParent._pushContext();var result=tryCatch(yieldHandlers[i])(value);if(traceParent._popContext(),result===errorObj){traceParent._pushContext();var ret=Promise.reject(errorObj.e);return traceParent._popContext(),ret}var maybePromise=tryConvertToPromise(result,traceParent);if(maybePromise instanceof Promise)return maybePromise}return null}(maybePromise,this._yieldHandlers,this._promise))){var bitField=(maybePromise=maybePromise._target())._bitField;0==(50397184&bitField)?(this._yieldedPromise=maybePromise,maybePromise._proxy(this,null)):0!=(33554432&bitField)?Promise._async.invoke(this._promiseFulfilled,this,maybePromise._value()):0!=(16777216&bitField)?Promise._async.invoke(this._promiseRejected,this,maybePromise._reason()):this._promiseCancelled()}else this._promiseRejected(new TypeError("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",String(value))+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")))},Promise.coroutine=function(generatorFunction,options){if("function"!=typeof generatorFunction)throw new TypeError("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var yieldHandler=Object(options).yieldHandler,PromiseSpawn$=PromiseSpawn,stack=(new Error).stack;return function(){var generator=generatorFunction.apply(this,arguments),spawn=new PromiseSpawn$(void 0,void 0,yieldHandler,stack),ret=spawn.promise();return spawn._generator=generator,spawn._promiseFulfilled(void 0),ret}},Promise.coroutine.addYieldHandler=function(fn){if("function"!=typeof fn)throw new TypeError("expecting a function but got "+util.classString(fn));yieldHandlers.push(fn)},Promise.spawn=function(generatorFunction){if(debug.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof generatorFunction)return apiRejection("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var spawn=new PromiseSpawn(generatorFunction,this),ret=spawn.promise();return spawn._run(Promise.spawn),ret}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(Promise,PromiseArray,apiRejection,tryConvertToPromise,INTERNAL,debug){var util=__webpack_require__(1),tryCatch=util.tryCatch,errorObj=util.errorObj,async=Promise._async;function MappingPromiseArray(promises,fn,limit,_filter){this.constructor$(promises),this._promise._captureStackTrace();var context=Promise._getContext();if(this._callback=util.contextBind(context,fn),this._preservedValues=_filter===INTERNAL?new Array(this.length()):null,this._limit=limit,this._inFlight=0,this._queue=[],async.invoke(this._asyncInit,this,void 0),util.isArray(promises))for(var i=0;i<promises.length;++i){var maybePromise=promises[i];maybePromise instanceof Promise&&maybePromise.suppressUnhandledRejections()}}function map(promises,fn,options,_filter){if("function"!=typeof fn)return apiRejection("expecting a function but got "+util.classString(fn));var limit=0;if(void 0!==options){if("object"!=typeof options||null===options)return Promise.reject(new TypeError("options argument must be an object but it is "+util.classString(options)));if("number"!=typeof options.concurrency)return Promise.reject(new TypeError("'concurrency' must be a number but it is "+util.classString(options.concurrency)));limit=options.concurrency}return new MappingPromiseArray(promises,fn,limit="number"==typeof limit&&isFinite(limit)&&limit>=1?limit:0,_filter).promise()}util.inherits(MappingPromiseArray,PromiseArray),MappingPromiseArray.prototype._asyncInit=function(){this._init$(void 0,-2)},MappingPromiseArray.prototype._init=function(){},MappingPromiseArray.prototype._promiseFulfilled=function(value,index){var values=this._values,length=this.length(),preservedValues=this._preservedValues,limit=this._limit;if(index<0){if(values[index=-1*index-1]=value,limit>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(limit>=1&&this._inFlight>=limit)return values[index]=value,this._queue.push(index),!1;null!==preservedValues&&(preservedValues[index]=value);var promise=this._promise,callback=this._callback,receiver=promise._boundValue();promise._pushContext();var ret=tryCatch(callback).call(receiver,value,index,length),promiseCreated=promise._popContext();if(debug.checkForgottenReturns(ret,promiseCreated,null!==preservedValues?"Promise.filter":"Promise.map",promise),ret===errorObj)return this._reject(ret.e),!0;var maybePromise=tryConvertToPromise(ret,this._promise);if(maybePromise instanceof Promise){var bitField=(maybePromise=maybePromise._target())._bitField;if(0==(50397184&bitField))return limit>=1&&this._inFlight++,values[index]=maybePromise,maybePromise._proxy(this,-1*(index+1)),!1;if(0==(33554432&bitField))return 0!=(16777216&bitField)?(this._reject(maybePromise._reason()),!0):(this._cancel(),!0);ret=maybePromise._value()}values[index]=ret}return++this._totalResolved>=length&&(null!==preservedValues?this._filter(values,preservedValues):this._resolve(values),!0)},MappingPromiseArray.prototype._drainQueue=function(){for(var queue=this._queue,limit=this._limit,values=this._values;queue.length>0&&this._inFlight<limit;){if(this._isResolved())return;var index=queue.pop();this._promiseFulfilled(values[index],index)}},MappingPromiseArray.prototype._filter=function(booleans,values){for(var len=values.length,ret=new Array(len),j=0,i=0;i<len;++i)booleans[i]&&(ret[j++]=values[i]);ret.length=j,this._resolve(ret)},MappingPromiseArray.prototype.preservedValues=function(){return this._preservedValues},Promise.prototype.map=function(fn,options){return map(this,fn,options,null)},Promise.map=function(promises,fn,options,_filter){return map(promises,fn,options,_filter)}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(Promise){var util=__webpack_require__(1),async=Promise._async,tryCatch=util.tryCatch,errorObj=util.errorObj;function spreadAdapter(val,nodeback){if(!util.isArray(val))return successAdapter.call(this,val,nodeback);var ret=tryCatch(nodeback).apply(this._boundValue(),[null].concat(val));ret===errorObj&&async.throwLater(ret.e)}function successAdapter(val,nodeback){var receiver=this._boundValue(),ret=void 0===val?tryCatch(nodeback).call(receiver,null):tryCatch(nodeback).call(receiver,null,val);ret===errorObj&&async.throwLater(ret.e)}function errorAdapter(reason,nodeback){if(!reason){var newReason=new Error(reason+"");newReason.cause=reason,reason=newReason}var ret=tryCatch(nodeback).call(this._boundValue(),reason);ret===errorObj&&async.throwLater(ret.e)}Promise.prototype.asCallback=Promise.prototype.nodeify=function(nodeback,options){if("function"==typeof nodeback){var adapter=successAdapter;void 0!==options&&Object(options).spread&&(adapter=spreadAdapter),this._then(adapter,errorAdapter,void 0,this,nodeback)}return this}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(Promise,INTERNAL){var THIS={},util=__webpack_require__(1),nodebackForPromise=__webpack_require__(73),withAppended=util.withAppended,maybeWrapAsError=util.maybeWrapAsError,canEvaluate=util.canEvaluate,TypeError=__webpack_require__(12).TypeError,defaultPromisified={__isPromisified__:!0},noCopyPropsPattern=new RegExp("^(?:"+["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"].join("|")+")$"),defaultFilter=function(name){return util.isIdentifier(name)&&"_"!==name.charAt(0)&&"constructor"!==name};function propsFilter(key){return!noCopyPropsPattern.test(key)}function isPromisified(fn){try{return!0===fn.__isPromisified__}catch(e){return!1}}function hasPromisified(obj,key,suffix){var val=util.getDataPropertyOrDefault(obj,key+suffix,defaultPromisified);return!!val&&isPromisified(val)}function promisifiableMethods(obj,suffix,suffixRegexp,filter){for(var keys=util.inheritedDataKeys(obj),ret=[],i=0;i<keys.length;++i){var key=keys[i],value=obj[key],passesDefaultFilter=filter===defaultFilter||defaultFilter(key);"function"!=typeof value||isPromisified(value)||hasPromisified(obj,key,suffix)||!filter(key,value,obj,passesDefaultFilter)||ret.push(key,value)}return function(ret,suffix,suffixRegexp){for(var i=0;i<ret.length;i+=2){var key=ret[i];if(suffixRegexp.test(key))for(var keyWithoutAsyncSuffix=key.replace(suffixRegexp,""),j=0;j<ret.length;j+=2)if(ret[j]===keyWithoutAsyncSuffix)throw new TypeError("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",suffix))}}(ret,suffix,suffixRegexp),ret}var makeNodePromisified=canEvaluate?function(callback,receiver,originalName,fn,_,multiArgs){var newParameterCount=Math.max(0,function(fn){return"number"==typeof fn.length?Math.max(Math.min(fn.length,1024),0):0}(fn)-1),argumentOrder=function(likelyArgumentCount){for(var ret=[likelyArgumentCount],min=Math.max(0,likelyArgumentCount-1-3),i=likelyArgumentCount-1;i>=min;--i)ret.push(i);for(i=likelyArgumentCount+1;i<=3;++i)ret.push(i);return ret}(newParameterCount),shouldProxyThis="string"==typeof callback||receiver===THIS;function generateCallForArgumentCount(count){var argumentCount,args=(argumentCount=count,util.filledRange(argumentCount,"_arg","")).join(", "),comma=count>0?", ":"";return(shouldProxyThis?"ret = callback.call(this, {{args}}, nodeback); break;\n":void 0===receiver?"ret = callback({{args}}, nodeback); break;\n":"ret = callback.call(receiver, {{args}}, nodeback); break;\n").replace("{{args}}",args).replace(", ",comma)}var getFunctionCode="string"==typeof callback?"this != null ? this['"+callback+"'] : fn":"fn",body="'use strict';                                                \n        var ret = function (Parameters) {                                    \n            'use strict';                                                    \n            var len = arguments.length;                                      \n            var promise = new Promise(INTERNAL);                             \n            promise._captureStackTrace();                                    \n            var nodeback = nodebackForPromise(promise, "+multiArgs+");   \n            var ret;                                                         \n            var callback = tryCatch([GetFunctionCode]);                      \n            switch(len) {                                                    \n                [CodeForSwitchCase]                                          \n            }                                                                \n            if (ret === errorObj) {                                          \n                promise._rejectCallback(maybeWrapAsError(ret.e), true, true);\n            }                                                                \n            if (!promise._isFateSealed()) promise._setAsyncGuaranteed();     \n            return promise;                                                  \n        };                                                                   \n        notEnumerableProp(ret, '__isPromisified__', true);                   \n        return ret;                                                          \n    ".replace("[CodeForSwitchCase]",function(){for(var ret="",i=0;i<argumentOrder.length;++i)ret+="case "+argumentOrder[i]+":"+generateCallForArgumentCount(argumentOrder[i]);return ret+="                                                             \n        default:                                                             \n            var args = new Array(len + 1);                                   \n            var i = 0;                                                       \n            for (var i = 0; i < len; ++i) {                                  \n               args[i] = arguments[i];                                       \n            }                                                                \n            args[i] = nodeback;                                              \n            [CodeForCall]                                                    \n            break;                                                           \n        ".replace("[CodeForCall]",shouldProxyThis?"ret = callback.apply(this, args);\n":"ret = callback.apply(receiver, args);\n")}()).replace("[GetFunctionCode]",getFunctionCode);return body=body.replace("Parameters",function(parameterCount){return util.filledRange(Math.max(parameterCount,3),"_arg","")}(newParameterCount)),new Function("Promise","fn","receiver","withAppended","maybeWrapAsError","nodebackForPromise","tryCatch","errorObj","notEnumerableProp","INTERNAL",body)(Promise,fn,receiver,withAppended,maybeWrapAsError,nodebackForPromise,util.tryCatch,util.errorObj,util.notEnumerableProp,INTERNAL)}:function(callback,receiver,_,fn,__,multiArgs){var defaultThis=function(){return this}(),method=callback;function promisified(){var _receiver=receiver;receiver===THIS&&(_receiver=this);var promise=new Promise(INTERNAL);promise._captureStackTrace();var cb="string"==typeof method&&this!==defaultThis?this[method]:callback,fn=nodebackForPromise(promise,multiArgs);try{cb.apply(_receiver,withAppended(arguments,fn))}catch(e){promise._rejectCallback(maybeWrapAsError(e),!0,!0)}return promise._isFateSealed()||promise._setAsyncGuaranteed(),promise}return"string"==typeof method&&(callback=fn),util.notEnumerableProp(promisified,"__isPromisified__",!0),promisified};function promisifyAll(obj,suffix,filter,promisifier,multiArgs){for(var suffixRegexp=new RegExp(suffix.replace(/([$])/,"\\$")+"$"),methods=promisifiableMethods(obj,suffix,suffixRegexp,filter),i=0,len=methods.length;i<len;i+=2){var key=methods[i],fn=methods[i+1],promisifiedKey=key+suffix;if(promisifier===makeNodePromisified)obj[promisifiedKey]=makeNodePromisified(key,THIS,key,fn,suffix,multiArgs);else{var promisified=promisifier(fn,(function(){return makeNodePromisified(key,THIS,key,fn,suffix,multiArgs)}));util.notEnumerableProp(promisified,"__isPromisified__",!0),obj[promisifiedKey]=promisified}}return util.toFastProperties(obj),obj}Promise.promisify=function(fn,options){if("function"!=typeof fn)throw new TypeError("expecting a function but got "+util.classString(fn));if(isPromisified(fn))return fn;var ret=function(callback,receiver,multiArgs){return makeNodePromisified(callback,receiver,void 0,callback,null,multiArgs)}(fn,void 0===(options=Object(options)).context?THIS:options.context,!!options.multiArgs);return util.copyDescriptors(fn,ret,propsFilter),ret},Promise.promisifyAll=function(target,options){if("function"!=typeof target&&"object"!=typeof target)throw new TypeError("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");var multiArgs=!!(options=Object(options)).multiArgs,suffix=options.suffix;"string"!=typeof suffix&&(suffix="Async");var filter=options.filter;"function"!=typeof filter&&(filter=defaultFilter);var promisifier=options.promisifier;if("function"!=typeof promisifier&&(promisifier=makeNodePromisified),!util.isIdentifier(suffix))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var keys=util.inheritedDataKeys(target),i=0;i<keys.length;++i){var value=target[keys[i]];"constructor"!==keys[i]&&util.isClass(value)&&(promisifyAll(value.prototype,suffix,filter,promisifier,multiArgs),promisifyAll(value,suffix,filter,promisifier,multiArgs))}return promisifyAll(target,suffix,filter,promisifier,multiArgs)}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(Promise,PromiseArray,tryConvertToPromise,apiRejection){var Es6Map,util=__webpack_require__(1),isObject=util.isObject,es5=__webpack_require__(15);"function"==typeof Map&&(Es6Map=Map);var mapToEntries=function(){var index=0,size=0;function extractEntry(value,key){this[index]=value,this[index+size]=key,index++}return function(map){size=map.size,index=0;var ret=new Array(2*map.size);return map.forEach(extractEntry,ret),ret}}();function PropertiesPromiseArray(obj){var entries,isMap=!1;if(void 0!==Es6Map&&obj instanceof Es6Map)entries=mapToEntries(obj),isMap=!0;else{var keys=es5.keys(obj),len=keys.length;entries=new Array(2*len);for(var i=0;i<len;++i){var key=keys[i];entries[i]=obj[key],entries[i+len]=key}}this.constructor$(entries),this._isMap=isMap,this._init$(void 0,isMap?-6:-3)}function props(promises){var ret,castValue=tryConvertToPromise(promises);return isObject(castValue)?(ret=castValue instanceof Promise?castValue._then(Promise.props,void 0,void 0,void 0,void 0):new PropertiesPromiseArray(castValue).promise(),castValue instanceof Promise&&ret._propagateFrom(castValue,2),ret):apiRejection("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}util.inherits(PropertiesPromiseArray,PromiseArray),PropertiesPromiseArray.prototype._init=function(){},PropertiesPromiseArray.prototype._promiseFulfilled=function(value,index){if(this._values[index]=value,++this._totalResolved>=this._length){var val;if(this._isMap)val=function(entries){for(var ret=new Es6Map,length=entries.length/2|0,i=0;i<length;++i){var key=entries[length+i],value=entries[i];ret.set(key,value)}return ret}(this._values);else{val={};for(var keyOffset=this.length(),i=0,len=this.length();i<len;++i)val[this._values[i+keyOffset]]=this._values[i]}return this._resolve(val),!0}return!1},PropertiesPromiseArray.prototype.shouldCopyValues=function(){return!1},PropertiesPromiseArray.prototype.getActualLength=function(len){return len>>1},Promise.prototype.props=function(){return props(this)},Promise.props=function(promises){return props(promises)}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(Promise,INTERNAL,tryConvertToPromise,apiRejection){var util=__webpack_require__(1);function race(promises,parent){var promise,maybePromise=tryConvertToPromise(promises);if(maybePromise instanceof Promise)return(promise=maybePromise).then((function(array){return race(array,promise)}));if(null===(promises=util.asArray(promises)))return apiRejection("expecting an array or an iterable object but got "+util.classString(promises));var ret=new Promise(INTERNAL);void 0!==parent&&ret._propagateFrom(parent,3);for(var fulfill=ret._fulfill,reject=ret._reject,i=0,len=promises.length;i<len;++i){var val=promises[i];(void 0!==val||i in promises)&&Promise.cast(val)._then(fulfill,reject,void 0,ret,null)}return ret}Promise.race=function(promises){return race(promises,void 0)},Promise.prototype.race=function(){return race(this,void 0)}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(Promise,PromiseArray,apiRejection,tryConvertToPromise,INTERNAL,debug){var util=__webpack_require__(1),tryCatch=util.tryCatch;function ReductionPromiseArray(promises,fn,initialValue,_each){this.constructor$(promises);var context=Promise._getContext();this._fn=util.contextBind(context,fn),void 0!==initialValue&&(initialValue=Promise.resolve(initialValue))._attachCancellationCallback(this),this._initialValue=initialValue,this._currentCancellable=null,this._eachValues=_each===INTERNAL?Array(this._length):0===_each?null:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function completed(valueOrReason,array){this.isFulfilled()?array._resolve(valueOrReason):array._reject(valueOrReason)}function reduce(promises,fn,initialValue,_each){return"function"!=typeof fn?apiRejection("expecting a function but got "+util.classString(fn)):new ReductionPromiseArray(promises,fn,initialValue,_each).promise()}function gotAccum(accum){this.accum=accum,this.array._gotAccum(accum);var value=tryConvertToPromise(this.value,this.array._promise);return value instanceof Promise?(this.array._currentCancellable=value,value._then(gotValue,void 0,void 0,this,void 0)):gotValue.call(this,value)}function gotValue(value){var ret,array=this.array,promise=array._promise,fn=tryCatch(array._fn);promise._pushContext(),(ret=void 0!==array._eachValues?fn.call(promise._boundValue(),value,this.index,this.length):fn.call(promise._boundValue(),this.accum,value,this.index,this.length))instanceof Promise&&(array._currentCancellable=ret);var promiseCreated=promise._popContext();return debug.checkForgottenReturns(ret,promiseCreated,void 0!==array._eachValues?"Promise.each":"Promise.reduce",promise),ret}util.inherits(ReductionPromiseArray,PromiseArray),ReductionPromiseArray.prototype._gotAccum=function(accum){void 0!==this._eachValues&&null!==this._eachValues&&accum!==INTERNAL&&this._eachValues.push(accum)},ReductionPromiseArray.prototype._eachComplete=function(value){return null!==this._eachValues&&this._eachValues.push(value),this._eachValues},ReductionPromiseArray.prototype._init=function(){},ReductionPromiseArray.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},ReductionPromiseArray.prototype.shouldCopyValues=function(){return!1},ReductionPromiseArray.prototype._resolve=function(value){this._promise._resolveCallback(value),this._values=null},ReductionPromiseArray.prototype._resultCancelled=function(sender){if(sender===this._initialValue)return this._cancel();this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof Promise&&this._currentCancellable.cancel(),this._initialValue instanceof Promise&&this._initialValue.cancel())},ReductionPromiseArray.prototype._iterate=function(values){var value,i;this._values=values;var length=values.length;void 0!==this._initialValue?(value=this._initialValue,i=0):(value=Promise.resolve(values[0]),i=1),this._currentCancellable=value;for(var j=i;j<length;++j){var maybePromise=values[j];maybePromise instanceof Promise&&maybePromise.suppressUnhandledRejections()}if(!value.isRejected())for(;i<length;++i){var ctx={accum:null,value:values[i],index:i,length:length,array:this};value=value._then(gotAccum,void 0,void 0,ctx,void 0),0==(127&i)&&value._setNoAsyncGuarantee()}void 0!==this._eachValues&&(value=value._then(this._eachComplete,void 0,void 0,this,void 0)),value._then(completed,completed,void 0,value,this)},Promise.prototype.reduce=function(fn,initialValue){return reduce(this,fn,initialValue,null)},Promise.reduce=function(promises,fn,initialValue,_each){return reduce(promises,fn,initialValue,_each)}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(Promise,PromiseArray,debug){var PromiseInspection=Promise.PromiseInspection;function SettledPromiseArray(values){this.constructor$(values)}__webpack_require__(1).inherits(SettledPromiseArray,PromiseArray),SettledPromiseArray.prototype._promiseResolved=function(index,inspection){return this._values[index]=inspection,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},SettledPromiseArray.prototype._promiseFulfilled=function(value,index){var ret=new PromiseInspection;return ret._bitField=33554432,ret._settledValueField=value,this._promiseResolved(index,ret)},SettledPromiseArray.prototype._promiseRejected=function(reason,index){var ret=new PromiseInspection;return ret._bitField=16777216,ret._settledValueField=reason,this._promiseResolved(index,ret)},Promise.settle=function(promises){return debug.deprecated(".settle()",".reflect()"),new SettledPromiseArray(promises).promise()},Promise.allSettled=function(promises){return new SettledPromiseArray(promises).promise()},Promise.prototype.settle=function(){return Promise.settle(this)}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(Promise,PromiseArray,apiRejection){var util=__webpack_require__(1),RangeError=__webpack_require__(12).RangeError,AggregateError=__webpack_require__(12).AggregateError,isArray=util.isArray,CANCELLATION={};function SomePromiseArray(values){this.constructor$(values),this._howMany=0,this._unwrap=!1,this._initialized=!1}function some(promises,howMany){if((0|howMany)!==howMany||howMany<0)return apiRejection("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var ret=new SomePromiseArray(promises),promise=ret.promise();return ret.setHowMany(howMany),ret.init(),promise}util.inherits(SomePromiseArray,PromiseArray),SomePromiseArray.prototype._init=function(){if(this._initialized)if(0!==this._howMany){this._init$(void 0,-5);var isArrayResolved=isArray(this._values);!this._isResolved()&&isArrayResolved&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}else this._resolve([])},SomePromiseArray.prototype.init=function(){this._initialized=!0,this._init()},SomePromiseArray.prototype.setUnwrap=function(){this._unwrap=!0},SomePromiseArray.prototype.howMany=function(){return this._howMany},SomePromiseArray.prototype.setHowMany=function(count){this._howMany=count},SomePromiseArray.prototype._promiseFulfilled=function(value){return this._addFulfilled(value),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},SomePromiseArray.prototype._promiseRejected=function(reason){return this._addRejected(reason),this._checkOutcome()},SomePromiseArray.prototype._promiseCancelled=function(){return this._values instanceof Promise||null==this._values?this._cancel():(this._addRejected(CANCELLATION),this._checkOutcome())},SomePromiseArray.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var e=new AggregateError,i=this.length();i<this._values.length;++i)this._values[i]!==CANCELLATION&&e.push(this._values[i]);return e.length>0?this._reject(e):this._cancel(),!0}return!1},SomePromiseArray.prototype._fulfilled=function(){return this._totalResolved},SomePromiseArray.prototype._rejected=function(){return this._values.length-this.length()},SomePromiseArray.prototype._addRejected=function(reason){this._values.push(reason)},SomePromiseArray.prototype._addFulfilled=function(value){this._values[this._totalResolved++]=value},SomePromiseArray.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},SomePromiseArray.prototype._getRangeError=function(count){var message="Input array must contain at least "+this._howMany+" items but contains only "+count+" items";return new RangeError(message)},SomePromiseArray.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},Promise.some=function(promises,howMany){return some(promises,howMany)},Promise.prototype.some=function(howMany){return some(this,howMany)},Promise._SomePromiseArray=SomePromiseArray}},function(module,exports,__webpack_require__){"use strict";module.exports=function(Promise,INTERNAL,debug){var util=__webpack_require__(1),TimeoutError=Promise.TimeoutError;function HandleWrapper(handle){this.handle=handle}HandleWrapper.prototype._resultCancelled=function(){clearTimeout(this.handle)};var afterValue=function(value){return delay(+this).thenReturn(value)},delay=Promise.delay=function(ms,value){var ret,handle;return void 0!==value?(ret=Promise.resolve(value)._then(afterValue,null,null,ms,void 0),debug.cancellation()&&value instanceof Promise&&ret._setOnCancel(value)):(ret=new Promise(INTERNAL),handle=setTimeout((function(){ret._fulfill()}),+ms),debug.cancellation()&&ret._setOnCancel(new HandleWrapper(handle)),ret._captureStackTrace()),ret._setAsyncGuaranteed(),ret};Promise.prototype.delay=function(ms){return delay(ms,this)};function successClear(value){return clearTimeout(this.handle),value}function failureClear(reason){throw clearTimeout(this.handle),reason}Promise.prototype.timeout=function(ms,message){var ret,parent;ms=+ms;var handleWrapper=new HandleWrapper(setTimeout((function(){ret.isPending()&&function(promise,message,parent){var err;err="string"!=typeof message?message instanceof Error?message:new TimeoutError("operation timed out"):new TimeoutError(message),util.markAsOriginatingFromRejection(err),promise._attachExtraTrace(err),promise._reject(err),null!=parent&&parent.cancel()}(ret,message,parent)}),ms));return debug.cancellation()?(parent=this.then(),(ret=parent._then(successClear,failureClear,void 0,handleWrapper,void 0))._setOnCancel(handleWrapper)):ret=this._then(successClear,failureClear,void 0,handleWrapper,void 0),ret}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(Promise,apiRejection,tryConvertToPromise,createContext,INTERNAL,debug){var util=__webpack_require__(1),TypeError=__webpack_require__(12).TypeError,inherits=__webpack_require__(1).inherits,errorObj=util.errorObj,tryCatch=util.tryCatch,NULL={};function thrower(e){setTimeout((function(){throw e}),0)}function dispose(resources,inspection){var i=0,len=resources.length,ret=new Promise(INTERNAL);return function iterator(){if(i>=len)return ret._fulfill();var maybePromise=function(thenable){var maybePromise=tryConvertToPromise(thenable);return maybePromise!==thenable&&"function"==typeof thenable._isDisposable&&"function"==typeof thenable._getDisposer&&thenable._isDisposable()&&maybePromise._setDisposable(thenable._getDisposer()),maybePromise}(resources[i++]);if(maybePromise instanceof Promise&&maybePromise._isDisposable()){try{maybePromise=tryConvertToPromise(maybePromise._getDisposer().tryDispose(inspection),resources.promise)}catch(e){return thrower(e)}if(maybePromise instanceof Promise)return maybePromise._then(iterator,thrower,null,null,null)}iterator()}(),ret}function Disposer(data,promise,context){this._data=data,this._promise=promise,this._context=context}function FunctionDisposer(fn,promise,context){this.constructor$(fn,promise,context)}function maybeUnwrapDisposer(value){return Disposer.isDisposer(value)?(this.resources[this.index]._setDisposable(value),value.promise()):value}function ResourceList(length){this.length=length,this.promise=null,this[length-1]=null}Disposer.prototype.data=function(){return this._data},Disposer.prototype.promise=function(){return this._promise},Disposer.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():NULL},Disposer.prototype.tryDispose=function(inspection){var resource=this.resource(),context=this._context;void 0!==context&&context._pushContext();var ret=resource!==NULL?this.doDispose(resource,inspection):null;return void 0!==context&&context._popContext(),this._promise._unsetDisposable(),this._data=null,ret},Disposer.isDisposer=function(d){return null!=d&&"function"==typeof d.resource&&"function"==typeof d.tryDispose},inherits(FunctionDisposer,Disposer),FunctionDisposer.prototype.doDispose=function(resource,inspection){return this.data().call(resource,resource,inspection)},ResourceList.prototype._resultCancelled=function(){for(var len=this.length,i=0;i<len;++i){var item=this[i];item instanceof Promise&&item.cancel()}},Promise.using=function(){var len=arguments.length;if(len<2)return apiRejection("you must pass at least 2 arguments to Promise.using");var input,fn=arguments[len-1];if("function"!=typeof fn)return apiRejection("expecting a function but got "+util.classString(fn));var spreadArgs=!0;2===len&&Array.isArray(arguments[0])?(len=(input=arguments[0]).length,spreadArgs=!1):(input=arguments,len--);for(var resources=new ResourceList(len),i=0;i<len;++i){var resource=input[i];if(Disposer.isDisposer(resource)){var disposer=resource;(resource=resource.promise())._setDisposable(disposer)}else{var maybePromise=tryConvertToPromise(resource);maybePromise instanceof Promise&&(resource=maybePromise._then(maybeUnwrapDisposer,null,null,{resources:resources,index:i},void 0))}resources[i]=resource}var reflectedResources=new Array(resources.length);for(i=0;i<reflectedResources.length;++i)reflectedResources[i]=Promise.resolve(resources[i]).reflect();var resultPromise=Promise.all(reflectedResources).then((function(inspections){for(var i=0;i<inspections.length;++i){var inspection=inspections[i];if(inspection.isRejected())return errorObj.e=inspection.error(),errorObj;if(!inspection.isFulfilled())return void resultPromise.cancel();inspections[i]=inspection.value()}promise._pushContext(),fn=tryCatch(fn);var ret=spreadArgs?fn.apply(void 0,inspections):fn(inspections),promiseCreated=promise._popContext();return debug.checkForgottenReturns(ret,promiseCreated,"Promise.using",promise),ret})),promise=resultPromise.lastly((function(){var inspection=new Promise.PromiseInspection(resultPromise);return dispose(resources,inspection)}));return resources.promise=promise,promise._setOnCancel(resources),promise},Promise.prototype._setDisposable=function(disposer){this._bitField=131072|this._bitField,this._disposer=disposer},Promise.prototype._isDisposable=function(){return(131072&this._bitField)>0},Promise.prototype._getDisposer=function(){return this._disposer},Promise.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},Promise.prototype.disposer=function(fn){if("function"==typeof fn)return new FunctionDisposer(fn,this,createContext());throw new TypeError}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(Promise){var SomePromiseArray=Promise._SomePromiseArray;function any(promises){var ret=new SomePromiseArray(promises),promise=ret.promise();return ret.setHowMany(1),ret.setUnwrap(),ret.init(),promise}Promise.any=function(promises){return any(promises)},Promise.prototype.any=function(){return any(this)}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(Promise,INTERNAL){var PromiseReduce=Promise.reduce,PromiseAll=Promise.all;function promiseAllThis(){return PromiseAll(this)}Promise.prototype.each=function(fn){return PromiseReduce(this,fn,INTERNAL,0)._then(promiseAllThis,void 0,void 0,this,void 0)},Promise.prototype.mapSeries=function(fn){return PromiseReduce(this,fn,INTERNAL,INTERNAL)},Promise.each=function(promises,fn){return PromiseReduce(promises,fn,INTERNAL,0)._then(promiseAllThis,void 0,void 0,promises,void 0)},Promise.mapSeries=function(promises,fn){return PromiseReduce(promises,fn,INTERNAL,INTERNAL)}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(Promise,INTERNAL){var PromiseMap=Promise.map;Promise.prototype.filter=function(fn,options){return PromiseMap(this,fn,options,INTERNAL)},Promise.filter=function(promises,fn,options){return PromiseMap(promises,fn,options,INTERNAL)}}},function(module,exports,__webpack_require__){"use strict";function setIfDefined(obj,prop,value){null!=value&&(obj[prop]=value)}var EMPTY_OPTIONS=Object.freeze({}),Args={assertQueue:function(queue,options){queue=queue||"",options=options||EMPTY_OPTIONS;var argt=Object.create(options.arguments||null);return setIfDefined(argt,"x-expires",options.expires),setIfDefined(argt,"x-message-ttl",options.messageTtl),setIfDefined(argt,"x-dead-letter-exchange",options.deadLetterExchange),setIfDefined(argt,"x-dead-letter-routing-key",options.deadLetterRoutingKey),setIfDefined(argt,"x-max-length",options.maxLength),setIfDefined(argt,"x-max-priority",options.maxPriority),setIfDefined(argt,"x-overflow",options.overflow),setIfDefined(argt,"x-queue-mode",options.queueMode),{queue:queue,exclusive:!!options.exclusive,durable:void 0===options.durable||options.durable,autoDelete:!!options.autoDelete,arguments:argt,passive:!1,ticket:0,nowait:!1}},checkQueue:function(queue){return{queue:queue,passive:!0,nowait:!1,durable:!0,autoDelete:!1,exclusive:!1,ticket:0}},deleteQueue:function(queue,options){return{queue:queue,ifUnused:!!(options=options||EMPTY_OPTIONS).ifUnused,ifEmpty:!!options.ifEmpty,ticket:0,nowait:!1}},purgeQueue:function(queue){return{queue:queue,ticket:0,nowait:!1}},bindQueue:function(queue,source,pattern,argt){return{queue:queue,exchange:source,routingKey:pattern,arguments:argt,ticket:0,nowait:!1}},unbindQueue:function(queue,source,pattern,argt){return{queue:queue,exchange:source,routingKey:pattern,arguments:argt,ticket:0,nowait:!1}},assertExchange:function(exchange,type,options){options=options||EMPTY_OPTIONS;var argt=Object.create(options.arguments||null);return setIfDefined(argt,"alternate-exchange",options.alternateExchange),{exchange:exchange,ticket:0,type:type,passive:!1,durable:void 0===options.durable||options.durable,autoDelete:!!options.autoDelete,internal:!!options.internal,nowait:!1,arguments:argt}},checkExchange:function(exchange){return{exchange:exchange,passive:!0,nowait:!1,durable:!0,internal:!1,type:"",autoDelete:!1,ticket:0}},deleteExchange:function(exchange,options){return{exchange:exchange,ifUnused:!!(options=options||EMPTY_OPTIONS).ifUnused,ticket:0,nowait:!1}},bindExchange:function(dest,source,pattern,argt){return{source:source,destination:dest,routingKey:pattern,arguments:argt,ticket:0,nowait:!1}},unbindExchange:function(dest,source,pattern,argt){return{source:source,destination:dest,routingKey:pattern,arguments:argt,ticket:0,nowait:!1}},publish:function(exchange,routingKey,options){function convertCC(cc){return void 0===cc?void 0:Array.isArray(cc)?cc.map(String):[String(cc)]}options=options||EMPTY_OPTIONS;var deliveryMode,headers=Object.create(options.headers||null);setIfDefined(headers,"CC",convertCC(options.CC)),setIfDefined(headers,"BCC",convertCC(options.BCC)),void 0!==options.persistent?deliveryMode=options.persistent?2:1:"number"==typeof options.deliveryMode?deliveryMode=options.deliveryMode:options.deliveryMode&&(deliveryMode=2);var expiration=options.expiration;return void 0!==expiration&&(expiration=expiration.toString()),{exchange:exchange,routingKey:routingKey,mandatory:!!options.mandatory,immediate:!1,ticket:void 0,contentType:options.contentType,contentEncoding:options.contentEncoding,headers:headers,deliveryMode:deliveryMode,priority:options.priority,correlationId:options.correlationId,replyTo:options.replyTo,expiration:expiration,messageId:options.messageId,timestamp:options.timestamp,type:options.type,userId:options.userId,appId:options.appId,clusterId:void 0}},consume:function(queue,options){options=options||EMPTY_OPTIONS;var argt=Object.create(options.arguments||null);return setIfDefined(argt,"x-priority",options.priority),{ticket:0,queue:queue,consumerTag:options.consumerTag||"",noLocal:!!options.noLocal,noAck:!!options.noAck,exclusive:!!options.exclusive,nowait:!1,arguments:argt}},cancel:function(consumerTag){return{consumerTag:consumerTag,nowait:!1}},get:function(queue,options){return{ticket:0,queue:queue,noAck:!!(options=options||EMPTY_OPTIONS).noAck}},ack:function(tag,allUpTo){return{deliveryTag:tag,multiple:!!allUpTo}},nack:function(tag,allUpTo,requeue){return{deliveryTag:tag,multiple:!!allUpTo,requeue:void 0===requeue||requeue}},reject:function(tag,requeue){return{deliveryTag:tag,requeue:void 0===requeue||requeue}},prefetch:function(count,global){return{prefetchCount:count||0,prefetchSize:0,global:!!global}},recover:function(){return{requeue:!0}}};module.exports=Object.freeze(Args)},function(module,exports){module.exports=function(module){return module.webpackPolyfill||(module.deprecate=function(){},module.paths=[],module.children||(module.children=[]),Object.defineProperty(module,"loaded",{enumerable:!0,get:function(){return module.l}}),Object.defineProperty(module,"id",{enumerable:!0,get:function(){return module.i}}),module.webpackPolyfill=1),module}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const utils_1=__webpack_require__(30);class AmqpMessage{constructor(opts){this.blackListed=()=>!(!this.discardMine||this.receiverId!==this.senderId||this.fromApi())||!(!this.discardFromApi||!this.fromApi()),this.fromApi=()=>this.message.properties.headers&&"true"===this.message.properties.headers[AmqpMessage.FROM_API_HEADER],this.ack=(opts={})=>{const{allUpTo:allUpTo=!1}=opts;this.channel.ack(this.message,allUpTo)},this.nack=(opts={})=>{const{allUpTo:allUpTo=!1,requeue:requeue=!0}=opts;this.channel.nack(this.message,allUpTo,requeue)},this.getContent=()=>this.content,this.getProperties=()=>this.message.properties,this.getFields=()=>this.message.fields,this.getChannelName=()=>this.channelName;const{message:message,receiverId:receiverId="",channel:channel,subscriptionOpts:subscriptionOpts={}}=opts,{discardMine:discardMine=!1,discardFromApi:discardFromApi=!1}=subscriptionOpts;this.message=message,this.content=utils_1.parseContent(message?message.content:"{}"),this.channel=channel;try{const[senderId,channelName]=this.message.fields.routingKey.split(".");this.senderId=senderId,this.channelName=channelName}catch(ex){console.error("Wrong routing key format")}this.receiverId=receiverId,this.discardMine=discardMine,this.discardFromApi=discardFromApi}}AmqpMessage.FROM_API_HEADER="x-from-sb-api",exports.default=AmqpMessage},function(module,exports,__webpack_require__){module.exports=__webpack_require__(190)},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(3),bind=__webpack_require__(75),Axios=__webpack_require__(191),mergeConfig=__webpack_require__(85);function createInstance(defaultConfig){var context=new Axios(defaultConfig),instance=bind(Axios.prototype.request,context);return utils.extend(instance,Axios.prototype,context),utils.extend(instance,context),instance}var axios=createInstance(__webpack_require__(77));axios.Axios=Axios,axios.create=function(instanceConfig){return createInstance(mergeConfig(axios.defaults,instanceConfig))},axios.Cancel=__webpack_require__(86),axios.CancelToken=__webpack_require__(210),axios.isCancel=__webpack_require__(76),axios.all=function(promises){return Promise.all(promises)},axios.spread=__webpack_require__(211),module.exports=axios,module.exports.default=axios},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(3),buildURL=__webpack_require__(50),InterceptorManager=__webpack_require__(192),dispatchRequest=__webpack_require__(193),mergeConfig=__webpack_require__(85);function Axios(instanceConfig){this.defaults=instanceConfig,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}Axios.prototype.request=function(config){"string"==typeof config?(config=arguments[1]||{}).url=arguments[0]:config=config||{},(config=mergeConfig(this.defaults,config)).method?config.method=config.method.toLowerCase():this.defaults.method?config.method=this.defaults.method.toLowerCase():config.method="get";var chain=[dispatchRequest,void 0],promise=Promise.resolve(config);for(this.interceptors.request.forEach((function(interceptor){chain.unshift(interceptor.fulfilled,interceptor.rejected)})),this.interceptors.response.forEach((function(interceptor){chain.push(interceptor.fulfilled,interceptor.rejected)}));chain.length;)promise=promise.then(chain.shift(),chain.shift());return promise},Axios.prototype.getUri=function(config){return config=mergeConfig(this.defaults,config),buildURL(config.url,config.params,config.paramsSerializer).replace(/^\?/,"")},utils.forEach(["delete","get","head","options"],(function(method){Axios.prototype[method]=function(url,config){return this.request(mergeConfig(config||{},{method:method,url:url}))}})),utils.forEach(["post","put","patch"],(function(method){Axios.prototype[method]=function(url,data,config){return this.request(mergeConfig(config||{},{method:method,url:url,data:data}))}})),module.exports=Axios},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(3);function InterceptorManager(){this.handlers=[]}InterceptorManager.prototype.use=function(fulfilled,rejected){return this.handlers.push({fulfilled:fulfilled,rejected:rejected}),this.handlers.length-1},InterceptorManager.prototype.eject=function(id){this.handlers[id]&&(this.handlers[id]=null)},InterceptorManager.prototype.forEach=function(fn){utils.forEach(this.handlers,(function(h){null!==h&&fn(h)}))},module.exports=InterceptorManager},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(3),transformData=__webpack_require__(194),isCancel=__webpack_require__(76),defaults=__webpack_require__(77);function throwIfCancellationRequested(config){config.cancelToken&&config.cancelToken.throwIfRequested()}module.exports=function(config){return throwIfCancellationRequested(config),config.headers=config.headers||{},config.data=transformData(config.data,config.headers,config.transformRequest),config.headers=utils.merge(config.headers.common||{},config.headers[config.method]||{},config.headers),utils.forEach(["delete","get","head","post","put","patch","common"],(function(method){delete config.headers[method]})),(config.adapter||defaults.adapter)(config).then((function(response){return throwIfCancellationRequested(config),response.data=transformData(response.data,response.headers,config.transformResponse),response}),(function(reason){return isCancel(reason)||(throwIfCancellationRequested(config),reason&&reason.response&&(reason.response.data=transformData(reason.response.data,reason.response.headers,config.transformResponse))),Promise.reject(reason)}))}},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(3);module.exports=function(data,headers,fns){return utils.forEach(fns,(function(fn){data=fn(data,headers)})),data}},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(3);module.exports=function(headers,normalizedName){utils.forEach(headers,(function(value,name){name!==normalizedName&&name.toUpperCase()===normalizedName.toUpperCase()&&(headers[normalizedName]=value,delete headers[name])}))}},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(3),settle=__webpack_require__(78),cookies=__webpack_require__(197),buildURL=__webpack_require__(50),buildFullPath=__webpack_require__(80),parseHeaders=__webpack_require__(200),isURLSameOrigin=__webpack_require__(201),createError=__webpack_require__(51);module.exports=function(config){return new Promise((function(resolve,reject){var requestData=config.data,requestHeaders=config.headers;utils.isFormData(requestData)&&delete requestHeaders["Content-Type"],(utils.isBlob(requestData)||utils.isFile(requestData))&&requestData.type&&delete requestHeaders["Content-Type"];var request=new XMLHttpRequest;if(config.auth){var username=config.auth.username||"",password=unescape(encodeURIComponent(config.auth.password))||"";requestHeaders.Authorization="Basic "+btoa(username+":"+password)}var fullPath=buildFullPath(config.baseURL,config.url);if(request.open(config.method.toUpperCase(),buildURL(fullPath,config.params,config.paramsSerializer),!0),request.timeout=config.timeout,request.onreadystatechange=function(){if(request&&4===request.readyState&&(0!==request.status||request.responseURL&&0===request.responseURL.indexOf("file:"))){var responseHeaders="getAllResponseHeaders"in request?parseHeaders(request.getAllResponseHeaders()):null,response={data:config.responseType&&"text"!==config.responseType?request.response:request.responseText,status:request.status,statusText:request.statusText,headers:responseHeaders,config:config,request:request};settle(resolve,reject,response),request=null}},request.onabort=function(){request&&(reject(createError("Request aborted",config,"ECONNABORTED",request)),request=null)},request.onerror=function(){reject(createError("Network Error",config,null,request)),request=null},request.ontimeout=function(){var timeoutErrorMessage="timeout of "+config.timeout+"ms exceeded";config.timeoutErrorMessage&&(timeoutErrorMessage=config.timeoutErrorMessage),reject(createError(timeoutErrorMessage,config,"ECONNABORTED",request)),request=null},utils.isStandardBrowserEnv()){var xsrfValue=(config.withCredentials||isURLSameOrigin(fullPath))&&config.xsrfCookieName?cookies.read(config.xsrfCookieName):void 0;xsrfValue&&(requestHeaders[config.xsrfHeaderName]=xsrfValue)}if("setRequestHeader"in request&&utils.forEach(requestHeaders,(function(val,key){void 0===requestData&&"content-type"===key.toLowerCase()?delete requestHeaders[key]:request.setRequestHeader(key,val)})),utils.isUndefined(config.withCredentials)||(request.withCredentials=!!config.withCredentials),config.responseType)try{request.responseType=config.responseType}catch(e){if("json"!==config.responseType)throw e}"function"==typeof config.onDownloadProgress&&request.addEventListener("progress",config.onDownloadProgress),"function"==typeof config.onUploadProgress&&request.upload&&request.upload.addEventListener("progress",config.onUploadProgress),config.cancelToken&&config.cancelToken.promise.then((function(cancel){request&&(request.abort(),reject(cancel),request=null)})),requestData||(requestData=null),request.send(requestData)}))}},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(3);module.exports=utils.isStandardBrowserEnv()?{write:function(name,value,expires,path,domain,secure){var cookie=[];cookie.push(name+"="+encodeURIComponent(value)),utils.isNumber(expires)&&cookie.push("expires="+new Date(expires).toGMTString()),utils.isString(path)&&cookie.push("path="+path),utils.isString(domain)&&cookie.push("domain="+domain),!0===secure&&cookie.push("secure"),document.cookie=cookie.join("; ")},read:function(name){var match=document.cookie.match(new RegExp("(^|;\\s*)("+name+")=([^;]*)"));return match?decodeURIComponent(match[3]):null},remove:function(name){this.write(name,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(url){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(url)}},function(module,exports,__webpack_require__){"use strict";module.exports=function(baseURL,relativeURL){return relativeURL?baseURL.replace(/\/+$/,"")+"/"+relativeURL.replace(/^\/+/,""):baseURL}},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(3),ignoreDuplicateOf=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];module.exports=function(headers){var key,val,i,parsed={};return headers?(utils.forEach(headers.split("\n"),(function(line){if(i=line.indexOf(":"),key=utils.trim(line.substr(0,i)).toLowerCase(),val=utils.trim(line.substr(i+1)),key){if(parsed[key]&&ignoreDuplicateOf.indexOf(key)>=0)return;parsed[key]="set-cookie"===key?(parsed[key]?parsed[key]:[]).concat([val]):parsed[key]?parsed[key]+", "+val:val}})),parsed):parsed}},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(3);module.exports=utils.isStandardBrowserEnv()?function(){var originURL,msie=/(msie|trident)/i.test(navigator.userAgent),urlParsingNode=document.createElement("a");function resolveURL(url){var href=url;return msie&&(urlParsingNode.setAttribute("href",href),href=urlParsingNode.href),urlParsingNode.setAttribute("href",href),{href:urlParsingNode.href,protocol:urlParsingNode.protocol?urlParsingNode.protocol.replace(/:$/,""):"",host:urlParsingNode.host,search:urlParsingNode.search?urlParsingNode.search.replace(/^\?/,""):"",hash:urlParsingNode.hash?urlParsingNode.hash.replace(/^#/,""):"",hostname:urlParsingNode.hostname,port:urlParsingNode.port,pathname:"/"===urlParsingNode.pathname.charAt(0)?urlParsingNode.pathname:"/"+urlParsingNode.pathname}}return originURL=resolveURL(window.location.href),function(requestURL){var parsed=utils.isString(requestURL)?resolveURL(requestURL):requestURL;return parsed.protocol===originURL.protocol&&parsed.host===originURL.host}}():function(){return!0}},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(3),settle=__webpack_require__(78),buildFullPath=__webpack_require__(80),buildURL=__webpack_require__(50),http=__webpack_require__(35),https=__webpack_require__(52),httpFollow=__webpack_require__(81).http,httpsFollow=__webpack_require__(81).https,url=__webpack_require__(31),zlib=__webpack_require__(84),pkg=__webpack_require__(209),createError=__webpack_require__(51),enhanceError=__webpack_require__(79),isHttps=/https:?/;module.exports=function(config){return new Promise((function(resolvePromise,rejectPromise){var resolve=function(value){resolvePromise(value)},reject=function(value){rejectPromise(value)},data=config.data,headers=config.headers;if(headers["User-Agent"]||headers["user-agent"]||(headers["User-Agent"]="axios/"+pkg.version),data&&!utils.isStream(data)){if(Buffer.isBuffer(data));else if(utils.isArrayBuffer(data))data=Buffer.from(new Uint8Array(data));else{if(!utils.isString(data))return reject(createError("Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream",config));data=Buffer.from(data,"utf-8")}headers["Content-Length"]=data.length}var auth=void 0;config.auth&&(auth=(config.auth.username||"")+":"+(config.auth.password||""));var fullPath=buildFullPath(config.baseURL,config.url),parsed=url.parse(fullPath),protocol=parsed.protocol||"http:";if(!auth&&parsed.auth){var urlAuth=parsed.auth.split(":");auth=(urlAuth[0]||"")+":"+(urlAuth[1]||"")}auth&&delete headers.Authorization;var isHttpsRequest=isHttps.test(protocol),agent=isHttpsRequest?config.httpsAgent:config.httpAgent,options={path:buildURL(parsed.path,config.params,config.paramsSerializer).replace(/^\?/,""),method:config.method.toUpperCase(),headers:headers,agent:agent,agents:{http:config.httpAgent,https:config.httpsAgent},auth:auth};config.socketPath?options.socketPath=config.socketPath:(options.hostname=parsed.hostname,options.port=parsed.port);var transport,proxy=config.proxy;if(!proxy&&!1!==proxy){var proxyEnv=protocol.slice(0,-1)+"_proxy",proxyUrl=process.env[proxyEnv]||process.env[proxyEnv.toUpperCase()];if(proxyUrl){var parsedProxyUrl=url.parse(proxyUrl),noProxyEnv=process.env.no_proxy||process.env.NO_PROXY,shouldProxy=!0;if(noProxyEnv)shouldProxy=!noProxyEnv.split(",").map((function(s){return s.trim()})).some((function(proxyElement){return!!proxyElement&&("*"===proxyElement||("."===proxyElement[0]&&parsed.hostname.substr(parsed.hostname.length-proxyElement.length)===proxyElement||parsed.hostname===proxyElement))}));if(shouldProxy&&(proxy={host:parsedProxyUrl.hostname,port:parsedProxyUrl.port},parsedProxyUrl.auth)){var proxyUrlAuth=parsedProxyUrl.auth.split(":");proxy.auth={username:proxyUrlAuth[0],password:proxyUrlAuth[1]}}}}if(proxy&&(options.hostname=proxy.host,options.host=proxy.host,options.headers.host=parsed.hostname+(parsed.port?":"+parsed.port:""),options.port=proxy.port,options.path=protocol+"//"+parsed.hostname+(parsed.port?":"+parsed.port:"")+options.path,proxy.auth)){var base64=Buffer.from(proxy.auth.username+":"+proxy.auth.password,"utf8").toString("base64");options.headers["Proxy-Authorization"]="Basic "+base64}var isHttpsProxy=isHttpsRequest&&(!proxy||isHttps.test(proxy.protocol));config.transport?transport=config.transport:0===config.maxRedirects?transport=isHttpsProxy?https:http:(config.maxRedirects&&(options.maxRedirects=config.maxRedirects),transport=isHttpsProxy?httpsFollow:httpFollow),config.maxBodyLength>-1&&(options.maxBodyLength=config.maxBodyLength);var req=transport.request(options,(function(res){if(!req.aborted){var stream=res,lastRequest=res.req||req;if(204!==res.statusCode&&"HEAD"!==lastRequest.method&&!1!==config.decompress)switch(res.headers["content-encoding"]){case"gzip":case"compress":case"deflate":stream=stream.pipe(zlib.createUnzip()),delete res.headers["content-encoding"]}var response={status:res.statusCode,statusText:res.statusMessage,headers:res.headers,config:config,request:lastRequest};if("stream"===config.responseType)response.data=stream,settle(resolve,reject,response);else{var responseBuffer=[];stream.on("data",(function(chunk){responseBuffer.push(chunk),config.maxContentLength>-1&&Buffer.concat(responseBuffer).length>config.maxContentLength&&(stream.destroy(),reject(createError("maxContentLength size of "+config.maxContentLength+" exceeded",config,null,lastRequest)))})),stream.on("error",(function(err){req.aborted||reject(enhanceError(err,config,null,lastRequest))})),stream.on("end",(function(){var responseData=Buffer.concat(responseBuffer);"arraybuffer"!==config.responseType&&(responseData=responseData.toString(config.responseEncoding),config.responseEncoding&&"utf8"!==config.responseEncoding||(responseData=utils.stripBOM(responseData))),response.data=responseData,settle(resolve,reject,response)}))}}}));req.on("error",(function(err){req.aborted&&"ERR_FR_TOO_MANY_REDIRECTS"!==err.code||reject(enhanceError(err,config,null,req))})),config.timeout&&req.setTimeout(config.timeout,(function(){req.abort(),reject(createError("timeout of "+config.timeout+"ms exceeded",config,"ECONNABORTED",req))})),config.cancelToken&&config.cancelToken.promise.then((function(cancel){req.aborted||(req.abort(),reject(cancel))})),utils.isStream(data)?data.on("error",(function(err){reject(enhanceError(err,config,null,req))})).pipe(req):req.end(data)}))}},function(module,exports,__webpack_require__){var debug;try{debug=__webpack_require__(13)("follow-redirects")}catch(error){debug=function(){}}module.exports=debug},function(module,exports,__webpack_require__){exports.formatArgs=function(args){if(args[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+args[0]+(this.useColors?"%c ":" ")+"+"+module.exports.humanize(this.diff),!this.useColors)return;const c="color: "+this.color;args.splice(1,0,c,"color: inherit");let index=0,lastC=0;args[0].replace(/%[a-zA-Z%]/g,(match=>{"%%"!==match&&(index++,"%c"===match&&(lastC=index))})),args.splice(lastC,0,c)},exports.save=function(namespaces){try{namespaces?exports.storage.setItem("debug",namespaces):exports.storage.removeItem("debug")}catch(error){}},exports.load=function(){let r;try{r=exports.storage.getItem("debug")}catch(error){}!r&&"undefined"!=typeof process&&"env"in process&&(r=process.env.DEBUG);return r},exports.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},exports.storage=function(){try{return localStorage}catch(error){}}(),exports.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],exports.log=console.debug||console.log||(()=>{}),module.exports=__webpack_require__(82)(exports);const{formatters:formatters}=module.exports;formatters.j=function(v){try{return JSON.stringify(v)}catch(error){return"[UnexpectedJSONParseError]: "+error.message}}},function(module,exports){var s=1e3,m=60*s,h=60*m,d=24*h,w=7*d,y=365.25*d;function plural(ms,msAbs,n,name){var isPlural=msAbs>=1.5*n;return Math.round(ms/n)+" "+name+(isPlural?"s":"")}module.exports=function(val,options){options=options||{};var type=typeof val;if("string"===type&&val.length>0)return function(str){if((str=String(str)).length>100)return;var match=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(str);if(!match)return;var n=parseFloat(match[1]);switch((match[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*y;case"weeks":case"week":case"w":return n*w;case"days":case"day":case"d":return n*d;case"hours":case"hour":case"hrs":case"hr":case"h":return n*h;case"minutes":case"minute":case"mins":case"min":case"m":return n*m;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}(val);if("number"===type&&isFinite(val))return options.long?function(ms){var msAbs=Math.abs(ms);if(msAbs>=d)return plural(ms,msAbs,d,"day");if(msAbs>=h)return plural(ms,msAbs,h,"hour");if(msAbs>=m)return plural(ms,msAbs,m,"minute");if(msAbs>=s)return plural(ms,msAbs,s,"second");return ms+" ms"}(val):function(ms){var msAbs=Math.abs(ms);if(msAbs>=d)return Math.round(ms/d)+"d";if(msAbs>=h)return Math.round(ms/h)+"h";if(msAbs>=m)return Math.round(ms/m)+"m";if(msAbs>=s)return Math.round(ms/s)+"s";return ms+"ms"}(val);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(val))}},function(module,exports,__webpack_require__){const tty=__webpack_require__(44),util=__webpack_require__(0);exports.init=function(debug){debug.inspectOpts={};const keys=Object.keys(exports.inspectOpts);for(let i=0;i<keys.length;i++)debug.inspectOpts[keys[i]]=exports.inspectOpts[keys[i]]},exports.log=function(...args){return process.stderr.write(util.format(...args)+"\n")},exports.formatArgs=function(args){const{namespace:name,useColors:useColors}=this;if(useColors){const c=this.color,colorCode="[3"+(c<8?c:"8;5;"+c),prefix=`  ${colorCode};1m${name} [0m`;args[0]=prefix+args[0].split("\n").join("\n"+prefix),args.push(colorCode+"m+"+module.exports.humanize(this.diff)+"[0m")}else args[0]=function(){if(exports.inspectOpts.hideDate)return"";return(new Date).toISOString()+" "}()+name+" "+args[0]},exports.save=function(namespaces){namespaces?process.env.DEBUG=namespaces:delete process.env.DEBUG},exports.load=function(){return process.env.DEBUG},exports.useColors=function(){return"colors"in exports.inspectOpts?Boolean(exports.inspectOpts.colors):tty.isatty(process.stderr.fd)},exports.colors=[6,2,3,4,5,1];try{const supportsColor=__webpack_require__(207);supportsColor&&(supportsColor.stderr||supportsColor).level>=2&&(exports.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(error){}exports.inspectOpts=Object.keys(process.env).filter((key=>/^debug_/i.test(key))).reduce(((obj,key)=>{const prop=key.substring(6).toLowerCase().replace(/_([a-z])/g,((_,k)=>k.toUpperCase()));let val=process.env[key];return val=!!/^(yes|on|true|enabled)$/i.test(val)||!/^(no|off|false|disabled)$/i.test(val)&&("null"===val?null:Number(val)),obj[prop]=val,obj}),{}),module.exports=__webpack_require__(82)(exports);const{formatters:formatters}=module.exports;formatters.o=function(v){return this.inspectOpts.colors=this.useColors,util.inspect(v,this.inspectOpts).replace(/\s*\n\s*/g," ")},formatters.O=function(v){return this.inspectOpts.colors=this.useColors,util.inspect(v,this.inspectOpts)}},function(module,exports,__webpack_require__){"use strict";const os=__webpack_require__(83),tty=__webpack_require__(44),hasFlag=__webpack_require__(208),{env:env}=process;let forceColor;function translateLevel(level){return 0!==level&&{level:level,hasBasic:!0,has256:level>=2,has16m:level>=3}}function supportsColor(haveStream,streamIsTTY){if(0===forceColor)return 0;if(hasFlag("color=16m")||hasFlag("color=full")||hasFlag("color=truecolor"))return 3;if(hasFlag("color=256"))return 2;if(haveStream&&!streamIsTTY&&void 0===forceColor)return 0;const min=forceColor||0;if("dumb"===env.TERM)return min;if("win32"===process.platform){const osRelease=os.release().split(".");return Number(osRelease[0])>=10&&Number(osRelease[2])>=10586?Number(osRelease[2])>=14931?3:2:1}if("CI"in env)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some((sign=>sign in env))||"codeship"===env.CI_NAME?1:min;if("TEAMCITY_VERSION"in env)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(env.TEAMCITY_VERSION)?1:0;if("truecolor"===env.COLORTERM)return 3;if("TERM_PROGRAM"in env){const version=parseInt((env.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(env.TERM_PROGRAM){case"iTerm.app":return version>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(env.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(env.TERM)||"COLORTERM"in env?1:min}hasFlag("no-color")||hasFlag("no-colors")||hasFlag("color=false")||hasFlag("color=never")?forceColor=0:(hasFlag("color")||hasFlag("colors")||hasFlag("color=true")||hasFlag("color=always"))&&(forceColor=1),"FORCE_COLOR"in env&&(forceColor="true"===env.FORCE_COLOR?1:"false"===env.FORCE_COLOR?0:0===env.FORCE_COLOR.length?1:Math.min(parseInt(env.FORCE_COLOR,10),3)),module.exports={supportsColor:function(stream){return translateLevel(supportsColor(stream,stream&&stream.isTTY))},stdout:translateLevel(supportsColor(!0,tty.isatty(1))),stderr:translateLevel(supportsColor(!0,tty.isatty(2)))}},function(module,exports,__webpack_require__){"use strict";module.exports=(flag,argv=process.argv)=>{const prefix=flag.startsWith("-")?"":1===flag.length?"-":"--",position=argv.indexOf(prefix+flag),terminatorPosition=argv.indexOf("--");return-1!==position&&(-1===terminatorPosition||position<terminatorPosition)}},function(module){module.exports=JSON.parse('{"name":"axios","version":"0.20.0","description":"Promise based HTTP client for the browser and node.js","main":"index.js","scripts":{"test":"grunt test && bundlesize","start":"node ./sandbox/server.js","build":"NODE_ENV=production grunt build","preversion":"npm test","version":"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json","postversion":"git push && git push --tags","examples":"node ./examples/server.js","coveralls":"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js","fix":"eslint --fix lib/**/*.js"},"repository":{"type":"git","url":"https://github.com/axios/axios.git"},"keywords":["xhr","http","ajax","promise","node"],"author":"Matt Zabriskie","license":"MIT","bugs":{"url":"https://github.com/axios/axios/issues"},"homepage":"https://github.com/axios/axios","devDependencies":{"bundlesize":"^0.17.0","coveralls":"^3.0.0","es6-promise":"^4.2.4","grunt":"^1.0.2","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^20.1.0","grunt-karma":"^2.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^1.0.18","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1","karma":"^1.3.0","karma-chrome-launcher":"^2.2.0","karma-coverage":"^1.1.1","karma-firefox-launcher":"^1.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-opera-launcher":"^1.0.0","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^1.2.0","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.7","karma-webpack":"^1.7.0","load-grunt-tasks":"^3.5.2","minimist":"^1.2.0","mocha":"^5.2.0","sinon":"^4.5.0","typescript":"^2.8.1","url-search-params":"^0.10.0","webpack":"^1.13.1","webpack-dev-server":"^1.14.1"},"browser":{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},"jsdelivr":"dist/axios.min.js","unpkg":"dist/axios.min.js","typings":"./index.d.ts","dependencies":{"follow-redirects":"^1.10.0"},"bundlesize":[{"path":"./dist/axios.min.js","threshold":"5kB"}]}')},function(module,exports,__webpack_require__){"use strict";var Cancel=__webpack_require__(86);function CancelToken(executor){if("function"!=typeof executor)throw new TypeError("executor must be a function.");var resolvePromise;this.promise=new Promise((function(resolve){resolvePromise=resolve}));var token=this;executor((function(message){token.reason||(token.reason=new Cancel(message),resolvePromise(token.reason))}))}CancelToken.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},CancelToken.source=function(){var cancel;return{token:new CancelToken((function(c){cancel=c})),cancel:cancel}},module.exports=CancelToken},function(module,exports,__webpack_require__){"use strict";module.exports=function(callback){return function(arr){return callback.apply(null,arr)}}},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__,_processKeys,camelize,pascalize,decamelize,toString,_isFunction,_isObject,_isArray,_isDate,_isRegExp,_isBoolean,_isNumerical,_processor;_processKeys=function(convert,obj,options){if(!_isObject(obj)||_isDate(obj)||_isRegExp(obj)||_isBoolean(obj)||_isFunction(obj))return obj;var output,i=0,l=0;if(_isArray(obj))for(output=[],l=obj.length;i<l;i++)output.push(_processKeys(convert,obj[i],options));else for(var key in output={},obj)Object.prototype.hasOwnProperty.call(obj,key)&&(output[convert(key,options)]=_processKeys(convert,obj[key],options));return output},camelize=function(string){return _isNumerical(string)?string:(string=string.replace(/[\-_\s]+(.)?/g,(function(match,chr){return chr?chr.toUpperCase():""}))).substr(0,1).toLowerCase()+string.substr(1)},pascalize=function(string){var camelized=camelize(string);return camelized.substr(0,1).toUpperCase()+camelized.substr(1)},decamelize=function(string,options){return function(string,options){var separator=(options=options||{}).separator||"_",split=options.split||/(?=[A-Z])/;return string.split(split).join(separator)}(string,options).toLowerCase()},toString=Object.prototype.toString,_isFunction=function(obj){return"function"==typeof obj},_isObject=function(obj){return obj===Object(obj)},_isArray=function(obj){return"[object Array]"==toString.call(obj)},_isDate=function(obj){return"[object Date]"==toString.call(obj)},_isRegExp=function(obj){return"[object RegExp]"==toString.call(obj)},_isBoolean=function(obj){return"[object Boolean]"==toString.call(obj)},_isNumerical=function(obj){return(obj-=0)==obj},_processor=function(convert,options){var callback=options&&"process"in options?options.process:options;return"function"!=typeof callback?convert:function(string,options){return callback(string,convert,options)}},void 0===(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof(__WEBPACK_AMD_DEFINE_FACTORY__={camelize:camelize,decamelize:decamelize,pascalize:pascalize,depascalize:decamelize,camelizeKeys:function(object,options){return _processKeys(_processor(camelize,options),object)},decamelizeKeys:function(object,options){return _processKeys(_processor(decamelize,options),object,options)},pascalizeKeys:function(object,options){return _processKeys(_processor(pascalize,options),object)},depascalizeKeys:function(){return this.decamelizeKeys.apply(this,arguments)}})?__WEBPACK_AMD_DEFINE_FACTORY__.call(exports,__webpack_require__,exports,module):__WEBPACK_AMD_DEFINE_FACTORY__)||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__,definition;definition=function(){function normalize(strArray){var resultArray=[];if(0===strArray.length)return"";if("string"!=typeof strArray[0])throw new TypeError("Url must be a string. Received "+strArray[0]);if(strArray[0].match(/^[^/:]+:\/*$/)&&strArray.length>1){var first=strArray.shift();strArray[0]=first+strArray[0]}strArray[0].match(/^file:\/\/\//)?strArray[0]=strArray[0].replace(/^([^/:]+):\/*/,"$1:///"):strArray[0]=strArray[0].replace(/^([^/:]+):\/*/,"$1://");for(var i=0;i<strArray.length;i++){var component=strArray[i];if("string"!=typeof component)throw new TypeError("Url must be a string. Received "+component);""!==component&&(i>0&&(component=component.replace(/^[\/]+/,"")),component=i<strArray.length-1?component.replace(/[\/]+$/,""):component.replace(/[\/]+$/,"/"),resultArray.push(component))}var str=resultArray.join("/"),parts=(str=str.replace(/\/(\?|&|#[^!])/g,"$1")).split("?");return str=parts.shift()+(parts.length>0?"?":"")+parts.join("&")}return function(){return normalize("object"==typeof arguments[0]?arguments[0]:[].slice.call(arguments))}},module.exports?module.exports=definition():void 0===(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof(__WEBPACK_AMD_DEFINE_FACTORY__=definition)?__WEBPACK_AMD_DEFINE_FACTORY__.call(exports,__webpack_require__,exports,module):__WEBPACK_AMD_DEFINE_FACTORY__)||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const tslib_1=__webpack_require__(11),util_1=__webpack_require__(0),amqpClient_1=tslib_1.__importDefault(__webpack_require__(61));class AmqpStreamClient extends amqpClient_1.default{constructor(opts={}){super(opts),this.streamFrom=(streamHooks=[],opts={})=>tslib_1.__awaiter(this,void 0,void 0,(function*(){const hooks=Array.isArray(streamHooks)?streamHooks:[streamHooks],names=[];for(let index=0;index<hooks.length;index+=1){const streamHook=hooks[index],name=this.addAmqpStreamListener(streamHook,opts);yield this.bindAmqpStreamListener(name),names.push(name)}return names})),this.removeAmqpStreamListener=name=>tslib_1.__awaiter(this,void 0,void 0,(function*(){util_1.isNullOrUndefined(this.amqpStreamListeners[name])?this.log("error",`AMQP listener ${name} does not exist.`):(yield this.unsubscribe(this.amqpStreamListeners[name].consumerTag),delete this.amqpStreamListeners[name])})),this.clearStreamConsumers=()=>{const names=Object.keys(this.amqpStreamListeners);for(let index=0;index<names.length;index+=1){const name=names[index];delete this.amqpStreamListeners[name].consumerTag}},this.addAmqpStreamListener=(streamHook,opts={})=>{const name="subscription-"+(new Date).getTime();return this.amqpStreamListeners[name]={streamHook:streamHook,opts:opts},name},this.bindAmqpStreamListeners=()=>tslib_1.__awaiter(this,void 0,void 0,(function*(){const names=Object.keys(this.amqpStreamListeners);for(let index=0;index<names.length;index+=1){const name=names[index];yield this.bindAmqpStreamListener(name)}})),this.bindAmqpStreamListener=name=>tslib_1.__awaiter(this,void 0,void 0,(function*(){if(util_1.isNullOrUndefined(this.amqpStreamListeners[name]))return void this.log("error",`Listner ${name} does not exist.`);if(!util_1.isNullOrUndefined(this.amqpStreamListeners[name].consumerTag))return void this.log("warn",`Listner ${name} already bound to a consumer.`);const{streamHook:streamHook,opts:opts}=this.amqpStreamListeners[name],{stream:stream,deviceId:deviceId,channel:channel,cache:cache=!0,topic:topic,routingKey:routingKey,callback:callback}=streamHook,noAck=util_1.isNullOrUndefined(opts.ack);if(util_1.isNullOrUndefined(stream)&&(util_1.isNullOrUndefined(channel)||util_1.isNullOrUndefined(deviceId)))throw new Error(this.getClassName()+" - Missing Stream or Device ID and Channel");if(util_1.isNullOrUndefined(callback))throw new Error(this.getClassName()+" - Missing Callback");const currentTime=(new Date).getTime();let tempQueue,streamName;const ch=yield this.createChannel("input");try{if(stream){if(!this.liveStreamExists(stream))throw new Error(`${this.getClassName()} - Stream ${stream} does not exist`);if(cache)tempQueue=this.cachedStreamQueue(stream),streamName=tempQueue,yield ch.checkQueue(tempQueue);else{const streamExchange=this.exchangeName(stream,this.liveStreamSuffix);streamName=streamExchange,tempQueue=this.tempQueue(stream,this.liveStreamSuffix,currentTime),yield ch.checkExchange(streamExchange),yield ch.assertQueue(tempQueue,this.streamQueueArguments),yield ch.bindQueue(tempQueue,streamExchange,routingKey)}}else{const channelExchangeName=this.exchangeName(deviceId,channel);streamName=channelExchangeName,tempQueue=this.tempQueue(deviceId,channel,currentTime),yield ch.checkExchange(channelExchangeName),yield ch.assertQueue(tempQueue,this.streamQueueArguments),yield ch.bindQueue(tempQueue,channelExchangeName,this.streamRoutingKeyFor({deviceId:deviceId,channel:channel,routingKey:routingKey,topic:topic}))}const{consumerTag:consumerTag}=yield ch.consume(tempQueue,this.consumeCallback.bind(this,ch,callback,opts),{noAck:noAck});this.log("debug",`Streaming from ${streamName}..`),this.amqpStreamListeners[name].consumerTag=consumerTag}catch(error){throw this.log("error","Error adding stream hook",streamHook),error}})),this.cachedStreamQueue=streamName=>`${streamName}.${this.liveStreamSuffix}`,this.streamRoutingKeyFor=(opts={})=>{const{deviceId:deviceId="",channel:channel="",routingKey:routingKey="",topic:topic=""}=opts;if(0===routingKey.length&&0===deviceId.length)return this.defaultStreamRoutingKey;if(routingKey.length>0)return routingKey;let streamRoutingKey=deviceId||"";return channel&&(streamRoutingKey+="."+channel),topic&&(streamRoutingKey+="."+topic),""+streamRoutingKey},this.defaultStreamRoutingKey="#",this.streamQueueArguments={exclusive:!0,autoDelete:!0,durable:!1},this.amqpStreamListeners={},this.on("connect",(()=>{this.bindAmqpStreamListeners()})),this.on("disconnect",(()=>{this.amqpStreamListeners={}})),this.on("channelClose",(()=>{this.clearStreamConsumers()}))}}delete AmqpStreamClient.prototype.onMessage,delete AmqpStreamClient.prototype.publish,exports.default=AmqpStreamClient},function(module,exports,__webpack_require__){"use strict";const mqtt=__webpack_require__(216);class AsyncClient{constructor(client){this._client=client}set handleMessage(newHandler){this._client.handleMessage=newHandler}get handleMessage(){return this._client.handleMessage}get connected(){return this._client.connected}get reconnecting(){return this._client.reconnecting}publish(...args){return new Promise(((resolve,reject)=>{this._client.publish(...args,((err,result)=>{err?reject(err):resolve(result)}))}))}subscribe(...args){return new Promise(((resolve,reject)=>{this._client.subscribe(...args,((err,result)=>{err?reject(err):resolve(result)}))}))}unsubscribe(...args){return new Promise(((resolve,reject)=>{this._client.unsubscribe(...args,((err,result)=>{err?reject(err):resolve(result)}))}))}end(...args){return new Promise(((resolve,reject)=>{this._client.end(...args,((err,result)=>{err?reject(err):resolve(result)}))}))}reconnect(...args){return this._client.reconnect(...args)}addListener(...args){return this._client.addListener(...args)}emit(...args){return this._client.emit(...args)}eventNames(...args){return this._client.eventNames(...args)}getLastMessageId(...args){return this._client.getLastMessageId(...args)}getMaxListeners(...args){return this._client.getMaxListeners(...args)}listenerCount(...args){return this._client.listenerCount(...args)}listeners(...args){return this._client.listeners(...args)}off(...args){return this._client.off(...args)}on(...args){return this._client.on(...args)}once(...args){return this._client.once(...args)}prependListener(...args){return this._client.prependListener(...args)}prependOnceListener(...args){return this._client.prependOnceListener(...args)}rawListeners(...args){return this._client.rawListeners(...args)}removeAllListeners(...args){return this._client.removeAllListeners(...args)}removeListener(...args){return this._client.removeListener(...args)}removeOutgoingMessage(...args){return this._client.removeOutgoingMessage(...args)}setMaxListeners(...args){return this._client.setMaxListeners(...args)}}module.exports={connect(brokerURL,opts){const client=mqtt.connect(brokerURL,opts);return new AsyncClient(client)},connectAsync(brokerURL,opts,allowRetries=!0){const client=mqtt.connect(brokerURL,opts),asyncClient=new AsyncClient(client);return new Promise(((resolve,reject)=>{const promiseResolutionListeners={connect:connack=>{removePromiseResolutionListeners(),resolve(asyncClient)},end:()=>{removePromiseResolutionListeners(),resolve(asyncClient)},error:err=>{removePromiseResolutionListeners(),client.end(),reject(err)}};function removePromiseResolutionListeners(){Object.keys(promiseResolutionListeners).forEach((eventName=>{client.removeListener(eventName,promiseResolutionListeners[eventName])}))}!1===allowRetries&&(promiseResolutionListeners.close=()=>{promiseResolutionListeners.error("Couldn't connect to server")}),Object.keys(promiseResolutionListeners).forEach((eventName=>{client.on(eventName,promiseResolutionListeners[eventName])}))}))},AsyncClient:AsyncClient}},function(module,exports,__webpack_require__){var MqttClient=__webpack_require__(88),connect=__webpack_require__(290),Store=__webpack_require__(53);module.exports.connect=connect,module.exports.MqttClient=MqttClient,module.exports.Client=MqttClient,module.exports.Store=Store},function(module,exports){var toString={}.toString;module.exports=Array.isArray||function(arr){return"[object Array]"==toString.call(arr)}},function(module,exports,__webpack_require__){"use strict";var Buffer=__webpack_require__(36).Buffer,util=__webpack_require__(0);module.exports=function(){function BufferList(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,BufferList),this.head=null,this.tail=null,this.length=0}return BufferList.prototype.push=function(v){var entry={data:v,next:null};this.length>0?this.tail.next=entry:this.head=entry,this.tail=entry,++this.length},BufferList.prototype.unshift=function(v){var entry={data:v,next:this.head};0===this.length&&(this.tail=entry),this.head=entry,++this.length},BufferList.prototype.shift=function(){if(0!==this.length){var ret=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,ret}},BufferList.prototype.clear=function(){this.head=this.tail=null,this.length=0},BufferList.prototype.join=function(s){if(0===this.length)return"";for(var p=this.head,ret=""+p.data;p=p.next;)ret+=s+p.data;return ret},BufferList.prototype.concat=function(n){if(0===this.length)return Buffer.alloc(0);if(1===this.length)return this.head.data;for(var src,target,offset,ret=Buffer.allocUnsafe(n>>>0),p=this.head,i=0;p;)src=p.data,target=ret,offset=i,src.copy(target,offset),i+=p.data.length,p=p.next;return ret},BufferList}(),util&&util.inspect&&util.inspect.custom&&(module.exports.prototype[util.inspect.custom]=function(){var obj=util.inspect({length:this.length});return this.constructor.name+" "+obj})},function(module,exports,__webpack_require__){"use strict";module.exports=PassThrough;var Transform=__webpack_require__(95),util=Object.create(__webpack_require__(7));function PassThrough(options){if(!(this instanceof PassThrough))return new PassThrough(options);Transform.call(this,options)}util.inherits=__webpack_require__(2),util.inherits(PassThrough,Transform),PassThrough.prototype._transform=function(chunk,encoding,cb){cb(null,chunk)}},function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(221)()?Map:__webpack_require__(222)},function(module,exports,__webpack_require__){"use strict";module.exports=function(){var map,result;if("function"!=typeof Map)return!1;try{map=new Map([["raz","one"],["dwa","two"],["trzy","three"]])}catch(e){return!1}return"[object Map]"===String(map)&&(3===map.size&&("function"==typeof map.clear&&("function"==typeof map.delete&&("function"==typeof map.entries&&("function"==typeof map.forEach&&("function"==typeof map.get&&("function"==typeof map.has&&("function"==typeof map.keys&&("function"==typeof map.set&&("function"==typeof map.values&&(!1===(result=map.entries().next()).done&&(!!result.value&&("raz"===result.value[0]&&"one"===result.value[1])))))))))))))}},function(module,exports,__webpack_require__){"use strict";var MapPoly,clear=__webpack_require__(96),eIndexOf=__webpack_require__(224),setPrototypeOf=__webpack_require__(37),callable=__webpack_require__(16),validValue=__webpack_require__(9),d=__webpack_require__(8),ee=__webpack_require__(243),Symbol=__webpack_require__(14),iterator=__webpack_require__(104),forOf=__webpack_require__(253),Iterator=__webpack_require__(271),isNative=__webpack_require__(274),call=Function.prototype.call,defineProperties=Object.defineProperties,getPrototypeOf=Object.getPrototypeOf;module.exports=MapPoly=function(){var keys,values,self,iterable=arguments[0];if(!(this instanceof MapPoly))throw new TypeError("Constructor requires 'new'");return self=isNative&&setPrototypeOf&&Map!==MapPoly?setPrototypeOf(new Map,getPrototypeOf(this)):this,null!=iterable&&iterator(iterable),defineProperties(self,{__mapKeysData__:d("c",keys=[]),__mapValuesData__:d("c",values=[])}),iterable?(forOf(iterable,(function(value){var key=validValue(value)[0];value=value[1],-1===eIndexOf.call(keys,key)&&(keys.push(key),values.push(value))}),self),self):self},isNative&&(setPrototypeOf&&setPrototypeOf(MapPoly,Map),MapPoly.prototype=Object.create(Map.prototype,{constructor:d(MapPoly)})),ee(defineProperties(MapPoly.prototype,{clear:d((function(){this.__mapKeysData__.length&&(clear.call(this.__mapKeysData__),clear.call(this.__mapValuesData__),this.emit("_clear"))})),delete:d((function(key){var index=eIndexOf.call(this.__mapKeysData__,key);return-1!==index&&(this.__mapKeysData__.splice(index,1),this.__mapValuesData__.splice(index,1),this.emit("_delete",index,key),!0)})),entries:d((function(){return new Iterator(this,"key+value")})),forEach:d((function(cb){var iterator,result,thisArg=arguments[1];for(callable(cb),result=(iterator=this.entries())._next();void 0!==result;)call.call(cb,thisArg,this.__mapValuesData__[result],this.__mapKeysData__[result],this),result=iterator._next()})),get:d((function(key){var index=eIndexOf.call(this.__mapKeysData__,key);if(-1!==index)return this.__mapValuesData__[index]})),has:d((function(key){return-1!==eIndexOf.call(this.__mapKeysData__,key)})),keys:d((function(){return new Iterator(this,"key")})),set:d((function(key,value){var emit,index=eIndexOf.call(this.__mapKeysData__,key);return-1===index&&(index=this.__mapKeysData__.push(key)-1,emit=!0),this.__mapValuesData__[index]=value,emit&&this.emit("_add",index,key),this})),size:d.gs((function(){return this.__mapKeysData__.length})),values:d((function(){return new Iterator(this,"value")})),toString:d((function(){return"[object Map]"}))})),Object.defineProperty(MapPoly.prototype,Symbol.iterator,d((function(){return this.entries()}))),Object.defineProperty(MapPoly.prototype,Symbol.toStringTag,d("c","Map"))},function(module,exports,__webpack_require__){"use strict";module.exports=function(){}},function(module,exports,__webpack_require__){"use strict";var numberIsNaN=__webpack_require__(225),toPosInt=__webpack_require__(97),value=__webpack_require__(9),indexOf=Array.prototype.indexOf,objHasOwnProperty=Object.prototype.hasOwnProperty,abs=Math.abs,floor=Math.floor;module.exports=function(searchElement){var i,length,fromIndex,val;if(!numberIsNaN(searchElement))return indexOf.apply(this,arguments);for(length=toPosInt(value(this).length),fromIndex=arguments[1],i=fromIndex=isNaN(fromIndex)?0:fromIndex>=0?floor(fromIndex):toPosInt(this.length)-floor(abs(fromIndex));i<length;++i)if(objHasOwnProperty.call(this,i)&&(val=this[i],numberIsNaN(val)))return i;return-1}},function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(226)()?Number.isNaN:__webpack_require__(227)},function(module,exports,__webpack_require__){"use strict";module.exports=function(){var numberIsNaN=Number.isNaN;return"function"==typeof numberIsNaN&&(!numberIsNaN({})&&numberIsNaN(NaN)&&!numberIsNaN(34))}},function(module,exports,__webpack_require__){"use strict";module.exports=function(value){return value!=value}},function(module,exports,__webpack_require__){"use strict";var sign=__webpack_require__(229),abs=Math.abs,floor=Math.floor;module.exports=function(value){return isNaN(value)?0:0!==(value=Number(value))&&isFinite(value)?sign(value)*floor(abs(value)):value}},function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(230)()?Math.sign:__webpack_require__(231)},function(module,exports,__webpack_require__){"use strict";module.exports=function(){var sign=Math.sign;return"function"==typeof sign&&(1===sign(10)&&-1===sign(-20))}},function(module,exports,__webpack_require__){"use strict";module.exports=function(value){return value=Number(value),isNaN(value)||0===value?value:value>0?1:-1}},function(module,exports,__webpack_require__){"use strict";var isValue=__webpack_require__(22),map={function:!0,object:!0};module.exports=function(value){return isValue(value)&&map[typeof value]||!1}},function(module,exports,__webpack_require__){"use strict";var shim,nullObject,polyProps,desc,create=Object.create;__webpack_require__(98)()||(shim=__webpack_require__(99)),module.exports=shim?1!==shim.level?create:(nullObject={},polyProps={},desc={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach((function(name){polyProps[name]="__proto__"!==name?desc:{configurable:!0,enumerable:!1,writable:!0,value:void 0}})),Object.defineProperties(nullObject,polyProps),Object.defineProperty(shim,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:nullObject}),function(prototype,props){return create(null===prototype?nullObject:prototype,props)}):create},function(module,exports,__webpack_require__){"use strict";var isPrototype=__webpack_require__(235);module.exports=function(value){if("function"!=typeof value)return!1;if(!hasOwnProperty.call(value,"length"))return!1;try{if("number"!=typeof value.length)return!1;if("function"!=typeof value.call)return!1;if("function"!=typeof value.apply)return!1}catch(error){return!1}return!isPrototype(value)}},function(module,exports,__webpack_require__){"use strict";var isObject=__webpack_require__(55);module.exports=function(value){if(!isObject(value))return!1;try{return!!value.constructor&&value.constructor.prototype===value}catch(error){return!1}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(){var obj,assign=Object.assign;return"function"==typeof assign&&(assign(obj={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),obj.foo+obj.bar+obj.trzy==="razdwatrzy")}},function(module,exports,__webpack_require__){"use strict";var keys=__webpack_require__(238),value=__webpack_require__(9),max=Math.max;module.exports=function(dest,src){var error,i,assign,length=max(arguments.length,2);for(dest=Object(value(dest)),assign=function(key){try{dest[key]=src[key]}catch(e){error||(error=e)}},i=1;i<length;++i)keys(src=arguments[i]).forEach(assign);if(void 0!==error)throw error;return dest}},function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(239)()?Object.keys:__webpack_require__(240)},function(module,exports,__webpack_require__){"use strict";module.exports=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}}},function(module,exports,__webpack_require__){"use strict";var isValue=__webpack_require__(22),keys=Object.keys;module.exports=function(object){return keys(isValue(object)?Object(object):object)}},function(module,exports,__webpack_require__){"use strict";var str="razdwatrzy";module.exports=function(){return"function"==typeof str.contains&&(!0===str.contains("dwa")&&!1===str.contains("foo"))}},function(module,exports,__webpack_require__){"use strict";var indexOf=String.prototype.indexOf;module.exports=function(searchString){return indexOf.call(this,searchString,arguments[1])>-1}},function(module,exports,__webpack_require__){"use strict";var on,once,off,emit,methods,descriptors,base,d=__webpack_require__(8),callable=__webpack_require__(16),apply=Function.prototype.apply,call=Function.prototype.call,create=Object.create,defineProperty=Object.defineProperty,defineProperties=Object.defineProperties,hasOwnProperty=Object.prototype.hasOwnProperty,descriptor={configurable:!0,enumerable:!1,writable:!0};once=function(type,listener){var once,self;return callable(listener),self=this,on.call(this,type,once=function(){off.call(self,type,once),apply.call(listener,this,arguments)}),once.__eeOnceListener__=listener,this},methods={on:on=function(type,listener){var data;return callable(listener),hasOwnProperty.call(this,"__ee__")?data=this.__ee__:(data=descriptor.value=create(null),defineProperty(this,"__ee__",descriptor),descriptor.value=null),data[type]?"object"==typeof data[type]?data[type].push(listener):data[type]=[data[type],listener]:data[type]=listener,this},once:once,off:off=function(type,listener){var data,listeners,candidate,i;if(callable(listener),!hasOwnProperty.call(this,"__ee__"))return this;if(!(data=this.__ee__)[type])return this;if("object"==typeof(listeners=data[type]))for(i=0;candidate=listeners[i];++i)candidate!==listener&&candidate.__eeOnceListener__!==listener||(2===listeners.length?data[type]=listeners[i?0:1]:listeners.splice(i,1));else listeners!==listener&&listeners.__eeOnceListener__!==listener||delete data[type];return this},emit:emit=function(type){var i,l,listener,listeners,args;if(hasOwnProperty.call(this,"__ee__")&&(listeners=this.__ee__[type]))if("object"==typeof listeners){for(l=arguments.length,args=new Array(l-1),i=1;i<l;++i)args[i-1]=arguments[i];for(listeners=listeners.slice(),i=0;listener=listeners[i];++i)apply.call(listener,this,args)}else switch(arguments.length){case 1:call.call(listeners,this);break;case 2:call.call(listeners,this,arguments[1]);break;case 3:call.call(listeners,this,arguments[1],arguments[2]);break;default:for(l=arguments.length,args=new Array(l-1),i=1;i<l;++i)args[i-1]=arguments[i];apply.call(listeners,this,args)}}},descriptors={on:d(on),once:d(once),off:d(off),emit:d(emit)},base=defineProperties({},descriptors),module.exports=exports=function(o){return null==o?create(base):defineProperties(Object(o),descriptors)},exports.methods=methods},function(module,exports,__webpack_require__){"use strict";var global=__webpack_require__(38),validTypes={object:!0,symbol:!0};module.exports=function(){var symbol,Symbol=global.Symbol;if("function"!=typeof Symbol)return!1;symbol=Symbol("test symbol");try{String(symbol)}catch(e){return!1}return!!validTypes[typeof Symbol.iterator]&&(!!validTypes[typeof Symbol.toPrimitive]&&!!validTypes[typeof Symbol.toStringTag])}},function(module,exports,__webpack_require__){"use strict";module.exports=function(){return"object"==typeof globalThis&&(!!globalThis&&globalThis.Array===Array)}},function(module,exports){var naiveFallback=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};module.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(error){return naiveFallback()}try{return __global__||naiveFallback()}finally{delete Object.prototype.__global__}}()},function(module,exports,__webpack_require__){"use strict";var SymbolPolyfill,HiddenSymbol,isNativeSafe,d=__webpack_require__(8),validateSymbol=__webpack_require__(103),NativeSymbol=__webpack_require__(38).Symbol,generateName=__webpack_require__(249),setupStandardSymbols=__webpack_require__(250),setupSymbolRegistry=__webpack_require__(251),create=Object.create,defineProperties=Object.defineProperties,defineProperty=Object.defineProperty;if("function"==typeof NativeSymbol)try{String(NativeSymbol()),isNativeSafe=!0}catch(ignore){}else NativeSymbol=null;HiddenSymbol=function(description){if(this instanceof HiddenSymbol)throw new TypeError("Symbol is not a constructor");return SymbolPolyfill(description)},module.exports=SymbolPolyfill=function Symbol(description){var symbol;if(this instanceof Symbol)throw new TypeError("Symbol is not a constructor");return isNativeSafe?NativeSymbol(description):(symbol=create(HiddenSymbol.prototype),description=void 0===description?"":String(description),defineProperties(symbol,{__description__:d("",description),__name__:d("",generateName(description))}))},setupStandardSymbols(SymbolPolyfill),setupSymbolRegistry(SymbolPolyfill),defineProperties(HiddenSymbol.prototype,{constructor:d(SymbolPolyfill),toString:d("",(function(){return this.__name__}))}),defineProperties(SymbolPolyfill.prototype,{toString:d((function(){return"Symbol ("+validateSymbol(this).__description__+")"})),valueOf:d((function(){return validateSymbol(this)}))}),defineProperty(SymbolPolyfill.prototype,SymbolPolyfill.toPrimitive,d("",(function(){var symbol=validateSymbol(this);return"symbol"==typeof symbol?symbol:symbol.toString()}))),defineProperty(SymbolPolyfill.prototype,SymbolPolyfill.toStringTag,d("c","Symbol")),defineProperty(HiddenSymbol.prototype,SymbolPolyfill.toStringTag,d("c",SymbolPolyfill.prototype[SymbolPolyfill.toStringTag])),defineProperty(HiddenSymbol.prototype,SymbolPolyfill.toPrimitive,d("c",SymbolPolyfill.prototype[SymbolPolyfill.toPrimitive]))},function(module,exports,__webpack_require__){"use strict";module.exports=function(value){return!!value&&("symbol"==typeof value||!!value.constructor&&("Symbol"===value.constructor.name&&"Symbol"===value[value.constructor.toStringTag]))}},function(module,exports,__webpack_require__){"use strict";var d=__webpack_require__(8),create=Object.create,defineProperty=Object.defineProperty,objPrototype=Object.prototype,created=create(null);module.exports=function(desc){for(var name,ie11BugWorkaround,postfix=0;created[desc+(postfix||"")];)++postfix;return created[desc+=postfix||""]=!0,defineProperty(objPrototype,name="@@"+desc,d.gs(null,(function(value){ie11BugWorkaround||(ie11BugWorkaround=!0,defineProperty(this,name,d(value)),ie11BugWorkaround=!1)}))),name}},function(module,exports,__webpack_require__){"use strict";var d=__webpack_require__(8),NativeSymbol=__webpack_require__(38).Symbol;module.exports=function(SymbolPolyfill){return Object.defineProperties(SymbolPolyfill,{hasInstance:d("",NativeSymbol&&NativeSymbol.hasInstance||SymbolPolyfill("hasInstance")),isConcatSpreadable:d("",NativeSymbol&&NativeSymbol.isConcatSpreadable||SymbolPolyfill("isConcatSpreadable")),iterator:d("",NativeSymbol&&NativeSymbol.iterator||SymbolPolyfill("iterator")),match:d("",NativeSymbol&&NativeSymbol.match||SymbolPolyfill("match")),replace:d("",NativeSymbol&&NativeSymbol.replace||SymbolPolyfill("replace")),search:d("",NativeSymbol&&NativeSymbol.search||SymbolPolyfill("search")),species:d("",NativeSymbol&&NativeSymbol.species||SymbolPolyfill("species")),split:d("",NativeSymbol&&NativeSymbol.split||SymbolPolyfill("split")),toPrimitive:d("",NativeSymbol&&NativeSymbol.toPrimitive||SymbolPolyfill("toPrimitive")),toStringTag:d("",NativeSymbol&&NativeSymbol.toStringTag||SymbolPolyfill("toStringTag")),unscopables:d("",NativeSymbol&&NativeSymbol.unscopables||SymbolPolyfill("unscopables"))})}},function(module,exports,__webpack_require__){"use strict";var d=__webpack_require__(8),validateSymbol=__webpack_require__(103),registry=Object.create(null);module.exports=function(SymbolPolyfill){return Object.defineProperties(SymbolPolyfill,{for:d((function(key){return registry[key]?registry[key]:registry[key]=SymbolPolyfill(String(key))})),keyFor:d((function(symbol){var key;for(key in validateSymbol(symbol),registry)if(registry[key]===symbol)return key}))})}},function(module,exports,__webpack_require__){"use strict";var isArguments=__webpack_require__(39),isValue=__webpack_require__(22),isString=__webpack_require__(40),iteratorSymbol=__webpack_require__(14).iterator,isArray=Array.isArray;module.exports=function(value){return!!isValue(value)&&(!!isArray(value)||(!!isString(value)||(!!isArguments(value)||"function"==typeof value[iteratorSymbol])))}},function(module,exports,__webpack_require__){"use strict";var isArguments=__webpack_require__(39),callable=__webpack_require__(16),isString=__webpack_require__(40),get=__webpack_require__(254),isArray=Array.isArray,call=Function.prototype.call,some=Array.prototype.some;module.exports=function(iterable,cb){var mode,result,doBreak,broken,i,length,char,code,thisArg=arguments[2];if(isArray(iterable)||isArguments(iterable)?mode="array":isString(iterable)?mode="string":iterable=get(iterable),callable(cb),doBreak=function(){broken=!0},"array"!==mode)if("string"!==mode)for(result=iterable.next();!result.done;){if(call.call(cb,thisArg,result.value,doBreak),broken)return;result=iterable.next()}else for(length=iterable.length,i=0;i<length&&(char=iterable[i],i+1<length&&(code=char.charCodeAt(0))>=55296&&code<=56319&&(char+=iterable[++i]),call.call(cb,thisArg,char,doBreak),!broken);++i);else some.call(iterable,(function(value){return call.call(cb,thisArg,value,doBreak),broken}))}},function(module,exports,__webpack_require__){"use strict";var isArguments=__webpack_require__(39),isString=__webpack_require__(40),ArrayIterator=__webpack_require__(255),StringIterator=__webpack_require__(270),iterable=__webpack_require__(104),iteratorSymbol=__webpack_require__(14).iterator;module.exports=function(obj){return"function"==typeof iterable(obj)[iteratorSymbol]?obj[iteratorSymbol]():isArguments(obj)?new ArrayIterator(obj):isString(obj)?new StringIterator(obj):new ArrayIterator(obj)}},function(module,exports,__webpack_require__){"use strict";var ArrayIterator,setPrototypeOf=__webpack_require__(37),contains=__webpack_require__(102),d=__webpack_require__(8),Symbol=__webpack_require__(14),Iterator=__webpack_require__(57),defineProperty=Object.defineProperty;ArrayIterator=module.exports=function(arr,kind){if(!(this instanceof ArrayIterator))throw new TypeError("Constructor requires 'new'");Iterator.call(this,arr),kind=kind?contains.call(kind,"key+value")?"key+value":contains.call(kind,"key")?"key":"value":"value",defineProperty(this,"__kind__",d("",kind))},setPrototypeOf&&setPrototypeOf(ArrayIterator,Iterator),delete ArrayIterator.prototype.constructor,ArrayIterator.prototype=Object.create(Iterator.prototype,{_resolve:d((function(i){return"value"===this.__kind__?this.__list__[i]:"key+value"===this.__kind__?[i,this.__list__[i]]:i}))}),defineProperty(ArrayIterator.prototype,Symbol.toStringTag,d("c","Array Iterator"))},function(module,exports,__webpack_require__){"use strict";var define,isValue=__webpack_require__(23),ensureValue=__webpack_require__(257),ensurePlainFunction=__webpack_require__(261),copy=__webpack_require__(262),normalizeOptions=__webpack_require__(101),map=__webpack_require__(267),bind=Function.prototype.bind,defineProperty=Object.defineProperty,hasOwnProperty=Object.prototype.hasOwnProperty;define=function(name,desc,options){var dgs,value=ensureValue(desc)&&ensurePlainFunction(desc.value);return delete(dgs=copy(desc)).writable,delete dgs.value,dgs.get=function(){return!options.overwriteDefinition&&hasOwnProperty.call(this,name)?value:(desc.value=bind.call(value,options.resolveContext?options.resolveContext(this):this),defineProperty(this,name,desc),this[name])},dgs},module.exports=function(props){var options=normalizeOptions(arguments[1]);return isValue(options.resolveContext)&&ensurePlainFunction(options.resolveContext),map(props,(function(desc,name){return define(name,desc,options)}))}},function(module,exports,__webpack_require__){"use strict";var resolveException=__webpack_require__(105),is=__webpack_require__(23);module.exports=function(value){return is(value)?value:resolveException(value,"Cannot use %v",arguments[1])}},function(module,exports,__webpack_require__){"use strict";var isValue=__webpack_require__(23),isObject=__webpack_require__(55),objectToString=Object.prototype.toString;module.exports=function(value){if(!isValue(value))return null;if(isObject(value)){var valueToString=value.toString;if("function"!=typeof valueToString)return null;if(valueToString===objectToString)return null}try{return""+value}catch(error){return null}}},function(module,exports,__webpack_require__){"use strict";var safeToString=__webpack_require__(260),reNewLine=/[\n\r\u2028\u2029]/g;module.exports=function(value){var string=safeToString(value);return null===string?"<Non-coercible to string value>":(string.length>100&&(string=string.slice(0,99)+""),string=string.replace(reNewLine,(function(char){switch(char){case"\n":return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}})))}},function(module,exports,__webpack_require__){"use strict";module.exports=function(value){try{return value.toString()}catch(error){try{return String(value)}catch(error2){return null}}}},function(module,exports,__webpack_require__){"use strict";var resolveException=__webpack_require__(105),is=__webpack_require__(100);module.exports=function(value){return is(value)?value:resolveException(value,"%v is not a plain function",arguments[1])}},function(module,exports,__webpack_require__){"use strict";var aFrom=__webpack_require__(263),assign=__webpack_require__(56),value=__webpack_require__(9);module.exports=function(obj){var copy=Object(value(obj)),propertyNames=arguments[1],options=Object(arguments[2]);if(copy!==obj&&!propertyNames)return copy;var result={};return propertyNames?aFrom(propertyNames,(function(propertyName){(options.ensure||propertyName in obj)&&(result[propertyName]=obj[propertyName])})):assign(result,obj),result}},function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(264)()?Array.from:__webpack_require__(265)},function(module,exports,__webpack_require__){"use strict";module.exports=function(){var arr,result,from=Array.from;return"function"==typeof from&&(result=from(arr=["raz","dwa"]),Boolean(result&&result!==arr&&"dwa"===result[1]))}},function(module,exports,__webpack_require__){"use strict";var iteratorSymbol=__webpack_require__(14).iterator,isArguments=__webpack_require__(39),isFunction=__webpack_require__(266),toPosInt=__webpack_require__(97),callable=__webpack_require__(16),validValue=__webpack_require__(9),isValue=__webpack_require__(22),isString=__webpack_require__(40),isArray=Array.isArray,call=Function.prototype.call,desc={configurable:!0,enumerable:!0,writable:!0,value:null},defineProperty=Object.defineProperty;module.exports=function(arrayLike){var Context,i,j,arr,length,code,iterator,result,getIterator,value,mapFn=arguments[1],thisArg=arguments[2];if(arrayLike=Object(validValue(arrayLike)),isValue(mapFn)&&callable(mapFn),this&&this!==Array&&isFunction(this))Context=this;else{if(!mapFn){if(isArguments(arrayLike))return 1!==(length=arrayLike.length)?Array.apply(null,arrayLike):((arr=new Array(1))[0]=arrayLike[0],arr);if(isArray(arrayLike)){for(arr=new Array(length=arrayLike.length),i=0;i<length;++i)arr[i]=arrayLike[i];return arr}}arr=[]}if(!isArray(arrayLike))if(void 0!==(getIterator=arrayLike[iteratorSymbol])){for(iterator=callable(getIterator).call(arrayLike),Context&&(arr=new Context),result=iterator.next(),i=0;!result.done;)value=mapFn?call.call(mapFn,thisArg,result.value,i):result.value,Context?(desc.value=value,defineProperty(arr,i,desc)):arr[i]=value,result=iterator.next(),++i;length=i}else if(isString(arrayLike)){for(length=arrayLike.length,Context&&(arr=new Context),i=0,j=0;i<length;++i)value=arrayLike[i],i+1<length&&(code=value.charCodeAt(0))>=55296&&code<=56319&&(value+=arrayLike[++i]),value=mapFn?call.call(mapFn,thisArg,value,j):value,Context?(desc.value=value,defineProperty(arr,j,desc)):arr[j]=value,++j;length=j}if(void 0===length)for(length=toPosInt(arrayLike.length),Context&&(arr=new Context(length)),i=0;i<length;++i)value=mapFn?call.call(mapFn,thisArg,arrayLike[i],i):arrayLike[i],Context?(desc.value=value,defineProperty(arr,i,desc)):arr[i]=value;return Context&&(desc.value=null,arr.length=length),arr}},function(module,exports,__webpack_require__){"use strict";var objToString=Object.prototype.toString,isFunctionStringTag=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);module.exports=function(value){return"function"==typeof value&&isFunctionStringTag(objToString.call(value))}},function(module,exports,__webpack_require__){"use strict";var callable=__webpack_require__(16),forEach=__webpack_require__(268),call=Function.prototype.call;module.exports=function(obj,cb){var result={},thisArg=arguments[2];return callable(cb),forEach(obj,(function(value,key,targetObj,index){result[key]=call.call(cb,thisArg,value,key,targetObj,index)})),result}},function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(269)("forEach")},function(module,exports,__webpack_require__){"use strict";var callable=__webpack_require__(16),value=__webpack_require__(9),bind=Function.prototype.bind,call=Function.prototype.call,keys=Object.keys,objPropertyIsEnumerable=Object.prototype.propertyIsEnumerable;module.exports=function(method,defVal){return function(obj,cb){var list,thisArg=arguments[2],compareFn=arguments[3];return obj=Object(value(obj)),callable(cb),list=keys(obj),compareFn&&list.sort("function"==typeof compareFn?bind.call(compareFn,obj):void 0),"function"!=typeof method&&(method=list[method]),call.call(method,list,(function(key,index){return objPropertyIsEnumerable.call(obj,key)?call.call(cb,thisArg,obj[key],key,obj,index):defVal}))}}},function(module,exports,__webpack_require__){"use strict";var StringIterator,setPrototypeOf=__webpack_require__(37),d=__webpack_require__(8),Symbol=__webpack_require__(14),Iterator=__webpack_require__(57),defineProperty=Object.defineProperty;StringIterator=module.exports=function(str){if(!(this instanceof StringIterator))throw new TypeError("Constructor requires 'new'");str=String(str),Iterator.call(this,str),defineProperty(this,"__length__",d("",str.length))},setPrototypeOf&&setPrototypeOf(StringIterator,Iterator),delete StringIterator.prototype.constructor,StringIterator.prototype=Object.create(Iterator.prototype,{_next:d((function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()})),_resolve:d((function(i){var code,char=this.__list__[i];return this.__nextIndex__===this.__length__?char:(code=char.charCodeAt(0))>=55296&&code<=56319?char+this.__list__[this.__nextIndex__++]:char}))}),defineProperty(StringIterator.prototype,Symbol.toStringTag,d("c","String Iterator"))},function(module,exports,__webpack_require__){"use strict";var MapIterator,setPrototypeOf=__webpack_require__(37),d=__webpack_require__(8),Iterator=__webpack_require__(57),toStringTagSymbol=__webpack_require__(14).toStringTag,kinds=__webpack_require__(272),defineProperties=Object.defineProperties,unBind=Iterator.prototype._unBind;MapIterator=module.exports=function(map,kind){if(!(this instanceof MapIterator))return new MapIterator(map,kind);Iterator.call(this,map.__mapKeysData__,map),kind&&kinds[kind]||(kind="key+value"),defineProperties(this,{__kind__:d("",kind),__values__:d("w",map.__mapValuesData__)})},setPrototypeOf&&setPrototypeOf(MapIterator,Iterator),MapIterator.prototype=Object.create(Iterator.prototype,{constructor:d(MapIterator),_resolve:d((function(i){return"value"===this.__kind__?this.__values__[i]:"key"===this.__kind__?this.__list__[i]:[this.__list__[i],this.__values__[i]]})),_unBind:d((function(){this.__values__=null,unBind.call(this)})),toString:d((function(){return"[object Map Iterator]"}))}),Object.defineProperty(MapIterator.prototype,toStringTagSymbol,d("c","Map Iterator"))},function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(273)("key","value","key+value")},function(module,exports,__webpack_require__){"use strict";var forEach=Array.prototype.forEach,create=Object.create;module.exports=function(arg){var set=create(null);return forEach.call(arguments,(function(name){set[name]=!0})),set}},function(module,exports,__webpack_require__){"use strict";module.exports="undefined"!=typeof Map&&"[object Map]"===Object.prototype.toString.call(new Map)},function(module,exports,__webpack_require__){exports.parser=__webpack_require__(276).parser,exports.generate=__webpack_require__(286),exports.writeToStream=__webpack_require__(115)},function(module,exports,__webpack_require__){const bl=__webpack_require__(277),EventEmitter=__webpack_require__(4),Packet=__webpack_require__(285),constants=__webpack_require__(114),debug=__webpack_require__(13)("mqtt-packet:parser");class Parser extends EventEmitter{constructor(){super(),this.parser=this.constructor.parser}static parser(opt){return this instanceof Parser?(this.settings=opt||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState(),this):(new Parser).parser(opt)}_resetState(){debug("_resetState: resetting packet, error, _list, and _stateCounter"),this.packet=new Packet,this.error=null,this._list=bl(),this._stateCounter=0}parse(buf){for(this.error&&this._resetState(),this._list.append(buf),debug("parse: current state: %s",this._states[this._stateCounter]);(-1!==this.packet.length||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,debug("parse: state complete. _stateCounter is now: %d",this._stateCounter),debug("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length),this._stateCounter>=this._states.length&&(this._stateCounter=0);return debug("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length),this._list.length}_parseHeader(){const zero=this._list.readUInt8(0);return this.packet.cmd=constants.types[zero>>constants.CMD_SHIFT],this.packet.retain=0!=(zero&constants.RETAIN_MASK),this.packet.qos=zero>>constants.QOS_SHIFT&constants.QOS_MASK,this.packet.dup=0!=(zero&constants.DUP_MASK),debug("_parseHeader: packet: %o",this.packet),this._list.consume(1),!0}_parseLength(){const result=this._parseVarByteNum(!0);return result?(this.packet.length=result.value,this._list.consume(result.bytes)):this._emitError(new Error("Invalid length")),debug("_parseLength %d",result.value),!!result}_parsePayload(){debug("_parsePayload: payload %O",this._list);let result=!1;if(0===this.packet.length||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(new Error("Not supported"))}result=!0}return debug("_parsePayload complete result: %s",result),result}_parseConnect(){let topic,payload,password,username;debug("_parseConnect");const flags={},packet=this.packet,protocolId=this._parseString();if(null===protocolId)return this._emitError(new Error("Cannot parse protocolId"));if("MQTT"!==protocolId&&"MQIsdp"!==protocolId)return this._emitError(new Error("Invalid protocolId"));if(packet.protocolId=protocolId,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(packet.protocolVersion=this._list.readUInt8(this._pos),3!==packet.protocolVersion&&4!==packet.protocolVersion&&5!==packet.protocolVersion)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(flags.username=this._list.readUInt8(this._pos)&constants.USERNAME_MASK,flags.password=this._list.readUInt8(this._pos)&constants.PASSWORD_MASK,flags.will=this._list.readUInt8(this._pos)&constants.WILL_FLAG_MASK,flags.will&&(packet.will={},packet.will.retain=0!=(this._list.readUInt8(this._pos)&constants.WILL_RETAIN_MASK),packet.will.qos=(this._list.readUInt8(this._pos)&constants.WILL_QOS_MASK)>>constants.WILL_QOS_SHIFT),packet.clean=0!=(this._list.readUInt8(this._pos)&constants.CLEAN_SESSION_MASK),this._pos++,packet.keepalive=this._parseNum(),-1===packet.keepalive)return this._emitError(new Error("Packet too short"));if(5===packet.protocolVersion){const properties=this._parseProperties();Object.getOwnPropertyNames(properties).length&&(packet.properties=properties)}const clientId=this._parseString();if(null===clientId)return this._emitError(new Error("Packet too short"));if(packet.clientId=clientId,debug("_parseConnect: packet.clientId: %s",packet.clientId),flags.will){if(5===packet.protocolVersion){const willProperties=this._parseProperties();Object.getOwnPropertyNames(willProperties).length&&(packet.will.properties=willProperties)}if(topic=this._parseString(),null===topic)return this._emitError(new Error("Cannot parse will topic"));if(packet.will.topic=topic,debug("_parseConnect: packet.will.topic: %s",packet.will.topic),payload=this._parseBuffer(),null===payload)return this._emitError(new Error("Cannot parse will payload"));packet.will.payload=payload,debug("_parseConnect: packet.will.paylaod: %s",packet.will.payload)}if(flags.username){if(username=this._parseString(),null===username)return this._emitError(new Error("Cannot parse username"));packet.username=username,debug("_parseConnect: packet.username: %s",packet.username)}if(flags.password){if(password=this._parseBuffer(),null===password)return this._emitError(new Error("Cannot parse password"));packet.password=password}return this.settings=packet,debug("_parseConnect: complete"),packet}_parseConnack(){debug("_parseConnack");const packet=this.packet;if(this._list.length<2)return null;if(packet.sessionPresent=!!(this._list.readUInt8(this._pos++)&constants.SESSIONPRESENT_MASK),5===this.settings.protocolVersion?packet.reasonCode=this._list.readUInt8(this._pos++):packet.returnCode=this._list.readUInt8(this._pos++),-1===packet.returnCode||-1===packet.reasonCode)return this._emitError(new Error("Cannot parse return code"));if(5===this.settings.protocolVersion){const properties=this._parseProperties();Object.getOwnPropertyNames(properties).length&&(packet.properties=properties)}debug("_parseConnack: complete")}_parsePublish(){debug("_parsePublish");const packet=this.packet;if(packet.topic=this._parseString(),null===packet.topic)return this._emitError(new Error("Cannot parse topic"));if(!(packet.qos>0)||this._parseMessageId()){if(5===this.settings.protocolVersion){const properties=this._parseProperties();Object.getOwnPropertyNames(properties).length&&(packet.properties=properties)}packet.payload=this._list.slice(this._pos,packet.length),debug("_parsePublish: payload from buffer list: %o",packet.payload)}}_parseSubscribe(){debug("_parseSubscribe");const packet=this.packet;let topic,options,qos,rh,rap,nl,subscription;if(1!==packet.qos)return this._emitError(new Error("Wrong subscribe header"));if(packet.subscriptions=[],this._parseMessageId()){if(5===this.settings.protocolVersion){const properties=this._parseProperties();Object.getOwnPropertyNames(properties).length&&(packet.properties=properties)}for(;this._pos<packet.length;){if(topic=this._parseString(),null===topic)return this._emitError(new Error("Cannot parse topic"));if(this._pos>=packet.length)return this._emitError(new Error("Malformed Subscribe Payload"));options=this._parseByte(),qos=options&constants.SUBSCRIBE_OPTIONS_QOS_MASK,nl=0!=(options>>constants.SUBSCRIBE_OPTIONS_NL_SHIFT&constants.SUBSCRIBE_OPTIONS_NL_MASK),rap=0!=(options>>constants.SUBSCRIBE_OPTIONS_RAP_SHIFT&constants.SUBSCRIBE_OPTIONS_RAP_MASK),rh=options>>constants.SUBSCRIBE_OPTIONS_RH_SHIFT&constants.SUBSCRIBE_OPTIONS_RH_MASK,subscription={topic:topic,qos:qos},5===this.settings.protocolVersion&&(subscription.nl=nl,subscription.rap=rap,subscription.rh=rh),debug("_parseSubscribe: push subscription `%s` to subscription",subscription),packet.subscriptions.push(subscription)}}}_parseSuback(){debug("_parseSuback");const packet=this.packet;if(this.packet.granted=[],this._parseMessageId()){if(5===this.settings.protocolVersion){const properties=this._parseProperties();Object.getOwnPropertyNames(properties).length&&(packet.properties=properties)}for(;this._pos<this.packet.length;)this.packet.granted.push(this._list.readUInt8(this._pos++))}}_parseUnsubscribe(){debug("_parseUnsubscribe");const packet=this.packet;if(packet.unsubscriptions=[],this._parseMessageId()){if(5===this.settings.protocolVersion){const properties=this._parseProperties();Object.getOwnPropertyNames(properties).length&&(packet.properties=properties)}for(;this._pos<packet.length;){const topic=this._parseString();if(null===topic)return this._emitError(new Error("Cannot parse topic"));debug("_parseUnsubscribe: push topic `%s` to unsubscriptions",topic),packet.unsubscriptions.push(topic)}}}_parseUnsuback(){debug("_parseUnsuback");const packet=this.packet;if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"));if(5===this.settings.protocolVersion){const properties=this._parseProperties();for(Object.getOwnPropertyNames(properties).length&&(packet.properties=properties),packet.granted=[];this._pos<this.packet.length;)this.packet.granted.push(this._list.readUInt8(this._pos++))}}_parseConfirmation(){debug("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);const packet=this.packet;if(this._parseMessageId(),5===this.settings.protocolVersion&&(packet.length>2&&(packet.reasonCode=this._parseByte(),debug("_parseConfirmation: packet.reasonCode `%d`",packet.reasonCode)),packet.length>3)){const properties=this._parseProperties();Object.getOwnPropertyNames(properties).length&&(packet.properties=properties)}return!0}_parseDisconnect(){const packet=this.packet;if(debug("_parseDisconnect"),5===this.settings.protocolVersion){packet.reasonCode=this._parseByte();const properties=this._parseProperties();Object.getOwnPropertyNames(properties).length&&(packet.properties=properties)}return debug("_parseDisconnect result: true"),!0}_parseAuth(){debug("_parseAuth");const packet=this.packet;if(5!==this.settings.protocolVersion)return this._emitError(new Error("Not supported auth packet for this version MQTT"));packet.reasonCode=this._parseByte();const properties=this._parseProperties();return Object.getOwnPropertyNames(properties).length&&(packet.properties=properties),debug("_parseAuth: result: true"),!0}_parseMessageId(){const packet=this.packet;return packet.messageId=this._parseNum(),null===packet.messageId?(this._emitError(new Error("Cannot parse messageId")),!1):(debug("_parseMessageId: packet.messageId %d",packet.messageId),!0)}_parseString(maybeBuffer){const length=this._parseNum(),end=length+this._pos;if(-1===length||end>this._list.length||end>this.packet.length)return null;const result=this._list.toString("utf8",this._pos,end);return this._pos+=length,debug("_parseString: result: %s",result),result}_parseStringPair(){return debug("_parseStringPair"),{name:this._parseString(),value:this._parseString()}}_parseBuffer(){const length=this._parseNum(),end=length+this._pos;if(-1===length||end>this._list.length||end>this.packet.length)return null;const result=this._list.slice(this._pos,end);return this._pos+=length,debug("_parseBuffer: result: %o",result),result}_parseNum(){if(this._list.length-this._pos<2)return-1;const result=this._list.readUInt16BE(this._pos);return this._pos+=2,debug("_parseNum: result: %s",result),result}_parse4ByteNum(){if(this._list.length-this._pos<4)return-1;const result=this._list.readUInt32BE(this._pos);return this._pos+=4,debug("_parse4ByteNum: result: %s",result),result}_parseVarByteNum(fullInfoFlag){debug("_parseVarByteNum");let current,bytes=0,mul=1,value=0,result=!1;const padding=this._pos?this._pos:0;for(;bytes<5;){if(current=this._list.readUInt8(padding+bytes++),value+=mul*(current&constants.VARBYTEINT_MASK),mul*=128,0==(current&constants.VARBYTEINT_FIN_MASK)){result=!0;break}if(this._list.length<=bytes)break}return padding&&(this._pos+=bytes),result=!!result&&(fullInfoFlag?{bytes:bytes,value:value}:value),debug("_parseVarByteNum: result: %o",result),result}_parseByte(){const result=this._list.readUInt8(this._pos);return this._pos++,debug("_parseByte: result: %o",result),result}_parseByType(type){switch(debug("_parseByType: type: %s",type),type){case"byte":return 0!==this._parseByte();case"int8":return this._parseByte();case"int16":return this._parseNum();case"int32":return this._parse4ByteNum();case"var":return this._parseVarByteNum();case"string":return this._parseString();case"pair":return this._parseStringPair();case"binary":return this._parseBuffer()}}_parseProperties(){debug("_parseProperties");const length=this._parseVarByteNum(),end=this._pos+length,result={};for(;this._pos<end;){const type=this._parseByte(),name=constants.propertiesCodes[type];if(!name)return this._emitError(new Error("Unknown property")),!1;if("userProperties"!==name)result[name]?(Array.isArray(result[name])||(result[name]=[result[name]]),result[name].push(this._parseByType(constants.propertiesTypes[name]))):result[name]=this._parseByType(constants.propertiesTypes[name]);else{result[name]||(result[name]=Object.create(null));const currentUserProperty=this._parseByType(constants.propertiesTypes[name]);if(result[name][currentUserProperty.name])if(Array.isArray(result[name][currentUserProperty.name]))result[name][currentUserProperty.name].push(currentUserProperty.value);else{const currentValue=result[name][currentUserProperty.name];result[name][currentUserProperty.name]=[currentValue],result[name][currentUserProperty.name].push(currentUserProperty.value)}else result[name][currentUserProperty.name]=currentUserProperty.value}}return result}_newPacket(){return debug("_newPacket"),this.packet&&(this._list.consume(this.packet.length),debug("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length),this.emit("packet",this.packet)),debug("_newPacket: new packet"),this.packet=new Packet,this._pos=0,!0}_emitError(err){debug("_emitError"),this.error=err,this.emit("error",err)}}module.exports=Parser},function(module,exports,__webpack_require__){"use strict";const DuplexStream=__webpack_require__(278).Duplex,inherits=__webpack_require__(2),BufferList=__webpack_require__(284);function BufferListStream(callback){if(!(this instanceof BufferListStream))return new BufferListStream(callback);if("function"==typeof callback){this._callback=callback;const piper=function(err){this._callback&&(this._callback(err),this._callback=null)}.bind(this);this.on("pipe",(function(src){src.on("error",piper)})),this.on("unpipe",(function(src){src.removeListener("error",piper)})),callback=null}BufferList._init.call(this,callback),DuplexStream.call(this)}inherits(BufferListStream,DuplexStream),Object.assign(BufferListStream.prototype,BufferList.prototype),BufferListStream.prototype._new=function(callback){return new BufferListStream(callback)},BufferListStream.prototype._write=function(buf,encoding,callback){this._appendBuffer(buf),"function"==typeof callback&&callback()},BufferListStream.prototype._read=function(size){if(!this.length)return this.push(null);size=Math.min(size,this.length),this.push(this.slice(0,size)),this.consume(size)},BufferListStream.prototype.end=function(chunk){DuplexStream.prototype.end.call(this,chunk),this._callback&&(this._callback(null,this.slice()),this._callback=null)},BufferListStream.prototype._destroy=function(err,cb){this._bufs.length=0,this.length=0,cb(err)},BufferListStream.prototype._isBufferList=function(b){return b instanceof BufferListStream||b instanceof BufferList||BufferListStream.isBufferList(b)},BufferListStream.isBufferList=BufferList.isBufferList,module.exports=BufferListStream,module.exports.BufferListStream=BufferListStream,module.exports.BufferList=BufferList},function(module,exports,__webpack_require__){var Stream=__webpack_require__(6);"disable"===process.env.READABLE_STREAM&&Stream?(module.exports=Stream.Readable,Object.assign(module.exports,Stream),module.exports.Stream=Stream):((exports=module.exports=__webpack_require__(106)).Stream=Stream||exports,exports.Readable=exports,exports.Writable=__webpack_require__(110),exports.Duplex=__webpack_require__(24),exports.Transform=__webpack_require__(113),exports.PassThrough=__webpack_require__(282),exports.finished=__webpack_require__(58),exports.pipeline=__webpack_require__(283))},function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var Buffer=__webpack_require__(5).Buffer,inspect=__webpack_require__(0).inspect,custom=inspect&&inspect.custom||"inspect";module.exports=function(){function BufferList(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,BufferList),this.head=null,this.tail=null,this.length=0}var Constructor,protoProps,staticProps;return Constructor=BufferList,(protoProps=[{key:"push",value:function(v){var entry={data:v,next:null};this.length>0?this.tail.next=entry:this.head=entry,this.tail=entry,++this.length}},{key:"unshift",value:function(v){var entry={data:v,next:this.head};0===this.length&&(this.tail=entry),this.head=entry,++this.length}},{key:"shift",value:function(){if(0!==this.length){var ret=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,ret}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(s){if(0===this.length)return"";for(var p=this.head,ret=""+p.data;p=p.next;)ret+=s+p.data;return ret}},{key:"concat",value:function(n){if(0===this.length)return Buffer.alloc(0);for(var src,target,offset,ret=Buffer.allocUnsafe(n>>>0),p=this.head,i=0;p;)src=p.data,target=ret,offset=i,Buffer.prototype.copy.call(src,target,offset),i+=p.data.length,p=p.next;return ret}},{key:"consume",value:function(n,hasStrings){var ret;return n<this.head.data.length?(ret=this.head.data.slice(0,n),this.head.data=this.head.data.slice(n)):ret=n===this.head.data.length?this.shift():hasStrings?this._getString(n):this._getBuffer(n),ret}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(n){var p=this.head,c=1,ret=p.data;for(n-=ret.length;p=p.next;){var str=p.data,nb=n>str.length?str.length:n;if(nb===str.length?ret+=str:ret+=str.slice(0,n),0==(n-=nb)){nb===str.length?(++c,p.next?this.head=p.next:this.head=this.tail=null):(this.head=p,p.data=str.slice(nb));break}++c}return this.length-=c,ret}},{key:"_getBuffer",value:function(n){var ret=Buffer.allocUnsafe(n),p=this.head,c=1;for(p.data.copy(ret),n-=p.data.length;p=p.next;){var buf=p.data,nb=n>buf.length?buf.length:n;if(buf.copy(ret,ret.length-n,0,nb),0==(n-=nb)){nb===buf.length?(++c,p.next?this.head=p.next:this.head=this.tail=null):(this.head=p,p.data=buf.slice(nb));break}++c}return this.length-=c,ret}},{key:custom,value:function(_,options){return inspect(this,function(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},options,{depth:0,customInspect:!1}))}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),BufferList}()},function(module,exports,__webpack_require__){"use strict";var _Object$setPrototypeO;function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var finished=__webpack_require__(58),kLastResolve=Symbol("lastResolve"),kLastReject=Symbol("lastReject"),kError=Symbol("error"),kEnded=Symbol("ended"),kLastPromise=Symbol("lastPromise"),kHandlePromise=Symbol("handlePromise"),kStream=Symbol("stream");function createIterResult(value,done){return{value:value,done:done}}function readAndResolve(iter){var resolve=iter[kLastResolve];if(null!==resolve){var data=iter[kStream].read();null!==data&&(iter[kLastPromise]=null,iter[kLastResolve]=null,iter[kLastReject]=null,resolve(createIterResult(data,!1)))}}function onReadable(iter){process.nextTick(readAndResolve,iter)}var AsyncIteratorPrototype=Object.getPrototypeOf((function(){})),ReadableStreamAsyncIteratorPrototype=Object.setPrototypeOf((_defineProperty(_Object$setPrototypeO={get stream(){return this[kStream]},next:function(){var _this=this,error=this[kError];if(null!==error)return Promise.reject(error);if(this[kEnded])return Promise.resolve(createIterResult(void 0,!0));if(this[kStream].destroyed)return new Promise((function(resolve,reject){process.nextTick((function(){_this[kError]?reject(_this[kError]):resolve(createIterResult(void 0,!0))}))}));var promise,lastPromise=this[kLastPromise];if(lastPromise)promise=new Promise(function(lastPromise,iter){return function(resolve,reject){lastPromise.then((function(){iter[kEnded]?resolve(createIterResult(void 0,!0)):iter[kHandlePromise](resolve,reject)}),reject)}}(lastPromise,this));else{var data=this[kStream].read();if(null!==data)return Promise.resolve(createIterResult(data,!1));promise=new Promise(this[kHandlePromise])}return this[kLastPromise]=promise,promise}},Symbol.asyncIterator,(function(){return this})),_defineProperty(_Object$setPrototypeO,"return",(function(){var _this2=this;return new Promise((function(resolve,reject){_this2[kStream].destroy(null,(function(err){err?reject(err):resolve(createIterResult(void 0,!0))}))}))})),_Object$setPrototypeO),AsyncIteratorPrototype);module.exports=function(stream){var _Object$create,iterator=Object.create(ReadableStreamAsyncIteratorPrototype,(_defineProperty(_Object$create={},kStream,{value:stream,writable:!0}),_defineProperty(_Object$create,kLastResolve,{value:null,writable:!0}),_defineProperty(_Object$create,kLastReject,{value:null,writable:!0}),_defineProperty(_Object$create,kError,{value:null,writable:!0}),_defineProperty(_Object$create,kEnded,{value:stream._readableState.endEmitted,writable:!0}),_defineProperty(_Object$create,kHandlePromise,{value:function(resolve,reject){var data=iterator[kStream].read();data?(iterator[kLastPromise]=null,iterator[kLastResolve]=null,iterator[kLastReject]=null,resolve(createIterResult(data,!1))):(iterator[kLastResolve]=resolve,iterator[kLastReject]=reject)},writable:!0}),_Object$create));return iterator[kLastPromise]=null,finished(stream,(function(err){if(err&&"ERR_STREAM_PREMATURE_CLOSE"!==err.code){var reject=iterator[kLastReject];return null!==reject&&(iterator[kLastPromise]=null,iterator[kLastResolve]=null,iterator[kLastReject]=null,reject(err)),void(iterator[kError]=err)}var resolve=iterator[kLastResolve];null!==resolve&&(iterator[kLastPromise]=null,iterator[kLastResolve]=null,iterator[kLastReject]=null,resolve(createIterResult(void 0,!0))),iterator[kEnded]=!0})),stream.on("readable",onReadable.bind(null,iterator)),iterator}},function(module,exports,__webpack_require__){"use strict";function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var ERR_INVALID_ARG_TYPE=__webpack_require__(17).codes.ERR_INVALID_ARG_TYPE;module.exports=function(Readable,iterable,opts){var iterator;if(iterable&&"function"==typeof iterable.next)iterator=iterable;else if(iterable&&iterable[Symbol.asyncIterator])iterator=iterable[Symbol.asyncIterator]();else{if(!iterable||!iterable[Symbol.iterator])throw new ERR_INVALID_ARG_TYPE("iterable",["Iterable"],iterable);iterator=iterable[Symbol.iterator]()}var readable=new Readable(function(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({objectMode:!0},opts)),reading=!1;function next(){return _next2.apply(this,arguments)}function _next2(){return(_next2=_asyncToGenerator((function*(){try{var _ref=yield iterator.next(),value=_ref.value;_ref.done?readable.push(null):readable.push(yield value)?next():reading=!1}catch(err){readable.destroy(err)}}))).apply(this,arguments)}return readable._read=function(){reading||(reading=!0,next())},readable}},function(module,exports,__webpack_require__){"use strict";module.exports=PassThrough;var Transform=__webpack_require__(113);function PassThrough(options){if(!(this instanceof PassThrough))return new PassThrough(options);Transform.call(this,options)}__webpack_require__(2)(PassThrough,Transform),PassThrough.prototype._transform=function(chunk,encoding,cb){cb(null,chunk)}},function(module,exports,__webpack_require__){"use strict";var eos;var _require$codes=__webpack_require__(17).codes,ERR_MISSING_ARGS=_require$codes.ERR_MISSING_ARGS,ERR_STREAM_DESTROYED=_require$codes.ERR_STREAM_DESTROYED;function noop(err){if(err)throw err}function destroyer(stream,reading,writing,callback){callback=function(callback){var called=!1;return function(){called||(called=!0,callback.apply(void 0,arguments))}}(callback);var closed=!1;stream.on("close",(function(){closed=!0})),void 0===eos&&(eos=__webpack_require__(58)),eos(stream,{readable:reading,writable:writing},(function(err){if(err)return callback(err);closed=!0,callback()}));var destroyed=!1;return function(err){if(!closed&&!destroyed)return destroyed=!0,function(stream){return stream.setHeader&&"function"==typeof stream.abort}(stream)?stream.abort():"function"==typeof stream.destroy?stream.destroy():void callback(err||new ERR_STREAM_DESTROYED("pipe"))}}function call(fn){fn()}function pipe(from,to){return from.pipe(to)}function popCallback(streams){return streams.length?"function"!=typeof streams[streams.length-1]?noop:streams.pop():noop}module.exports=function(){for(var _len=arguments.length,streams=new Array(_len),_key=0;_key<_len;_key++)streams[_key]=arguments[_key];var error,callback=popCallback(streams);if(Array.isArray(streams[0])&&(streams=streams[0]),streams.length<2)throw new ERR_MISSING_ARGS("streams");var destroys=streams.map((function(stream,i){var reading=i<streams.length-1;return destroyer(stream,reading,i>0,(function(err){error||(error=err),err&&destroys.forEach(call),reading||(destroys.forEach(call),callback(error))}))}));return streams.reduce(pipe)}},function(module,exports,__webpack_require__){"use strict";const{Buffer:Buffer}=__webpack_require__(5),symbol=Symbol.for("BufferList");function BufferList(buf){if(!(this instanceof BufferList))return new BufferList(buf);BufferList._init.call(this,buf)}BufferList._init=function(buf){Object.defineProperty(this,symbol,{value:!0}),this._bufs=[],this.length=0,buf&&this.append(buf)},BufferList.prototype._new=function(buf){return new BufferList(buf)},BufferList.prototype._offset=function(offset){if(0===offset)return[0,0];let tot=0;for(let i=0;i<this._bufs.length;i++){const _t=tot+this._bufs[i].length;if(offset<_t||i===this._bufs.length-1)return[i,offset-tot];tot=_t}},BufferList.prototype._reverseOffset=function(blOffset){const bufferId=blOffset[0];let offset=blOffset[1];for(let i=0;i<bufferId;i++)offset+=this._bufs[i].length;return offset},BufferList.prototype.get=function(index){if(index>this.length||index<0)return;const offset=this._offset(index);return this._bufs[offset[0]][offset[1]]},BufferList.prototype.slice=function(start,end){return"number"==typeof start&&start<0&&(start+=this.length),"number"==typeof end&&end<0&&(end+=this.length),this.copy(null,0,start,end)},BufferList.prototype.copy=function(dst,dstStart,srcStart,srcEnd){if(("number"!=typeof srcStart||srcStart<0)&&(srcStart=0),("number"!=typeof srcEnd||srcEnd>this.length)&&(srcEnd=this.length),srcStart>=this.length)return dst||Buffer.alloc(0);if(srcEnd<=0)return dst||Buffer.alloc(0);const copy=!!dst,off=this._offset(srcStart),len=srcEnd-srcStart;let bytes=len,bufoff=copy&&dstStart||0,start=off[1];if(0===srcStart&&srcEnd===this.length){if(!copy)return 1===this._bufs.length?this._bufs[0]:Buffer.concat(this._bufs,this.length);for(let i=0;i<this._bufs.length;i++)this._bufs[i].copy(dst,bufoff),bufoff+=this._bufs[i].length;return dst}if(bytes<=this._bufs[off[0]].length-start)return copy?this._bufs[off[0]].copy(dst,dstStart,start,start+bytes):this._bufs[off[0]].slice(start,start+bytes);copy||(dst=Buffer.allocUnsafe(len));for(let i=off[0];i<this._bufs.length;i++){const l=this._bufs[i].length-start;if(!(bytes>l)){this._bufs[i].copy(dst,bufoff,start,start+bytes),bufoff+=l;break}this._bufs[i].copy(dst,bufoff,start),bufoff+=l,bytes-=l,start&&(start=0)}return dst.length>bufoff?dst.slice(0,bufoff):dst},BufferList.prototype.shallowSlice=function(start,end){if(start=start||0,end="number"!=typeof end?this.length:end,start<0&&(start+=this.length),end<0&&(end+=this.length),start===end)return this._new();const startOffset=this._offset(start),endOffset=this._offset(end),buffers=this._bufs.slice(startOffset[0],endOffset[0]+1);return 0===endOffset[1]?buffers.pop():buffers[buffers.length-1]=buffers[buffers.length-1].slice(0,endOffset[1]),0!==startOffset[1]&&(buffers[0]=buffers[0].slice(startOffset[1])),this._new(buffers)},BufferList.prototype.toString=function(encoding,start,end){return this.slice(start,end).toString(encoding)},BufferList.prototype.consume=function(bytes){if(bytes=Math.trunc(bytes),Number.isNaN(bytes)||bytes<=0)return this;for(;this._bufs.length;){if(!(bytes>=this._bufs[0].length)){this._bufs[0]=this._bufs[0].slice(bytes),this.length-=bytes;break}bytes-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift()}return this},BufferList.prototype.duplicate=function(){const copy=this._new();for(let i=0;i<this._bufs.length;i++)copy.append(this._bufs[i]);return copy},BufferList.prototype.append=function(buf){if(null==buf)return this;if(buf.buffer)this._appendBuffer(Buffer.from(buf.buffer,buf.byteOffset,buf.byteLength));else if(Array.isArray(buf))for(let i=0;i<buf.length;i++)this.append(buf[i]);else if(this._isBufferList(buf))for(let i=0;i<buf._bufs.length;i++)this.append(buf._bufs[i]);else"number"==typeof buf&&(buf=buf.toString()),this._appendBuffer(Buffer.from(buf));return this},BufferList.prototype._appendBuffer=function(buf){this._bufs.push(buf),this.length+=buf.length},BufferList.prototype.indexOf=function(search,offset,encoding){if(void 0===encoding&&"string"==typeof offset&&(encoding=offset,offset=void 0),"function"==typeof search||Array.isArray(search))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if("number"==typeof search?search=Buffer.from([search]):"string"==typeof search?search=Buffer.from(search,encoding):this._isBufferList(search)?search=search.slice():Array.isArray(search.buffer)?search=Buffer.from(search.buffer,search.byteOffset,search.byteLength):Buffer.isBuffer(search)||(search=Buffer.from(search)),offset=Number(offset||0),isNaN(offset)&&(offset=0),offset<0&&(offset=this.length+offset),offset<0&&(offset=0),0===search.length)return offset>this.length?this.length:offset;const blOffset=this._offset(offset);let blIndex=blOffset[0],buffOffset=blOffset[1];for(;blIndex<this._bufs.length;blIndex++){const buff=this._bufs[blIndex];for(;buffOffset<buff.length;){if(buff.length-buffOffset>=search.length){const nativeSearchResult=buff.indexOf(search,buffOffset);if(-1!==nativeSearchResult)return this._reverseOffset([blIndex,nativeSearchResult]);buffOffset=buff.length-search.length+1}else{const revOffset=this._reverseOffset([blIndex,buffOffset]);if(this._match(revOffset,search))return revOffset;buffOffset++}}buffOffset=0}return-1},BufferList.prototype._match=function(offset,search){if(this.length-offset<search.length)return!1;for(let searchOffset=0;searchOffset<search.length;searchOffset++)if(this.get(offset+searchOffset)!==search[searchOffset])return!1;return!0},function(){const methods={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(const m in methods)!function(m){BufferList.prototype[m]=null===methods[m]?function(offset,byteLength){return this.slice(offset,offset+byteLength)[m](0,byteLength)}:function(offset){return this.slice(offset,offset+methods[m])[m](0)}}(m)}(),BufferList.prototype._isBufferList=function(b){return b instanceof BufferList||BufferList.isBufferList(b)},BufferList.isBufferList=function(b){return null!=b&&b[symbol]},module.exports=BufferList},function(module,exports){module.exports=class{constructor(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}}},function(module,exports,__webpack_require__){const writeToStream=__webpack_require__(115),EventEmitter=__webpack_require__(4);class Accumulator extends EventEmitter{constructor(){super(),this._array=new Array(20),this._i=0}write(chunk){return this._array[this._i++]=chunk,!0}concat(){let length=0;const lengths=new Array(this._array.length),list=this._array;let i,pos=0;for(i=0;i<list.length&&void 0!==list[i];i++)"string"!=typeof list[i]?lengths[i]=list[i].length:lengths[i]=Buffer.byteLength(list[i]),length+=lengths[i];const result=Buffer.allocUnsafe(length);for(i=0;i<list.length&&void 0!==list[i];i++)"string"!=typeof list[i]?(list[i].copy(result,pos),pos+=lengths[i]):(result.write(list[i],pos),pos+=lengths[i]);return result}}module.exports=function(packet,opts){const stream=new Accumulator;return writeToStream(packet,stream,opts),stream.concat()}},function(module,exports){const cache={},SubOk=Buffer.isBuffer(Buffer.from([1,2]).subarray(0,1));function generateBuffer(i){const buffer=Buffer.allocUnsafe(2);return buffer.writeUInt8(i>>8,0),buffer.writeUInt8(255&i,1),buffer}module.exports={cache:cache,generateCache:function(){for(let i=0;i<65536;i++)cache[i]=generateBuffer(i)},generateNumber:generateBuffer,genBufVariableByteInt:function(num){let digit=0,pos=0;const buffer=Buffer.allocUnsafe(4);do{digit=num%128|0,(num=num/128|0)>0&&(digit|=128),buffer.writeUInt8(digit,pos++)}while(num>0&&pos<4);return num>0&&(pos=0),SubOk?buffer.subarray(0,pos):buffer.slice(0,pos)},generate4ByteBuffer:function(num){const buffer=Buffer.allocUnsafe(4);return buffer.writeUInt32BE(num,0),buffer}}},function(module,exports,__webpack_require__){"use strict";function ReInterval(callback,interval,args){var self=this;this._callback=callback,this._args=args,this._interval=setInterval(callback,interval,this._args),this.reschedule=function(interval){interval||(interval=self._interval),self._interval&&clearInterval(self._interval),self._interval=setInterval(self._callback,interval,self._args)},this.clear=function(){self._interval&&(clearInterval(self._interval),self._interval=void 0)},this.destroy=function(){self._interval&&clearInterval(self._interval),self._callback=void 0,self._interval=void 0,self._args=void 0}}module.exports=function(){if("function"!=typeof arguments[0])throw new Error("callback needed");if("number"!=typeof arguments[1])throw new Error("interval needed");var args;if(arguments.length>0){args=new Array(arguments.length-2);for(var i=0;i<args.length;i++)args[i]=arguments[i+2]}return new ReInterval(arguments[0],arguments[1],args)}},function(module,exports,__webpack_require__){"use strict";function validateTopic(topic){for(var parts=topic.split("/"),i=0;i<parts.length;i++)if("+"!==parts[i]){if("#"===parts[i])return i===parts.length-1;if(-1!==parts[i].indexOf("+")||-1!==parts[i].indexOf("#"))return!1}return!0}module.exports={validateTopics:function(topics){if(0===topics.length)return"empty_topic_list";for(var i=0;i<topics.length;i++)if(!validateTopic(topics[i]))return topics[i];return null}}},function(module,exports,__webpack_require__){"use strict";var MqttClient=__webpack_require__(88),Store=__webpack_require__(53),url=__webpack_require__(31),xtend=__webpack_require__(54),debug=__webpack_require__(13)("mqttjs"),protocols={};function connect(brokerUrl,opts){if(debug("connecting to an MQTT broker..."),"object"!=typeof brokerUrl||opts||(opts=brokerUrl,brokerUrl=null),opts=opts||{},brokerUrl){var parsed=url.parse(brokerUrl,!0);if(null!=parsed.port&&(parsed.port=Number(parsed.port)),null===(opts=xtend(parsed,opts)).protocol)throw new Error("Missing protocol");opts.protocol=opts.protocol.replace(/:$/,"")}if(function(opts){var matches;opts.auth&&((matches=opts.auth.match(/^(.+):(.+)$/))?(opts.username=matches[1],opts.password=matches[2]):opts.username=opts.auth)}(opts),opts.query&&"string"==typeof opts.query.clientId&&(opts.clientId=opts.query.clientId),opts.cert&&opts.key){if(!opts.protocol)throw new Error("Missing secure protocol key");if(-1===["mqtts","wss","wxs","alis"].indexOf(opts.protocol))switch(opts.protocol){case"mqtt":opts.protocol="mqtts";break;case"ws":opts.protocol="wss";break;case"wx":opts.protocol="wxs";break;case"ali":opts.protocol="alis";break;default:throw new Error('Unknown protocol for secure connection: "'+opts.protocol+'"!')}}if(!protocols[opts.protocol]){var isSecure=-1!==["mqtts","wss"].indexOf(opts.protocol);opts.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter((function(key,index){return(!isSecure||index%2!=0)&&"function"==typeof protocols[key]}))[0]}if(!1===opts.clean&&!opts.clientId)throw new Error("Missing clientId for unclean clients");opts.protocol&&(opts.defaultProtocol=opts.protocol);var client=new MqttClient((function(client){return opts.servers&&(client._reconnectCount&&client._reconnectCount!==opts.servers.length||(client._reconnectCount=0),opts.host=opts.servers[client._reconnectCount].host,opts.port=opts.servers[client._reconnectCount].port,opts.protocol=opts.servers[client._reconnectCount].protocol?opts.servers[client._reconnectCount].protocol:opts.defaultProtocol,opts.hostname=opts.host,client._reconnectCount++),debug("calling streambuilder for",opts.protocol),protocols[opts.protocol](client,opts)}),opts);return client.on("error",(function(){})),client}"undefined"!=typeof process&&"browser"!==process.title||"function"==typeof __webpack_require__?(protocols.mqtt=__webpack_require__(116),protocols.tcp=__webpack_require__(116),protocols.ssl=__webpack_require__(59),protocols.tls=__webpack_require__(59),protocols.mqtts=__webpack_require__(59)):(protocols.wx=__webpack_require__(117),protocols.wxs=__webpack_require__(117),protocols.ali=__webpack_require__(118),protocols.alis=__webpack_require__(118)),protocols.ws=__webpack_require__(119),protocols.wss=__webpack_require__(119),module.exports=connect,module.exports.connect=connect,module.exports.MqttClient=MqttClient,module.exports.Store=Store},function(module,exports,__webpack_require__){var once=__webpack_require__(292),noop=function(){},eos=function(stream,opts,callback){if("function"==typeof opts)return eos(stream,null,opts);opts||(opts={}),callback=once(callback||noop);var ws=stream._writableState,rs=stream._readableState,readable=opts.readable||!1!==opts.readable&&stream.readable,writable=opts.writable||!1!==opts.writable&&stream.writable,cancelled=!1,onlegacyfinish=function(){stream.writable||onfinish()},onfinish=function(){writable=!1,readable||callback.call(stream)},onend=function(){readable=!1,writable||callback.call(stream)},onexit=function(exitCode){callback.call(stream,exitCode?new Error("exited with error code: "+exitCode):null)},onerror=function(err){callback.call(stream,err)},onclose=function(){process.nextTick(onclosenexttick)},onclosenexttick=function(){if(!cancelled)return(!readable||rs&&rs.ended&&!rs.destroyed)&&(!writable||ws&&ws.ended&&!ws.destroyed)?void 0:callback.call(stream,new Error("premature close"))},onrequest=function(){stream.req.on("finish",onfinish)};return!function(stream){return stream.setHeader&&"function"==typeof stream.abort}(stream)?writable&&!ws&&(stream.on("end",onlegacyfinish),stream.on("close",onlegacyfinish)):(stream.on("complete",onfinish),stream.on("abort",onclose),stream.req?onrequest():stream.on("request",onrequest)),function(stream){return stream.stdio&&Array.isArray(stream.stdio)&&3===stream.stdio.length}(stream)&&stream.on("exit",onexit),stream.on("end",onend),stream.on("finish",onfinish),!1!==opts.error&&stream.on("error",onerror),stream.on("close",onclose),function(){cancelled=!0,stream.removeListener("complete",onfinish),stream.removeListener("abort",onclose),stream.removeListener("request",onrequest),stream.req&&stream.req.removeListener("finish",onfinish),stream.removeListener("end",onlegacyfinish),stream.removeListener("close",onlegacyfinish),stream.removeListener("finish",onfinish),stream.removeListener("exit",onexit),stream.removeListener("end",onend),stream.removeListener("error",onerror),stream.removeListener("close",onclose)}};module.exports=eos},function(module,exports,__webpack_require__){var wrappy=__webpack_require__(293);function once(fn){var f=function(){return f.called?f.value:(f.called=!0,f.value=fn.apply(this,arguments))};return f.called=!1,f}function onceStrict(fn){var f=function(){if(f.called)throw new Error(f.onceError);return f.called=!0,f.value=fn.apply(this,arguments)},name=fn.name||"Function wrapped with `once`";return f.onceError=name+" shouldn't be called more than once",f.called=!1,f}module.exports=wrappy(once),module.exports.strict=wrappy(onceStrict),once.proto=once((function(){Object.defineProperty(Function.prototype,"once",{value:function(){return once(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return onceStrict(this)},configurable:!0})}))},function(module,exports){module.exports=function wrappy(fn,cb){if(fn&&cb)return wrappy(fn)(cb);if("function"!=typeof fn)throw new TypeError("need wrapper function");return Object.keys(fn).forEach((function(k){wrapper[k]=fn[k]})),wrapper;function wrapper(){for(var args=new Array(arguments.length),i=0;i<args.length;i++)args[i]=arguments[i];var ret=fn.apply(this,args),cb=args[args.length-1];return"function"==typeof ret&&ret!==cb&&Object.keys(cb).forEach((function(k){ret[k]=cb[k]})),ret}}},function(module,exports){module.exports=function(stream){var rs=stream._readableState;return rs?rs.objectMode||"number"==typeof stream._duplexState?stream.read():stream.read(function(state){if(state.buffer.length)return state.buffer.head?state.buffer.head.data.length:state.buffer[0].length;return state.length}(rs)):null}},function(module,exports,__webpack_require__){"use strict";exports.byteLength=function(b64){var lens=getLens(b64),validLen=lens[0],placeHoldersLen=lens[1];return 3*(validLen+placeHoldersLen)/4-placeHoldersLen},exports.toByteArray=function(b64){var tmp,i,lens=getLens(b64),validLen=lens[0],placeHoldersLen=lens[1],arr=new Arr(function(b64,validLen,placeHoldersLen){return 3*(validLen+placeHoldersLen)/4-placeHoldersLen}(0,validLen,placeHoldersLen)),curByte=0,len=placeHoldersLen>0?validLen-4:validLen;for(i=0;i<len;i+=4)tmp=revLookup[b64.charCodeAt(i)]<<18|revLookup[b64.charCodeAt(i+1)]<<12|revLookup[b64.charCodeAt(i+2)]<<6|revLookup[b64.charCodeAt(i+3)],arr[curByte++]=tmp>>16&255,arr[curByte++]=tmp>>8&255,arr[curByte++]=255&tmp;2===placeHoldersLen&&(tmp=revLookup[b64.charCodeAt(i)]<<2|revLookup[b64.charCodeAt(i+1)]>>4,arr[curByte++]=255&tmp);1===placeHoldersLen&&(tmp=revLookup[b64.charCodeAt(i)]<<10|revLookup[b64.charCodeAt(i+1)]<<4|revLookup[b64.charCodeAt(i+2)]>>2,arr[curByte++]=tmp>>8&255,arr[curByte++]=255&tmp);return arr},exports.fromByteArray=function(uint8){for(var tmp,len=uint8.length,extraBytes=len%3,parts=[],i=0,len2=len-extraBytes;i<len2;i+=16383)parts.push(encodeChunk(uint8,i,i+16383>len2?len2:i+16383));1===extraBytes?(tmp=uint8[len-1],parts.push(lookup[tmp>>2]+lookup[tmp<<4&63]+"==")):2===extraBytes&&(tmp=(uint8[len-2]<<8)+uint8[len-1],parts.push(lookup[tmp>>10]+lookup[tmp>>4&63]+lookup[tmp<<2&63]+"="));return parts.join("")};for(var lookup=[],revLookup=[],Arr="undefined"!=typeof Uint8Array?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,len=code.length;i<len;++i)lookup[i]=code[i],revLookup[code.charCodeAt(i)]=i;function getLens(b64){var len=b64.length;if(len%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var validLen=b64.indexOf("=");return-1===validLen&&(validLen=len),[validLen,validLen===len?0:4-validLen%4]}function encodeChunk(uint8,start,end){for(var tmp,num,output=[],i=start;i<end;i+=3)tmp=(uint8[i]<<16&16711680)+(uint8[i+1]<<8&65280)+(255&uint8[i+2]),output.push(lookup[(num=tmp)>>18&63]+lookup[num>>12&63]+lookup[num>>6&63]+lookup[63&num]);return output.join("")}revLookup["-".charCodeAt(0)]=62,revLookup["_".charCodeAt(0)]=63},function(module,exports,__webpack_require__){"use strict";const WebSocket=__webpack_require__(120);WebSocket.createWebSocketStream=__webpack_require__(304),WebSocket.Server=__webpack_require__(305),WebSocket.Receiver=__webpack_require__(122),WebSocket.Sender=__webpack_require__(124),module.exports=WebSocket},function(module,exports,__webpack_require__){"use strict";try{module.exports=__webpack_require__(121)(__dirname)}catch(e){module.exports=__webpack_require__(299)}},function(module,exports){module.exports=require("path")},function(module,exports,__webpack_require__){"use strict";module.exports={mask:(source,mask,output,offset,length)=>{for(var i=0;i<length;i++)output[offset+i]=source[i]^mask[3&i]},unmask:(buffer,mask)=>{const length=buffer.length;for(var i=0;i<length;i++)buffer[i]^=mask[3&i]}}},function(module,exports,__webpack_require__){"use strict";const kDone=Symbol("kDone"),kRun=Symbol("kRun");module.exports=class{constructor(concurrency){this[kDone]=()=>{this.pending--,this[kRun]()},this.concurrency=concurrency||1/0,this.jobs=[],this.pending=0}add(job){this.jobs.push(job),this[kRun]()}[kRun](){if(this.pending!==this.concurrency&&this.jobs.length){const job=this.jobs.shift();this.pending++,job(this[kDone])}}}},function(module,exports,__webpack_require__){"use strict";try{module.exports=__webpack_require__(121)(__dirname)}catch(e){module.exports=__webpack_require__(302)}},function(module,exports,__webpack_require__){"use strict";module.exports=buf=>{for(var len=buf.length,i=0;i<len;)if(buf[i]<128)i++;else if(192==(224&buf[i])){if(i+1===len||128!=(192&buf[i+1])||192==(254&buf[i]))return!1;i+=2}else if(224==(240&buf[i])){if(i+2>=len||128!=(192&buf[i+1])||128!=(192&buf[i+2])||224===buf[i]&&128==(224&buf[i+1])||237===buf[i]&&160==(224&buf[i+1]))return!1;i+=3}else{if(240!=(248&buf[i]))return!1;if(i+3>=len||128!=(192&buf[i+1])||128!=(192&buf[i+2])||128!=(192&buf[i+3])||240===buf[i]&&128==(240&buf[i+1])||244===buf[i]&&buf[i+1]>143||buf[i]>244)return!1;i+=4}return!0}},function(module,exports,__webpack_require__){"use strict";class Event{constructor(type,target){this.target=target,this.type=type}}class MessageEvent extends Event{constructor(data,target){super("message",target),this.data=data}}class CloseEvent extends Event{constructor(code,reason,target){super("close",target),this.wasClean=target._closeFrameReceived&&target._closeFrameSent,this.reason=reason,this.code=code}}class OpenEvent extends Event{constructor(target){super("open",target)}}class ErrorEvent extends Event{constructor(error,target){super("error",target),this.message=error.message,this.error=error}}const EventTarget={addEventListener(type,listener,options){if("function"!=typeof listener)return;function onMessage(data){listener.call(this,new MessageEvent(data,this))}function onClose(code,message){listener.call(this,new CloseEvent(code,message,this))}function onError(error){listener.call(this,new ErrorEvent(error,this))}function onOpen(){listener.call(this,new OpenEvent(this))}const method=options&&options.once?"once":"on";"message"===type?(onMessage._listener=listener,this[method](type,onMessage)):"close"===type?(onClose._listener=listener,this[method](type,onClose)):"error"===type?(onError._listener=listener,this[method](type,onError)):"open"===type?(onOpen._listener=listener,this[method](type,onOpen)):this[method](type,listener)},removeEventListener(type,listener){const listeners=this.listeners(type);for(let i=0;i<listeners.length;i++)listeners[i]!==listener&&listeners[i]._listener!==listener||this.removeListener(type,listeners[i])}};module.exports=EventTarget},function(module,exports,__webpack_require__){"use strict";const{Duplex:Duplex}=__webpack_require__(6);function emitClose(stream){stream.emit("close")}function duplexOnEnd(){!this.destroyed&&this._writableState.finished&&this.destroy()}function duplexOnError(err){this.removeListener("error",duplexOnError),this.destroy(),0===this.listenerCount("error")&&this.emit("error",err)}module.exports=function(ws,options){let resumeOnReceiverDrain=!0;function receiverOnDrain(){resumeOnReceiverDrain&&ws._socket.resume()}ws.readyState===ws.CONNECTING?ws.once("open",(function(){ws._receiver.removeAllListeners("drain"),ws._receiver.on("drain",receiverOnDrain)})):(ws._receiver.removeAllListeners("drain"),ws._receiver.on("drain",receiverOnDrain));const duplex=new Duplex({...options,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return ws.on("message",(function(msg){duplex.push(msg)||(resumeOnReceiverDrain=!1,ws._socket.pause())})),ws.once("error",(function(err){duplex.destroyed||duplex.destroy(err)})),ws.once("close",(function(){duplex.destroyed||duplex.push(null)})),duplex._destroy=function(err,callback){if(ws.readyState===ws.CLOSED)return callback(err),void process.nextTick(emitClose,duplex);let called=!1;ws.once("error",(function(err){called=!0,callback(err)})),ws.once("close",(function(){called||callback(err),process.nextTick(emitClose,duplex)})),ws.terminate()},duplex._final=function(callback){ws.readyState!==ws.CONNECTING?null!==ws._socket&&(ws._socket._writableState.finished?(callback(),duplex._readableState.endEmitted&&duplex.destroy()):(ws._socket.once("finish",(function(){callback()})),ws.close())):ws.once("open",(function(){duplex._final(callback)}))},duplex._read=function(){ws.readyState!==ws.OPEN||resumeOnReceiverDrain||(resumeOnReceiverDrain=!0,ws._receiver._writableState.needDrain||ws._socket.resume())},duplex._write=function(chunk,encoding,callback){ws.readyState!==ws.CONNECTING?ws.send(chunk,callback):ws.once("open",(function(){duplex._write(chunk,encoding,callback)}))},duplex.on("end",duplexOnEnd),duplex.on("error",duplexOnError),duplex}},function(module,exports,__webpack_require__){"use strict";const EventEmitter=__webpack_require__(4),{createHash:createHash}=__webpack_require__(10),{createServer:createServer,STATUS_CODES:STATUS_CODES}=__webpack_require__(35),PerMessageDeflate=__webpack_require__(41),WebSocket=__webpack_require__(120),{format:format,parse:parse}=__webpack_require__(125),{GUID:GUID,kWebSocket:kWebSocket}=__webpack_require__(25),keyRegex=/^[+/0-9A-Za-z]{22}==$/;function emitClose(server){server.emit("close")}function socketOnError(){this.destroy()}function abortHandshake(socket,code,message,headers){socket.writable&&(message=message||STATUS_CODES[code],headers={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(message),...headers},socket.write(`HTTP/1.1 ${code} ${STATUS_CODES[code]}\r\n`+Object.keys(headers).map((h=>`${h}: ${headers[h]}`)).join("\r\n")+"\r\n\r\n"+message)),socket.removeListener("error",socketOnError),socket.destroy()}module.exports=class extends EventEmitter{constructor(options,callback){if(super(),null==(options={maxPayload:104857600,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,...options}).port&&!options.server&&!options.noServer)throw new TypeError('One of the "port", "server", or "noServer" options must be specified');null!=options.port?(this._server=createServer(((req,res)=>{const body=STATUS_CODES[426];res.writeHead(426,{"Content-Length":body.length,"Content-Type":"text/plain"}),res.end(body)})),this._server.listen(options.port,options.host,options.backlog,callback)):options.server&&(this._server=options.server),this._server&&(this._removeListeners=function(server,map){for(const event of Object.keys(map))server.on(event,map[event]);return function(){for(const event of Object.keys(map))server.removeListener(event,map[event])}}(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(req,socket,head)=>{this.handleUpgrade(req,socket,head,(ws=>{this.emit("connection",ws,req)}))}})),!0===options.perMessageDeflate&&(options.perMessageDeflate={}),options.clientTracking&&(this.clients=new Set),this.options=options}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(cb){if(cb&&this.once("close",cb),this.clients)for(const client of this.clients)client.terminate();const server=this._server;server&&(this._removeListeners(),this._removeListeners=this._server=null,null!=this.options.port)?server.close((()=>this.emit("close"))):process.nextTick(emitClose,this)}shouldHandle(req){if(this.options.path){const index=req.url.indexOf("?");if((-1!==index?req.url.slice(0,index):req.url)!==this.options.path)return!1}return!0}handleUpgrade(req,socket,head,cb){socket.on("error",socketOnError);const key=void 0!==req.headers["sec-websocket-key"]&&req.headers["sec-websocket-key"].trim(),version=+req.headers["sec-websocket-version"],extensions={};if("GET"!==req.method||"websocket"!==req.headers.upgrade.toLowerCase()||!key||!keyRegex.test(key)||8!==version&&13!==version||!this.shouldHandle(req))return abortHandshake(socket,400);if(this.options.perMessageDeflate){const perMessageDeflate=new PerMessageDeflate(this.options.perMessageDeflate,!0,this.options.maxPayload);try{const offers=parse(req.headers["sec-websocket-extensions"]);offers[PerMessageDeflate.extensionName]&&(perMessageDeflate.accept(offers[PerMessageDeflate.extensionName]),extensions[PerMessageDeflate.extensionName]=perMessageDeflate)}catch(err){return abortHandshake(socket,400)}}if(this.options.verifyClient){const info={origin:req.headers[""+(8===version?"sec-websocket-origin":"origin")],secure:!(!req.connection.authorized&&!req.connection.encrypted),req:req};if(2===this.options.verifyClient.length)return void this.options.verifyClient(info,((verified,code,message,headers)=>{if(!verified)return abortHandshake(socket,code||401,message,headers);this.completeUpgrade(key,extensions,req,socket,head,cb)}));if(!this.options.verifyClient(info))return abortHandshake(socket,401)}this.completeUpgrade(key,extensions,req,socket,head,cb)}completeUpgrade(key,extensions,req,socket,head,cb){if(!socket.readable||!socket.writable)return socket.destroy();if(socket[kWebSocket])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");const headers=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade","Sec-WebSocket-Accept: "+createHash("sha1").update(key+GUID).digest("base64")],ws=new WebSocket(null);let protocol=req.headers["sec-websocket-protocol"];if(protocol&&(protocol=protocol.trim().split(/ *, */),protocol=this.options.handleProtocols?this.options.handleProtocols(protocol,req):protocol[0],protocol&&(headers.push("Sec-WebSocket-Protocol: "+protocol),ws.protocol=protocol)),extensions[PerMessageDeflate.extensionName]){const params=extensions[PerMessageDeflate.extensionName].params,value=format({[PerMessageDeflate.extensionName]:[params]});headers.push("Sec-WebSocket-Extensions: "+value),ws._extensions=extensions}this.emit("headers",headers,req),socket.write(headers.concat("\r\n").join("\r\n")),socket.removeListener("error",socketOnError),ws.setSocket(socket,head,this.options.maxPayload),this.clients&&(this.clients.add(ws),ws.on("close",(()=>this.clients.delete(ws)))),cb(ws)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const tslib_1=__webpack_require__(11),util_1=__webpack_require__(0),mqttClient_1=tslib_1.__importDefault(__webpack_require__(87));class MqttStreamClient extends mqttClient_1.default{constructor(opts={}){super(opts),this.streamFrom=(streamHooks=[],opts={qos:1})=>tslib_1.__awaiter(this,void 0,void 0,(function*(){const hooks=Array.isArray(streamHooks)?streamHooks:[streamHooks],promises=[];for(let index=0;index<hooks.length;index+=1){const streamHook=hooks[index],promise=this.addStreamHook(streamHook,opts);promises.push(promise)}return Promise.all(promises)})),this.addStreamHook=(streamHook,opts={qos:1})=>tslib_1.__awaiter(this,void 0,void 0,(function*(){const{stream:stream,deviceId:deviceId,channel:channel,topic:topic,routingKey:routingKey,qos:qos,callback:callback,cache:cache=!0}=streamHook;if(util_1.isNullOrUndefined(stream)&&(util_1.isNullOrUndefined(channel)||util_1.isNullOrUndefined(deviceId)))return void this.log("error","Missing Stream or Device ID and Channel");if(util_1.isNullOrUndefined(callback))return void this.log("error","Missing Callback");let topicName=topic,topicQOS=qos||this.connectionOpts.qos;if(!util_1.isNullOrUndefined(stream)&&stream.length>0){if(!this.liveStreamExists(stream))return void console.error(`Stream ${stream||""} does not exist`);topicName=this.streamTopicFor(stream),topicQOS=cache?1:0}else topicName=this.streamChannelTopicFor({deviceId:deviceId,channel:channel,topic:topic,routingKey:routingKey});this.addMqttListener(topicName,callback,topicName),yield this.subscribe(topicName,Object.assign(Object.assign(Object.assign({},this.connectionOpts),opts),{qos:topicQOS}))})),this.streamChannelTopicFor=(params={})=>{const{deviceId:deviceId="",channel:channel="",routingKey:routingKey="",topic:topic=""}=params;if(0===routingKey.length&&0===deviceId.length)return this.defaultStreamRoutingKey;if(routingKey.length>0)return routingKey;let streamRoutingKey=deviceId||this.getDeviceId();return channel.length>0&&(streamRoutingKey+="/"+channel),topic.length>0&&(streamRoutingKey+="/"+topic),""+streamRoutingKey},this.streamTopicFor=(stream="")=>`${stream}/${this.liveStreamSuffix}`,this.defaultStreamRoutingKey="#"}}delete MqttStreamClient.prototype.onMessage,delete MqttStreamClient.prototype.publish,exports.default=MqttStreamClient},function(module,exports,__webpack_require__){var factory;"undefined"!=typeof self&&self,factory=function(){return function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{enumerable:!0,get:getter})},__webpack_require__.r=function(exports){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})},__webpack_require__.t=function(value,mode){if(1&mode&&(value=__webpack_require__(value)),8&mode)return value;if(4&mode&&"object"==typeof value&&value&&value.__esModule)return value;var ns=Object.create(null);if(__webpack_require__.r(ns),Object.defineProperty(ns,"default",{enumerable:!0,value:value}),2&mode&&"string"!=typeof value)for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=0)}({"./src/byte.ts":
/*!*********************!*\
  !*** ./src/byte.ts ***!
  \*********************/
/*! no static exports found */function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BYTE={LF:"\n",NULL:"\0"}},"./src/client.ts":
/*!***********************!*\
  !*** ./src/client.ts ***!
  \***********************/
/*! no static exports found */function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__generator=this&&this.__generator||function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!((t=(t=_.trys).length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}};Object.defineProperty(exports,"__esModule",{value:!0});var stomp_handler_1=__webpack_require__(/*! ./stomp-handler */"./src/stomp-handler.ts"),versions_1=__webpack_require__(/*! ./versions */"./src/versions.ts"),web_socket_state_1=__webpack_require__(/*! ./web-socket-state */"./src/web-socket-state.ts"),Client=function(){function Client(conf){void 0===conf&&(conf={}),this.stompVersions=versions_1.Versions.default,this.reconnectDelay=5e3,this.heartbeatIncoming=1e4,this.heartbeatOutgoing=1e4,this.splitLargeFrames=!1,this.maxWebSocketChunkSize=8192,this.forceBinaryWSFrames=!1,this.appendMissingNULLonIncoming=!1,this._active=!1;var noOp=function(){};this.debug=noOp,this.beforeConnect=noOp,this.onConnect=noOp,this.onDisconnect=noOp,this.onUnhandledMessage=noOp,this.onUnhandledReceipt=noOp,this.onUnhandledFrame=noOp,this.onStompError=noOp,this.onWebSocketClose=noOp,this.onWebSocketError=noOp,this.logRawCommunication=!1,this.connectHeaders={},this._disconnectHeaders={},this.configure(conf)}return Object.defineProperty(Client.prototype,"webSocket",{get:function(){return this._webSocket},enumerable:!0,configurable:!0}),Object.defineProperty(Client.prototype,"disconnectHeaders",{get:function(){return this._disconnectHeaders},set:function(value){this._disconnectHeaders=value,this._stompHandler&&(this._stompHandler.disconnectHeaders=this._disconnectHeaders)},enumerable:!0,configurable:!0}),Object.defineProperty(Client.prototype,"connected",{get:function(){return!!this._stompHandler&&this._stompHandler.connected},enumerable:!0,configurable:!0}),Object.defineProperty(Client.prototype,"connectedVersion",{get:function(){return this._stompHandler?this._stompHandler.connectedVersion:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(Client.prototype,"active",{get:function(){return this._active},enumerable:!0,configurable:!0}),Client.prototype.configure=function(conf){Object.assign(this,conf)},Client.prototype.activate=function(){this._active=!0,this._connect()},Client.prototype._connect=function(){return __awaiter(this,void 0,void 0,(function(){var _this=this;return __generator(this,(function(_a){switch(_a.label){case 0:return this.connected?(this.debug("STOMP: already connected, nothing to do"),[2]):[4,this.beforeConnect()];case 1:return _a.sent(),this._active?(this.debug("Opening Web Socket..."),this._webSocket=this._createWebSocket(),this._stompHandler=new stomp_handler_1.StompHandler(this,this._webSocket,{debug:this.debug,stompVersions:this.stompVersions,connectHeaders:this.connectHeaders,disconnectHeaders:this._disconnectHeaders,heartbeatIncoming:this.heartbeatIncoming,heartbeatOutgoing:this.heartbeatOutgoing,splitLargeFrames:this.splitLargeFrames,maxWebSocketChunkSize:this.maxWebSocketChunkSize,forceBinaryWSFrames:this.forceBinaryWSFrames,logRawCommunication:this.logRawCommunication,appendMissingNULLonIncoming:this.appendMissingNULLonIncoming,onConnect:function(frame){if(!_this._active)return _this.debug("STOMP got connected while deactivate was issued, will disconnect now"),void _this._disposeStompHandler();_this.onConnect(frame)},onDisconnect:function(frame){_this.onDisconnect(frame)},onStompError:function(frame){_this.onStompError(frame)},onWebSocketClose:function(evt){_this.onWebSocketClose(evt),_this._active&&_this._schedule_reconnect()},onWebSocketError:function(evt){_this.onWebSocketError(evt)},onUnhandledMessage:function(message){_this.onUnhandledMessage(message)},onUnhandledReceipt:function(frame){_this.onUnhandledReceipt(frame)},onUnhandledFrame:function(frame){_this.onUnhandledFrame(frame)}}),this._stompHandler.start(),[2]):(this.debug("Client has been marked inactive, will not attempt to connect"),[2])}}))}))},Client.prototype._createWebSocket=function(){var webSocket;return(webSocket=this.webSocketFactory?this.webSocketFactory():new WebSocket(this.brokerURL,this.stompVersions.protocolVersions())).binaryType="arraybuffer",webSocket},Client.prototype._schedule_reconnect=function(){var _this=this;this.reconnectDelay>0&&(this.debug("STOMP: scheduling reconnection in "+this.reconnectDelay+"ms"),this._reconnector=setTimeout((function(){_this._connect()}),this.reconnectDelay))},Client.prototype.deactivate=function(){this._active=!1,this._reconnector&&clearTimeout(this._reconnector),this._disposeStompHandler()},Client.prototype.forceDisconnect=function(){this._webSocket&&(this._webSocket.readyState!==web_socket_state_1.WebSocketState.CONNECTING&&this._webSocket.readyState!==web_socket_state_1.WebSocketState.OPEN||this._stompHandler._closeWebsocket())},Client.prototype._disposeStompHandler=function(){this._stompHandler&&(this._stompHandler.dispose(),this._stompHandler=null)},Client.prototype.publish=function(params){this._stompHandler.publish(params)},Client.prototype.watchForReceipt=function(receiptId,callback){this._stompHandler.watchForReceipt(receiptId,callback)},Client.prototype.subscribe=function(destination,callback,headers){return void 0===headers&&(headers={}),this._stompHandler.subscribe(destination,callback,headers)},Client.prototype.unsubscribe=function(id,headers){void 0===headers&&(headers={}),this._stompHandler.unsubscribe(id,headers)},Client.prototype.begin=function(transactionId){return this._stompHandler.begin(transactionId)},Client.prototype.commit=function(transactionId){this._stompHandler.commit(transactionId)},Client.prototype.abort=function(transactionId){this._stompHandler.abort(transactionId)},Client.prototype.ack=function(messageId,subscriptionId,headers){void 0===headers&&(headers={}),this._stompHandler.ack(messageId,subscriptionId,headers)},Client.prototype.nack=function(messageId,subscriptionId,headers){void 0===headers&&(headers={}),this._stompHandler.nack(messageId,subscriptionId,headers)},Client}();exports.Client=Client},"./src/compatibility/compat-client.ts":
/*!********************************************!*\
  !*** ./src/compatibility/compat-client.ts ***!
  \********************************************/
/*! no static exports found */function(module,exports,__webpack_require__){"use strict";var extendStatics,__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)});Object.defineProperty(exports,"__esModule",{value:!0});var client_1=__webpack_require__(/*! ../client */"./src/client.ts"),heartbeat_info_1=__webpack_require__(/*! ./heartbeat-info */"./src/compatibility/heartbeat-info.ts"),CompatClient=function(_super){function CompatClient(webSocketFactory){var _this=_super.call(this)||this;return _this.maxWebSocketFrameSize=16384,_this._heartbeatInfo=new heartbeat_info_1.HeartbeatInfo(_this),_this.reconnect_delay=0,_this.webSocketFactory=webSocketFactory,_this.debug=function(){for(var message=[],_i=0;_i<arguments.length;_i++)message[_i]=arguments[_i];console.log.apply(console,message)},_this}return __extends(CompatClient,_super),CompatClient.prototype._parseConnect=function(){for(var closeEventCallback,connectCallback,errorCallback,args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];var headers={};if(args.length<2)throw new Error("Connect requires at least 2 arguments");if("function"==typeof args[1])headers=args[0],connectCallback=args[1],errorCallback=args[2],closeEventCallback=args[3];else switch(args.length){case 6:headers.login=args[0],headers.passcode=args[1],connectCallback=args[2],errorCallback=args[3],closeEventCallback=args[4],headers.host=args[5];break;default:headers.login=args[0],headers.passcode=args[1],connectCallback=args[2],errorCallback=args[3],closeEventCallback=args[4]}return[headers,connectCallback,errorCallback,closeEventCallback]},CompatClient.prototype.connect=function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];var out=this._parseConnect.apply(this,args);out[0]&&(this.connectHeaders=out[0]),out[1]&&(this.onConnect=out[1]),out[2]&&(this.onStompError=out[2]),out[3]&&(this.onWebSocketClose=out[3]),_super.prototype.activate.call(this)},CompatClient.prototype.disconnect=function(disconnectCallback,headers){void 0===headers&&(headers={}),disconnectCallback&&(this.onDisconnect=disconnectCallback),this.disconnectHeaders=headers,_super.prototype.deactivate.call(this)},CompatClient.prototype.send=function(destination,headers,body){void 0===headers&&(headers={}),void 0===body&&(body="");var skipContentLengthHeader=!1===(headers=Object.assign({},headers))["content-length"];skipContentLengthHeader&&delete headers["content-length"],this.publish({destination:destination,headers:headers,body:body,skipContentLengthHeader:skipContentLengthHeader})},Object.defineProperty(CompatClient.prototype,"reconnect_delay",{set:function(value){this.reconnectDelay=value},enumerable:!0,configurable:!0}),Object.defineProperty(CompatClient.prototype,"ws",{get:function(){return this._webSocket},enumerable:!0,configurable:!0}),Object.defineProperty(CompatClient.prototype,"version",{get:function(){return this.connectedVersion},enumerable:!0,configurable:!0}),Object.defineProperty(CompatClient.prototype,"onreceive",{get:function(){return this.onUnhandledMessage},set:function(value){this.onUnhandledMessage=value},enumerable:!0,configurable:!0}),Object.defineProperty(CompatClient.prototype,"onreceipt",{get:function(){return this.onUnhandledReceipt},set:function(value){this.onUnhandledReceipt=value},enumerable:!0,configurable:!0}),Object.defineProperty(CompatClient.prototype,"heartbeat",{get:function(){return this._heartbeatInfo},set:function(value){this.heartbeatIncoming=value.incoming,this.heartbeatOutgoing=value.outgoing},enumerable:!0,configurable:!0}),CompatClient}(client_1.Client);exports.CompatClient=CompatClient},"./src/compatibility/heartbeat-info.ts":
/*!*********************************************!*\
  !*** ./src/compatibility/heartbeat-info.ts ***!
  \*********************************************/
/*! no static exports found */function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var HeartbeatInfo=function(){function HeartbeatInfo(client){this.client=client}return Object.defineProperty(HeartbeatInfo.prototype,"outgoing",{get:function(){return this.client.heartbeatOutgoing},set:function(value){this.client.heartbeatOutgoing=value},enumerable:!0,configurable:!0}),Object.defineProperty(HeartbeatInfo.prototype,"incoming",{get:function(){return this.client.heartbeatIncoming},set:function(value){this.client.heartbeatIncoming=value},enumerable:!0,configurable:!0}),HeartbeatInfo}();exports.HeartbeatInfo=HeartbeatInfo},"./src/compatibility/stomp.ts":
/*!************************************!*\
  !*** ./src/compatibility/stomp.ts ***!
  \************************************/
/*! no static exports found */function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var versions_1=__webpack_require__(/*! ../versions */"./src/versions.ts"),compat_client_1=__webpack_require__(/*! ./compat-client */"./src/compatibility/compat-client.ts"),Stomp=function(){function Stomp(){}return Stomp.client=function(url,protocols){return null==protocols&&(protocols=versions_1.Versions.default.protocolVersions()),new compat_client_1.CompatClient((function(){return new(Stomp.WebSocketClass||WebSocket)(url,protocols)}))},Stomp.over=function(ws){var wsFn;return"function"==typeof ws?wsFn=ws:(console.warn("Stomp.over did not receive a factory, auto reconnect will not work. Please see https://stomp-js.github.io/api-docs/latest/classes/Stomp.html#over"),wsFn=function(){return ws}),new compat_client_1.CompatClient(wsFn)},Stomp.WebSocketClass=null,Stomp}();exports.Stomp=Stomp},"./src/frame-impl.ts":
/*!***************************!*\
  !*** ./src/frame-impl.ts ***!
  \***************************/
/*! no static exports found */function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var byte_1=__webpack_require__(/*! ./byte */"./src/byte.ts"),FrameImpl=function(){function FrameImpl(params){var command=params.command,headers=params.headers,body=params.body,binaryBody=params.binaryBody,escapeHeaderValues=params.escapeHeaderValues,skipContentLengthHeader=params.skipContentLengthHeader;this.command=command,this.headers=Object.assign({},headers||{}),binaryBody?(this._binaryBody=binaryBody,this.isBinaryBody=!0):(this._body=body||"",this.isBinaryBody=!1),this.escapeHeaderValues=escapeHeaderValues||!1,this.skipContentLengthHeader=skipContentLengthHeader||!1}return Object.defineProperty(FrameImpl.prototype,"body",{get:function(){return!this._body&&this.isBinaryBody&&(this._body=(new TextDecoder).decode(this._binaryBody)),this._body},enumerable:!0,configurable:!0}),Object.defineProperty(FrameImpl.prototype,"binaryBody",{get:function(){return this._binaryBody||this.isBinaryBody||(this._binaryBody=(new TextEncoder).encode(this._body)),this._binaryBody},enumerable:!0,configurable:!0}),FrameImpl.fromRawFrame=function(rawFrame,escapeHeaderValues){for(var headers={},trim=function(str){return str.replace(/^\s+|\s+$/g,"")},_i=0,_a=rawFrame.headers.reverse();_i<_a.length;_i++){var header=_a[_i],key=(header.indexOf(":"),trim(header[0])),value=trim(header[1]);escapeHeaderValues&&"CONNECT"!==rawFrame.command&&"CONNECTED"!==rawFrame.command&&(value=FrameImpl.hdrValueUnEscape(value)),headers[key]=value}return new FrameImpl({command:rawFrame.command,headers:headers,binaryBody:rawFrame.binaryBody,escapeHeaderValues:escapeHeaderValues})},FrameImpl.prototype.toString=function(){return this.serializeCmdAndHeaders()},FrameImpl.prototype.serialize=function(){var cmdAndHeaders=this.serializeCmdAndHeaders();return this.isBinaryBody?FrameImpl.toUnit8Array(cmdAndHeaders,this._binaryBody).buffer:cmdAndHeaders+this._body+byte_1.BYTE.NULL},FrameImpl.prototype.serializeCmdAndHeaders=function(){var lines=[this.command];this.skipContentLengthHeader&&delete this.headers["content-length"];for(var _i=0,_a=Object.keys(this.headers||{});_i<_a.length;_i++){var name_1=_a[_i],value=this.headers[name_1];this.escapeHeaderValues&&"CONNECT"!==this.command&&"CONNECTED"!==this.command?lines.push(name_1+":"+FrameImpl.hdrValueEscape(""+value)):lines.push(name_1+":"+value)}return(this.isBinaryBody||!this.isBodyEmpty()&&!this.skipContentLengthHeader)&&lines.push("content-length:"+this.bodyLength()),lines.join(byte_1.BYTE.LF)+byte_1.BYTE.LF+byte_1.BYTE.LF},FrameImpl.prototype.isBodyEmpty=function(){return 0===this.bodyLength()},FrameImpl.prototype.bodyLength=function(){var binaryBody=this.binaryBody;return binaryBody?binaryBody.length:0},FrameImpl.sizeOfUTF8=function(s){return s?(new TextEncoder).encode(s).length:0},FrameImpl.toUnit8Array=function(cmdAndHeaders,binaryBody){var uint8CmdAndHeaders=(new TextEncoder).encode(cmdAndHeaders),nullTerminator=new Uint8Array([0]),uint8Frame=new Uint8Array(uint8CmdAndHeaders.length+binaryBody.length+nullTerminator.length);return uint8Frame.set(uint8CmdAndHeaders),uint8Frame.set(binaryBody,uint8CmdAndHeaders.length),uint8Frame.set(nullTerminator,uint8CmdAndHeaders.length+binaryBody.length),uint8Frame},FrameImpl.marshall=function(params){return new FrameImpl(params).serialize()},FrameImpl.hdrValueEscape=function(str){return str.replace(/\\/g,"\\\\").replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/:/g,"\\c")},FrameImpl.hdrValueUnEscape=function(str){return str.replace(/\\r/g,"\r").replace(/\\n/g,"\n").replace(/\\c/g,":").replace(/\\\\/g,"\\")},FrameImpl}();exports.FrameImpl=FrameImpl},"./src/index.ts":
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
/*! no static exports found */function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}Object.defineProperty(exports,"__esModule",{value:!0}),__export(__webpack_require__(/*! ./client */"./src/client.ts")),__export(__webpack_require__(/*! ./frame-impl */"./src/frame-impl.ts")),__export(__webpack_require__(/*! ./parser */"./src/parser.ts")),__export(__webpack_require__(/*! ./stomp-config */"./src/stomp-config.ts")),__export(__webpack_require__(/*! ./stomp-headers */"./src/stomp-headers.ts")),__export(__webpack_require__(/*! ./stomp-subscription */"./src/stomp-subscription.ts")),__export(__webpack_require__(/*! ./versions */"./src/versions.ts")),__export(__webpack_require__(/*! ./web-socket-state */"./src/web-socket-state.ts")),__export(__webpack_require__(/*! ./compatibility/compat-client */"./src/compatibility/compat-client.ts")),__export(__webpack_require__(/*! ./compatibility/stomp */"./src/compatibility/stomp.ts"))},"./src/parser.ts":
/*!***********************!*\
  !*** ./src/parser.ts ***!
  \***********************/
/*! no static exports found */function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Parser=function(){function Parser(onFrame,onIncomingPing){this.onFrame=onFrame,this.onIncomingPing=onIncomingPing,this._encoder=new TextEncoder,this._decoder=new TextDecoder,this._token=[],this._initState()}return Parser.prototype.parseChunk=function(segment,appendMissingNULLonIncoming){var chunk;if(void 0===appendMissingNULLonIncoming&&(appendMissingNULLonIncoming=!1),chunk=segment instanceof ArrayBuffer?new Uint8Array(segment):this._encoder.encode(segment),appendMissingNULLonIncoming&&0!==chunk[chunk.length-1]){var chunkWithNull=new Uint8Array(chunk.length+1);chunkWithNull.set(chunk,0),chunkWithNull[chunk.length]=0,chunk=chunkWithNull}for(var i=0;i<chunk.length;i++){var byte=chunk[i];this._onByte(byte)}},Parser.prototype._collectFrame=function(byte){0!==byte&&13!==byte&&(10!==byte?(this._onByte=this._collectCommand,this._reinjectByte(byte)):this.onIncomingPing())},Parser.prototype._collectCommand=function(byte){if(13!==byte)return 10===byte?(this._results.command=this._consumeTokenAsUTF8(),void(this._onByte=this._collectHeaders)):void this._consumeByte(byte)},Parser.prototype._collectHeaders=function(byte){13!==byte&&(10!==byte?(this._onByte=this._collectHeaderKey,this._reinjectByte(byte)):this._setupCollectBody())},Parser.prototype._reinjectByte=function(byte){this._onByte(byte)},Parser.prototype._collectHeaderKey=function(byte){if(58===byte)return this._headerKey=this._consumeTokenAsUTF8(),void(this._onByte=this._collectHeaderValue);this._consumeByte(byte)},Parser.prototype._collectHeaderValue=function(byte){if(13!==byte)return 10===byte?(this._results.headers.push([this._headerKey,this._consumeTokenAsUTF8()]),this._headerKey=void 0,void(this._onByte=this._collectHeaders)):void this._consumeByte(byte)},Parser.prototype._setupCollectBody=function(){var contentLengthHeader=this._results.headers.filter((function(header){return"content-length"===header[0]}))[0];contentLengthHeader?(this._bodyBytesRemaining=parseInt(contentLengthHeader[1],10),this._onByte=this._collectBodyFixedSize):this._onByte=this._collectBodyNullTerminated},Parser.prototype._collectBodyNullTerminated=function(byte){0!==byte?this._consumeByte(byte):this._retrievedBody()},Parser.prototype._collectBodyFixedSize=function(byte){0!=this._bodyBytesRemaining--?this._consumeByte(byte):this._retrievedBody()},Parser.prototype._retrievedBody=function(){this._results.binaryBody=this._consumeTokenAsRaw(),this.onFrame(this._results),this._initState()},Parser.prototype._consumeByte=function(byte){this._token.push(byte)},Parser.prototype._consumeTokenAsUTF8=function(){return this._decoder.decode(this._consumeTokenAsRaw())},Parser.prototype._consumeTokenAsRaw=function(){var rawResult=new Uint8Array(this._token);return this._token=[],rawResult},Parser.prototype._initState=function(){this._results={command:void 0,headers:[],binaryBody:void 0},this._token=[],this._headerKey=void 0,this._onByte=this._collectFrame},Parser}();exports.Parser=Parser},"./src/stomp-config.ts":
/*!*****************************!*\
  !*** ./src/stomp-config.ts ***!
  \*****************************/
/*! no static exports found */function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var StompConfig=function(){};exports.StompConfig=StompConfig},"./src/stomp-handler.ts":
/*!******************************!*\
  !*** ./src/stomp-handler.ts ***!
  \******************************/
/*! no static exports found */function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var byte_1=__webpack_require__(/*! ./byte */"./src/byte.ts"),frame_impl_1=__webpack_require__(/*! ./frame-impl */"./src/frame-impl.ts"),parser_1=__webpack_require__(/*! ./parser */"./src/parser.ts"),versions_1=__webpack_require__(/*! ./versions */"./src/versions.ts"),web_socket_state_1=__webpack_require__(/*! ./web-socket-state */"./src/web-socket-state.ts"),StompHandler=function(){function StompHandler(_client,_webSocket,config){var _this=this;void 0===config&&(config={}),this._client=_client,this._webSocket=_webSocket,this._serverFrameHandlers={CONNECTED:function(frame){_this.debug("connected to server "+frame.headers.server),_this._connected=!0,_this._connectedVersion=frame.headers.version,_this._connectedVersion===versions_1.Versions.V1_2&&(_this._escapeHeaderValues=!0),_this._setupHeartbeat(frame.headers),_this.onConnect(frame)},MESSAGE:function(frame){var subscription=frame.headers.subscription,onReceive=_this._subscriptions[subscription]||_this.onUnhandledMessage,message=frame,client=_this,messageId=_this._connectedVersion===versions_1.Versions.V1_2?message.headers.ack:message.headers["message-id"];message.ack=function(headers){return void 0===headers&&(headers={}),client.ack(messageId,subscription,headers)},message.nack=function(headers){return void 0===headers&&(headers={}),client.nack(messageId,subscription,headers)},onReceive(message)},RECEIPT:function(frame){var callback=_this._receiptWatchers[frame.headers["receipt-id"]];callback?(callback(frame),delete _this._receiptWatchers[frame.headers["receipt-id"]]):_this.onUnhandledReceipt(frame)},ERROR:function(frame){_this.onStompError(frame)}},this._counter=0,this._subscriptions={},this._receiptWatchers={},this._partialData="",this._escapeHeaderValues=!1,this._lastServerActivityTS=Date.now(),this.configure(config)}return Object.defineProperty(StompHandler.prototype,"connectedVersion",{get:function(){return this._connectedVersion},enumerable:!0,configurable:!0}),Object.defineProperty(StompHandler.prototype,"connected",{get:function(){return this._connected},enumerable:!0,configurable:!0}),StompHandler.prototype.configure=function(conf){Object.assign(this,conf)},StompHandler.prototype.start=function(){var _this=this,parser=new parser_1.Parser((function(rawFrame){var frame=frame_impl_1.FrameImpl.fromRawFrame(rawFrame,_this._escapeHeaderValues);_this.logRawCommunication||_this.debug("<<< "+frame),(_this._serverFrameHandlers[frame.command]||_this.onUnhandledFrame)(frame)}),(function(){_this.debug("<<< PONG")}));this._webSocket.onmessage=function(evt){if(_this.debug("Received data"),_this._lastServerActivityTS=Date.now(),_this.logRawCommunication){var rawChunkAsString=evt.data instanceof ArrayBuffer?(new TextDecoder).decode(evt.data):evt.data;_this.debug("<<< "+rawChunkAsString)}parser.parseChunk(evt.data,_this.appendMissingNULLonIncoming)},this._webSocket.onclose=function(closeEvent){_this.debug("Connection closed to "+_this._webSocket.url),_this.onWebSocketClose(closeEvent),_this._cleanUp()},this._webSocket.onerror=function(errorEvent){_this.onWebSocketError(errorEvent)},this._webSocket.onopen=function(){var connectHeaders=Object.assign({},_this.connectHeaders);_this.debug("Web Socket Opened..."),connectHeaders["accept-version"]=_this.stompVersions.supportedVersions(),connectHeaders["heart-beat"]=[_this.heartbeatOutgoing,_this.heartbeatIncoming].join(","),_this._transmit({command:"CONNECT",headers:connectHeaders})}},StompHandler.prototype._setupHeartbeat=function(headers){var _this=this;if((headers.version===versions_1.Versions.V1_1||headers.version===versions_1.Versions.V1_2)&&headers["heart-beat"]){var _a=headers["heart-beat"].split(",").map((function(v){return parseInt(v,10)})),serverOutgoing=_a[0],serverIncoming=_a[1];if(0!==this.heartbeatOutgoing&&0!==serverIncoming){var ttl=Math.max(this.heartbeatOutgoing,serverIncoming);this.debug("send PING every "+ttl+"ms"),this._pinger=setInterval((function(){_this._webSocket.readyState===web_socket_state_1.WebSocketState.OPEN&&(_this._webSocket.send(byte_1.BYTE.LF),_this.debug(">>> PING"))}),ttl)}if(0!==this.heartbeatIncoming&&0!==serverOutgoing){var ttl_1=Math.max(this.heartbeatIncoming,serverOutgoing);this.debug("check PONG every "+ttl_1+"ms"),this._ponger=setInterval((function(){var delta=Date.now()-_this._lastServerActivityTS;delta>2*ttl_1&&(_this.debug("did not receive server activity for the last "+delta+"ms"),_this._closeWebsocket())}),ttl_1)}}},StompHandler.prototype._closeWebsocket=function(){this._webSocket.onmessage=function(){},this._webSocket.close()},StompHandler.prototype._transmit=function(params){var command=params.command,headers=params.headers,body=params.body,binaryBody=params.binaryBody,skipContentLengthHeader=params.skipContentLengthHeader,frame=new frame_impl_1.FrameImpl({command:command,headers:headers,body:body,binaryBody:binaryBody,escapeHeaderValues:this._escapeHeaderValues,skipContentLengthHeader:skipContentLengthHeader}),rawChunk=frame.serialize();if(this.logRawCommunication?this.debug(">>> "+rawChunk):this.debug(">>> "+frame),this.forceBinaryWSFrames&&"string"==typeof rawChunk&&(rawChunk=(new TextEncoder).encode(rawChunk)),"string"==typeof rawChunk&&this.splitLargeFrames)for(var out=rawChunk;out.length>0;){var chunk=out.substring(0,this.maxWebSocketChunkSize);out=out.substring(this.maxWebSocketChunkSize),this._webSocket.send(chunk),this.debug("chunk sent = "+chunk.length+", remaining = "+out.length)}else this._webSocket.send(rawChunk)},StompHandler.prototype.dispose=function(){var _this=this;if(this.connected)try{var disconnectHeaders=Object.assign({},this.disconnectHeaders);disconnectHeaders.receipt||(disconnectHeaders.receipt="close-"+this._counter++),this.watchForReceipt(disconnectHeaders.receipt,(function(frame){_this._closeWebsocket(),_this._cleanUp(),_this.onDisconnect(frame)})),this._transmit({command:"DISCONNECT",headers:disconnectHeaders})}catch(error){this.debug("Ignoring error during disconnect "+error)}else this._webSocket.readyState!==web_socket_state_1.WebSocketState.CONNECTING&&this._webSocket.readyState!==web_socket_state_1.WebSocketState.OPEN||this._closeWebsocket()},StompHandler.prototype._cleanUp=function(){this._connected=!1,this._pinger&&clearInterval(this._pinger),this._ponger&&clearInterval(this._ponger)},StompHandler.prototype.publish=function(params){var destination=params.destination,headers=params.headers,body=params.body,binaryBody=params.binaryBody,skipContentLengthHeader=params.skipContentLengthHeader,hdrs=Object.assign({destination:destination},headers);this._transmit({command:"SEND",headers:hdrs,body:body,binaryBody:binaryBody,skipContentLengthHeader:skipContentLengthHeader})},StompHandler.prototype.watchForReceipt=function(receiptId,callback){this._receiptWatchers[receiptId]=callback},StompHandler.prototype.subscribe=function(destination,callback,headers){void 0===headers&&(headers={}),(headers=Object.assign({},headers)).id||(headers.id="sub-"+this._counter++),headers.destination=destination,this._subscriptions[headers.id]=callback,this._transmit({command:"SUBSCRIBE",headers:headers});var client=this;return{id:headers.id,unsubscribe:function(hdrs){return client.unsubscribe(headers.id,hdrs)}}},StompHandler.prototype.unsubscribe=function(id,headers){void 0===headers&&(headers={}),headers=Object.assign({},headers),delete this._subscriptions[id],headers.id=id,this._transmit({command:"UNSUBSCRIBE",headers:headers})},StompHandler.prototype.begin=function(transactionId){var txId=transactionId||"tx-"+this._counter++;this._transmit({command:"BEGIN",headers:{transaction:txId}});var client=this;return{id:txId,commit:function(){client.commit(txId)},abort:function(){client.abort(txId)}}},StompHandler.prototype.commit=function(transactionId){this._transmit({command:"COMMIT",headers:{transaction:transactionId}})},StompHandler.prototype.abort=function(transactionId){this._transmit({command:"ABORT",headers:{transaction:transactionId}})},StompHandler.prototype.ack=function(messageId,subscriptionId,headers){void 0===headers&&(headers={}),headers=Object.assign({},headers),this._connectedVersion===versions_1.Versions.V1_2?headers.id=messageId:headers["message-id"]=messageId,headers.subscription=subscriptionId,this._transmit({command:"ACK",headers:headers})},StompHandler.prototype.nack=function(messageId,subscriptionId,headers){return void 0===headers&&(headers={}),headers=Object.assign({},headers),this._connectedVersion===versions_1.Versions.V1_2?headers.id=messageId:headers["message-id"]=messageId,headers.subscription=subscriptionId,this._transmit({command:"NACK",headers:headers})},StompHandler}();exports.StompHandler=StompHandler},"./src/stomp-headers.ts":
/*!******************************!*\
  !*** ./src/stomp-headers.ts ***!
  \******************************/
/*! no static exports found */function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var StompHeaders=function(){};exports.StompHeaders=StompHeaders},"./src/stomp-subscription.ts":
/*!***********************************!*\
  !*** ./src/stomp-subscription.ts ***!
  \***********************************/
/*! no static exports found */function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var StompSubscription=function(){};exports.StompSubscription=StompSubscription},"./src/versions.ts":
/*!*************************!*\
  !*** ./src/versions.ts ***!
  \*************************/
/*! no static exports found */function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Versions=function(){function Versions(versions){this.versions=versions}return Versions.prototype.supportedVersions=function(){return this.versions.join(",")},Versions.prototype.protocolVersions=function(){return this.versions.map((function(x){return"v"+x.replace(".","")+".stomp"}))},Versions.V1_0="1.0",Versions.V1_1="1.1",Versions.V1_2="1.2",Versions.default=new Versions([Versions.V1_0,Versions.V1_1,Versions.V1_2]),Versions}();exports.Versions=Versions},"./src/web-socket-state.ts":
/*!*********************************!*\
  !*** ./src/web-socket-state.ts ***!
  \*********************************/
/*! no static exports found */function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),function(WebSocketState){WebSocketState[WebSocketState.CONNECTING=0]="CONNECTING",WebSocketState[WebSocketState.OPEN=1]="OPEN",WebSocketState[WebSocketState.CLOSING=2]="CLOSING",WebSocketState[WebSocketState.CLOSED=3]="CLOSED"}(exports.WebSocketState||(exports.WebSocketState={}))},0:
/*!****************************!*\
  !*** multi ./src/index.ts ***!
  \****************************/
/*! no static exports found */function(module,exports,__webpack_require__){module.exports=__webpack_require__(/*! /home/kdeepak/MyWork/Tech/stomp/stompjs/src/index.ts */"./src/index.ts")}})},module.exports=factory()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const utils_1=__webpack_require__(30);class StompMessage{constructor(opts){this.blackListed=()=>!(!this.discardMine||this.receiverId!==this.senderId||this.fromApi())||!(!this.discardFromApi||!this.fromApi()),this.fromApi=()=>this.headers&&"true"===this.headers[StompMessage.FROM_API_HEADER],this.ack=()=>{this.message.ack()},this.nack=()=>{this.message.nack()},this.getChannelName=()=>this.channelName,this.getContent=()=>this.content;const{message:message,receiverId:receiverId="",subscriptionOpts:subscriptionOpts={}}=opts,{discardMine:discardMine=!1,discardFromApi:discardFromApi=!1}=subscriptionOpts;this.message=message;const body=message.body||"{}";this.content=utils_1.parseContent(body),this.headers=message.headers||{};const destination=this.headers.destination.split("/"),[senderId,channelName]=destination[destination.length-1].split(".");this.senderId=senderId,this.channelName=channelName,this.receiverId=receiverId,this.discardMine=discardMine,this.discardFromApi=discardFromApi}}StompMessage.FROM_API_HEADER="x-from-sb-api",exports.default=StompMessage},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const tslib_1=__webpack_require__(11),md5_1=tslib_1.__importDefault(__webpack_require__(310)),util_1=__webpack_require__(0),stompClient_1=tslib_1.__importDefault(__webpack_require__(126));class StompStreamClient extends stompClient_1.default{constructor(opts={}){super(opts),this.stompStreamListeners={},this.streamFrom=(streamHooks=[],opts={})=>tslib_1.__awaiter(this,void 0,void 0,(function*(){const hooks=Array.isArray(streamHooks)?streamHooks:[streamHooks],names=[];for(let index=0;index<hooks.length;index+=1){const streamHook=hooks[index],name=this.addStompStreamListener(streamHook,opts);this.isConnected()&&(yield this.bindStompStreamListener(name)),names.push(name)}return names})),this.removeStompStreamListener=name=>tslib_1.__awaiter(this,void 0,void 0,(function*(){util_1.isNullOrUndefined(this.stompStreamListeners[name])?this.log("error",`STOMP listener ${name} does not exist.`):(yield this.unsubscribe(name),delete this.stompStreamListeners[name])})),this.disconnect=()=>new Promise(((resolve,reject)=>{if(this.isConnected())try{const subscriptions=Object.keys(this.stompStreamListeners);for(let index=0;index<subscriptions.length;index+=1){const name=subscriptions[index],{subscription:subscription}=this.stompStreamListeners[name];util_1.isNullOrUndefined(subscription)||subscription.unsubscribe(),delete this.stompStreamListeners[name]}this.stompClient.deactivate(),this.stompClient=void 0,this.emit("disconnect")}catch(error){reject(error)}else resolve(!0)})),this.unsubscribe=name=>new Promise(((resolve,reject)=>{if(this.isConnected()){const{subscription:subscription}=this.stompStreamListeners[name];util_1.isNullOrUndefined(subscription)?reject(new Error("Subscription not found")):(subscription.unsubscribe(),delete this.stompStreamListeners[name].subscription,resolve(!0))}else reject(new Error("Invalid connection"))})),this.addStompStreamListener=(streamHook,opts={})=>{const name="subscription-"+(new Date).getTime();return this.stompStreamListeners[name]={streamHook:streamHook,opts:opts},name},this.bindStompStreamListeners=()=>tslib_1.__awaiter(this,void 0,void 0,(function*(){const names=Object.keys(this.stompStreamListeners);for(let index=0;index<names.length;index+=1){const name=names[index];yield this.bindStompStreamListener(name)}})),this.bindStompStreamListener=name=>tslib_1.__awaiter(this,void 0,void 0,(function*(){if(util_1.isNullOrUndefined(this.stompStreamListeners[name]))this.log("error",`Listner ${name} does not exist.`);else{if(util_1.isNullOrUndefined(this.stompStreamListeners[name].subscription))return new Promise(((resolve,reject)=>{try{const{streamHook:streamHook,opts:opts}=this.stompStreamListeners[name],{stream:stream,deviceId:deviceId,channel:channel,routingKey:routingKey,topic:topic,cache:cache=!0,callback:callback}=streamHook;if(util_1.isNullOrUndefined(stream)&&(util_1.isNullOrUndefined(channel)||util_1.isNullOrUndefined(deviceId)))return void this.log("error","Missing Stream or Device ID and Channel");if(util_1.isNullOrUndefined(callback))return void this.log("error","Missing Callback");let streamTopic="",tempQueue="";stream?(this.liveStreamExists(stream)||(console.error(`Stream ${stream} does not exist`),resolve(void 0)),cache?streamTopic=this.cachedStreamTopicFor({stream:stream}):(streamTopic=this.streamTopicFor({stream:stream,routingKey:routingKey,topic:topic}),tempQueue=this.tempQueue(stream,this.liveStreamSuffix))):(streamTopic=this.streamChannelTopicFor({deviceId:deviceId,channel:channel,routingKey:routingKey,topic:topic}),tempQueue=this.tempQueue(deviceId,channel));const subscriptionHeaders={};tempQueue&&(subscriptionHeaders["x-queue-name"]=tempQueue);const subscriptionId=md5_1.default(`${tempQueue}-${streamTopic}`),subscription=this.stompClient.subscribe(streamTopic,this.consumeCallback.bind(this,callback,opts),Object.assign(Object.assign({},subscriptionHeaders),{id:subscriptionId}));this.stompStreamListeners[name].subscription=subscription,this.log("info","Client subscribed to topic "+streamTopic),resolve(subscriptionId)}catch(error){this.log("error",error),reject(error)}}));this.log("warn",`Listner ${name} already bound to a consumer.`)}})),this.streamChannelTopicFor=(params={})=>{const{deviceId:deviceId,channel:channel,type:type=this.defaultResource,routingKey:routingKey=this.defaultPattern,topic:topic}=params;let resource=deviceId||"";channel&&(resource+="."+channel);let finalTopic=resource;return topic?finalTopic+="."+topic:finalTopic=routingKey,`/${type}/${resource}/${finalTopic}`},this.cachedStreamTopicFor=(params={})=>{const{stream:stream,type:type=this.existingQueuePrefix}=params;return`/${type}/${stream||""}.${this.liveStreamSuffix}`},this.streamTopicFor=(params={})=>{const{stream:stream,type:type=this.defaultResource,routingKey:routingKey=this.defaultPattern}=params;return`/${type}/${stream||""}.${this.liveStreamSuffix}/${routingKey}`},this.defaultPattern="#",this.stompStreamListeners={},this.on("connect",(()=>{this.bindStompStreamListeners()})),this.on("disconnect",(()=>{this.stompStreamListeners={}}))}}delete StompStreamClient.prototype.onMessage,delete StompStreamClient.prototype.publish,delete StompStreamClient.prototype.subcriptionFor,delete StompStreamClient.prototype.destinationFor,exports.default=StompStreamClient},function(module,exports,__webpack_require__){var crypt,utf8,isBuffer,bin,md5;crypt=__webpack_require__(311),utf8=__webpack_require__(127).utf8,isBuffer=__webpack_require__(312),bin=__webpack_require__(127).bin,(md5=function(message,options){message.constructor==String?message=options&&"binary"===options.encoding?bin.stringToBytes(message):utf8.stringToBytes(message):isBuffer(message)?message=Array.prototype.slice.call(message,0):Array.isArray(message)||message.constructor===Uint8Array||(message=message.toString());for(var m=crypt.bytesToWords(message),l=8*message.length,a=1732584193,b=-271733879,c=-1732584194,d=271733878,i=0;i<m.length;i++)m[i]=16711935&(m[i]<<8|m[i]>>>24)|4278255360&(m[i]<<24|m[i]>>>8);m[l>>>5]|=128<<l%32,m[14+(l+64>>>9<<4)]=l;var FF=md5._ff,GG=md5._gg,HH=md5._hh,II=md5._ii;for(i=0;i<m.length;i+=16){var aa=a,bb=b,cc=c,dd=d;a=FF(a,b,c,d,m[i+0],7,-680876936),d=FF(d,a,b,c,m[i+1],12,-389564586),c=FF(c,d,a,b,m[i+2],17,606105819),b=FF(b,c,d,a,m[i+3],22,-1044525330),a=FF(a,b,c,d,m[i+4],7,-176418897),d=FF(d,a,b,c,m[i+5],12,1200080426),c=FF(c,d,a,b,m[i+6],17,-1473231341),b=FF(b,c,d,a,m[i+7],22,-45705983),a=FF(a,b,c,d,m[i+8],7,1770035416),d=FF(d,a,b,c,m[i+9],12,-1958414417),c=FF(c,d,a,b,m[i+10],17,-42063),b=FF(b,c,d,a,m[i+11],22,-1990404162),a=FF(a,b,c,d,m[i+12],7,1804603682),d=FF(d,a,b,c,m[i+13],12,-40341101),c=FF(c,d,a,b,m[i+14],17,-1502002290),a=GG(a,b=FF(b,c,d,a,m[i+15],22,1236535329),c,d,m[i+1],5,-165796510),d=GG(d,a,b,c,m[i+6],9,-1069501632),c=GG(c,d,a,b,m[i+11],14,643717713),b=GG(b,c,d,a,m[i+0],20,-373897302),a=GG(a,b,c,d,m[i+5],5,-701558691),d=GG(d,a,b,c,m[i+10],9,38016083),c=GG(c,d,a,b,m[i+15],14,-660478335),b=GG(b,c,d,a,m[i+4],20,-405537848),a=GG(a,b,c,d,m[i+9],5,568446438),d=GG(d,a,b,c,m[i+14],9,-1019803690),c=GG(c,d,a,b,m[i+3],14,-187363961),b=GG(b,c,d,a,m[i+8],20,1163531501),a=GG(a,b,c,d,m[i+13],5,-1444681467),d=GG(d,a,b,c,m[i+2],9,-51403784),c=GG(c,d,a,b,m[i+7],14,1735328473),a=HH(a,b=GG(b,c,d,a,m[i+12],20,-1926607734),c,d,m[i+5],4,-378558),d=HH(d,a,b,c,m[i+8],11,-2022574463),c=HH(c,d,a,b,m[i+11],16,1839030562),b=HH(b,c,d,a,m[i+14],23,-35309556),a=HH(a,b,c,d,m[i+1],4,-1530992060),d=HH(d,a,b,c,m[i+4],11,1272893353),c=HH(c,d,a,b,m[i+7],16,-155497632),b=HH(b,c,d,a,m[i+10],23,-1094730640),a=HH(a,b,c,d,m[i+13],4,681279174),d=HH(d,a,b,c,m[i+0],11,-358537222),c=HH(c,d,a,b,m[i+3],16,-722521979),b=HH(b,c,d,a,m[i+6],23,76029189),a=HH(a,b,c,d,m[i+9],4,-640364487),d=HH(d,a,b,c,m[i+12],11,-421815835),c=HH(c,d,a,b,m[i+15],16,530742520),a=II(a,b=HH(b,c,d,a,m[i+2],23,-995338651),c,d,m[i+0],6,-198630844),d=II(d,a,b,c,m[i+7],10,1126891415),c=II(c,d,a,b,m[i+14],15,-1416354905),b=II(b,c,d,a,m[i+5],21,-57434055),a=II(a,b,c,d,m[i+12],6,1700485571),d=II(d,a,b,c,m[i+3],10,-1894986606),c=II(c,d,a,b,m[i+10],15,-1051523),b=II(b,c,d,a,m[i+1],21,-2054922799),a=II(a,b,c,d,m[i+8],6,1873313359),d=II(d,a,b,c,m[i+15],10,-30611744),c=II(c,d,a,b,m[i+6],15,-1560198380),b=II(b,c,d,a,m[i+13],21,1309151649),a=II(a,b,c,d,m[i+4],6,-145523070),d=II(d,a,b,c,m[i+11],10,-1120210379),c=II(c,d,a,b,m[i+2],15,718787259),b=II(b,c,d,a,m[i+9],21,-343485551),a=a+aa>>>0,b=b+bb>>>0,c=c+cc>>>0,d=d+dd>>>0}return crypt.endian([a,b,c,d])})._ff=function(a,b,c,d,x,s,t){var n=a+(b&c|~b&d)+(x>>>0)+t;return(n<<s|n>>>32-s)+b},md5._gg=function(a,b,c,d,x,s,t){var n=a+(b&d|c&~d)+(x>>>0)+t;return(n<<s|n>>>32-s)+b},md5._hh=function(a,b,c,d,x,s,t){var n=a+(b^c^d)+(x>>>0)+t;return(n<<s|n>>>32-s)+b},md5._ii=function(a,b,c,d,x,s,t){var n=a+(c^(b|~d))+(x>>>0)+t;return(n<<s|n>>>32-s)+b},md5._blocksize=16,md5._digestsize=16,module.exports=function(message,options){if(null==message)throw new Error("Illegal argument "+message);var digestbytes=crypt.wordsToBytes(md5(message,options));return options&&options.asBytes?digestbytes:options&&options.asString?bin.bytesToString(digestbytes):crypt.bytesToHex(digestbytes)}},function(module,exports){var base64map,crypt;base64map="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",crypt={rotl:function(n,b){return n<<b|n>>>32-b},rotr:function(n,b){return n<<32-b|n>>>b},endian:function(n){if(n.constructor==Number)return 16711935&crypt.rotl(n,8)|4278255360&crypt.rotl(n,24);for(var i=0;i<n.length;i++)n[i]=crypt.endian(n[i]);return n},randomBytes:function(n){for(var bytes=[];n>0;n--)bytes.push(Math.floor(256*Math.random()));return bytes},bytesToWords:function(bytes){for(var words=[],i=0,b=0;i<bytes.length;i++,b+=8)words[b>>>5]|=bytes[i]<<24-b%32;return words},wordsToBytes:function(words){for(var bytes=[],b=0;b<32*words.length;b+=8)bytes.push(words[b>>>5]>>>24-b%32&255);return bytes},bytesToHex:function(bytes){for(var hex=[],i=0;i<bytes.length;i++)hex.push((bytes[i]>>>4).toString(16)),hex.push((15&bytes[i]).toString(16));return hex.join("")},hexToBytes:function(hex){for(var bytes=[],c=0;c<hex.length;c+=2)bytes.push(parseInt(hex.substr(c,2),16));return bytes},bytesToBase64:function(bytes){for(var base64=[],i=0;i<bytes.length;i+=3)for(var triplet=bytes[i]<<16|bytes[i+1]<<8|bytes[i+2],j=0;j<4;j++)8*i+6*j<=8*bytes.length?base64.push(base64map.charAt(triplet>>>6*(3-j)&63)):base64.push("=");return base64.join("")},base64ToBytes:function(base64){base64=base64.replace(/[^A-Z0-9+\/]/gi,"");for(var bytes=[],i=0,imod4=0;i<base64.length;imod4=++i%4)0!=imod4&&bytes.push((base64map.indexOf(base64.charAt(i-1))&Math.pow(2,-2*imod4+8)-1)<<2*imod4|base64map.indexOf(base64.charAt(i))>>>6-2*imod4);return bytes}},module.exports=crypt},function(module,exports){function isBuffer(obj){return!!obj.constructor&&"function"==typeof obj.constructor.isBuffer&&obj.constructor.isBuffer(obj)}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
module.exports=function(obj){return null!=obj&&(isBuffer(obj)||function(obj){return"function"==typeof obj.readFloatLE&&"function"==typeof obj.slice&&isBuffer(obj.slice(0,0))}(obj)||!!obj._isBuffer)}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"v1",(function(){return esm_node_v1})),__webpack_require__.d(__webpack_exports__,"v3",(function(){return esm_node_v3})),__webpack_require__.d(__webpack_exports__,"v4",(function(){return esm_node_v4})),__webpack_require__.d(__webpack_exports__,"v5",(function(){return esm_node_v5})),__webpack_require__.d(__webpack_exports__,"NIL",(function(){return nil})),__webpack_require__.d(__webpack_exports__,"version",(function(){return esm_node_version})),__webpack_require__.d(__webpack_exports__,"validate",(function(){return esm_node_validate})),__webpack_require__.d(__webpack_exports__,"stringify",(function(){return esm_node_stringify})),__webpack_require__.d(__webpack_exports__,"parse",(function(){return esm_node_parse}));var external_crypto_=__webpack_require__(10),external_crypto_default=__webpack_require__.n(external_crypto_);const rnds8Pool=new Uint8Array(256);let poolPtr=rnds8Pool.length;function rng(){return poolPtr>rnds8Pool.length-16&&(external_crypto_default.a.randomFillSync(rnds8Pool),poolPtr=0),rnds8Pool.slice(poolPtr,poolPtr+=16)}var regex=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;var esm_node_validate=function(uuid){return"string"==typeof uuid&&regex.test(uuid)};const byteToHex=[];for(let i=0;i<256;++i)byteToHex.push((i+256).toString(16).substr(1));var esm_node_stringify=function(arr,offset=0){const uuid=(byteToHex[arr[offset+0]]+byteToHex[arr[offset+1]]+byteToHex[arr[offset+2]]+byteToHex[arr[offset+3]]+"-"+byteToHex[arr[offset+4]]+byteToHex[arr[offset+5]]+"-"+byteToHex[arr[offset+6]]+byteToHex[arr[offset+7]]+"-"+byteToHex[arr[offset+8]]+byteToHex[arr[offset+9]]+"-"+byteToHex[arr[offset+10]]+byteToHex[arr[offset+11]]+byteToHex[arr[offset+12]]+byteToHex[arr[offset+13]]+byteToHex[arr[offset+14]]+byteToHex[arr[offset+15]]).toLowerCase();if(!esm_node_validate(uuid))throw TypeError("Stringified UUID is invalid");return uuid};let _nodeId,_clockseq,_lastMSecs=0,_lastNSecs=0;var esm_node_v1=function(options,buf,offset){let i=buf&&offset||0;const b=buf||new Array(16);let node=(options=options||{}).node||_nodeId,clockseq=void 0!==options.clockseq?options.clockseq:_clockseq;if(null==node||null==clockseq){const seedBytes=options.random||(options.rng||rng)();null==node&&(node=_nodeId=[1|seedBytes[0],seedBytes[1],seedBytes[2],seedBytes[3],seedBytes[4],seedBytes[5]]),null==clockseq&&(clockseq=_clockseq=16383&(seedBytes[6]<<8|seedBytes[7]))}let msecs=void 0!==options.msecs?options.msecs:Date.now(),nsecs=void 0!==options.nsecs?options.nsecs:_lastNSecs+1;const dt=msecs-_lastMSecs+(nsecs-_lastNSecs)/1e4;if(dt<0&&void 0===options.clockseq&&(clockseq=clockseq+1&16383),(dt<0||msecs>_lastMSecs)&&void 0===options.nsecs&&(nsecs=0),nsecs>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");_lastMSecs=msecs,_lastNSecs=nsecs,_clockseq=clockseq,msecs+=122192928e5;const tl=(1e4*(268435455&msecs)+nsecs)%4294967296;b[i++]=tl>>>24&255,b[i++]=tl>>>16&255,b[i++]=tl>>>8&255,b[i++]=255&tl;const tmh=msecs/4294967296*1e4&268435455;b[i++]=tmh>>>8&255,b[i++]=255&tmh,b[i++]=tmh>>>24&15|16,b[i++]=tmh>>>16&255,b[i++]=clockseq>>>8|128,b[i++]=255&clockseq;for(let n=0;n<6;++n)b[i+n]=node[n];return buf||esm_node_stringify(b)};var esm_node_parse=function(uuid){if(!esm_node_validate(uuid))throw TypeError("Invalid UUID");let v;const arr=new Uint8Array(16);return arr[0]=(v=parseInt(uuid.slice(0,8),16))>>>24,arr[1]=v>>>16&255,arr[2]=v>>>8&255,arr[3]=255&v,arr[4]=(v=parseInt(uuid.slice(9,13),16))>>>8,arr[5]=255&v,arr[6]=(v=parseInt(uuid.slice(14,18),16))>>>8,arr[7]=255&v,arr[8]=(v=parseInt(uuid.slice(19,23),16))>>>8,arr[9]=255&v,arr[10]=(v=parseInt(uuid.slice(24,36),16))/1099511627776&255,arr[11]=v/4294967296&255,arr[12]=v>>>24&255,arr[13]=v>>>16&255,arr[14]=v>>>8&255,arr[15]=255&v,arr};var v35=function(name,version,hashfunc){function generateUUID(value,namespace,buf,offset){if("string"==typeof value&&(value=function(str){str=unescape(encodeURIComponent(str));const bytes=[];for(let i=0;i<str.length;++i)bytes.push(str.charCodeAt(i));return bytes}(value)),"string"==typeof namespace&&(namespace=esm_node_parse(namespace)),16!==namespace.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let bytes=new Uint8Array(16+value.length);if(bytes.set(namespace),bytes.set(value,namespace.length),bytes=hashfunc(bytes),bytes[6]=15&bytes[6]|version,bytes[8]=63&bytes[8]|128,buf){offset=offset||0;for(let i=0;i<16;++i)buf[offset+i]=bytes[i];return buf}return esm_node_stringify(bytes)}try{generateUUID.name=name}catch(err){}return generateUUID.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",generateUUID.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",generateUUID};var esm_node_v3=v35("v3",48,(function(bytes){return Array.isArray(bytes)?bytes=Buffer.from(bytes):"string"==typeof bytes&&(bytes=Buffer.from(bytes,"utf8")),external_crypto_default.a.createHash("md5").update(bytes).digest()}));var esm_node_v4=function(options,buf,offset){const rnds=(options=options||{}).random||(options.rng||rng)();if(rnds[6]=15&rnds[6]|64,rnds[8]=63&rnds[8]|128,buf){offset=offset||0;for(let i=0;i<16;++i)buf[offset+i]=rnds[i];return buf}return esm_node_stringify(rnds)};var esm_node_v5=v35("v5",80,(function(bytes){return Array.isArray(bytes)?bytes=Buffer.from(bytes):"string"==typeof bytes&&(bytes=Buffer.from(bytes,"utf8")),external_crypto_default.a.createHash("sha1").update(bytes).digest()})),nil="00000000-0000-0000-0000-000000000000";var esm_node_version=function(uuid){if(!esm_node_validate(uuid))throw TypeError("Invalid UUID");return parseInt(uuid.substr(14,1),16)}}])}));
//# sourceMappingURL=spacebunny.js.map