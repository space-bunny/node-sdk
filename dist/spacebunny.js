!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="/",t(0)}(function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))switch(typeof e[t]){case"function":break;case"object":e[t]=function(t){var n=t.slice(1),r=e[t[0]];return function(e,t,i){r.apply(this,[e,t,i].concat(n))}}(e[t]);break;default:e[t]=e[e[t]]}return e}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.StompStreamClient=t.MqttStreamClient=t.AmqpStreamClient=t.StreamClient=t.StompClient=t.MqttClient=t.AmqpClient=t.Client=void 0;var i=n(2),o=r(i),s=n(237),a=r(s),u=n(292),c=r(u),l=n(300),f=r(l),h=n(301),p=r(h),d=n(302),v=r(d);"undefined"!=typeof window&&(window.StompClient=c["default"],window.StompStreamClient=v["default"]),t.Client=o["default"],t.AmqpClient=o["default"],t.MqttClient=a["default"],t.StompClient=c["default"],t.StreamClient=f["default"],t.AmqpStreamClient=f["default"],t.MqttStreamClient=p["default"],t.StompStreamClient=v["default"]},function(e,t,n){(function(e){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(7),u=r(a),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(35),f=r(l),h=n(37),p=r(h),d=n(40),v=r(d),g=n(60),y=r(g),m=n(133),b=r(m),w=n(236),_=r(w),E=n(235).CONFIG,x=function(t){function n(e){i(this,n);var t=o(this,Object.getPrototypeOf(n).call(this,e));t._amqpConnection=void 0,t._amqpChannels={};var r=E.amqp;return t._protocol=r.protocol,t._tlsProtocol=r.tls.protocol,t._inputQueueArgs=r.inputQueueArgs,t._deviceExchangeArgs=r.deviceExchangeArgs,t._subscribeArgs=r.subscribeArgs,t._publishArgs=r.publishArgs,t._connectionOpts=r.connectionOpts,t}return s(n,t),c(n,[{key:"onReceive",value:function(e,t){var n=this;return t=(0,f["default"])(this._subscribeArgs,t),t.noAck=null===t.ack,new p["default"](function(r,i){n._createChannel("input",t).then(function(r){return v["default"].all([r.checkQueue(n.deviceId()+"."+n._inboxTopic,n._inputQueueArgs),r.consume(n.deviceId()+"."+n._inboxTopic,function(i){var o=new _["default"](i,n._deviceId,t),s=n._autoAck(t.ack);return o.blackListed()?void(s&&r.nack(i,t.allUpTo,t.requeue)):(e(n._parseContent(o.content),o.fields,o.properties),void(s&&r.ack(i,t.allUpTo)))},t)])}).then(function(e){r(e)})["catch"](function(e){i(e)})})}},{key:"publish",value:function(t,n){var r=this,i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];return i=(0,f["default"])(this._publishArgs,i),new p["default"](function(o,s){r._createChannel("output",i).then(function(o){var s=new e(r._encapsulateContent(n)),a=[o.checkExchange(r.deviceId()),o.publish(r.deviceId(),r._routingKeyFor(t),s,i)];return i.withConfirm===!0&&a.push(o.waitForConfirms()),v["default"].all(a)}).then(function(e){o(e)})["catch"](function(e){s(e)})})}},{key:"disconnect",value:function(){var e=this;return new p["default"](function(t,n){void 0===e._amqpConnection?n("Not Connected"):e._amqpConnection.close().then(function(){e._amqpConnection=void 0,t(!0)})["catch"](function(e){n(e)})})}},{key:"connect",value:function(){var e=this,t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],n=(0,f["default"])(this._connectionOpts,t);return new p["default"](function(t,r){e.getEndpointConfigs().then(function(i){var o=i.connection;if(void 0!==e._amqpConnection)t(e._amqpConnection);else{var s="";e._tls?(s=e._tlsProtocol+"://"+(o.deviceId||o.client)+":"+(o.secret+"@"+o.host+":")+(o.protocols.amqp.tlsPort+"/"+o.vhost.replace("/","%2f")),n=(0,f["default"])(n,e._tlsOpts)):s=e._protocol+"://"+(o.deviceId||o.client)+":"+(o.secret+"@"+o.host+":")+(o.protocols.amqp.port+"/"+o.vhost.replace("/","%2f")),y["default"].connect(s,n).then(function(n){n.on("error",function(e){r(e)}),n.on("blocked",function(e){console.warn(e)}),n.on("unblocked",function(e){console.warn(e)}),e._amqpConnection=n,t(e._amqpConnection)})["catch"](function(e){r(e)})}})["catch"](function(e){r(e)})})}},{key:"_createChannel",value:function(e){var t=this,n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return e=""+e+(n.withConfirm===!0?"WithConfirm":""),new p["default"](function(r,i){t._amqpChannels[e]?r(t._amqpChannels[e]):t.connect().then(function(e){return n.withConfirm===!0?e.createConfirmChannel():e.createChannel()}).then(function(n){t._amqpChannels[e]=n,r(n)})["catch"](function(e){i(e)})})}},{key:"_closeChannel",value:function(e){var t=this,n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return e=""+e+(n.withConfirm===!0?"WithConfirm":""),new p["default"](function(n,r){var i=t._amqpChannels[e];void 0===i?r("Invalid Channel Object"):i.close().then(function(){t._amqpChannels[e]=void 0,n(!0)})["catch"](function(e){r(e)})})}},{key:"_routingKeyFor",value:function(e){return this.deviceId()+"."+e}},{key:"_autoAck",value:function(e){if(e)switch((0,u["default"])(E[this._protocol].ackTypes,e)||console.error("Wrong acknowledge type"),e){case"auto":return!0;default:return!1}return!0}}]),n}(b["default"]);t["default"]=x}).call(t,n(3).Buffer)},function(e,t,n){(function(e,r){/*!
	 * The buffer module from node.js, for the browser.
	 *
	 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
	 * @license  MIT
	 */
"use strict";function i(){function e(){}try{var t=new Uint8Array(1);return t.foo=function(){return 42},t.constructor=e,42===t.foo()&&t.constructor===e&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(n){return!1}}function o(){return e.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function e(t){return this instanceof e?(e.TYPED_ARRAY_SUPPORT||(this.length=0,this.parent=void 0),"number"==typeof t?s(this,t):"string"==typeof t?a(this,t,arguments.length>1?arguments[1]:"utf8"):u(this,t)):arguments.length>1?new e(t,arguments[1]):new e(t)}function s(t,n){if(t=v(t,0>n?0:0|g(n)),!e.TYPED_ARRAY_SUPPORT)for(var r=0;n>r;r++)t[r]=0;return t}function a(e,t,n){"string"==typeof n&&""!==n||(n="utf8");var r=0|m(t,n);return e=v(e,r),e.write(t,n),e}function u(t,n){if(e.isBuffer(n))return c(t,n);if($(n))return l(t,n);if(null==n)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(n.buffer instanceof ArrayBuffer)return f(t,n);if(n instanceof ArrayBuffer)return h(t,n)}return n.length?p(t,n):d(t,n)}function c(e,t){var n=0|g(t.length);return e=v(e,n),t.copy(e,0,0,n),e}function l(e,t){var n=0|g(t.length);e=v(e,n);for(var r=0;n>r;r+=1)e[r]=255&t[r];return e}function f(e,t){var n=0|g(t.length);e=v(e,n);for(var r=0;n>r;r+=1)e[r]=255&t[r];return e}function h(t,n){return e.TYPED_ARRAY_SUPPORT?(n.byteLength,t=e._augment(new Uint8Array(n))):t=f(t,new Uint8Array(n)),t}function p(e,t){var n=0|g(t.length);e=v(e,n);for(var r=0;n>r;r+=1)e[r]=255&t[r];return e}function d(e,t){var n,r=0;"Buffer"===t.type&&$(t.data)&&(n=t.data,r=0|g(n.length)),e=v(e,r);for(var i=0;r>i;i+=1)e[i]=255&n[i];return e}function v(t,n){e.TYPED_ARRAY_SUPPORT?(t=e._augment(new Uint8Array(n)),t.__proto__=e.prototype):(t.length=n,t._isBuffer=!0);var r=0!==n&&n<=e.poolSize>>>1;return r&&(t.parent=X),t}function g(e){if(e>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|e}function y(t,n){if(!(this instanceof y))return new y(t,n);var r=new e(t,n);return delete r.parent,r}function m(e,t){"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"binary":case"raw":case"raws":return n;case"utf8":case"utf-8":return H(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return K(e).length;default:if(r)return H(e).length;t=(""+t).toLowerCase(),r=!0}}function b(e,t,n){var r=!1;if(t=0|t,n=void 0===n||n===1/0?this.length:0|n,e||(e="utf8"),0>t&&(t=0),n>this.length&&(n=this.length),t>=n)return"";for(;;)switch(e){case"hex":return j(this,t,n);case"utf8":case"utf-8":return C(this,t,n);case"ascii":return U(this,t,n);case"binary":return B(this,t,n);case"base64":return S(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function w(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;var o=t.length;if(o%2!==0)throw new Error("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;r>s;s++){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))throw new Error("Invalid hex string");e[n+s]=a}return s}function _(e,t,n,r){return Y(H(t,e.length-n),e,n,r)}function E(e,t,n,r){return Y(Q(t),e,n,r)}function x(e,t,n,r){return E(e,t,n,r)}function I(e,t,n,r){return Y(K(t),e,n,r)}function k(e,t,n,r){return Y(W(t,e.length-n),e,n,r)}function S(e,t,n){return 0===t&&n===e.length?V.fromByteArray(e):V.fromByteArray(e.slice(t,n))}function C(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;n>i;){var o=e[i],s=null,a=o>239?4:o>223?3:o>191?2:1;if(n>=i+a){var u,c,l,f;switch(a){case 1:128>o&&(s=o);break;case 2:u=e[i+1],128===(192&u)&&(f=(31&o)<<6|63&u,f>127&&(s=f));break;case 3:u=e[i+1],c=e[i+2],128===(192&u)&&128===(192&c)&&(f=(15&o)<<12|(63&u)<<6|63&c,f>2047&&(55296>f||f>57343)&&(s=f));break;case 4:u=e[i+1],c=e[i+2],l=e[i+3],128===(192&u)&&128===(192&c)&&128===(192&l)&&(f=(15&o)<<18|(63&u)<<12|(63&c)<<6|63&l,f>65535&&1114112>f&&(s=f))}}null===s?(s=65533,a=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|1023&s),r.push(s),i+=a}return T(r)}function T(e){var t=e.length;if(J>=t)return String.fromCharCode.apply(String,e);for(var n="",r=0;t>r;)n+=String.fromCharCode.apply(String,e.slice(r,r+=J));return n}function U(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;n>i;i++)r+=String.fromCharCode(127&e[i]);return r}function B(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;n>i;i++)r+=String.fromCharCode(e[i]);return r}function j(e,t,n){var r=e.length;(!t||0>t)&&(t=0),(!n||0>n||n>r)&&(n=r);for(var i="",o=t;n>o;o++)i+=z(e[o]);return i}function O(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function A(e,t,n){if(e%1!==0||0>e)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function R(t,n,r,i,o,s){if(!e.isBuffer(t))throw new TypeError("buffer must be a Buffer instance");if(n>o||s>n)throw new RangeError("value is out of bounds");if(r+i>t.length)throw new RangeError("index out of range")}function L(e,t,n,r){0>t&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);o>i;i++)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function M(e,t,n,r){0>t&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);o>i;i++)e[n+i]=t>>>8*(r?i:3-i)&255}function P(e,t,n,r,i,o){if(t>i||o>t)throw new RangeError("value is out of bounds");if(n+r>e.length)throw new RangeError("index out of range");if(0>n)throw new RangeError("index out of range")}function F(e,t,n,r,i){return i||P(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),G.write(e,t,n,r,23,4),n+4}function N(e,t,n,r,i){return i||P(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),G.write(e,t,n,r,52,8),n+8}function D(e){if(e=q(e).replace(ee,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function q(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function z(e){return 16>e?"0"+e.toString(16):e.toString(16)}function H(e,t){t=t||1/0;for(var n,r=e.length,i=null,o=[],s=0;r>s;s++){if(n=e.charCodeAt(s),n>55295&&57344>n){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(56320>n){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=(i-55296<<10|n-56320)+65536}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,128>n){if((t-=1)<0)break;o.push(n)}else if(2048>n){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(65536>n){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(1114112>n))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function Q(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t}function W(e,t){for(var n,r,i,o=[],s=0;s<e.length&&!((t-=2)<0);s++)n=e.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r);return o}function K(e){return V.toByteArray(D(e))}function Y(e,t,n,r){for(var i=0;r>i&&!(i+n>=t.length||i>=e.length);i++)t[i+n]=e[i];return i}var V=n(4),G=n(5),$=n(6);t.Buffer=e,t.SlowBuffer=y,t.INSPECT_MAX_BYTES=50,e.poolSize=8192;var X={};e.TYPED_ARRAY_SUPPORT=void 0!==r.TYPED_ARRAY_SUPPORT?r.TYPED_ARRAY_SUPPORT:i(),e.TYPED_ARRAY_SUPPORT?(e.prototype.__proto__=Uint8Array.prototype,e.__proto__=Uint8Array):(e.prototype.length=void 0,e.prototype.parent=void 0),e.isBuffer=function(e){return!(null==e||!e._isBuffer)},e.compare=function(t,n){if(!e.isBuffer(t)||!e.isBuffer(n))throw new TypeError("Arguments must be Buffers");if(t===n)return 0;for(var r=t.length,i=n.length,o=0,s=Math.min(r,i);s>o&&t[o]===n[o];)++o;return o!==s&&(r=t[o],i=n[o]),i>r?-1:r>i?1:0},e.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},e.concat=function(t,n){if(!$(t))throw new TypeError("list argument must be an Array of Buffers.");if(0===t.length)return new e(0);var r;if(void 0===n)for(n=0,r=0;r<t.length;r++)n+=t[r].length;var i=new e(n),o=0;for(r=0;r<t.length;r++){var s=t[r];s.copy(i,o),o+=s.length}return i},e.byteLength=m,e.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?C(this,0,e):b.apply(this,arguments)},e.prototype.equals=function(t){if(!e.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:0===e.compare(this,t)},e.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},e.prototype.compare=function(t){if(!e.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?0:e.compare(this,t)},e.prototype.indexOf=function(t,n){function r(e,t,n){for(var r=-1,i=0;n+i<e.length;i++)if(e[n+i]===t[-1===r?0:i-r]){if(-1===r&&(r=i),i-r+1===t.length)return n+r}else r=-1;return-1}if(n>2147483647?n=2147483647:-2147483648>n&&(n=-2147483648),n>>=0,0===this.length)return-1;if(n>=this.length)return-1;if(0>n&&(n=Math.max(this.length+n,0)),"string"==typeof t)return 0===t.length?-1:String.prototype.indexOf.call(this,t,n);if(e.isBuffer(t))return r(this,t,n);if("number"==typeof t)return e.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,t,n):r(this,[t],n);throw new TypeError("val must be string, number or Buffer")},e.prototype.get=function(e){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(e)},e.prototype.set=function(e,t){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(e,t)},e.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else if(isFinite(t))t=0|t,isFinite(n)?(n=0|n,void 0===r&&(r="utf8")):(r=n,n=void 0);else{var i=r;r=t,t=0|n,n=i}var o=this.length-t;if((void 0===n||n>o)&&(n=o),e.length>0&&(0>n||0>t)||t>this.length)throw new RangeError("attempt to write outside buffer bounds");r||(r="utf8");for(var s=!1;;)switch(r){case"hex":return w(this,e,t,n);case"utf8":case"utf-8":return _(this,e,t,n);case"ascii":return E(this,e,t,n);case"binary":return x(this,e,t,n);case"base64":return I(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,e,t,n);default:if(s)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),s=!0}},e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var J=4096;e.prototype.slice=function(t,n){var r=this.length;t=~~t,n=void 0===n?r:~~n,0>t?(t+=r,0>t&&(t=0)):t>r&&(t=r),0>n?(n+=r,0>n&&(n=0)):n>r&&(n=r),t>n&&(n=t);var i;if(e.TYPED_ARRAY_SUPPORT)i=e._augment(this.subarray(t,n));else{var o=n-t;i=new e(o,void 0);for(var s=0;o>s;s++)i[s]=this[s+t]}return i.length&&(i.parent=this.parent||this),i},e.prototype.readUIntLE=function(e,t,n){e=0|e,t=0|t,n||A(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},e.prototype.readUIntBE=function(e,t,n){e=0|e,t=0|t,n||A(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},e.prototype.readUInt8=function(e,t){return t||A(e,1,this.length),this[e]},e.prototype.readUInt16LE=function(e,t){return t||A(e,2,this.length),this[e]|this[e+1]<<8},e.prototype.readUInt16BE=function(e,t){return t||A(e,2,this.length),this[e]<<8|this[e+1]},e.prototype.readUInt32LE=function(e,t){return t||A(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},e.prototype.readUInt32BE=function(e,t){return t||A(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},e.prototype.readIntLE=function(e,t,n){e=0|e,t=0|t,n||A(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},e.prototype.readIntBE=function(e,t,n){e=0|e,t=0|t,n||A(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},e.prototype.readInt8=function(e,t){return t||A(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},e.prototype.readInt16LE=function(e,t){t||A(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},e.prototype.readInt16BE=function(e,t){t||A(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},e.prototype.readInt32LE=function(e,t){return t||A(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},e.prototype.readInt32BE=function(e,t){return t||A(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},e.prototype.readFloatLE=function(e,t){return t||A(e,4,this.length),G.read(this,e,!0,23,4)},e.prototype.readFloatBE=function(e,t){return t||A(e,4,this.length),G.read(this,e,!1,23,4)},e.prototype.readDoubleLE=function(e,t){return t||A(e,8,this.length),G.read(this,e,!0,52,8)},e.prototype.readDoubleBE=function(e,t){return t||A(e,8,this.length),G.read(this,e,!1,52,8)},e.prototype.writeUIntLE=function(e,t,n,r){e=+e,t=0|t,n=0|n,r||R(this,e,t,n,Math.pow(2,8*n),0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},e.prototype.writeUIntBE=function(e,t,n,r){e=+e,t=0|t,n=0|n,r||R(this,e,t,n,Math.pow(2,8*n),0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},e.prototype.writeUInt8=function(t,n,r){return t=+t,n=0|n,r||R(this,t,n,1,255,0),e.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[n]=255&t,n+1},e.prototype.writeUInt16LE=function(t,n,r){return t=+t,n=0|n,r||R(this,t,n,2,65535,0),e.TYPED_ARRAY_SUPPORT?(this[n]=255&t,this[n+1]=t>>>8):L(this,t,n,!0),n+2},e.prototype.writeUInt16BE=function(t,n,r){return t=+t,n=0|n,r||R(this,t,n,2,65535,0),e.TYPED_ARRAY_SUPPORT?(this[n]=t>>>8,this[n+1]=255&t):L(this,t,n,!1),n+2},e.prototype.writeUInt32LE=function(t,n,r){return t=+t,n=0|n,r||R(this,t,n,4,4294967295,0),e.TYPED_ARRAY_SUPPORT?(this[n+3]=t>>>24,this[n+2]=t>>>16,this[n+1]=t>>>8,this[n]=255&t):M(this,t,n,!0),n+4},e.prototype.writeUInt32BE=function(t,n,r){return t=+t,n=0|n,r||R(this,t,n,4,4294967295,0),e.TYPED_ARRAY_SUPPORT?(this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=255&t):M(this,t,n,!1),n+4},e.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t=0|t,!r){var i=Math.pow(2,8*n-1);R(this,e,t,n,i-1,-i)}var o=0,s=1,a=0>e?1:0;for(this[t]=255&e;++o<n&&(s*=256);)this[t+o]=(e/s>>0)-a&255;return t+n},e.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t=0|t,!r){var i=Math.pow(2,8*n-1);R(this,e,t,n,i-1,-i)}var o=n-1,s=1,a=0>e?1:0;for(this[t+o]=255&e;--o>=0&&(s*=256);)this[t+o]=(e/s>>0)-a&255;return t+n},e.prototype.writeInt8=function(t,n,r){return t=+t,n=0|n,r||R(this,t,n,1,127,-128),e.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),0>t&&(t=255+t+1),this[n]=255&t,n+1},e.prototype.writeInt16LE=function(t,n,r){return t=+t,n=0|n,r||R(this,t,n,2,32767,-32768),e.TYPED_ARRAY_SUPPORT?(this[n]=255&t,this[n+1]=t>>>8):L(this,t,n,!0),n+2},e.prototype.writeInt16BE=function(t,n,r){return t=+t,n=0|n,r||R(this,t,n,2,32767,-32768),e.TYPED_ARRAY_SUPPORT?(this[n]=t>>>8,this[n+1]=255&t):L(this,t,n,!1),n+2},e.prototype.writeInt32LE=function(t,n,r){return t=+t,n=0|n,r||R(this,t,n,4,2147483647,-2147483648),e.TYPED_ARRAY_SUPPORT?(this[n]=255&t,this[n+1]=t>>>8,this[n+2]=t>>>16,this[n+3]=t>>>24):M(this,t,n,!0),n+4},e.prototype.writeInt32BE=function(t,n,r){return t=+t,n=0|n,r||R(this,t,n,4,2147483647,-2147483648),0>t&&(t=4294967295+t+1),e.TYPED_ARRAY_SUPPORT?(this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=255&t):M(this,t,n,!1),n+4},e.prototype.writeFloatLE=function(e,t,n){return F(this,e,t,!0,n)},e.prototype.writeFloatBE=function(e,t,n){return F(this,e,t,!1,n)},e.prototype.writeDoubleLE=function(e,t,n){return N(this,e,t,!0,n)},e.prototype.writeDoubleBE=function(e,t,n){return N(this,e,t,!1,n)},e.prototype.copy=function(t,n,r,i){if(r||(r=0),i||0===i||(i=this.length),n>=t.length&&(n=t.length),n||(n=0),i>0&&r>i&&(i=r),i===r)return 0;if(0===t.length||0===this.length)return 0;if(0>n)throw new RangeError("targetStart out of bounds");if(0>r||r>=this.length)throw new RangeError("sourceStart out of bounds");if(0>i)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-n<i-r&&(i=t.length-n+r);var o,s=i-r;if(this===t&&n>r&&i>n)for(o=s-1;o>=0;o--)t[o+n]=this[o+r];else if(1e3>s||!e.TYPED_ARRAY_SUPPORT)for(o=0;s>o;o++)t[o+n]=this[o+r];else t._set(this.subarray(r,r+s),n);return s},e.prototype.fill=function(e,t,n){if(e||(e=0),t||(t=0),n||(n=this.length),t>n)throw new RangeError("end < start");if(n!==t&&0!==this.length){if(0>t||t>=this.length)throw new RangeError("start out of bounds");if(0>n||n>this.length)throw new RangeError("end out of bounds");var r;if("number"==typeof e)for(r=t;n>r;r++)this[r]=e;else{var i=H(e.toString()),o=i.length;for(r=t;n>r;r++)this[r]=i[r%o]}return this}},e.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(e.TYPED_ARRAY_SUPPORT)return new e(this).buffer;for(var t=new Uint8Array(this.length),n=0,r=t.length;r>n;n+=1)t[n]=this[n];return t.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var Z=e.prototype;e._augment=function(t){return t.constructor=e,t._isBuffer=!0,t._set=t.set,t.get=Z.get,t.set=Z.set,t.write=Z.write,t.toString=Z.toString,t.toLocaleString=Z.toString,t.toJSON=Z.toJSON,t.equals=Z.equals,t.compare=Z.compare,t.indexOf=Z.indexOf,t.copy=Z.copy,t.slice=Z.slice,t.readUIntLE=Z.readUIntLE,t.readUIntBE=Z.readUIntBE,t.readUInt8=Z.readUInt8,t.readUInt16LE=Z.readUInt16LE,t.readUInt16BE=Z.readUInt16BE,t.readUInt32LE=Z.readUInt32LE,t.readUInt32BE=Z.readUInt32BE,t.readIntLE=Z.readIntLE,t.readIntBE=Z.readIntBE,t.readInt8=Z.readInt8,t.readInt16LE=Z.readInt16LE,t.readInt16BE=Z.readInt16BE,t.readInt32LE=Z.readInt32LE,t.readInt32BE=Z.readInt32BE,t.readFloatLE=Z.readFloatLE,t.readFloatBE=Z.readFloatBE,t.readDoubleLE=Z.readDoubleLE,t.readDoubleBE=Z.readDoubleBE,t.writeUInt8=Z.writeUInt8,t.writeUIntLE=Z.writeUIntLE,t.writeUIntBE=Z.writeUIntBE,t.writeUInt16LE=Z.writeUInt16LE,t.writeUInt16BE=Z.writeUInt16BE,t.writeUInt32LE=Z.writeUInt32LE,t.writeUInt32BE=Z.writeUInt32BE,t.writeIntLE=Z.writeIntLE,t.writeIntBE=Z.writeIntBE,t.writeInt8=Z.writeInt8,t.writeInt16LE=Z.writeInt16LE,t.writeInt16BE=Z.writeInt16BE,t.writeInt32LE=Z.writeInt32LE,t.writeInt32BE=Z.writeInt32BE,t.writeFloatLE=Z.writeFloatLE,t.writeFloatBE=Z.writeFloatBE,t.writeDoubleLE=Z.writeDoubleLE,t.writeDoubleBE=Z.writeDoubleBE,t.fill=Z.fill,t.inspect=Z.inspect,t.toArrayBuffer=Z.toArrayBuffer,t};var ee=/[^+\/0-9A-Za-z-_]/g}).call(t,n(3).Buffer,function(){return this}())},function(e,t,n){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(e){"use strict";function t(e){var t=e.charCodeAt(0);return t===s||t===f?62:t===a||t===h?63:u>t?-1:u+10>t?t-u+26+26:l+26>t?t-l:c+26>t?t-c+26:void 0}function n(e){function n(e){c[f++]=e}var r,i,s,a,u,c;if(e.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var l=e.length;u="="===e.charAt(l-2)?2:"="===e.charAt(l-1)?1:0,c=new o(3*e.length/4-u),s=u>0?e.length-4:e.length;var f=0;for(r=0,i=0;s>r;r+=4,i+=3)a=t(e.charAt(r))<<18|t(e.charAt(r+1))<<12|t(e.charAt(r+2))<<6|t(e.charAt(r+3)),n((16711680&a)>>16),n((65280&a)>>8),n(255&a);return 2===u?(a=t(e.charAt(r))<<2|t(e.charAt(r+1))>>4,n(255&a)):1===u&&(a=t(e.charAt(r))<<10|t(e.charAt(r+1))<<4|t(e.charAt(r+2))>>2,n(a>>8&255),n(255&a)),c}function i(e){function t(e){return r.charAt(e)}function n(e){return t(e>>18&63)+t(e>>12&63)+t(e>>6&63)+t(63&e)}var i,o,s,a=e.length%3,u="";for(i=0,s=e.length-a;s>i;i+=3)o=(e[i]<<16)+(e[i+1]<<8)+e[i+2],u+=n(o);switch(a){case 1:o=e[e.length-1],u+=t(o>>2),u+=t(o<<4&63),u+="==";break;case 2:o=(e[e.length-2]<<8)+e[e.length-1],u+=t(o>>10),u+=t(o>>4&63),u+=t(o<<2&63),u+="="}return u}var o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="+".charCodeAt(0),a="/".charCodeAt(0),u="0".charCodeAt(0),c="a".charCodeAt(0),l="A".charCodeAt(0),f="-".charCodeAt(0),h="_".charCodeAt(0);e.toByteArray=n,e.fromByteArray=i}(t)},function(e,t){t.read=function(e,t,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,c=u>>1,l=-7,f=n?i-1:0,h=n?-1:1,p=e[t+f];for(f+=h,o=p&(1<<-l)-1,p>>=-l,l+=a;l>0;o=256*o+e[t+f],f+=h,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=r;l>0;s=256*s+e[t+f],f+=h,l-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:(p?-1:1)*(1/0);s+=Math.pow(2,r),o-=c}return(p?-1:1)*s*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var s,a,u,c=8*o-i-1,l=(1<<c)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,v=0>t||0===t&&0>1/t?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),t+=s+f>=1?h/u:h*Math.pow(2,1-f),t*u>=2&&(s++,u/=2),s+f>=l?(a=0,s=l):s+f>=1?(a=(t*u-1)*Math.pow(2,i),s+=f):(a=t*Math.pow(2,f-1)*Math.pow(2,i),s=0));i>=8;e[n+p]=255&a,p+=d,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;e[n+p]=255&s,p+=d,s/=256,c-=8);e[n+p-d]|=128*v}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){function r(e,t,n,r){e=o(e)?e:u(e),n=n&&!r?a(n):0;var l=e.length;return 0>n&&(n=c(l+n,0)),s(e)?l>=n&&e.indexOf(t,n)>-1:!!l&&i(e,t,n)>-1}var i=n(8),o=n(10),s=n(16),a=n(19),u=n(22),c=Math.max;e.exports=r},function(e,t,n){function r(e,t,n){if(t!==t)return i(e,n);for(var r=n-1,o=e.length;++r<o;)if(e[r]===t)return r;return-1}var i=n(9);e.exports=r},function(e,t){function n(e,t,n){for(var r=e.length,i=t+(n?0:-1);n?i--:++i<r;){var o=e[i];if(o!==o)return i}return-1}e.exports=n},function(e,t,n){function r(e){return null!=e&&s(i(e))&&!o(e)}var i=n(11),o=n(13),s=n(15);e.exports=r},function(e,t,n){var r=n(12),i=r("length");e.exports=i},function(e,t){function n(e){return function(t){return null==t?void 0:t[e]}}e.exports=n},function(e,t,n){function r(e){var t=i(e)?u.call(e):"";return t==o||t==s}var i=n(14),o="[object Function]",s="[object GeneratorFunction]",a=Object.prototype,u=a.toString;e.exports=r},function(e,t){function n(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}e.exports=n},function(e,t){function n(e){return"number"==typeof e&&e>-1&&e%1==0&&r>=e}var r=9007199254740991;e.exports=n},function(e,t,n){function r(e){return"string"==typeof e||!i(e)&&o(e)&&u.call(e)==s}var i=n(17),o=n(18),s="[object String]",a=Object.prototype,u=a.toString;e.exports=r},function(e,t){var n=Array.isArray;e.exports=n},function(e,t){function n(e){return!!e&&"object"==typeof e}e.exports=n},function(e,t,n){function r(e){if(!e)return 0===e?e:0;if(e=i(e),e===o||e===-o){var t=0>e?-1:1;return t*s}var n=e%1;return e===e?n?e-n:e:0}var i=n(20),o=1/0,s=1.7976931348623157e308;e.exports=r},function(e,t,n){function r(e){if("number"==typeof e)return e;if(s(e))return a;if(o(e)){var t=i(e.valueOf)?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(u,"");var n=l.test(e);return n||f.test(e)?h(e.slice(2),n?2:8):c.test(e)?a:+e}var i=n(13),o=n(14),s=n(21),a=NaN,u=/^\s+|\s+$/g,c=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,f=/^0o[0-7]+$/i,h=parseInt;e.exports=r},function(e,t,n){function r(e){return"symbol"==typeof e||i(e)&&a.call(e)==o}var i=n(18),o="[object Symbol]",s=Object.prototype,a=s.toString;e.exports=r},function(e,t,n){function r(e){return e?i(e,o(e)):[]}var i=n(23),o=n(25);e.exports=r},function(e,t,n){function r(e,t){return i(t,function(t){return e[t]})}var i=n(24);e.exports=r},function(e,t){function n(e,t){for(var n=-1,r=e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}e.exports=n},function(e,t,n){function r(e){var t=c(e);if(!t&&!a(e))return o(e);var n=s(e),r=!!n,l=n||[],f=l.length;for(var h in e)!i(e,h)||r&&("length"==h||u(h,f))||t&&"constructor"==h||l.push(h);return l}var i=n(26),o=n(28),s=n(29),a=n(10),u=n(33),c=n(34);e.exports=r},function(e,t,n){function r(e,t){return s.call(e,t)||"object"==typeof e&&t in e&&null===i(e)}var i=n(27),o=Object.prototype,s=o.hasOwnProperty;e.exports=r},function(e,t){function n(e){return r(Object(e))}var r=Object.getPrototypeOf;e.exports=n},function(e,t){function n(e){return r(Object(e))}var r=Object.keys;e.exports=n},function(e,t,n){function r(e){var t=e?e.length:void 0;return a(t)&&(s(e)||u(e)||o(e))?i(t,String):null}var i=n(30),o=n(31),s=n(17),a=n(15),u=n(16);e.exports=r},function(e,t){function n(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}e.exports=n},function(e,t,n){function r(e){return i(e)&&a.call(e,"callee")&&(!c.call(e,"callee")||u.call(e)==o)}var i=n(32),o="[object Arguments]",s=Object.prototype,a=s.hasOwnProperty,u=s.toString,c=s.propertyIsEnumerable;e.exports=r},function(e,t,n){function r(e){return o(e)&&i(e)}var i=n(10),o=n(18);e.exports=r},function(e,t){function n(e,t){return t=null==t?r:t,!!t&&("number"==typeof e||i.test(e))&&e>-1&&e%1==0&&t>e}var r=9007199254740991,i=/^(?:0|[1-9]\d*)$/;e.exports=n},function(e,t){function n(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||r;return e===n}var r=Object.prototype;e.exports=n},function(e,t,n){(function(e){!function(t){function n(e,t){if("object"!==i(e))return t;for(var r in t)"object"===i(e[r])&&"object"===i(t[r])?e[r]=n(e[r],t[r]):e[r]=t[r];return e}function r(e,t,r){var s=r[0],a=r.length;(e||"object"!==i(s))&&(s={});for(var u=0;a>u;++u){var c=r[u],l=i(c);if("object"===l)for(var f in c){var h=e?o.clone(c[f]):c[f];t?s[f]=n(s[f],h):s[f]=h}}return s}function i(e){return{}.toString.call(e).slice(8,-1).toLowerCase()}var o=function(e){return r(e===!0,!1,arguments)},s="merge";o.recursive=function(e){return r(e===!0,!0,arguments)},o.clone=function(e){var t,n,r=e,s=i(e);if("array"===s)for(r=[],n=e.length,t=0;n>t;++t)r[t]=o.clone(e[t]);else if("object"===s){r={};for(t in e)r[t]=o.clone(e[t])}return r},t?e.exports=o:window[s]=o}("object"==typeof e&&e&&"object"==typeof e.exports&&e.exports)}).call(t,n(36)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t,n){(function(t,n,r){/* @preserve
	 * The MIT License (MIT)
	 * 
	 * Copyright (c) 2013-2015 Petka Antonov
	 * 
	 * Permission is hereby granted, free of charge, to any person obtaining a copy
	 * of this software and associated documentation files (the "Software"), to deal
	 * in the Software without restriction, including without limitation the rights
	 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
	 * copies of the Software, and to permit persons to whom the Software is
	 * furnished to do so, subject to the following conditions:
	 * 
	 * The above copyright notice and this permission notice shall be included in
	 * all copies or substantial portions of the Software.
	 * 
	 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
	 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
	 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
	 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
	 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
	 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
	 * THE SOFTWARE.
	 * 
	 */
!function(t){e.exports=t()}(function(){var e,i,o;return function s(e,t,n){function r(o,a){if(!t[o]){if(!e[o]){var u="function"==typeof _dereq_&&_dereq_;if(!a&&u)return u(o,!0);if(i)return i(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var l=t[o]={exports:{}};e[o][0].call(l.exports,function(t){var n=e[o][1][t];return r(n?n:t)},l,l.exports,s,e,t,n)}return t[o].exports}for(var i="function"==typeof _dereq_&&_dereq_,o=0;o<n.length;o++)r(n[o]);return r}({1:[function(e,t,n){"use strict";t.exports=function(e){function t(e){var t=new n(e),r=t.promise();return t.setHowMany(1),t.setUnwrap(),t.init(),r}var n=e._SomePromiseArray;e.any=function(e){return t(e)},e.prototype.any=function(){return t(this)}}},{}],2:[function(e,n,r){"use strict";function i(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new f(16),this._normalQueue=new f(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var e=this;this.drainQueues=function(){e._drainQueues()},this._schedule=l}function o(e,t,n){this._lateQueue.push(e,t,n),this._queueTick()}function s(e,t,n){this._normalQueue.push(e,t,n),this._queueTick()}function a(e){this._normalQueue._pushOne(e),this._queueTick()}var u;try{throw new Error}catch(c){u=c}var l=e("./schedule"),f=e("./queue"),h=e("./util");i.prototype.setScheduler=function(e){var t=this._schedule;return this._schedule=e,this._customScheduler=!0,t},i.prototype.hasCustomScheduler=function(){return this._customScheduler},i.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},i.prototype.disableTrampolineIfNecessary=function(){h.hasDevTools&&(this._trampolineEnabled=!1)},i.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},i.prototype.fatalError=function(e,n){n?(t.stderr.write("Fatal "+(e instanceof Error?e.stack:e)+"\n"),t.exit(2)):this.throwLater(e)},i.prototype.throwLater=function(e,t){if(1===arguments.length&&(t=e,e=function(){throw t}),"undefined"!=typeof setTimeout)setTimeout(function(){e(t)},0);else try{this._schedule(function(){e(t)})}catch(n){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},h.hasDevTools?(i.prototype.invokeLater=function(e,t,n){this._trampolineEnabled?o.call(this,e,t,n):this._schedule(function(){setTimeout(function(){e.call(t,n)},100)})},i.prototype.invoke=function(e,t,n){this._trampolineEnabled?s.call(this,e,t,n):this._schedule(function(){e.call(t,n)})},i.prototype.settlePromises=function(e){this._trampolineEnabled?a.call(this,e):this._schedule(function(){e._settlePromises()})}):(i.prototype.invokeLater=o,i.prototype.invoke=s,i.prototype.settlePromises=a),i.prototype.invokeFirst=function(e,t,n){this._normalQueue.unshift(e,t,n),this._queueTick()},i.prototype._drainQueue=function(e){for(;e.length()>0;){var t=e.shift();if("function"==typeof t){var n=e.shift(),r=e.shift();t.call(n,r)}else t._settlePromises()}},i.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},i.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},i.prototype._reset=function(){this._isTickUsed=!1},n.exports=i,n.exports.firstLineError=u},{"./queue":26,"./schedule":29,"./util":36}],3:[function(e,t,n){"use strict";t.exports=function(e,t,n,r){var i=!1,o=function(e,t){this._reject(t)},s=function(e,t){t.promiseRejectionQueued=!0,t.bindingPromise._then(o,o,null,this,e)},a=function(e,t){0===(50397184&this._bitField)&&this._resolveCallback(t.target)},u=function(e,t){t.promiseRejectionQueued||this._reject(e)};e.prototype.bind=function(o){i||(i=!0,e.prototype._propagateFrom=r.propagateFromFunction(),e.prototype._boundValue=r.boundValueFunction());var c=n(o),l=new e(t);l._propagateFrom(this,1);var f=this._target();if(l._setBoundTo(c),c instanceof e){var h={promiseRejectionQueued:!1,promise:l,target:f,bindingPromise:c};f._then(t,s,void 0,l,h),c._then(a,u,void 0,l,h),l._setOnCancel(c)}else l._resolveCallback(f);return l},e.prototype._setBoundTo=function(e){void 0!==e?(this._bitField=2097152|this._bitField,this._boundTo=e):this._bitField=-2097153&this._bitField},e.prototype._isBound=function(){return 2097152===(2097152&this._bitField)},e.bind=function(t,n){return e.resolve(n).bind(t)}}},{}],4:[function(e,t,n){"use strict";function r(){try{Promise===o&&(Promise=i)}catch(e){}return o}var i;"undefined"!=typeof Promise&&(i=Promise);var o=e("./promise")();o.noConflict=r,t.exports=o},{"./promise":22}],5:[function(e,t,n){"use strict";var r=Object.create;if(r){var i=r(null),o=r(null);i[" size"]=o[" size"]=0}t.exports=function(t){function n(e,n){var r;if(null!=e&&(r=e[n]),"function"!=typeof r){var i="Object "+a.classString(e)+" has no method '"+a.toString(n)+"'";throw new t.TypeError(i)}return r}function r(e){var t=this.pop(),r=n(e,t);return r.apply(e,this)}function i(e){return e[this]}function o(e){var t=+this;return 0>t&&(t=Math.max(0,t+e.length)),e[t]}var s,a=e("./util"),u=a.canEvaluate;a.isIdentifier;t.prototype.call=function(e){var t=[].slice.call(arguments,1);return t.push(e),this._then(r,void 0,void 0,t,void 0)},t.prototype.get=function(e){var t,n="number"==typeof e;if(n)t=o;else if(u){var r=s(e);t=null!==r?r:i}else t=i;return this._then(t,void 0,void 0,e,void 0)}}},{"./util":36}],6:[function(e,t,n){"use strict";t.exports=function(t,n,r,i){var o=e("./util"),s=o.tryCatch,a=o.errorObj,u=t._async;t.prototype["break"]=t.prototype.cancel=function(){if(!i.cancellation())return this._warn("cancellation is disabled");for(var e=this,t=e;e.isCancellable();){if(!e._cancelBy(t)){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}var n=e._cancellationParent;if(null==n||!n.isCancellable()){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}e._isFollowing()&&e._followee().cancel(),t=e,e=n}},t.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},t.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},t.prototype._cancelBy=function(e){return e===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),this._enoughBranchesHaveCancelled()?(this._invokeOnCancel(),!0):!1)},t.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},t.prototype._cancel=function(){this.isCancellable()&&(this._setCancelled(),u.invoke(this._cancelPromises,this,void 0))},t.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},t.prototype._unsetOnCancel=function(){this._onCancelField=void 0},t.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},t.prototype._doInvokeOnCancel=function(e,t){if(o.isArray(e))for(var n=0;n<e.length;++n)this._doInvokeOnCancel(e[n],t);else if(void 0!==e)if("function"==typeof e){if(!t){var r=s(e).call(this._boundValue());r===a&&(this._attachExtraTrace(r.e),u.throwLater(r.e))}}else e._resultCancelled(this)},t.prototype._invokeOnCancel=function(){var e=this._onCancel();this._unsetOnCancel(),u.invoke(this._doInvokeOnCancel,this,e)},t.prototype._invokeInternalOnCancel=function(){this.isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},t.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(e,t,n){"use strict";t.exports=function(t){function n(e,n,a){return function(u){var c=a._boundValue();e:for(var l=0;l<e.length;++l){var f=e[l];if(f===Error||null!=f&&f.prototype instanceof Error){if(u instanceof f)return o(n).call(c,u)}else if("function"==typeof f){var h=o(f).call(c,u);if(h===s)return h;if(h)return o(n).call(c,u)}else if(r.isObject(u)){for(var p=i(f),d=0;d<p.length;++d){var v=p[d];if(f[v]!=u[v])continue e}return o(n).call(c,u)}}return t}}var r=e("./util"),i=e("./es5").keys,o=r.tryCatch,s=r.errorObj;return n}},{"./es5":13,"./util":36}],8:[function(e,t,n){"use strict";t.exports=function(e){function t(){this._trace=new t.CapturedTrace(r())}function n(){return i?new t:void 0}function r(){var e=o.length-1;return e>=0?o[e]:void 0}var i=!1,o=[];return e.prototype._promiseCreated=function(){},e.prototype._pushContext=function(){},e.prototype._popContext=function(){return null},e._peekContext=e.prototype._peekContext=function(){},t.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,o.push(this._trace))},t.prototype._popContext=function(){if(void 0!==this._trace){var e=o.pop(),t=e._promiseCreated;return e._promiseCreated=null,t}return null},t.CapturedTrace=null,t.create=n,t.deactivateLongStackTraces=function(){},t.activateLongStackTraces=function(){var n=e.prototype._pushContext,o=e.prototype._popContext,s=e._peekContext,a=e.prototype._peekContext,u=e.prototype._promiseCreated;t.deactivateLongStackTraces=function(){e.prototype._pushContext=n,e.prototype._popContext=o,e._peekContext=s,e.prototype._peekContext=a,e.prototype._promiseCreated=u,i=!1},i=!0,e.prototype._pushContext=t.prototype._pushContext,e.prototype._popContext=t.prototype._popContext,e._peekContext=e.prototype._peekContext=r,e.prototype._promiseCreated=function(){var e=this._peekContext();e&&null==e._promiseCreated&&(e._promiseCreated=this)}},t}},{}],9:[function(e,n,r){"use strict";n.exports=function(n,r){function i(e,t){return{promise:t}}function o(){return!1}function s(e,t,n){var r=this;try{e(t,n,function(e){if("function"!=typeof e)throw new TypeError("onCancel must be a function, got: "+N.toString(e));r._attachCancellationCallback(e)})}catch(i){return i}}function a(e){if(!this.isCancellable())return this;var t=this._onCancel();void 0!==t?N.isArray(t)?t.push(e):this._setOnCancel([t,e]):this._setOnCancel(e)}function u(){return this._onCancelField}function c(e){this._onCancelField=e}function l(){this._cancellationParent=void 0,this._onCancelField=void 0}function f(e,t){if(0!==(1&t)){this._cancellationParent=e;var n=e._branchesRemainingToCancel;void 0===n&&(n=0),e._branchesRemainingToCancel=n+1}0!==(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)}function h(e,t){0!==(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)}function p(){var e=this._boundTo;return void 0!==e&&e instanceof n?e.isFulfilled()?e.value():void 0:e}function d(){this._trace=new O(this._peekContext())}function v(e,t){if(D(e)){var n=this._trace;if(void 0!==n&&t&&(n=n._parent),void 0!==n)n.attachExtraTrace(e);else if(!e.__stackCleaned__){var r=I(e);N.notEnumerableProp(e,"stack",r.message+"\n"+r.stack.join("\n")),N.notEnumerableProp(e,"__stackCleaned__",!0)}}}function g(e,t,n,r,i){if(void 0===e&&null!==t&&V){if(void 0!==i&&i._returnedNonUndefined())return;if(0===(65535&r._bitField))return;n&&(n+=" ");var o="a promise was created in a "+n+"handler but was not returned from it";r._warn(o,!0,t)}}function y(e,t){var n=e+" is deprecated and will be removed in a future version.";return t&&(n+=" Use "+t+" instead."),m(n)}function m(e,t,r){if(ie.warnings){var i,o=new F(e);if(t)r._attachExtraTrace(o);else if(ie.longStackTraces&&(i=n._peekContext()))i.attachExtraTrace(o);else{var s=I(o);o.stack=s.message+"\n"+s.stack.join("\n")}Z("warning",o)||k(o,"",!0)}}function b(e,t){for(var n=0;n<t.length-1;++n)t[n].push("From previous event:"),t[n]=t[n].join("\n");return n<t.length&&(t[n]=t[n].join("\n")),e+"\n"+t.join("\n")}function w(e){for(var t=0;t<e.length;++t)(0===e[t].length||t+1<e.length&&e[t][0]===e[t+1][0])&&(e.splice(t,1),t--)}function _(e){for(var t=e[0],n=1;n<e.length;++n){for(var r=e[n],i=t.length-1,o=t[i],s=-1,a=r.length-1;a>=0;--a)if(r[a]===o){s=a;break}for(var a=s;a>=0;--a){var u=r[a];if(t[i]!==u)break;t.pop(),i--}t=r}}function E(e){for(var t=[],n=0;n<e.length;++n){var r=e[n],i="    (No stack trace)"===r||z.test(r),o=i&&te(r);i&&!o&&(Q&&" "!==r.charAt(0)&&(r="    "+r),t.push(r))}return t}function x(e){for(var t=e.stack.replace(/\s+$/g,"").split("\n"),n=0;n<t.length;++n){var r=t[n];if("    (No stack trace)"===r||z.test(r))break}return n>0&&(t=t.slice(n)),t}function I(e){var t=e.stack,n=e.toString();return t="string"==typeof t&&t.length>0?x(e):["    (No stack trace)"],{message:n,stack:E(t)}}function k(e,t,n){if("undefined"!=typeof console){var r;if(N.isObject(e)){var i=e.stack;r=t+H(i,e)}else r=t+String(e);"function"==typeof L?L(r,n):"function"!=typeof console.log&&"object"!=typeof console.log||console.log(r)}}function S(e,t,n,r){var i=!1;try{"function"==typeof t&&(i=!0,"rejectionHandled"===e?t(r):t(n,r))}catch(o){P.throwLater(o)}"unhandledRejection"===e?Z(e,n,r)||i||k(n,"Unhandled rejection "):Z(e,r)}function C(e){var t;if("function"==typeof e)t="[function "+(e.name||"anonymous")+"]";else{t=e&&"function"==typeof e.toString?e.toString():N.toString(e);var n=/\[object [a-zA-Z0-9$_]+\]/;if(n.test(t))try{var r=JSON.stringify(e);t=r}catch(i){}0===t.length&&(t="(empty array)")}return"(<"+T(t)+">, no stack trace)"}function T(e){var t=41;return e.length<t?e:e.substr(0,t-3)+"..."}function U(){return"function"==typeof re}function B(e){var t=e.match(ne);return t?{fileName:t[1],line:parseInt(t[2],10)}:void 0}function j(e,t){if(U()){for(var n,r,i=e.stack.split("\n"),o=t.stack.split("\n"),s=-1,a=-1,u=0;u<i.length;++u){var c=B(i[u]);if(c){n=c.fileName,s=c.line;break}}for(var u=0;u<o.length;++u){var c=B(o[u]);if(c){r=c.fileName,a=c.line;break}}0>s||0>a||!n||!r||n!==r||s>=a||(te=function(e){if(q.test(e))return!0;var t=B(e);return!!(t&&t.fileName===n&&s<=t.line&&t.line<=a)})}}function O(e){this._parent=e,this._promisesCreated=0;var t=this._length=1+(void 0===e?0:e._length);re(this,O),t>32&&this.uncycle()}var A,R,L,M=n._getDomain,P=n._async,F=e("./errors").Warning,N=e("./util"),D=N.canAttachTrace,q=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,z=null,H=null,Q=!1,W=!(0==N.env("BLUEBIRD_DEBUG")),K=!(0==N.env("BLUEBIRD_WARNINGS")||!W&&!N.env("BLUEBIRD_WARNINGS")),Y=!(0==N.env("BLUEBIRD_LONG_STACK_TRACES")||!W&&!N.env("BLUEBIRD_LONG_STACK_TRACES")),V=0!=N.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(K||!!N.env("BLUEBIRD_W_FORGOTTEN_RETURN"));n.prototype.suppressUnhandledRejections=function(){var e=this._target();e._bitField=-1048577&e._bitField|524288},n.prototype._ensurePossibleRejectionHandled=function(){0===(524288&this._bitField)&&(this._setRejectionIsUnhandled(),P.invokeLater(this._notifyUnhandledRejection,this,void 0))},n.prototype._notifyUnhandledRejectionIsHandled=function(){S("rejectionHandled",A,void 0,this)},n.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},n.prototype._returnedNonUndefined=function(){return 0!==(268435456&this._bitField)},n.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var e=this._settledValue();this._setUnhandledRejectionIsNotified(),S("unhandledRejection",R,e,this)}},n.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},n.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},n.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},n.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},n.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},n.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},n.prototype._warn=function(e,t,n){return m(e,t,n||this)},n.onPossiblyUnhandledRejection=function(e){var t=M();R="function"==typeof e?null===t?e:t.bind(e):void 0},n.onUnhandledRejectionHandled=function(e){var t=M();A="function"==typeof e?null===t?e:t.bind(e):void 0};var G=function(){};n.longStackTraces=function(){if(P.haveItemsQueued()&&!ie.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!ie.longStackTraces&&U()){var e=n.prototype._captureStackTrace,t=n.prototype._attachExtraTrace;ie.longStackTraces=!0,G=function(){if(P.haveItemsQueued()&&!ie.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");n.prototype._captureStackTrace=e,n.prototype._attachExtraTrace=t,r.deactivateLongStackTraces(),P.enableTrampoline(),ie.longStackTraces=!1},n.prototype._captureStackTrace=d,n.prototype._attachExtraTrace=v,r.activateLongStackTraces(),P.disableTrampolineIfNecessary()}},n.hasLongStackTraces=function(){return ie.longStackTraces&&U()};var $=function(){try{var e=document.createEvent("CustomEvent");return e.initCustomEvent("testingtheevent",!1,!0,{}),N.global.dispatchEvent(e),function(e,t){var n=document.createEvent("CustomEvent");return n.initCustomEvent(e.toLowerCase(),!1,!0,t),!N.global.dispatchEvent(n)}}catch(t){}return function(){return!1}}(),X=function(){return N.isNode?function(){return t.emit.apply(t,arguments)}:N.global?function(e){var t="on"+e.toLowerCase(),n=N.global[t];return n?(n.apply(N.global,[].slice.call(arguments,1)),!0):!1}:function(){return!1}}(),J={promiseCreated:i,promiseFulfilled:i,promiseRejected:i,promiseResolved:i,promiseCancelled:i,promiseChained:function(e,t,n){return{promise:t,child:n}},warning:function(e,t){return{warning:t}},unhandledRejection:function(e,t,n){return{reason:t,promise:n}},rejectionHandled:i},Z=function(e){var t=!1;try{t=X.apply(null,arguments)}catch(n){P.throwLater(n),t=!0}var r=!1;try{r=$(e,J[e].apply(null,arguments))}catch(n){P.throwLater(n),r=!0}return r||t};n.config=function(e){if(e=Object(e),"longStackTraces"in e&&(e.longStackTraces?n.longStackTraces():!e.longStackTraces&&n.hasLongStackTraces()&&G()),"warnings"in e){var t=e.warnings;ie.warnings=!!t,V=ie.warnings,N.isObject(t)&&"wForgottenReturn"in t&&(V=!!t.wForgottenReturn)}if("cancellation"in e&&e.cancellation&&!ie.cancellation){if(P.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");n.prototype._clearCancellationData=l,n.prototype._propagateFrom=f,n.prototype._onCancel=u,n.prototype._setOnCancel=c,n.prototype._attachCancellationCallback=a,n.prototype._execute=s,ee=f,ie.cancellation=!0}"monitoring"in e&&(e.monitoring&&!ie.monitoring?(ie.monitoring=!0,n.prototype._fireEvent=Z):!e.monitoring&&ie.monitoring&&(ie.monitoring=!1,n.prototype._fireEvent=o))},n.prototype._fireEvent=o,n.prototype._execute=function(e,t,n){try{e(t,n)}catch(r){return r}},n.prototype._onCancel=function(){},n.prototype._setOnCancel=function(e){},n.prototype._attachCancellationCallback=function(e){},n.prototype._captureStackTrace=function(){},n.prototype._attachExtraTrace=function(){},n.prototype._clearCancellationData=function(){},n.prototype._propagateFrom=function(e,t){};var ee=h,te=function(){return!1},ne=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;N.inherits(O,Error),r.CapturedTrace=O,O.prototype.uncycle=function(){var e=this._length;if(!(2>e)){for(var t=[],n={},r=0,i=this;void 0!==i;++r)t.push(i),i=i._parent;e=this._length=r;for(var r=e-1;r>=0;--r){var o=t[r].stack;void 0===n[o]&&(n[o]=r)}for(var r=0;e>r;++r){var s=t[r].stack,a=n[s];if(void 0!==a&&a!==r){a>0&&(t[a-1]._parent=void 0,t[a-1]._length=1),t[r]._parent=void 0,t[r]._length=1;var u=r>0?t[r-1]:this;e-1>a?(u._parent=t[a+1],u._parent.uncycle(),u._length=u._parent._length+1):(u._parent=void 0,u._length=1);for(var c=u._length+1,l=r-2;l>=0;--l)t[l]._length=c,c++;return}}}},O.prototype.attachExtraTrace=function(e){if(!e.__stackCleaned__){this.uncycle();for(var t=I(e),n=t.message,r=[t.stack],i=this;void 0!==i;)r.push(E(i.stack.split("\n"))),i=i._parent;_(r),w(r),N.notEnumerableProp(e,"stack",b(n,r)),N.notEnumerableProp(e,"__stackCleaned__",!0)}};var re=function(){var e=/^\s*at\s*/,t=function(e,t){return"string"==typeof e?e:void 0!==t.name&&void 0!==t.message?t.toString():C(t)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,z=e,H=t;var n=Error.captureStackTrace;return te=function(e){return q.test(e)},function(e,t){Error.stackTraceLimit+=6,n(e,t),Error.stackTraceLimit-=6}}var r=new Error;if("string"==typeof r.stack&&r.stack.split("\n")[0].indexOf("stackDetection@")>=0)return z=/@/,H=t,Q=!0,function(e){e.stack=(new Error).stack};var i;try{throw new Error}catch(o){i="stack"in o}return"stack"in r||!i||"number"!=typeof Error.stackTraceLimit?(H=function(e,t){return"string"==typeof e?e:"object"!=typeof t&&"function"!=typeof t||void 0===t.name||void 0===t.message?C(t):t.toString()},null):(z=e,H=t,function(e){Error.stackTraceLimit+=6;try{throw new Error}catch(t){e.stack=t.stack}Error.stackTraceLimit-=6})}([]);"undefined"!=typeof console&&"undefined"!=typeof console.warn&&(L=function(e){console.warn(e)},N.isNode&&t.stderr.isTTY?L=function(e,t){var n=t?"[33m":"[31m";console.warn(n+e+"[0m\n")}:N.isNode||"string"!=typeof(new Error).stack||(L=function(e,t){console.warn("%c"+e,t?"color: darkorange":"color: red")}));var ie={warnings:K,longStackTraces:!1,cancellation:!1,monitoring:!1};return Y&&n.longStackTraces(),{longStackTraces:function(){return ie.longStackTraces},warnings:function(){return ie.warnings},cancellation:function(){return ie.cancellation},monitoring:function(){return ie.monitoring},propagateFromFunction:function(){return ee},boundValueFunction:function(){return p},checkForgottenReturns:g,setBounds:j,warn:m,deprecated:y,CapturedTrace:O,fireDomEvent:$,fireGlobalEvent:X}}},{"./errors":12,"./util":36}],10:[function(e,t,n){"use strict";t.exports=function(e){function t(){return this.value}function n(){throw this.reason}e.prototype["return"]=e.prototype.thenReturn=function(n){return n instanceof e&&n.suppressUnhandledRejections(),this._then(t,void 0,void 0,{value:n},void 0)},e.prototype["throw"]=e.prototype.thenThrow=function(e){return this._then(n,void 0,void 0,{reason:e},void 0)},e.prototype.catchThrow=function(e){if(arguments.length<=1)return this._then(void 0,n,void 0,{reason:e},void 0);var t=arguments[1],r=function(){throw t};return this.caught(e,r)},e.prototype.catchReturn=function(n){if(arguments.length<=1)return n instanceof e&&n.suppressUnhandledRejections(),this._then(void 0,t,void 0,{value:n},void 0);var r=arguments[1];r instanceof e&&r.suppressUnhandledRejections();var i=function(){return r};return this.caught(n,i)}}},{}],11:[function(e,t,n){"use strict";t.exports=function(e,t){function n(){return o(this)}function r(e,n){return i(e,n,t,t)}var i=e.reduce,o=e.all;e.prototype.each=function(e){return this.mapSeries(e)._then(n,void 0,void 0,this,void 0)},e.prototype.mapSeries=function(e){return i(this,e,t,t)},e.each=function(e,t){return r(e,t)._then(n,void 0,void 0,e,void 0)},e.mapSeries=r}},{}],12:[function(e,t,n){"use strict";function r(e,t){function n(r){return this instanceof n?(f(this,"message","string"==typeof r?r:t),f(this,"name",e),void(Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this))):new n(r)}return l(n,Error),n}function i(e){return this instanceof i?(f(this,"name","OperationalError"),f(this,"message",e),this.cause=e,this.isOperational=!0,void(e instanceof Error?(f(this,"message",e.message),f(this,"stack",e.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor))):new i(e)}var o,s,a=e("./es5"),u=a.freeze,c=e("./util"),l=c.inherits,f=c.notEnumerableProp,h=r("Warning","warning"),p=r("CancellationError","cancellation error"),d=r("TimeoutError","timeout error"),v=r("AggregateError","aggregate error");try{o=TypeError,s=RangeError}catch(g){o=r("TypeError","type error"),s=r("RangeError","range error")}for(var y="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),m=0;m<y.length;++m)"function"==typeof Array.prototype[y[m]]&&(v.prototype[y[m]]=Array.prototype[y[m]]);a.defineProperty(v.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),v.prototype.isOperational=!0;var b=0;v.prototype.toString=function(){var e=Array(4*b+1).join(" "),t="\n"+e+"AggregateError of:\n";b++,e=Array(4*b+1).join(" ");for(var n=0;n<this.length;++n){for(var r=this[n]===this?"[Circular AggregateError]":this[n]+"",i=r.split("\n"),o=0;o<i.length;++o)i[o]=e+i[o];r=i.join("\n"),t+=r+"\n"}return b--,t},l(i,Error);var w=Error.__BluebirdErrorTypes__;w||(w=u({CancellationError:p,TimeoutError:d,OperationalError:i,RejectionError:i,AggregateError:v}),a.defineProperty(Error,"__BluebirdErrorTypes__",{value:w,writable:!1,enumerable:!1,configurable:!1})),t.exports={Error:Error,TypeError:o,RangeError:s,CancellationError:w.CancellationError,OperationalError:w.OperationalError,TimeoutError:w.TimeoutError,AggregateError:w.AggregateError,Warning:h}},{"./es5":13,"./util":36}],13:[function(e,t,n){var r=function(){"use strict";return void 0===this}();if(r)t.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:r,propertyIsWritable:function(e,t){var n=Object.getOwnPropertyDescriptor(e,t);return!(n&&!n.writable&&!n.set)}};else{var i={}.hasOwnProperty,o={}.toString,s={}.constructor.prototype,a=function(e){var t=[];for(var n in e)i.call(e,n)&&t.push(n);return t},u=function(e,t){return{value:e[t]}},c=function(e,t,n){return e[t]=n.value,e},l=function(e){return e},f=function(e){try{return Object(e).constructor.prototype}catch(t){return s}},h=function(e){try{return"[object Array]"===o.call(e)}catch(t){return!1}};t.exports={isArray:h,keys:a,names:a,defineProperty:c,getDescriptor:u,freeze:l,getPrototypeOf:f,isES5:r,propertyIsWritable:function(){return!0}}}},{}],14:[function(e,t,n){"use strict";t.exports=function(e,t){var n=e.map;e.prototype.filter=function(e,r){return n(this,e,r,t)},e.filter=function(e,r,i){return n(e,r,i,t)}}},{}],15:[function(e,t,n){"use strict";t.exports=function(t,n){function r(e,t,n){this.promise=e,this.type=t,this.handler=n,this.called=!1,this.cancelPromise=null}function i(e){this.finallyHandler=e}function o(e,t){return null!=e.cancelPromise?(arguments.length>1?e.cancelPromise._reject(t):e.cancelPromise._cancel(),e.cancelPromise=null,!0):!1}function s(){return u.call(this,this.promise._target()._settledValue())}function a(e){return o(this,e)?void 0:(f.e=e,f)}function u(e){var r=this.promise,u=this.handler;if(!this.called){this.called=!0;var c=this.isFinallyHandler()?u.call(r._boundValue()):u.call(r._boundValue(),e);if(void 0!==c){r._setReturnedNonUndefined();var h=n(c,r);if(h instanceof t){if(null!=this.cancelPromise){if(h.isCancelled()){var p=new l("late cancellation observer");return r._attachExtraTrace(p),f.e=p,f}h.isPending()&&h._attachCancellationCallback(new i(this))}return h._then(s,a,void 0,this,void 0)}}}return r.isRejected()?(o(this),f.e=e,f):(o(this),e)}var c=e("./util"),l=t.CancellationError,f=c.errorObj;return r.prototype.isFinallyHandler=function(){return 0===this.type},i.prototype._resultCancelled=function(){o(this.finallyHandler)},t.prototype._passThrough=function(e,t,n,i){return"function"!=typeof e?this.then():this._then(n,i,void 0,new r(this,t,e),void 0)},t.prototype.lastly=t.prototype["finally"]=function(e){return this._passThrough(e,0,u,u)},t.prototype.tap=function(e){return this._passThrough(e,1,u)},r}},{"./util":36}],16:[function(e,t,n){"use strict";t.exports=function(t,n,r,i,o,s){function a(e,n,r){for(var o=0;o<n.length;++o){r._pushContext();var s=p(n[o])(e);if(r._popContext(),s===h){r._pushContext();var a=t.reject(h.e);return r._popContext(),a}var u=i(s,r);if(u instanceof t)return u}return null}function u(e,n,i,o){if(s.cancellation()){var a=new t(r),u=this._finallyPromise=new t(r);this._promise=a.lastly(function(){return u}),a._captureStackTrace(),a._setOnCancel(this)}else{var c=this._promise=new t(r);c._captureStackTrace()}this._stack=o,this._generatorFunction=e,this._receiver=n,this._generator=void 0,this._yieldHandlers="function"==typeof i?[i].concat(d):d,this._yieldedPromise=null,this._cancellationPhase=!1}var c=e("./errors"),l=c.TypeError,f=e("./util"),h=f.errorObj,p=f.tryCatch,d=[];f.inherits(u,o),u.prototype._isResolved=function(){return null===this._promise},u.prototype._cleanup=function(){this._promise=this._generator=null,s.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},u.prototype._promiseCancelled=function(){if(!this._isResolved()){var e,n="undefined"!=typeof this._generator["return"];if(n)this._promise._pushContext(),e=p(this._generator["return"]).call(this._generator,void 0),this._promise._popContext();else{var r=new t.CancellationError("generator .return() sentinel");t.coroutine.returnSentinel=r,this._promise._attachExtraTrace(r),this._promise._pushContext(),e=p(this._generator["throw"]).call(this._generator,r),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(e)}},u.prototype._promiseFulfilled=function(e){this._yieldedPromise=null,this._promise._pushContext();var t=p(this._generator.next).call(this._generator,e);this._promise._popContext(),this._continue(t)},u.prototype._promiseRejected=function(e){this._yieldedPromise=null,this._promise._attachExtraTrace(e),this._promise._pushContext();var t=p(this._generator["throw"]).call(this._generator,e);this._promise._popContext(),this._continue(t)},u.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof t){var e=this._yieldedPromise;this._yieldedPromise=null,e.cancel()}},u.prototype.promise=function(){return this._promise},u.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},u.prototype._continue=function(e){var n=this._promise;if(e===h)return this._cleanup(),this._cancellationPhase?n.cancel():n._rejectCallback(e.e,!1);var r=e.value;if(e.done===!0)return this._cleanup(),this._cancellationPhase?n.cancel():n._resolveCallback(r);var o=i(r,this._promise);if(!(o instanceof t)&&(o=a(o,this._yieldHandlers,this._promise),null===o))return void this._promiseRejected(new l("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",r)+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")));o=o._target();var s=o._bitField;0===(50397184&s)?(this._yieldedPromise=o,o._proxy(this,null)):0!==(33554432&s)?this._promiseFulfilled(o._value()):0!==(16777216&s)?this._promiseRejected(o._reason()):this._promiseCancelled()},t.coroutine=function(e,t){if("function"!=typeof e)throw new l("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var n=Object(t).yieldHandler,r=u,i=(new Error).stack;return function(){var t=e.apply(this,arguments),o=new r(void 0,void 0,n,i),s=o.promise();return o._generator=t,o._promiseFulfilled(void 0),s}},t.coroutine.addYieldHandler=function(e){if("function"!=typeof e)throw new l("expecting a function but got "+f.classString(e));d.push(e)},t.spawn=function(e){if(s.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof e)return n("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var r=new u(e,this),i=r.promise();return r._run(t.spawn),i}}},{"./errors":12,"./util":36}],17:[function(e,t,n){"use strict";t.exports=function(t,n,r,i){var o=e("./util");o.canEvaluate,o.tryCatch,o.errorObj;t.join=function(){var e,t=arguments.length-1;if(t>0&&"function"==typeof arguments[t]){e=arguments[t];var r}var i=[].slice.call(arguments);e&&i.pop();var r=new n(i).promise();return void 0!==e?r.spread(e):r}}},{"./util":36}],18:[function(e,t,n){"use strict";t.exports=function(t,n,r,i,o,s){function a(e,t,n,r){this.constructor$(e),this._promise._captureStackTrace();var i=c();this._callback=null===i?t:i.bind(t),this._preservedValues=r===o?new Array(this.length()):null,this._limit=n,this._inFlight=0,this._queue=n>=1?[]:p,this._init$(void 0,-2)}function u(e,t,n,i){if("function"!=typeof t)return r("expecting a function but got "+l.classString(t));var o="object"==typeof n&&null!==n?n.concurrency:0;return o="number"==typeof o&&isFinite(o)&&o>=1?o:0,
new a(e,t,o,i).promise()}var c=t._getDomain,l=e("./util"),f=l.tryCatch,h=l.errorObj,p=[];l.inherits(a,n),a.prototype._init=function(){},a.prototype._promiseFulfilled=function(e,n){var r=this._values,o=this.length(),a=this._preservedValues,u=this._limit;if(0>n){if(n=-1*n-1,r[n]=e,u>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(u>=1&&this._inFlight>=u)return r[n]=e,this._queue.push(n),!1;null!==a&&(a[n]=e);var c=this._promise,l=this._callback,p=c._boundValue();c._pushContext();var d=f(l).call(p,e,n,o),v=c._popContext();if(s.checkForgottenReturns(d,v,null!==a?"Promise.filter":"Promise.map",c),d===h)return this._reject(d.e),!0;var g=i(d,this._promise);if(g instanceof t){g=g._target();var y=g._bitField;if(0===(50397184&y))return u>=1&&this._inFlight++,r[n]=g,g._proxy(this,-1*(n+1)),!1;if(0===(33554432&y))return 0!==(16777216&y)?(this._reject(g._reason()),!0):(this._cancel(),!0);d=g._value()}r[n]=d}var m=++this._totalResolved;return m>=o?(null!==a?this._filter(r,a):this._resolve(r),!0):!1},a.prototype._drainQueue=function(){for(var e=this._queue,t=this._limit,n=this._values;e.length>0&&this._inFlight<t;){if(this._isResolved())return;var r=e.pop();this._promiseFulfilled(n[r],r)}},a.prototype._filter=function(e,t){for(var n=t.length,r=new Array(n),i=0,o=0;n>o;++o)e[o]&&(r[i++]=t[o]);r.length=i,this._resolve(r)},a.prototype.preservedValues=function(){return this._preservedValues},t.prototype.map=function(e,t){return u(this,e,t,null)},t.map=function(e,t,n,r){return u(e,t,n,r)}}},{"./util":36}],19:[function(e,t,n){"use strict";t.exports=function(t,n,r,i,o){var s=e("./util"),a=s.tryCatch;t.method=function(e){if("function"!=typeof e)throw new t.TypeError("expecting a function but got "+s.classString(e));return function(){var r=new t(n);r._captureStackTrace(),r._pushContext();var i=a(e).apply(this,arguments),s=r._popContext();return o.checkForgottenReturns(i,s,"Promise.method",r),r._resolveFromSyncValue(i),r}},t.attempt=t["try"]=function(e){if("function"!=typeof e)return i("expecting a function but got "+s.classString(e));var r=new t(n);r._captureStackTrace(),r._pushContext();var u;if(arguments.length>1){o.deprecated("calling Promise.try with more than 1 argument");var c=arguments[1],l=arguments[2];u=s.isArray(c)?a(e).apply(l,c):a(e).call(l,c)}else u=a(e)();var f=r._popContext();return o.checkForgottenReturns(u,f,"Promise.try",r),r._resolveFromSyncValue(u),r},t.prototype._resolveFromSyncValue=function(e){e===s.errorObj?this._rejectCallback(e.e,!1):this._resolveCallback(e,!0)}}},{"./util":36}],20:[function(e,t,n){"use strict";function r(e){return e instanceof Error&&l.getPrototypeOf(e)===Error.prototype}function i(e){var t;if(r(e)){t=new c(e),t.name=e.name,t.message=e.message,t.stack=e.stack;for(var n=l.keys(e),i=0;i<n.length;++i){var o=n[i];f.test(o)||(t[o]=e[o])}return t}return s.markAsOriginatingFromRejection(e),e}function o(e,t){return function(n,r){if(null!==e){if(n){var o=i(a(n));e._attachExtraTrace(o),e._reject(o)}else if(t){var s=[].slice.call(arguments,1);e._fulfill(s)}else e._fulfill(r);e=null}}}var s=e("./util"),a=s.maybeWrapAsError,u=e("./errors"),c=u.OperationalError,l=e("./es5"),f=/^(?:name|message|stack|cause)$/;t.exports=o},{"./errors":12,"./es5":13,"./util":36}],21:[function(e,t,n){"use strict";t.exports=function(t){function n(e,t){var n=this;if(!o.isArray(e))return r.call(n,e,t);var i=a(t).apply(n._boundValue(),[null].concat(e));i===u&&s.throwLater(i.e)}function r(e,t){var n=this,r=n._boundValue(),i=void 0===e?a(t).call(r,null):a(t).call(r,null,e);i===u&&s.throwLater(i.e)}function i(e,t){var n=this;if(!e){var r=new Error(e+"");r.cause=e,e=r}var i=a(t).call(n._boundValue(),e);i===u&&s.throwLater(i.e)}var o=e("./util"),s=t._async,a=o.tryCatch,u=o.errorObj;t.prototype.asCallback=t.prototype.nodeify=function(e,t){if("function"==typeof e){var o=r;void 0!==t&&Object(t).spread&&(o=n),this._then(o,i,void 0,this,e)}return this}}},{"./util":36}],22:[function(e,n,r){"use strict";n.exports=function(){function n(){}function r(e,t){if("function"!=typeof t)throw new m("expecting a function but got "+p.classString(t));if(e.constructor!==i)throw new m("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n")}function i(e){this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,e!==w&&(r(this,e),this._resolveFromExecutor(e)),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function o(e){this.promise._resolveCallback(e)}function s(e){this.promise._rejectCallback(e,!1)}function a(e){var t=new i(w);t._fulfillmentHandler0=e,t._rejectionHandler0=e,t._promise0=e,t._receiver0=e}var u,c=function(){return new m("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},l=function(){return new i.PromiseInspection(this._target())},f=function(e){return i.reject(new m(e))},h={},p=e("./util");u=p.isNode?function(){var e=t.domain;return void 0===e&&(e=null),e}:function(){return null},p.notEnumerableProp(i,"_getDomain",u);var d=e("./es5"),v=e("./async"),g=new v;d.defineProperty(i,"_async",{value:g});var y=e("./errors"),m=i.TypeError=y.TypeError;i.RangeError=y.RangeError;var b=i.CancellationError=y.CancellationError;i.TimeoutError=y.TimeoutError,i.OperationalError=y.OperationalError,i.RejectionError=y.OperationalError,i.AggregateError=y.AggregateError;var w=function(){},_={},E={},x=e("./thenables")(i,w),I=e("./promise_array")(i,w,x,f,n),k=e("./context")(i),S=k.create,C=e("./debuggability")(i,k),T=(C.CapturedTrace,e("./finally")(i,x)),U=e("./catch_filter")(E),B=e("./nodeback"),j=p.errorObj,O=p.tryCatch;return i.prototype.toString=function(){return"[object Promise]"},i.prototype.caught=i.prototype["catch"]=function(e){var t=arguments.length;if(t>1){var n,r=new Array(t-1),i=0;for(n=0;t-1>n;++n){var o=arguments[n];if(!p.isObject(o))return f("expecting an object but got "+p.classString(o));r[i++]=o}return r.length=i,e=arguments[n],this.then(void 0,U(r,e,this))}return this.then(void 0,e)},i.prototype.reflect=function(){return this._then(l,l,void 0,this,void 0)},i.prototype.then=function(e,t){if(C.warnings()&&arguments.length>0&&"function"!=typeof e&&"function"!=typeof t){var n=".then() only accepts functions but was passed: "+p.classString(e);arguments.length>1&&(n+=", "+p.classString(t)),this._warn(n)}return this._then(e,t,void 0,void 0,void 0)},i.prototype.done=function(e,t){var n=this._then(e,t,void 0,void 0,void 0);n._setIsFinal()},i.prototype.spread=function(e){return"function"!=typeof e?f("expecting a function but got "+p.classString(e)):this.all()._then(e,void 0,void 0,_,void 0)},i.prototype.toJSON=function(){var e={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(e.fulfillmentValue=this.value(),e.isFulfilled=!0):this.isRejected()&&(e.rejectionReason=this.reason(),e.isRejected=!0),e},i.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new I(this).promise()},i.prototype.error=function(e){return this.caught(p.originatesFromRejection,e)},i.is=function(e){return e instanceof i},i.fromNode=i.fromCallback=function(e){var t=new i(w);t._captureStackTrace();var n=arguments.length>1?!!Object(arguments[1]).multiArgs:!1,r=O(e)(B(t,n));return r===j&&t._rejectCallback(r.e,!0),t._isFateSealed()||t._setAsyncGuaranteed(),t},i.all=function(e){return new I(e).promise()},i.cast=function(e){var t=x(e);return t instanceof i||(t=new i(w),t._captureStackTrace(),t._setFulfilled(),t._rejectionHandler0=e),t},i.resolve=i.fulfilled=i.cast,i.reject=i.rejected=function(e){var t=new i(w);return t._captureStackTrace(),t._rejectCallback(e,!0),t},i.setScheduler=function(e){if("function"!=typeof e)throw new m("expecting a function but got "+p.classString(e));return g.setScheduler(e)},i.prototype._then=function(e,t,n,r,o){var s=void 0!==o,a=s?o:new i(w),c=this._target(),l=c._bitField;s||(a._propagateFrom(this,3),a._captureStackTrace(),void 0===r&&0!==(2097152&this._bitField)&&(r=0!==(50397184&l)?this._boundValue():c===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,a));var f=u();if(0!==(50397184&l)){var h,p,d=c._settlePromiseCtx;0!==(33554432&l)?(p=c._rejectionHandler0,h=e):0!==(16777216&l)?(p=c._fulfillmentHandler0,h=t,c._unsetRejectionIsUnhandled()):(d=c._settlePromiseLateCancellationObserver,p=new b("late cancellation observer"),c._attachExtraTrace(p),h=t),g.invoke(d,c,{handler:null===f?h:"function"==typeof h&&f.bind(h),promise:a,receiver:r,value:p})}else c._addCallbacks(e,t,a,r,f);return a},i.prototype._length=function(){return 65535&this._bitField},i.prototype._isFateSealed=function(){return 0!==(117506048&this._bitField)},i.prototype._isFollowing=function(){return 67108864===(67108864&this._bitField)},i.prototype._setLength=function(e){this._bitField=-65536&this._bitField|65535&e},i.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},i.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},i.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},i.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},i.prototype._isFinal=function(){return(4194304&this._bitField)>0},i.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},i.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},i.prototype._setAsyncGuaranteed=function(){g.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},i.prototype._receiverAt=function(e){var t=0===e?this._receiver0:this[4*e-4+3];if(t!==h)return void 0===t&&this._isBound()?this._boundValue():t},i.prototype._promiseAt=function(e){return this[4*e-4+2]},i.prototype._fulfillmentHandlerAt=function(e){return this[4*e-4+0]},i.prototype._rejectionHandlerAt=function(e){return this[4*e-4+1]},i.prototype._boundValue=function(){},i.prototype._migrateCallback0=function(e){var t=(e._bitField,e._fulfillmentHandler0),n=e._rejectionHandler0,r=e._promise0,i=e._receiverAt(0);void 0===i&&(i=h),this._addCallbacks(t,n,r,i,null)},i.prototype._migrateCallbackAt=function(e,t){var n=e._fulfillmentHandlerAt(t),r=e._rejectionHandlerAt(t),i=e._promiseAt(t),o=e._receiverAt(t);void 0===o&&(o=h),this._addCallbacks(n,r,i,o,null)},i.prototype._addCallbacks=function(e,t,n,r,i){var o=this._length();if(o>=65531&&(o=0,this._setLength(0)),0===o)this._promise0=n,this._receiver0=r,"function"==typeof e&&(this._fulfillmentHandler0=null===i?e:i.bind(e)),"function"==typeof t&&(this._rejectionHandler0=null===i?t:i.bind(t));else{var s=4*o-4;this[s+2]=n,this[s+3]=r,"function"==typeof e&&(this[s+0]=null===i?e:i.bind(e)),"function"==typeof t&&(this[s+1]=null===i?t:i.bind(t))}return this._setLength(o+1),o},i.prototype._proxy=function(e,t){this._addCallbacks(void 0,void 0,t,e,null)},i.prototype._resolveCallback=function(e,t){if(0===(117506048&this._bitField)){if(e===this)return this._rejectCallback(c(),!1);var n=x(e,this);if(!(n instanceof i))return this._fulfill(e);t&&this._propagateFrom(n,2);var r=n._target();if(r===this)return void this._reject(c());var o=r._bitField;if(0===(50397184&o)){var s=this._length();s>0&&r._migrateCallback0(this);for(var a=1;s>a;++a)r._migrateCallbackAt(this,a);this._setFollowing(),this._setLength(0),this._setFollowee(r)}else if(0!==(33554432&o))this._fulfill(r._value());else if(0!==(16777216&o))this._reject(r._reason());else{var u=new b("late cancellation observer");r._attachExtraTrace(u),this._reject(u)}}},i.prototype._rejectCallback=function(e,t,n){var r=p.ensureErrorObject(e),i=r===e;if(!i&&!n&&C.warnings()){var o="a promise was rejected with a non-error: "+p.classString(e);this._warn(o,!0)}this._attachExtraTrace(r,t?i:!1),this._reject(e)},i.prototype._resolveFromExecutor=function(e){var t=this;this._captureStackTrace(),this._pushContext();var n=!0,r=this._execute(e,function(e){t._resolveCallback(e)},function(e){t._rejectCallback(e,n)});n=!1,this._popContext(),void 0!==r&&t._rejectCallback(r,!0)},i.prototype._settlePromiseFromHandler=function(e,t,n,r){var i=r._bitField;if(0===(65536&i)){r._pushContext();var o;t===_?n&&"number"==typeof n.length?o=O(e).apply(this._boundValue(),n):(o=j,o.e=new m("cannot .spread() a non-array: "+p.classString(n))):o=O(e).call(t,n);var s=r._popContext();i=r._bitField,0===(65536&i)&&(o===E?r._reject(n):o===j?r._rejectCallback(o.e,!1):(C.checkForgottenReturns(o,s,"",r,this),r._resolveCallback(o)))}},i.prototype._target=function(){for(var e=this;e._isFollowing();)e=e._followee();return e},i.prototype._followee=function(){return this._rejectionHandler0},i.prototype._setFollowee=function(e){this._rejectionHandler0=e},i.prototype._settlePromise=function(e,t,r,o){var s=e instanceof i,a=this._bitField,u=0!==(134217728&a);0!==(65536&a)?(s&&e._invokeInternalOnCancel(),r instanceof T&&r.isFinallyHandler()?(r.cancelPromise=e,O(t).call(r,o)===j&&e._reject(j.e)):t===l?e._fulfill(l.call(r)):r instanceof n?r._promiseCancelled(e):s||e instanceof I?e._cancel():r.cancel()):"function"==typeof t?s?(u&&e._setAsyncGuaranteed(),this._settlePromiseFromHandler(t,r,o,e)):t.call(r,o,e):r instanceof n?r._isResolved()||(0!==(33554432&a)?r._promiseFulfilled(o,e):r._promiseRejected(o,e)):s&&(u&&e._setAsyncGuaranteed(),0!==(33554432&a)?e._fulfill(o):e._reject(o))},i.prototype._settlePromiseLateCancellationObserver=function(e){var t=e.handler,n=e.promise,r=e.receiver,o=e.value;"function"==typeof t?n instanceof i?this._settlePromiseFromHandler(t,r,o,n):t.call(r,o,n):n instanceof i&&n._reject(o)},i.prototype._settlePromiseCtx=function(e){this._settlePromise(e.promise,e.handler,e.receiver,e.value)},i.prototype._settlePromise0=function(e,t,n){var r=this._promise0,i=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(r,e,i,t)},i.prototype._clearCallbackDataAtIndex=function(e){var t=4*e-4;this[t+2]=this[t+3]=this[t+0]=this[t+1]=void 0},i.prototype._fulfill=function(e){var t=this._bitField;if(!((117506048&t)>>>16)){if(e===this){var n=c();return this._attachExtraTrace(n),this._reject(n)}this._setFulfilled(),this._rejectionHandler0=e,(65535&t)>0&&(0!==(134217728&t)?this._settlePromises():g.settlePromises(this))}},i.prototype._reject=function(e){var t=this._bitField;if(!((117506048&t)>>>16))return this._setRejected(),this._fulfillmentHandler0=e,this._isFinal()?g.fatalError(e,p.isNode):void((65535&t)>0?g.settlePromises(this):this._ensurePossibleRejectionHandled())},i.prototype._fulfillPromises=function(e,t){for(var n=1;e>n;n++){var r=this._fulfillmentHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,t)}},i.prototype._rejectPromises=function(e,t){for(var n=1;e>n;n++){var r=this._rejectionHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,t)}},i.prototype._settlePromises=function(){var e=this._bitField,t=65535&e;if(t>0){if(0!==(16842752&e)){var n=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,n,e),this._rejectPromises(t,n)}else{var r=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,r,e),this._fulfillPromises(t,r)}this._setLength(0)}this._clearCancellationData()},i.prototype._settledValue=function(){var e=this._bitField;return 0!==(33554432&e)?this._rejectionHandler0:0!==(16777216&e)?this._fulfillmentHandler0:void 0},i.defer=i.pending=function(){C.deprecated("Promise.defer","new Promise");var e=new i(w);return{promise:e,resolve:o,reject:s}},p.notEnumerableProp(i,"_makeSelfResolutionError",c),e("./method")(i,w,x,f,C),e("./bind")(i,w,x,C),e("./cancel")(i,I,f,C),e("./direct_resolve")(i),e("./synchronous_inspection")(i),e("./join")(i,I,x,w,C),i.Promise=i,e("./map.js")(i,I,f,x,w,C),e("./call_get.js")(i),e("./using.js")(i,f,x,S,w,C),e("./timers.js")(i,w,C),e("./generators.js")(i,f,w,x,n,C),e("./nodeify.js")(i),e("./promisify.js")(i,w),e("./props.js")(i,I,x,f),e("./race.js")(i,w,x,f),e("./reduce.js")(i,I,f,x,w,C),e("./settle.js")(i,I,C),e("./some.js")(i,I,f),e("./filter.js")(i,w),e("./each.js")(i,w),e("./any.js")(i),p.toFastProperties(i),p.toFastProperties(i.prototype),a({a:1}),a({b:2}),a({c:3}),a(1),a(function(){}),a(void 0),a(!1),a(new i(w)),C.setBounds(v.firstLineError,p.lastLineError),i}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(e,t,n){"use strict";t.exports=function(t,n,r,i,o){function s(e){switch(e){case-2:return[];case-3:return{}}}function a(e){var r=this._promise=new t(n);e instanceof t&&r._propagateFrom(e,3),r._setOnCancel(this),this._values=e,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var u=e("./util");u.isArray;return u.inherits(a,o),a.prototype.length=function(){return this._length},a.prototype.promise=function(){return this._promise},a.prototype._init=function c(e,n){var o=r(this._values,this._promise);if(o instanceof t){o=o._target();var a=o._bitField;if(this._values=o,0===(50397184&a))return this._promise._setAsyncGuaranteed(),o._then(c,this._reject,void 0,this,n);if(0===(33554432&a))return 0!==(16777216&a)?this._reject(o._reason()):this._cancel();o=o._value()}if(o=u.asArray(o),null===o){var l=i("expecting an array or an iterable object but got "+u.classString(o)).reason();return void this._promise._rejectCallback(l,!1)}return 0===o.length?void(-5===n?this._resolveEmptyArray():this._resolve(s(n))):void this._iterate(o)},a.prototype._iterate=function(e){var n=this.getActualLength(e.length);this._length=n,this._values=this.shouldCopyValues()?new Array(n):this._values;for(var i=this._promise,o=!1,s=null,a=0;n>a;++a){var u=r(e[a],i);u instanceof t?(u=u._target(),s=u._bitField):s=null,o?null!==s&&u.suppressUnhandledRejections():null!==s?0===(50397184&s)?(u._proxy(this,a),this._values[a]=u):o=0!==(33554432&s)?this._promiseFulfilled(u._value(),a):0!==(16777216&s)?this._promiseRejected(u._reason(),a):this._promiseCancelled(a):o=this._promiseFulfilled(u,a)}o||i._setAsyncGuaranteed()},a.prototype._isResolved=function(){return null===this._values},a.prototype._resolve=function(e){this._values=null,this._promise._fulfill(e)},a.prototype._cancel=function(){!this._isResolved()&&this._promise.isCancellable()&&(this._values=null,this._promise._cancel())},a.prototype._reject=function(e){this._values=null,this._promise._rejectCallback(e,!1)},a.prototype._promiseFulfilled=function(e,t){this._values[t]=e;var n=++this._totalResolved;return n>=this._length?(this._resolve(this._values),!0):!1},a.prototype._promiseCancelled=function(){return this._cancel(),!0},a.prototype._promiseRejected=function(e){return this._totalResolved++,this._reject(e),!0},a.prototype._resultCancelled=function(){if(!this._isResolved()){var e=this._values;if(this._cancel(),e instanceof t)e.cancel();else for(var n=0;n<e.length;++n)e[n]instanceof t&&e[n].cancel()}},a.prototype.shouldCopyValues=function(){return!0},a.prototype.getActualLength=function(e){return e},a}},{"./util":36}],24:[function(e,t,n){"use strict";t.exports=function(t,n){function r(e){return!E.test(e)}function i(e){try{return e.__isPromisified__===!0}catch(t){return!1}}function o(e,t,n){var r=p.getDataPropertyOrDefault(e,t+n,w);return r?i(r):!1}function s(e,t,n){for(var r=0;r<e.length;r+=2){var i=e[r];if(n.test(i))for(var o=i.replace(n,""),s=0;s<e.length;s+=2)if(e[s]===o)throw new m("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",t))}}function a(e,t,n,r){for(var a=p.inheritedDataKeys(e),u=[],c=0;c<a.length;++c){var l=a[c],f=e[l],h=r===x?!0:x(l,f,e);"function"!=typeof f||i(f)||o(e,l,t)||!r(l,f,e,h)||u.push(l,f)}return s(u,t,n),u}function u(e,r,i,o,s,a){function u(){var i=r;r===h&&(i=this);var o=new t(n);o._captureStackTrace();var s="string"==typeof l&&this!==c?this[l]:e,u=d(o,a);try{s.apply(i,v(arguments,u))}catch(f){o._rejectCallback(g(f),!0,!0)}return o._isFateSealed()||o._setAsyncGuaranteed(),o}var c=function(){return this}(),l=e;return"string"==typeof l&&(e=o),p.notEnumerableProp(u,"__isPromisified__",!0),u}function c(e,t,n,r,i){for(var o=new RegExp(I(t)+"$"),s=a(e,t,o,n),u=0,c=s.length;c>u;u+=2){var l=s[u],f=s[u+1],d=l+t;if(r===k)e[d]=k(l,h,l,f,t,i);else{var v=r(f,function(){return k(l,h,l,f,t,i)});p.notEnumerableProp(v,"__isPromisified__",!0),e[d]=v}}return p.toFastProperties(e),e}function l(e,t,n){return k(e,t,void 0,e,null,n)}var f,h={},p=e("./util"),d=e("./nodeback"),v=p.withAppended,g=p.maybeWrapAsError,y=p.canEvaluate,m=e("./errors").TypeError,b="Async",w={__isPromisified__:!0},_=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"],E=new RegExp("^(?:"+_.join("|")+")$"),x=function(e){return p.isIdentifier(e)&&"_"!==e.charAt(0)&&"constructor"!==e},I=function(e){return e.replace(/([$])/,"\\$")},k=y?f:u;t.promisify=function(e,t){if("function"!=typeof e)throw new m("expecting a function but got "+p.classString(e));if(i(e))return e;t=Object(t);var n=void 0===t.context?h:t.context,o=!!t.multiArgs,s=l(e,n,o);return p.copyDescriptors(e,s,r),s},t.promisifyAll=function(e,t){if("function"!=typeof e&&"object"!=typeof e)throw new m("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");t=Object(t);var n=!!t.multiArgs,r=t.suffix;"string"!=typeof r&&(r=b);var i=t.filter;"function"!=typeof i&&(i=x);var o=t.promisifier;if("function"!=typeof o&&(o=k),!p.isIdentifier(r))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var s=p.inheritedDataKeys(e),a=0;a<s.length;++a){var u=e[s[a]];"constructor"!==s[a]&&p.isClass(u)&&(c(u.prototype,r,i,o,n),c(u,r,i,o,n))}return c(e,r,i,o,n)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(e,t,n){"use strict";t.exports=function(t,n,r,i){function o(e){var t,n=!1;if(void 0!==a&&e instanceof a)t=f(e),n=!0;else{var r=l.keys(e),i=r.length;t=new Array(2*i);for(var o=0;i>o;++o){var s=r[o];t[o]=e[s],t[o+i]=s}}this.constructor$(t),this._isMap=n,this._init$(void 0,-3)}function s(e){var n,s=r(e);return c(s)?(n=s instanceof t?s._then(t.props,void 0,void 0,void 0,void 0):new o(s).promise(),s instanceof t&&n._propagateFrom(s,2),n):i("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}var a,u=e("./util"),c=u.isObject,l=e("./es5");"function"==typeof Map&&(a=Map);var f=function(){function e(e,r){this[t]=e,this[t+n]=r,t++}var t=0,n=0;return function(r){n=r.size,t=0;var i=new Array(2*r.size);return r.forEach(e,i),i}}(),h=function(e){for(var t=new a,n=e.length/2|0,r=0;n>r;++r){var i=e[n+r],o=e[r];t.set(i,o)}return t};u.inherits(o,n),o.prototype._init=function(){},o.prototype._promiseFulfilled=function(e,t){this._values[t]=e;var n=++this._totalResolved;if(n>=this._length){var r;if(this._isMap)r=h(this._values);else{r={};for(var i=this.length(),o=0,s=this.length();s>o;++o)r[this._values[o+i]]=this._values[o]}return this._resolve(r),!0}return!1},o.prototype.shouldCopyValues=function(){return!1},o.prototype.getActualLength=function(e){return e>>1},t.prototype.props=function(){return s(this)},t.props=function(e){return s(e)}}},{"./es5":13,"./util":36}],26:[function(e,t,n){"use strict";function r(e,t,n,r,i){for(var o=0;i>o;++o)n[o+r]=e[o+t],e[o+t]=void 0}function i(e){this._capacity=e,this._length=0,this._front=0}i.prototype._willBeOverCapacity=function(e){return this._capacity<e},i.prototype._pushOne=function(e){var t=this.length();this._checkCapacity(t+1);var n=this._front+t&this._capacity-1;this[n]=e,this._length=t+1},i.prototype._unshiftOne=function(e){var t=this._capacity;this._checkCapacity(this.length()+1);var n=this._front,r=(n-1&t-1^t)-t;this[r]=e,this._front=r,this._length=this.length()+1},i.prototype.unshift=function(e,t,n){this._unshiftOne(n),this._unshiftOne(t),this._unshiftOne(e)},i.prototype.push=function(e,t,n){var r=this.length()+3;if(this._willBeOverCapacity(r))return this._pushOne(e),this._pushOne(t),void this._pushOne(n);var i=this._front+r-3;this._checkCapacity(r);var o=this._capacity-1;this[i+0&o]=e,this[i+1&o]=t,this[i+2&o]=n,this._length=r},i.prototype.shift=function(){var e=this._front,t=this[e];return this[e]=void 0,this._front=e+1&this._capacity-1,this._length--,t},i.prototype.length=function(){return this._length},i.prototype._checkCapacity=function(e){this._capacity<e&&this._resizeTo(this._capacity<<1)},i.prototype._resizeTo=function(e){var t=this._capacity;this._capacity=e;var n=this._front,i=this._length,o=n+i&t-1;r(this,0,this,t,o)},t.exports=i},{}],27:[function(e,t,n){"use strict";t.exports=function(t,n,r,i){function o(e,o){var u=r(e);if(u instanceof t)return a(u);if(e=s.asArray(e),null===e)return i("expecting an array or an iterable object but got "+s.classString(e));var c=new t(n);void 0!==o&&c._propagateFrom(o,3);for(var l=c._fulfill,f=c._reject,h=0,p=e.length;p>h;++h){var d=e[h];(void 0!==d||h in e)&&t.cast(d)._then(l,f,void 0,c,null)}return c}var s=e("./util"),a=function(e){return e.then(function(t){return o(t,e)})};t.race=function(e){return o(e,void 0)},t.prototype.race=function(){return o(this,void 0)}}},{"./util":36}],28:[function(e,t,n){"use strict";t.exports=function(t,n,r,i,o,s){function a(e,n,r,i){this.constructor$(e);var s=h();this._fn=null===s?n:s.bind(n),void 0!==r&&(r=t.resolve(r),r._attachCancellationCallback(this)),this._initialValue=r,this._currentCancellable=null,this._eachValues=i===o?[]:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function u(e,t){this.isFulfilled()?t._resolve(e):t._reject(e)}function c(e,t,n,i){if("function"!=typeof t)return r("expecting a function but got "+p.classString(t));var o=new a(e,t,n,i);return o.promise()}function l(e){this.accum=e,this.array._gotAccum(e);var n=i(this.value,this.array._promise);return n instanceof t?(this.array._currentCancellable=n,n._then(f,void 0,void 0,this,void 0)):f.call(this,n)}function f(e){var n=this.array,r=n._promise,i=d(n._fn);r._pushContext();var o;o=void 0!==n._eachValues?i.call(r._boundValue(),e,this.index,this.length):i.call(r._boundValue(),this.accum,e,this.index,this.length),o instanceof t&&(n._currentCancellable=o);var a=r._popContext();return s.checkForgottenReturns(o,a,void 0!==n._eachValues?"Promise.each":"Promise.reduce",r),o}var h=t._getDomain,p=e("./util"),d=p.tryCatch;p.inherits(a,n),a.prototype._gotAccum=function(e){void 0!==this._eachValues&&e!==o&&this._eachValues.push(e)},a.prototype._eachComplete=function(e){return this._eachValues.push(e),this._eachValues},a.prototype._init=function(){},a.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},a.prototype.shouldCopyValues=function(){return!1},a.prototype._resolve=function(e){this._promise._resolveCallback(e),this._values=null},a.prototype._resultCancelled=function(e){return e===this._initialValue?this._cancel():void(this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof t&&this._currentCancellable.cancel(),this._initialValue instanceof t&&this._initialValue.cancel()))},a.prototype._iterate=function(e){this._values=e;var n,r,i=e.length;if(void 0!==this._initialValue?(n=this._initialValue,r=0):(n=t.resolve(e[0]),r=1),this._currentCancellable=n,!n.isRejected())for(;i>r;++r){var o={accum:null,value:e[r],index:r,length:i,array:this};n=n._then(l,void 0,void 0,o,void 0)}void 0!==this._eachValues&&(n=n._then(this._eachComplete,void 0,void 0,this,void 0)),n._then(u,u,void 0,n,this)},t.prototype.reduce=function(e,t){return c(this,e,t,null)},t.reduce=function(e,t,n,r){return c(e,t,n,r)}}},{"./util":36}],29:[function(e,i,o){"use strict";var s,a=e("./util"),u=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")},c=a.getNativePromise();if(a.isNode&&"undefined"==typeof MutationObserver){var l=n.setImmediate,f=t.nextTick;s=a.isRecentNode?function(e){l.call(n,e)}:function(e){f.call(t,e)}}else if("function"==typeof c){var h=c.resolve();s=function(e){h.then(e)}}else s="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&window.navigator.standalone?"undefined"!=typeof r?function(e){r(e)}:"undefined"!=typeof setTimeout?function(e){setTimeout(e,0)}:u:function(){var e=document.createElement("div"),t={attributes:!0},n=!1,r=document.createElement("div"),i=new MutationObserver(function(){e.classList.toggle("foo"),n=!1});i.observe(r,t);var o=function(){n||(n=!0,r.classList.toggle("foo"))};return function(n){var r=new MutationObserver(function(){r.disconnect(),n()});r.observe(e,t),o()}}();i.exports=s},{"./util":36}],30:[function(e,t,n){"use strict";t.exports=function(t,n,r){function i(e){this.constructor$(e)}var o=t.PromiseInspection,s=e("./util");s.inherits(i,n),i.prototype._promiseResolved=function(e,t){this._values[e]=t;var n=++this._totalResolved;return n>=this._length?(this._resolve(this._values),!0):!1},i.prototype._promiseFulfilled=function(e,t){var n=new o;return n._bitField=33554432,n._settledValueField=e,this._promiseResolved(t,n)},i.prototype._promiseRejected=function(e,t){var n=new o;return n._bitField=16777216,n._settledValueField=e,this._promiseResolved(t,n)},t.settle=function(e){return r.deprecated(".settle()",".reflect()"),new i(e).promise()},t.prototype.settle=function(){return t.settle(this)}}},{"./util":36}],31:[function(e,t,n){"use strict";t.exports=function(t,n,r){function i(e){this.constructor$(e),this._howMany=0,this._unwrap=!1,this._initialized=!1}function o(e,t){if((0|t)!==t||0>t)return r("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var n=new i(e),o=n.promise();return n.setHowMany(t),n.init(),o}var s=e("./util"),a=e("./errors").RangeError,u=e("./errors").AggregateError,c=s.isArray,l={};s.inherits(i,n),i.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(void 0,-5);var e=c(this._values);!this._isResolved()&&e&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},i.prototype.init=function(){this._initialized=!0,this._init()},i.prototype.setUnwrap=function(){this._unwrap=!0},i.prototype.howMany=function(){return this._howMany},i.prototype.setHowMany=function(e){this._howMany=e},i.prototype._promiseFulfilled=function(e){return this._addFulfilled(e),this._fulfilled()===this.howMany()?(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0):!1},i.prototype._promiseRejected=function(e){return this._addRejected(e),this._checkOutcome()},i.prototype._promiseCancelled=function(){return this._values instanceof t||null==this._values?this._cancel():(this._addRejected(l),this._checkOutcome())},i.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var e=new u,t=this.length();t<this._values.length;++t)this._values[t]!==l&&e.push(this._values[t]);return e.length>0?this._reject(e):this._cancel(),!0}return!1},i.prototype._fulfilled=function(){return this._totalResolved},i.prototype._rejected=function(){return this._values.length-this.length()},i.prototype._addRejected=function(e){this._values.push(e)},i.prototype._addFulfilled=function(e){this._values[this._totalResolved++]=e},i.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},i.prototype._getRangeError=function(e){var t="Input array must contain at least "+this._howMany+" items but contains only "+e+" items";return new a(t)},i.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0));
},t.some=function(e,t){return o(e,t)},t.prototype.some=function(e){return o(this,e)},t._SomePromiseArray=i}},{"./errors":12,"./util":36}],32:[function(e,t,n){"use strict";t.exports=function(e){function t(e){void 0!==e?(e=e._target(),this._bitField=e._bitField,this._settledValueField=e._isFateSealed()?e._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}t.prototype._settledValue=function(){return this._settledValueField};var n=t.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},r=t.prototype.error=t.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},i=t.prototype.isFulfilled=function(){return 0!==(33554432&this._bitField)},o=t.prototype.isRejected=function(){return 0!==(16777216&this._bitField)},s=t.prototype.isPending=function(){return 0===(50397184&this._bitField)},a=t.prototype.isResolved=function(){return 0!==(50331648&this._bitField)};t.prototype.isCancelled=e.prototype._isCancelled=function(){return 65536===(65536&this._bitField)},e.prototype.isCancelled=function(){return this._target()._isCancelled()},e.prototype.isPending=function(){return s.call(this._target())},e.prototype.isRejected=function(){return o.call(this._target())},e.prototype.isFulfilled=function(){return i.call(this._target())},e.prototype.isResolved=function(){return a.call(this._target())},e.prototype.value=function(){return n.call(this._target())},e.prototype.reason=function(){var e=this._target();return e._unsetRejectionIsUnhandled(),r.call(e)},e.prototype._value=function(){return this._settledValue()},e.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},e.PromiseInspection=t}},{}],33:[function(e,t,n){"use strict";t.exports=function(t,n){function r(e,r){if(l(e)){if(e instanceof t)return e;var i=o(e);if(i===c){r&&r._pushContext();var u=t.reject(i.e);return r&&r._popContext(),u}if("function"==typeof i){if(s(e)){var u=new t(n);return e._then(u._fulfill,u._reject,void 0,u,null),u}return a(e,i,r)}}return e}function i(e){return e.then}function o(e){try{return i(e)}catch(t){return c.e=t,c}}function s(e){return f.call(e,"_promise0")}function a(e,r,i){function o(e){a&&(a._resolveCallback(e),a=null)}function s(e){a&&(a._rejectCallback(e,f,!0),a=null)}var a=new t(n),l=a;i&&i._pushContext(),a._captureStackTrace(),i&&i._popContext();var f=!0,h=u.tryCatch(r).call(e,o,s);return f=!1,a&&h===c&&(a._rejectCallback(h.e,!0,!0),a=null),l}var u=e("./util"),c=u.errorObj,l=u.isObject,f={}.hasOwnProperty;return r}},{"./util":36}],34:[function(e,t,n){"use strict";t.exports=function(t,n,r){function i(e){this.handle=e}function o(e){return clearTimeout(this.handle),e}function s(e){throw clearTimeout(this.handle),e}var a=e("./util"),u=t.TimeoutError;i.prototype._resultCancelled=function(){clearTimeout(this.handle)};var c=function(e){return l(+this).thenReturn(e)},l=t.delay=function(e,o){var s,a;return void 0!==o?(s=t.resolve(o)._then(c,null,null,e,void 0),r.cancellation()&&o instanceof t&&s._setOnCancel(o)):(s=new t(n),a=setTimeout(function(){s._fulfill()},+e),r.cancellation()&&s._setOnCancel(new i(a))),s._setAsyncGuaranteed(),s};t.prototype.delay=function(e){return l(e,this)};var f=function(e,t,n){var r;r="string"!=typeof t?t instanceof Error?t:new u("operation timed out"):new u(t),a.markAsOriginatingFromRejection(r),e._attachExtraTrace(r),e._reject(r),null!=n&&n.cancel()};t.prototype.timeout=function(e,t){e=+e;var n,a,u=new i(setTimeout(function(){n.isPending()&&f(n,t,a)},e));return r.cancellation()?(a=this.then(),n=a._then(o,s,void 0,u,void 0),n._setOnCancel(u)):n=this._then(o,s,void 0,u,void 0),n}}},{"./util":36}],35:[function(e,t,n){"use strict";t.exports=function(t,n,r,i,o,s){function a(e){setTimeout(function(){throw e},0)}function u(e){var t=r(e);return t!==e&&"function"==typeof e._isDisposable&&"function"==typeof e._getDisposer&&e._isDisposable()&&t._setDisposable(e._getDisposer()),t}function c(e,n){function i(){if(s>=c)return l._fulfill();var o=u(e[s++]);if(o instanceof t&&o._isDisposable()){try{o=r(o._getDisposer().tryDispose(n),e.promise)}catch(f){return a(f)}if(o instanceof t)return o._then(i,a,null,null,null)}i()}var s=0,c=e.length,l=new t(o);return i(),l}function l(e,t,n){this._data=e,this._promise=t,this._context=n}function f(e,t,n){this.constructor$(e,t,n)}function h(e){return l.isDisposer(e)?(this.resources[this.index]._setDisposable(e),e.promise()):e}function p(e){this.length=e,this.promise=null,this[e-1]=null}var d=e("./util"),v=e("./errors").TypeError,g=e("./util").inherits,y=d.errorObj,m=d.tryCatch;l.prototype.data=function(){return this._data},l.prototype.promise=function(){return this._promise},l.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():null},l.prototype.tryDispose=function(e){var t=this.resource(),n=this._context;void 0!==n&&n._pushContext();var r=null!==t?this.doDispose(t,e):null;return void 0!==n&&n._popContext(),this._promise._unsetDisposable(),this._data=null,r},l.isDisposer=function(e){return null!=e&&"function"==typeof e.resource&&"function"==typeof e.tryDispose},g(f,l),f.prototype.doDispose=function(e,t){var n=this.data();return n.call(e,e,t)},p.prototype._resultCancelled=function(){for(var e=this.length,n=0;e>n;++n){var r=this[n];r instanceof t&&r.cancel()}},t.using=function(){var e=arguments.length;if(2>e)return n("you must pass at least 2 arguments to Promise.using");var i=arguments[e-1];if("function"!=typeof i)return n("expecting a function but got "+d.classString(i));var o,a=!0;2===e&&Array.isArray(arguments[0])?(o=arguments[0],e=o.length,a=!1):(o=arguments,e--);for(var u=new p(e),f=0;e>f;++f){var v=o[f];if(l.isDisposer(v)){var g=v;v=v.promise(),v._setDisposable(g)}else{var b=r(v);b instanceof t&&(v=b._then(h,null,null,{resources:u,index:f},void 0))}u[f]=v}for(var w=new Array(u.length),f=0;f<w.length;++f)w[f]=t.resolve(u[f]).reflect();var _=t.all(w).then(function(e){for(var t=0;t<e.length;++t){var n=e[t];if(n.isRejected())return y.e=n.error(),y;if(!n.isFulfilled())return void _.cancel();e[t]=n.value()}E._pushContext(),i=m(i);var r=a?i.apply(void 0,e):i(e),o=E._popContext();return s.checkForgottenReturns(r,o,"Promise.using",E),r}),E=_.lastly(function(){var e=new t.PromiseInspection(_);return c(u,e)});return u.promise=E,E._setOnCancel(u),E},t.prototype._setDisposable=function(e){this._bitField=131072|this._bitField,this._disposer=e},t.prototype._isDisposable=function(){return(131072&this._bitField)>0},t.prototype._getDisposer=function(){return this._disposer},t.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},t.prototype.disposer=function(e){if("function"==typeof e)return new f(e,this,i());throw new v}}},{"./errors":12,"./util":36}],36:[function(e,r,i){"use strict";function o(){try{var e=B;return B=null,e.apply(this,arguments)}catch(t){return U.e=t,U}}function s(e){return B=e,o}function a(e){return null==e||e===!0||e===!1||"string"==typeof e||"number"==typeof e}function u(e){return"function"==typeof e||"object"==typeof e&&null!==e}function c(e){return a(e)?new Error(m(e)):e}function l(e,t){var n,r=e.length,i=new Array(r+1);for(n=0;r>n;++n)i[n]=e[n];return i[n]=t,i}function f(e,t,n){if(!C.isES5)return{}.hasOwnProperty.call(e,t)?e[t]:void 0;var r=Object.getOwnPropertyDescriptor(e,t);return null!=r?null==r.get&&null==r.set?r.value:n:void 0}function h(e,t,n){if(a(e))return e;var r={value:n,configurable:!0,enumerable:!1,writable:!0};return C.defineProperty(e,t,r),e}function p(e){throw e}function d(e){try{if("function"==typeof e){var t=C.names(e.prototype),n=C.isES5&&t.length>1,r=t.length>0&&!(1===t.length&&"constructor"===t[0]),i=R.test(e+"")&&C.names(e).length>0;if(n||r||i)return!0}return!1}catch(o){return!1}}function v(e){function t(){}t.prototype=e;for(var n=8;n--;)new t;return e}function g(e){return L.test(e)}function y(e,t,n){for(var r=new Array(e),i=0;e>i;++i)r[i]=t+i+n;return r}function m(e){try{return e+""}catch(t){return"[no string representation]"}}function b(e){return null!==e&&"object"==typeof e&&"string"==typeof e.message&&"string"==typeof e.name}function w(e){try{h(e,"isOperational",!0)}catch(t){}}function _(e){return null==e?!1:e instanceof Error.__BluebirdErrorTypes__.OperationalError||e.isOperational===!0}function E(e){return b(e)&&C.propertyIsWritable(e,"stack")}function x(e){return{}.toString.call(e)}function I(e,t,n){for(var r=C.names(e),i=0;i<r.length;++i){var o=r[i];if(n(o))try{C.defineProperty(t,o,C.getDescriptor(e,o))}catch(s){}}}function k(e,t){return N?{NODE_ENV:"production"}[e]:t}function S(){if("function"==typeof Promise)try{var e=new Promise(function(){});if("[object Promise]"==={}.toString.call(e))return Promise}catch(t){}}var C=e("./es5"),T="undefined"==typeof navigator,U={e:{}},B,j="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof n?n:void 0!==this?this:null,O=function(e,t){function n(){this.constructor=e,this.constructor$=t;for(var n in t.prototype)r.call(t.prototype,n)&&"$"!==n.charAt(n.length-1)&&(this[n+"$"]=t.prototype[n])}var r={}.hasOwnProperty;return n.prototype=t.prototype,e.prototype=new n,e.prototype},A=function(){var e=[Array.prototype,Object.prototype,Function.prototype],t=function(t){for(var n=0;n<e.length;++n)if(e[n]===t)return!0;return!1};if(C.isES5){var n=Object.getOwnPropertyNames;return function(e){for(var r=[],i=Object.create(null);null!=e&&!t(e);){var o;try{o=n(e)}catch(s){return r}for(var a=0;a<o.length;++a){var u=o[a];if(!i[u]){i[u]=!0;var c=Object.getOwnPropertyDescriptor(e,u);null!=c&&null==c.get&&null==c.set&&r.push(u)}}e=C.getPrototypeOf(e)}return r}}var r={}.hasOwnProperty;return function(n){if(t(n))return[];var i=[];e:for(var o in n)if(r.call(n,o))i.push(o);else{for(var s=0;s<e.length;++s)if(r.call(e[s],o))continue e;i.push(o)}return i}}(),R=/this\s*\.\s*\S+\s*=/,L=/^[a-z$_][a-z$_0-9]*$/i,M=function(){return"stack"in new Error?function(e){return E(e)?e:new Error(m(e))}:function(e){if(E(e))return e;try{throw new Error(m(e))}catch(t){return t}}}(),P=function(e){return C.isArray(e)?e:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var F="function"==typeof Array.from?function(e){return Array.from(e)}:function(e){for(var t,n=[],r=e[Symbol.iterator]();!(t=r.next()).done;)n.push(t.value);return n};P=function(e){return C.isArray(e)?e:null!=e&&"function"==typeof e[Symbol.iterator]?F(e):null}}var N="undefined"!=typeof t&&"[object process]"===x(t).toLowerCase(),D={isClass:d,isIdentifier:g,inheritedDataKeys:A,getDataPropertyOrDefault:f,thrower:p,isArray:C.isArray,asArray:P,notEnumerableProp:h,isPrimitive:a,isObject:u,isError:b,canEvaluate:T,errorObj:U,tryCatch:s,inherits:O,withAppended:l,maybeWrapAsError:c,toFastProperties:v,filledRange:y,toString:m,canAttachTrace:E,ensureErrorObject:M,originatesFromRejection:_,markAsOriginatingFromRejection:w,classString:x,copyDescriptors:I,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:N,env:k,global:j,getNativePromise:S};D.isRecentNode=D.isNode&&function(){var e=t.versions.node.split(".").map(Number);return 0===e[0]&&e[1]>10||e[0]>0}(),D.isNode&&D.toFastProperties(t);try{throw new Error}catch(q){D.lastLineError=q}r.exports=D},{"./es5":13}]},{},[4])(4)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)}).call(t,n(38),function(){return this}(),n(39).setImmediate)},function(e,t){function n(){c=!1,s.length?u=s.concat(u):l=-1,u.length&&r()}function r(){if(!c){var e=setTimeout(n);c=!0;for(var t=u.length;t;){for(s=u,u=[];++l<t;)s&&s[l].run();l=-1,t=u.length}s=null,c=!1,clearTimeout(e)}}function i(e,t){this.fun=e,this.array=t}function o(){}var s,a=e.exports={},u=[],c=!1,l=-1;a.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new i(e,t)),1!==u.length||c||setTimeout(r,0)},i.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=o,a.addListener=o,a.once=o,a.off=o,a.removeListener=o,a.removeAllListeners=o,a.emit=o,a.binding=function(e){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(e,t,n){(function(e,r){function i(e,t){this._id=e,this._clearFn=t}var o=n(38).nextTick,s=Function.prototype.apply,a=Array.prototype.slice,u={},c=0;t.setTimeout=function(){return new i(s.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new i(s.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},t.setImmediate="function"==typeof e?e:function(e){var n=c++,r=arguments.length<2?!1:a.call(arguments,1);return u[n]=!0,o(function(){u[n]&&(r?e.apply(null,r):e.call(null),t.clearImmediate(n))}),n},t.clearImmediate="function"==typeof r?r:function(e){delete u[e]}}).call(t,n(39).setImmediate,n(39).clearImmediate)},function(e,t,n){var r;/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(i){"use strict";r=function(e){function t(e,t,n,r){var i=I.resolve(e);return arguments.length<2?i:i.then(t,n,r)}function r(e){return new I(e)}function i(e){return function(){for(var t=0,n=arguments.length,r=new Array(n);n>t;++t)r[t]=arguments[t];return k(e,this,r)}}function o(e){for(var t=0,n=arguments.length-1,r=new Array(n);n>t;++t)r[t]=arguments[t+1];return k(e,this,r)}function s(){return new a}function a(){function e(e){r._handler.resolve(e)}function t(e){r._handler.reject(e)}function n(e){r._handler.notify(e)}var r=I._defer();this.promise=r,this.resolve=e,this.reject=t,this.notify=n,this.resolver={resolve:e,reject:t,notify:n}}function u(e){return e&&"function"==typeof e.then}function c(){return I.all(arguments)}function l(e){return t(e,I.all)}function f(e){return t(e,I.settle)}function h(e,n){return t(e,function(e){return I.map(e,n)})}function p(e,n){return t(e,function(e){return I.filter(e,n)})}var d=n(41),v=n(46),g=n(49),y=n(50),m=n(51),b=n(52),w=n(53),_=n(54),E=n(55),x=n(45),I=[v,g,y,b,w,m,_,d,E].reduce(function(e,t){return t(e)},n(57)),k=n(48)(I);return t.promise=r,t.resolve=I.resolve,t.reject=I.reject,t.lift=i,t["try"]=o,t.attempt=o,t.iterate=I.iterate,t.unfold=I.unfold,t.join=c,t.all=l,t.settle=f,t.any=i(I.any),t.some=i(I.some),t.race=i(I.race),t.map=h,t.filter=p,t.reduce=i(I.reduce),t.reduceRight=i(I.reduceRight),t.isPromiseLike=u,t.Promise=I,t.defer=s,t.TimeoutError=x,t}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))}(n(44))},[303,42,45],function(e,t,n){var r;(function(i){/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(o){"use strict";r=function(e){function t(){return"undefined"!=typeof i&&"[object process]"===Object.prototype.toString.call(i)}function r(){return"function"==typeof MutationObserver&&MutationObserver||"function"==typeof WebKitMutationObserver&&WebKitMutationObserver}function o(e){function t(){var e=n;n=void 0,e()}var n,r=document.createTextNode(""),i=new e(t);i.observe(r,{characterData:!0});var o=0;return function(e){n=e,r.data=o^=1}}var s,a="undefined"!=typeof setTimeout&&setTimeout,u=function(e,t){return setTimeout(e,t)},c=function(e){return clearTimeout(e)},l=function(e){return a(e,0)};if(t())l=function(e){return i.nextTick(e)};else if(s=r())l=o(s);else if(!a){var f=n(43);u=function(e,t){return f.setTimer(t,e)},c=f.cancelTimer,l=f.runOnLoop||f.runOnContext}return{setTimer:u,clearTimer:c,asap:l}}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))}(n(44))}).call(t,n(38))},function(e,t){},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t,n){var r;/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(i){"use strict";r=function(){function e(t){Error.call(this),this.message=t,this.name=e.name,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,e)}return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))}(n(44))},function(e,t,n){var r;/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(i){"use strict";r=function(e){var t=n(47),r=n(48);return function(e){function n(t){function n(e){l=null,this.resolve(e)}function r(e){this.resolved||(l.push(e),0===--c&&this.reject(l))}for(var i,o,s=e._defer(),a=s._handler,u=t.length>>>0,c=u,l=[],f=0;u>f;++f)if(o=t[f],void 0!==o||f in t){if(i=e._handler(o),i.state()>0){a.become(i),e._visitRemaining(t,f,i);break}i.visit(a,n,r)}else--c;return 0===c&&a.reject(new RangeError("any(): array must not be empty")),s}function i(t,n){function r(e){this.resolved||(l.push(e),0===--p&&(f=null,this.resolve(l)))}function i(e){this.resolved||(f.push(e),0===--o&&(l=null,this.reject(f)))}var o,s,a,u=e._defer(),c=u._handler,l=[],f=[],h=t.length>>>0,p=0;for(a=0;h>a;++a)s=t[a],(void 0!==s||a in t)&&++p;for(n=Math.max(n,0),o=p-n+1,p=Math.min(n,p),n>p?c.reject(new RangeError("some(): array must contain at least "+n+" item(s), but had "+p)):0===p&&c.resolve(l),a=0;h>a;++a)s=t[a],(void 0!==s||a in t)&&e._handler(s).visit(c,r,i,c.notify);return u}function o(t,n){return e._traverse(n,t)}function s(t,n){var r=m.call(t);return e._traverse(n,r).then(function(e){return a(r,e)})}function a(t,n){for(var r=n.length,i=new Array(r),o=0,s=0;r>o;++o)n[o]&&(i[s++]=e._handler(t[o]).value);return i.length=s,i}function u(e){return v(e.map(c))}function c(n){var r=e._handler(n);return 0===r.state()?d(n).then(t.fulfilled,t.rejected):(r._unreport(),t.inspect(r))}function l(e,t){return arguments.length>2?g.call(e,h(t),arguments[2]):g.call(e,h(t))}function f(e,t){return arguments.length>2?y.call(e,h(t),arguments[2]):y.call(e,h(t))}function h(e){return function(t,n,r){return p(e,void 0,[t,n,r])}}var p=r(e),d=e.resolve,v=e.all,g=Array.prototype.reduce,y=Array.prototype.reduceRight,m=Array.prototype.slice;return e.any=n,e.some=i,e.settle=u,e.map=o,e.filter=s,e.reduce=l,e.reduceRight=f,e.prototype.spread=function(e){return this.then(v).then(function(t){return e.apply(this,t)})},e}}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))}(n(44))},function(e,t,n){var r;/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(i){"use strict";r=function(){function e(){return{state:"pending"}}function t(e){return{state:"rejected",reason:e}}function n(e){return{state:"fulfilled",value:e}}function r(r){var i=r.state();return 0===i?e():i>0?n(r.value):t(r.value)}return{pending:e,fulfilled:n,rejected:t,inspect:r}}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))}(n(44))},function(e,t,n){var r;/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(i){"use strict";r=function(){function e(e,n){function r(t,r,o){var s=e._defer(),a=o.length,u=new Array(a);return i({f:t,thisArg:r,args:o,params:u,i:a-1,call:n},s._handler),s}function i(t,r){if(t.i<0)return n(t.f,t.thisArg,t.params,r);var i=e._handler(t.args[t.i]);i.fold(o,t,void 0,r)}function o(e,t,n){e.params[e.i]=t,e.i-=1,i(e,n)}return arguments.length<2&&(n=t),r}function t(e,t,n,r){try{r.resolve(e.apply(t,n))}catch(i){r.reject(i)}}return e.tryCatchResolve=t,e}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))}(n(44))},function(e,t,n){var r;/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(i){"use strict";r=function(){function e(){throw new TypeError("catch predicate must be a function")}function t(e,t){return n(t)?e instanceof t:t(e)}function n(e){return e===Error||null!=e&&e.prototype instanceof Error}function r(e){return("object"==typeof e||"function"==typeof e)&&null!==e}function i(e){return e}return function(n){function o(e,n){return function(r){return t(r,n)?e.call(this,r):c(r)}}function s(e,t,n,i){var o=e.call(t);return r(o)?a(o,n,i):n(i)}function a(e,t,n){return u(e).then(function(){return t(n)})}var u=n.resolve,c=n.reject,l=n.prototype["catch"];return n.prototype.done=function(e,t){this._handler.visit(this._handler.receiver,e,t)},n.prototype["catch"]=n.prototype.otherwise=function(t){return arguments.length<2?l.call(this,t):"function"!=typeof t?this.ensure(e):l.call(this,o(arguments[1],t))},n.prototype["finally"]=n.prototype.ensure=function(e){return"function"!=typeof e?this:this.then(function(t){return s(e,this,i,t)},function(t){return s(e,this,c,t)})},n.prototype["else"]=n.prototype.orElse=function(e){return this.then(void 0,function(){return e})},n.prototype["yield"]=function(e){return this.then(function(){return e})},n.prototype.tap=function(e){return this.then(e)["yield"](this)},n}}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))}(n(44))},function(e,t,n){var r;/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(i){"use strict";r=function(){return function(e){return e.prototype.fold=function(t,n){var r=this._beget();return this._handler.fold(function(n,r,i){e._handler(n).fold(function(e,n,r){r.resolve(t.call(this,n,e))},r,this,i)},n,r._handler.receiver,r._handler),r},e}}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))}(n(44))},[304,47],function(e,t,n){var r;/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(i){"use strict";r=function(){return function(e){function t(e,t,r,i){return n(function(t){return[t,e(t)]},t,r,i)}function n(e,t,i,o){function s(o,s){return r(i(o)).then(function(){return n(e,t,i,s)})}return r(o).then(function(n){return r(t(n)).then(function(t){return t?n:r(e(n)).spread(s)})})}var r=e.resolve;return e.iterate=t,e.unfold=n,e}}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))}(n(44))},function(e,t,n){var r;/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(i){"use strict";r=function(){return function(e){return e.prototype.progress=function(e){return this.then(void 0,void 0,e)},e}}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))}(n(44))},function(e,t,n){var r;/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(i){"use strict";r=function(){return function(e){return e.prototype["with"]=e.prototype.withThis=function(e){var t=this._beget(),n=t._handler;return n.receiver=e,this._handler.chain(n,e),t},e}}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))}(n(44))},function(e,t,n){var r;/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(i){"use strict";r=function(e){function t(e){throw e}function r(){}var i=n(42).setTimer,o=n(56);return function(e){function n(e){e.handled||(p.push(e),l("Potentially unhandled rejection ["+e.id+"] "+o.formatError(e.value)))}function s(e){var t=p.indexOf(e);t>=0&&(p.splice(t,1),f("Handled previous rejection ["+e.id+"] "+o.formatObject(e.value)))}function a(e,t){h.push(e,t),null===d&&(d=i(u,0))}function u(){for(d=null;h.length>0;)h.shift()(h.shift())}var c,l=r,f=r;"undefined"!=typeof console&&(c=console,l="undefined"!=typeof c.error?function(e){c.error(e)}:function(e){c.log(e)},f="undefined"!=typeof c.info?function(e){c.info(e)}:function(e){c.log(e)}),e.onPotentiallyUnhandledRejection=function(e){a(n,e)},e.onPotentiallyUnhandledRejectionHandled=function(e){a(s,e)},e.onFatalRejection=function(e){a(t,e.value)};var h=[],p=[],d=null;return e}}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))}(n(44))},function(e,t,n){var r;/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(i){"use strict";r=function(){function e(e){var n="object"==typeof e&&null!==e&&(e.stack||e.message)?e.stack||e.message:t(e);return e instanceof Error?n:n+" (WARNING: non-Error used)"}function t(e){var t=String(e);return"[object Object]"===t&&"undefined"!=typeof JSON&&(t=n(e,t)),t}function n(e,t){try{return JSON.stringify(e)}catch(n){return t}}return{formatError:e,formatObject:t,tryStringify:n}}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))}(n(44))},[305,58,59,42],function(e,t,n){var r;(function(i){/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(o){"use strict";r=function(){return function(e){function t(e,t){this._handler=e===w?t:n(e)}function n(e){function t(e){i.resolve(e)}function n(e){i.reject(e)}function r(e){i.notify(e)}var i=new E;try{e(t,n,r)}catch(o){n(o)}return i}function r(e){return L(e)?e:new t(w,new x(y(e)))}function o(e){return new t(w,new x(new S(e)))}function s(){return ee}function a(){return new t(w,new E)}function u(e,t){var n=new E(e.receiver,e.join().context);return new t(w,n)}function c(e){return f(W,null,e)}function l(e,t){return f(D,e,t)}function f(e,n,r){function i(t,i,s){s.resolved||h(r,o,t,e(n,i,t),s)}function o(e,t,n){l[e]=t,0===--c&&n.become(new k(l))}for(var s,a="function"==typeof n?i:o,u=new E,c=r.length>>>0,l=new Array(c),f=0;f<r.length&&!u.resolved;++f)s=r[f],void 0!==s||f in r?h(r,a,f,s,u):--c;return 0===c&&u.become(new k(l)),new t(w,u)}function h(e,t,n,r,i){if(M(r)){var o=m(r),s=o.state();0===s?o.fold(t,n,void 0,i):s>0?t(n,o.value,i):(i.become(o),p(e,n+1,o))}else t(n,r,i)}function p(e,t,n){for(var r=t;r<e.length;++r)d(y(e[r]),n)}function d(e,t){if(e!==t){var n=e.state();0===n?e.visit(e,void 0,e._unreport):0>n&&e._unreport()}}function v(e){return"object"!=typeof e||null===e?o(new TypeError("non-iterable passed to race()")):0===e.length?s():1===e.length?r(e[0]):g(e)}function g(e){var n,r,i,o=new E;for(n=0;n<e.length;++n)if(r=e[n],void 0!==r||n in e){if(i=y(r),0!==i.state()){o.become(i),p(e,n+1,i);break}i.visit(o,o.resolve,o.reject)}return new t(w,o)}function y(e){return L(e)?e._handler.join():M(e)?b(e):new k(e)}function m(e){return L(e)?e._handler.join():b(e)}function b(e){try{var t=e.then;return"function"==typeof t?new I(t,e):new k(e)}catch(n){return new S(n)}}function w(){}function _(){}function E(e,n){t.createContext(this,n),this.consumers=void 0,this.receiver=e,this.handler=void 0,this.resolved=!1}function x(e){this.handler=e}function I(e,t){E.call(this),V.enqueue(new O(e,t,this))}function k(e){t.createContext(this),this.value=e}function S(e){t.createContext(this),this.id=++J,this.value=e,this.handled=!1,this.reported=!1,this._report()}function C(e,t){this.rejection=e,this.context=t}function T(e){this.rejection=e}function U(){return new S(new TypeError("Promise cycle"))}function B(e,t){this.continuation=e,this.handler=t}function j(e,t){this.handler=t,this.value=e}function O(e,t,n){this._then=e,this.thenable=t,this.resolver=n}function A(e,t,n,r,i){try{e.call(t,n,r,i)}catch(o){r(o)}}function R(e,t,n,r){this.f=e,this.z=t,this.c=n,this.to=r,this.resolver=X,this.receiver=this}function L(e){return e instanceof t}function M(e){return("object"==typeof e||"function"==typeof e)&&null!==e}function P(e,n,r,i){return"function"!=typeof e?i.become(n):(t.enterContext(n),q(e,n.value,r,i),void t.exitContext())}function F(e,n,r,i,o){return"function"!=typeof e?o.become(r):(t.enterContext(r),z(e,n,r.value,i,o),void t.exitContext())}function N(e,n,r,i,o){return"function"!=typeof e?o.notify(n):(t.enterContext(r),H(e,n,i,o),void t.exitContext())}function D(e,t,n){try{return e(t,n)}catch(r){return o(r)}}function q(e,t,n,r){try{r.become(y(e.call(n,t)))}catch(i){r.become(new S(i))}}function z(e,t,n,r,i){try{e.call(r,t,n,i)}catch(o){i.become(new S(o))}}function H(e,t,n,r){try{r.notify(e.call(n,t))}catch(i){r.notify(i)}}function Q(e,t){t.prototype=$(e.prototype),t.prototype.constructor=t}function W(e,t){return t}function K(){}function Y(){return"undefined"!=typeof i&&null!==i&&"function"==typeof i.emit?function(e,t){return"unhandledRejection"===e?i.emit(e,t.value,t):i.emit(e,t)}:"undefined"!=typeof self&&"function"==typeof CustomEvent?function(e,t,n){var r=!1;try{var i=new n("unhandledRejection");r=i instanceof n}catch(o){}return r?function(e,r){var i=new n(e,{detail:{reason:r.value,key:r},bubbles:!1,cancelable:!0});return!t.dispatchEvent(i)}:e}(K,self,CustomEvent):K}var V=e.scheduler,G=Y(),$=Object.create||function(e){function t(){}return t.prototype=e,new t};t.resolve=r,t.reject=o,t.never=s,t._defer=a,t._handler=y,t.prototype.then=function(e,t,n){var r=this._handler,i=r.join().state();if("function"!=typeof e&&i>0||"function"!=typeof t&&0>i)return new this.constructor(w,r);var o=this._beget(),s=o._handler;return r.chain(s,r.receiver,e,t,n),o},t.prototype["catch"]=function(e){return this.then(void 0,e)},t.prototype._beget=function(){return u(this._handler,this.constructor)},t.all=c,t.race=v,t._traverse=l,t._visitRemaining=p,w.prototype.when=w.prototype.become=w.prototype.notify=w.prototype.fail=w.prototype._unreport=w.prototype._report=K,w.prototype._state=0,w.prototype.state=function(){return this._state},w.prototype.join=function(){for(var e=this;void 0!==e.handler;)e=e.handler;return e},w.prototype.chain=function(e,t,n,r,i){this.when({resolver:e,receiver:t,fulfilled:n,rejected:r,progress:i})},w.prototype.visit=function(e,t,n,r){this.chain(X,e,t,n,r)},w.prototype.fold=function(e,t,n,r){this.when(new R(e,t,n,r))},Q(w,_),_.prototype.become=function(e){e.fail()};var X=new _;Q(w,E),E.prototype._state=0,E.prototype.resolve=function(e){this.become(y(e))},E.prototype.reject=function(e){this.resolved||this.become(new S(e))},E.prototype.join=function(){if(!this.resolved)return this;for(var e=this;void 0!==e.handler;)if(e=e.handler,e===this)return this.handler=U();return e},E.prototype.run=function(){var e=this.consumers,t=this.handler;this.handler=this.handler.join(),this.consumers=void 0;for(var n=0;n<e.length;++n)t.when(e[n])},E.prototype.become=function(e){this.resolved||(this.resolved=!0,this.handler=e,void 0!==this.consumers&&V.enqueue(this),void 0!==this.context&&e._report(this.context))},E.prototype.when=function(e){this.resolved?V.enqueue(new B(e,this.handler)):void 0===this.consumers?this.consumers=[e]:this.consumers.push(e)},E.prototype.notify=function(e){this.resolved||V.enqueue(new j(e,this))},E.prototype.fail=function(e){var t="undefined"==typeof e?this.context:e;this.resolved&&this.handler.join().fail(t)},E.prototype._report=function(e){this.resolved&&this.handler.join()._report(e)},E.prototype._unreport=function(){this.resolved&&this.handler.join()._unreport()},Q(w,x),x.prototype.when=function(e){V.enqueue(new B(e,this))},x.prototype._report=function(e){this.join()._report(e)},x.prototype._unreport=function(){this.join()._unreport()},Q(E,I),Q(w,k),k.prototype._state=1,k.prototype.fold=function(e,t,n,r){F(e,t,this,n,r)},k.prototype.when=function(e){P(e.fulfilled,this,e.receiver,e.resolver)};var J=0;Q(w,S),S.prototype._state=-1,S.prototype.fold=function(e,t,n,r){r.become(this)},S.prototype.when=function(e){"function"==typeof e.rejected&&this._unreport(),P(e.rejected,this,e.receiver,e.resolver)},S.prototype._report=function(e){V.afterQueue(new C(this,e))},S.prototype._unreport=function(){this.handled||(this.handled=!0,V.afterQueue(new T(this)))},S.prototype.fail=function(e){this.reported=!0,G("unhandledRejection",this),t.onFatalRejection(this,void 0===e?this.context:e)},C.prototype.run=function(){this.rejection.handled||this.rejection.reported||(this.rejection.reported=!0,G("unhandledRejection",this.rejection)||t.onPotentiallyUnhandledRejection(this.rejection,this.context))},T.prototype.run=function(){this.rejection.reported&&(G("rejectionHandled",this.rejection)||t.onPotentiallyUnhandledRejectionHandled(this.rejection))},t.createContext=t.enterContext=t.exitContext=t.onPotentiallyUnhandledRejection=t.onPotentiallyUnhandledRejectionHandled=t.onFatalRejection=K;var Z=new w,ee=new t(w,Z);return B.prototype.run=function(){this.handler.join().when(this.continuation)},j.prototype.run=function(){var e=this.handler.consumers;if(void 0!==e)for(var t,n=0;n<e.length;++n)t=e[n],N(t.progress,this.value,this.handler,t.receiver,t.resolver)},O.prototype.run=function(){function e(e){r.resolve(e)}function t(e){r.reject(e)}function n(e){r.notify(e)}var r=this.resolver;A(this._then,this.thenable,e,t,n)},R.prototype.fulfilled=function(e){this.f.call(this.c,this.z,e,this.to)},R.prototype.rejected=function(e){this.to.reject(e)},R.prototype.progress=function(e){this.to.notify(e)},t}}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))}(n(44))}).call(t,n(38))},function(e,t,n){var r;/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(i){"use strict";r=function(){function e(e){this._async=e,this._running=!1,this._queue=this,this._queueLen=0,this._afterQueue={},this._afterQueueLen=0;var t=this;this.drain=function(){t._drain()}}return e.prototype.enqueue=function(e){this._queue[this._queueLen++]=e,this.run()},e.prototype.afterQueue=function(e){this._afterQueue[this._afterQueueLen++]=e,this.run()},e.prototype.run=function(){this._running||(this._running=!0,this._async(this.drain))},e.prototype._drain=function(){for(var e=0;e<this._queueLen;++e)this._queue[e].run(),this._queue[e]=void 0;for(this._queueLen=0,this._running=!1,e=0;e<this._afterQueueLen;++e)this._afterQueue[e].run(),this._afterQueue[e]=void 0;this._afterQueueLen=0},e}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))}(n(44))},function(e,t,n){function r(e,t){var n=s();return i(e,t,function(e,t){null===e?n.resolve(new o(t)):n.reject(e)}),n.promise}var i=n(61).connect,o=n(111).ChannelModel,s=n(112).defer;e.exports.connect=r,e.exports.credentials=n(108)},function(e,t,n){(function(t){"use strict";function r(e,t){for(var n=Object.keys(e),r=n.length;r--;){var i=n[r];t[i]=e[i]}return t}function i(e){return r(e,{})}function o(e,t,n,i){function o(e,t){return void 0===e?t:parseInt(e)}e=e?c.unescape(e):"/";var t=t||{},s=Object.create(p);return{clientProperties:r(i,s),mechanism:n.mechanism,response:n.response(),locale:t.locale||"en_US",channelMax:o(t.channelMax,0),frameMax:o(t.frameMax,4096),heartbeat:o(t.heartbeat,0),virtualHost:e,capabilities:"",insist:0}}function s(e){var t="guest",n="guest";if(e.auth){var r=e.auth.split(":");t=r[0],n=r[1]}return h.plain(t,n)}function a(e,t,r){function a(){I=!0,x.setNoDelay(d),g&&x.setKeepAlive(g,y);var e=new l(x);e.open(p,function(t,n){v&&x.setTimeout(0),null===t?r(null,e):r(t)})}var c=i(t||{});e=e||"amqp://localhost";var f,p,d=!!c.noDelay,v=c.timeout,g=!!c.keepAlive,y=c.keepAliveDelay||0,m=c.clientProperties||{};if("object"==typeof e){f=(e.protocol||"amqp")+":",c.host=e.hostname,c.port=e.port||("amqp:"===f?5672:5671);var b,w;e.username?(b=e.username,w=e.password):(b="guest",w=e.password||"guest"),p=o(e.vhost,null,c.credentials||h.plain(b,w),m)}else{var _=u.parse(e,!0);f=_.protocol,c.host=_.hostname,c.port=parseInt(_.port)||("amqp:"===f?5672:5671);var E=_.pathname?_.pathname.substr(1):null;p=o(E,_.query,c.credentials||s(_),m)}var x,I=!1;if("amqp:"===f)x=n(110).connect(c,a);else{if("amqps:"!==f)throw new Error("Expected amqp: or amqps: as the protocol; got "+f);x=n(110).connect(c,a)}v&&x.setTimeout(v,r.bind(this,new Error("connect ETIMEDOUT"))),x.once("error",function(e){I||r(e)})}var u=n(62),c=n(65),l=n(68).Connection,f=n(73).format,h=n(108),p={product:"amqplib",version:n(109).version,platform:f("Node.JS %s",t.version),information:"http://squaremo.github.io/amqp.node",capabilities:{publisher_confirms:!0,exchange_exchange_bindings:!0,"basic.nack":!0,consumer_cancel_notify:!0,"connection.blocked":!0,authentication_failure_close:!0}};e.exports.connect=a}).call(t,n(38))},function(e,t,n){"use strict";function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function i(e,t,n){if(e&&c.isObject(e)&&e instanceof r)return e;var i=new r;return i.parse(e,t,n),i}function o(e){return c.isString(e)&&(e=i(e)),e instanceof r?e.format():r.prototype.format.call(e)}function s(e,t){return i(e,!1,!0).resolve(t)}function a(e,t){return e?i(e,!1,!0).resolveObject(t):t}var u=n(63),c=n(64);t.parse=i,t.resolve=s,t.resolveObject=a,t.format=o,t.Url=r;var l=/^([a-z0-9.+-]+:)/i,f=/:[0-9]*$/,h=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,p=["<",">",'"',"`"," ","\r","\n","	"],d=["{","}","|","\\","^","`"].concat(p),v=["'"].concat(d),g=["%","/","?",";","#"].concat(v),y=["/","?","#"],m=255,b=/^[+a-z0-9A-Z_-]{0,63}$/,w=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,_={javascript:!0,"javascript:":!0},E={javascript:!0,"javascript:":!0},x={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},I=n(65);r.prototype.parse=function(e,t,n){if(!c.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var r=e.indexOf("?"),i=-1!==r&&r<e.indexOf("#")?"?":"#",o=e.split(i),s=/\\/g;o[0]=o[0].replace(s,"/"),e=o.join(i);var a=e;if(a=a.trim(),!n&&1===e.split("#").length){var f=h.exec(a);if(f)return this.path=a,this.href=a,this.pathname=f[1],f[2]?(this.search=f[2],t?this.query=I.parse(this.search.substr(1)):this.query=this.search.substr(1)):t&&(this.search="",this.query={}),this}var p=l.exec(a);if(p){p=p[0];var d=p.toLowerCase();this.protocol=d,a=a.substr(p.length)}if(n||p||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var k="//"===a.substr(0,2);!k||p&&E[p]||(a=a.substr(2),this.slashes=!0)}if(!E[p]&&(k||p&&!x[p])){for(var S=-1,C=0;C<y.length;C++){var T=a.indexOf(y[C]);-1!==T&&(-1===S||S>T)&&(S=T)}var U,B;B=-1===S?a.lastIndexOf("@"):a.lastIndexOf("@",S),-1!==B&&(U=a.slice(0,B),a=a.slice(B+1),this.auth=decodeURIComponent(U)),S=-1;for(var C=0;C<g.length;C++){var T=a.indexOf(g[C]);-1!==T&&(-1===S||S>T)&&(S=T)}-1===S&&(S=a.length),this.host=a.slice(0,S),a=a.slice(S),this.parseHost(),this.hostname=this.hostname||"";var j="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!j)for(var O=this.hostname.split(/\./),C=0,A=O.length;A>C;C++){var R=O[C];if(R&&!R.match(b)){for(var L="",M=0,P=R.length;P>M;M++)L+=R.charCodeAt(M)>127?"x":R[M];if(!L.match(b)){var F=O.slice(0,C),N=O.slice(C+1),D=R.match(w);D&&(F.push(D[1]),N.unshift(D[2])),N.length&&(a="/"+N.join(".")+a),this.hostname=F.join(".");break}}}this.hostname.length>m?this.hostname="":this.hostname=this.hostname.toLowerCase(),j||(this.hostname=u.toASCII(this.hostname));var q=this.port?":"+this.port:"",z=this.hostname||"";this.host=z+q,this.href+=this.host,j&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!_[d])for(var C=0,A=v.length;A>C;C++){var H=v[C];if(-1!==a.indexOf(H)){var Q=encodeURIComponent(H);Q===H&&(Q=escape(H)),a=a.split(H).join(Q)}}var W=a.indexOf("#");-1!==W&&(this.hash=a.substr(W),a=a.slice(0,W));var K=a.indexOf("?");if(-1!==K?(this.search=a.substr(K),this.query=a.substr(K+1),t&&(this.query=I.parse(this.query)),a=a.slice(0,K)):t&&(this.search="",this.query={}),a&&(this.pathname=a),x[d]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var q=this.pathname||"",Y=this.search||"";this.path=q+Y}return this.href=this.format(),this},r.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,o="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&c.isObject(this.query)&&Object.keys(this.query).length&&(o=I.stringify(this.query));var s=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||x[t])&&i!==!1?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),s=s.replace("#","%23"),t+i+n+s+r},r.prototype.resolve=function(e){return this.resolveObject(i(e,!1,!0)).format()},r.prototype.resolveObject=function(e){if(c.isString(e)){var t=new r;t.parse(e,!1,!0),e=t}for(var n=new r,i=Object.keys(this),o=0;o<i.length;o++){var s=i[o];n[s]=this[s]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var a=Object.keys(e),u=0;u<a.length;u++){var l=a[u];"protocol"!==l&&(n[l]=e[l])}return x[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!x[e.protocol]){for(var f=Object.keys(e),h=0;h<f.length;h++){var p=f[h];n[p]=e[p]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||E[e.protocol])n.pathname=e.pathname;else{for(var d=(e.pathname||"").split("/");d.length&&!(e.host=d.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),n.pathname=d.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var v=n.pathname||"",g=n.search||"";n.path=v+g}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var y=n.pathname&&"/"===n.pathname.charAt(0),m=e.host||e.pathname&&"/"===e.pathname.charAt(0),b=m||y||n.host&&e.pathname,w=b,_=n.pathname&&n.pathname.split("/")||[],d=e.pathname&&e.pathname.split("/")||[],I=n.protocol&&!x[n.protocol];if(I&&(n.hostname="",n.port=null,n.host&&(""===_[0]?_[0]=n.host:_.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===d[0]?d[0]=e.host:d.unshift(e.host)),e.host=null),b=b&&(""===d[0]||""===_[0])),m)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,_=d;else if(d.length)_||(_=[]),_.pop(),_=_.concat(d),n.search=e.search,n.query=e.query;else if(!c.isNullOrUndefined(e.search)){if(I){n.hostname=n.host=_.shift();var k=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;k&&(n.auth=k.shift(),n.host=n.hostname=k.shift())}return n.search=e.search,n.query=e.query,c.isNull(n.pathname)&&c.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!_.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var S=_.slice(-1)[0],C=(n.host||e.host||_.length>1)&&("."===S||".."===S)||""===S,T=0,U=_.length;U>=0;U--)S=_[U],"."===S?_.splice(U,1):".."===S?(_.splice(U,1),T++):T&&(_.splice(U,1),T--);if(!b&&!w)for(;T--;T)_.unshift("..");!b||""===_[0]||_[0]&&"/"===_[0].charAt(0)||_.unshift(""),C&&"/"!==_.join("/").substr(-1)&&_.push("");var B=""===_[0]||_[0]&&"/"===_[0].charAt(0);if(I){n.hostname=n.host=B?"":_.length?_.shift():"";var k=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;k&&(n.auth=k.shift(),n.host=n.hostname=k.shift())}return b=b||n.host&&_.length,b&&!B&&_.unshift(""),_.length?n.pathname=_.join("/"):(n.pathname=null,n.path=null),c.isNull(n.pathname)&&c.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},r.prototype.parseHost=function(){var e=this.host,t=f.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,n){var r;(function(e,i){!function(o){function s(e){throw RangeError(O[e])}function a(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function u(e,t){var n=e.split("@"),r="";n.length>1&&(r=n[0]+"@",e=n[1]),e=e.replace(j,".");var i=e.split("."),o=a(i,t).join(".");return r+o}function c(e){for(var t,n,r=[],i=0,o=e.length;o>i;)t=e.charCodeAt(i++),t>=55296&&56319>=t&&o>i?(n=e.charCodeAt(i++),56320==(64512&n)?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--)):r.push(t);return r}function l(e){return a(e,function(e){var t="";return e>65535&&(e-=65536,t+=L(e>>>10&1023|55296),e=56320|1023&e),t+=L(e)}).join("")}function f(e){return 10>e-48?e-22:26>e-65?e-65:26>e-97?e-97:_}function h(e,t){return e+22+75*(26>e)-((0!=t)<<5)}function p(e,t,n){var r=0;for(e=n?R(e/k):e>>1,e+=R(e/t);e>A*x>>1;r+=_)e=R(e/A);return R(r+(A+1)*e/(e+I))}function d(e){var t,n,r,i,o,a,u,c,h,d,v=[],g=e.length,y=0,m=C,b=S;for(n=e.lastIndexOf(T),0>n&&(n=0),r=0;n>r;++r)e.charCodeAt(r)>=128&&s("not-basic"),v.push(e.charCodeAt(r));for(i=n>0?n+1:0;g>i;){for(o=y,a=1,u=_;i>=g&&s("invalid-input"),c=f(e.charCodeAt(i++)),(c>=_||c>R((w-y)/a))&&s("overflow"),y+=c*a,h=b>=u?E:u>=b+x?x:u-b,!(h>c);u+=_)d=_-h,a>R(w/d)&&s("overflow"),a*=d;t=v.length+1,b=p(y-o,t,0==o),R(y/t)>w-m&&s("overflow"),m+=R(y/t),y%=t,v.splice(y++,0,m)}return l(v)}function v(e){var t,n,r,i,o,a,u,l,f,d,v,g,y,m,b,I=[];for(e=c(e),g=e.length,t=C,n=0,o=S,a=0;g>a;++a)v=e[a],128>v&&I.push(L(v));for(r=i=I.length,i&&I.push(T);g>r;){for(u=w,a=0;g>a;++a)v=e[a],v>=t&&u>v&&(u=v);for(y=r+1,u-t>R((w-n)/y)&&s("overflow"),n+=(u-t)*y,t=u,a=0;g>a;++a)if(v=e[a],t>v&&++n>w&&s("overflow"),v==t){for(l=n,f=_;d=o>=f?E:f>=o+x?x:f-o,!(d>l);f+=_)b=l-d,m=_-d,I.push(L(h(d+b%m,0))),l=R(b/m);I.push(L(h(l,0))),o=p(n,y,r==i),n=0,++r}++n,++t}return I.join("")}function g(e){return u(e,function(e){return U.test(e)?d(e.slice(4).toLowerCase()):e})}function y(e){return u(e,function(e){return B.test(e)?"xn--"+v(e):e})}var m=("object"==typeof t&&t&&!t.nodeType&&t,"object"==typeof e&&e&&!e.nodeType&&e,"object"==typeof i&&i);m.global!==m&&m.window!==m&&m.self!==m||(o=m);var b,w=2147483647,_=36,E=1,x=26,I=38,k=700,S=72,C=128,T="-",U=/^xn--/,B=/[^\x20-\x7E]/,j=/[\x2E\u3002\uFF0E\uFF61]/g,O={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},A=_-E,R=Math.floor,L=String.fromCharCode;b={version:"1.3.2",ucs2:{decode:c,encode:l},decode:d,encode:v,toASCII:y,toUnicode:g},r=function(){return b}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))}(this)}).call(t,n(36)(e),function(){return this}())},function(e,t){"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,n){"use strict";t.decode=t.parse=n(66),t.encode=t.stringify=n(67)},function(e,t){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,r,i){t=t||"&",r=r||"=";var o={};if("string"!=typeof e||0===e.length)return o;var s=/\+/g;e=e.split(t);var a=1e3;i&&"number"==typeof i.maxKeys&&(a=i.maxKeys);var u=e.length;a>0&&u>a&&(u=a);for(var c=0;u>c;++c){var l,f,h,p,d=e[c].replace(s,"%20"),v=d.indexOf(r);v>=0?(l=d.substr(0,v),f=d.substr(v+1)):(l=d,f=""),h=decodeURIComponent(l),p=decodeURIComponent(f),n(o,h)?Array.isArray(o[h])?o[h].push(p):o[h]=[o[h],p]:o[h]=p}return o}},function(e,t){"use strict";var n=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,r,i){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map(function(i){var o=encodeURIComponent(n(i))+r;return Array.isArray(e[i])?e[i].map(function(e){return o+encodeURIComponent(n(e))}).join(t):o+encodeURIComponent(n(e[i]))}).join(t):i?encodeURIComponent(n(i))+r+encodeURIComponent(n(e)):""}},function(e,t,n){(function(t){"use strict";function r(e){g.call(this);var n=this.stream=u(e);this.muxer=new d(n),this.rest=new t(0),this.frameMax=f.FRAME_MIN_SIZE,this.sentSinceLastCheck=!1,this.recvSinceLastCheck=!1,this.expectSocketClose=!1,this.freeChannels=new _,this.channels=[{channel:{accept:o(this)},buffer:e}]}function i(e){var t=this.channels[e.channel];return t?t.channel.accept(e):void this.closeWithError(x("Frame on unknown channel %d",e.channel),f.CHANNEL_ERROR,new Error(x("Frame on unknown channel: %s",w(e,!1))))}function o(e){return function(t){if(t===p);else if(t.id===l.ConnectionClose){e.sendMethod(0,l.ConnectionCloseOk,{});var n=x("Connection closed: %s",b(t)),r=S(n),i=new Error(n);i.code=t.fields.replyCode,c(i)&&e.emit("error",i),e.toClosed(r,i)}else t.id===l.ConnectionBlocked?e.emit("blocked",t.fields.reason):t.id===l.ConnectionUnblocked?e.emit("unblocked"):e.closeWithError(x("Unexpected frame on channel 0"),f.UNEXPECTED_FRAME,new Error(x("Unexpected frame on channel 0: %s",w(t,!1))))}}function s(e,t){return function(){throw new k(e,t)}}function a(e,t,n){e.sendMethod=e.sendContent=e.sendMessage=s(t,n)}function u(e){if(e instanceof v)return e;var t=new v;return t.wrap(e),t._write=function(t,n,r){return e.write(t,n,r)},t}function c(e){switch(e&&e.code){case l.constants.CONNECTION_FORCED:case l.constants.REPLY_SUCCESS:return!1;default:return!0}}var l=n(69),f=l.constants,h=n(76),p=h.HEARTBEAT,d=n(84).Mux,v=n(85).Duplex||n(101),g=n(86).EventEmitter,y=n(104).Heart,m=n(105).methodName,b=n(105).closeMessage,w=n(105).inspect,_=n(106).BitSet,E=n(73).inherits,x=n(73).format,I=n(85).PassThrough||n(103),k=n(107).IllegalOperationError,S=n(107).stackCapture,C=1024,T=2048;E(r,g);var U=r.prototype;U.sendProtocolHeader=function(){this.sendBytes(h.PROTOCOL_HEADER)},U.open=function(e,t){function n(e){d.step(function(t,n){null!==t?o(t):0!==n.channel?o(new Error(x("Frame on channel != 0 during handshake: %s",w(n,!1)))):e(n)})}function r(e,t){n(function(n){n.id===e?t(n):o(new Error(x("Expected %s; got %s",m(e),w(n,!1))))})}function o(e){v(e)}function s(e){try{d.sendMethod(0,e,g)}catch(t){o(t)}}function a(e,t){return 0===e||0===t?Math.max(e,t):Math.min(e,t)}function u(t){var r=t.fields.mechanisms.toString().split(" ");return r.indexOf(e.mechanism)<0?void o(new Error(x("SASL mechanism %s is not provided by the server",e.mechanism))):(s(l.ConnectionStartOk),void n(c))}function c(t){switch(t.id){case l.ConnectionSecure:o(new Error("Wasn't expecting to have to go through secure"));break;case l.ConnectionClose:o(new Error(x("Handshake terminated by server: %s",b(t))));break;case l.ConnectionTune:var n=t.fields;g.frameMax=a(n.frameMax,e.frameMax),g.channelMax=a(n.channelMax,e.channelMax),g.heartbeat=a(n.heartbeat,e.heartbeat),s(l.ConnectionTuneOk),s(l.ConnectionOpen),r(l.ConnectionOpenOk,f);break;default:o(new Error(x("Expected connection.secure, connection.close, or connection.tune during handshake; got %s",w(t,!1))))}}function f(e){d.channelMax=g.channelMax||65535,d.frameMax=g.frameMax||4294967295,d.heartbeat=g.heartbeat,d.heartbeater=d.startHeartbeater(),d.accept=i,p(e)}function h(e){o(e||new Error("Socket closed abruptly during opening handshake"))}function p(e){d.stream.removeListener("end",h),d.stream.removeListener("error",h),d.stream.on("error",d.onSocketError.bind(d)),d.stream.on("end",d.onSocketError.bind(d,new Error("Unexpected close"))),d.on("frameError",d.onSocketError.bind(d)),d.acceptLoop(),v(null,e)}var d=this,v=t||function(){},g=Object.create(e);this.stream.on("end",h),this.stream.on("error",h),this.sendProtocolHeader(),r(l.ConnectionStart,u)},U.close=function(e){var t=e&&function(){e(null)};this.closeBecause("Cheers, thanks",f.REPLY_SUCCESS,t)},U.closeBecause=function(e,t,n){this.sendMethod(0,l.ConnectionClose,{replyText:e,replyCode:t,methodId:0,classId:0});var r=S("closeBecause called: "+e);this.toClosing(r,n)},U.closeWithError=function(e,t,n){this.emit("error",n),this.closeBecause(e,t)},U.onSocketError=function(e){if(!this.expectSocketClose){this.expectSocketClose=!0,this.emit("error",e);var t=S("Socket error");this.toClosed(t,e)}},U.toClosing=function(e,t){var n=this.sendMethod.bind(this);this.accept=function(e){if(e.id===l.ConnectionCloseOk){t&&t();var r=S("ConnectionCloseOk received");this.toClosed(r,void 0)}else e.id===l.ConnectionClose&&n(0,l.ConnectionCloseOk,{})},a(this,"Connection closing",e)},U._closeChannels=function(e){for(var t=1;t<this.channels.length;t++){var n=this.channels[t];null!==n&&n.channel.toClosed(e)}},U.toClosed=function(e,t){this._closeChannels(e);var n=x("Connection closed (%s)",t?t.toString():"by client");a(this,n,e),this.accept=s(n,e),this.close=function(t){t&&t(new k(n,e))},this.heartbeater&&this.heartbeater.clear(),this.expectSocketClose=!0,this.stream.end(),this.emit("close",t)},U.startHeartbeater=function(){if(0===this.heartbeat)return null;var e=this,t=new y(this.heartbeat,this.checkSend.bind(this),this.checkRecv.bind(this));return t.on("timeout",function(){var t=new Error("Heartbeat timeout");e.emit("error",t);var n=S("Heartbeat timeout");e.toClosed(n,t)}),t.on("beat",function(){e.sendHeartbeat()}),t},U.freshChannel=function(e,t){var n=this.freeChannels.nextClearBit(1);if(0>n||n>this.channelMax)throw new Error("No channels left to allocate");this.freeChannels.set(n);var r=t&&t.highWaterMark||C,i=new I({objectMode:!0,highWaterMark:r});return this.channels[n]={channel:e,buffer:i},i.on("drain",function(){e.onBufferDrain()}),this.muxer.pipeFrom(i),n},U.releaseChannel=function(e){this.freeChannels.clear(e);var t=this.channels[e].buffer;this.muxer.unpipeFrom(t),this.channels[e]=null},U.acceptLoop=function(){function e(){try{for(var e;e=t.recvFrame();)t.accept(e)}catch(n){t.emit("frameError",n)}}var t=this;t.stream.on("readable",e),e()},U.step=function(e){function t(){var r;try{r=n.recvFrame()}catch(i){return void e(i,null)}r?e(null,r):n.stream.once("readable",t)}var n=this;t()},U.checkSend=function(){var e=this.sentSinceLastCheck;return this.sentSinceLastCheck=!1,e},U.checkRecv=function(){var e=this.recvSinceLastCheck;return this.recvSinceLastCheck=!1,e},U.sendBytes=function(e){this.sentSinceLastCheck=!0,this.stream.write(e)},U.sendHeartbeat=function(){return this.sendBytes(h.HEARTBEAT_BUF)};var B=l.encodeMethod,j=l.encodeProperties;U.sendMethod=function(e,t,n){var r=B(t,e,n);this.sentSinceLastCheck=!0;var i=this.channels[e].buffer;return i.write(r)},U.sendMessage=function(e,n,r,i,o,s){if(!t.isBuffer(s))throw new TypeError("content is not a buffer");var a=B(n,e,r),u=j(i,e,s.length,o),c=this.channels[e].buffer;this.sentSinceLastCheck=!0;var l=a.length+u.length,f=s.length>0?s.length+O:0,h=l+f;if(T>h){var p=new t(h),d=a.copy(p,0);return d+=u.copy(p,d),f>0&&A(e,s).copy(p,d),c.write(p)}if(T>l){var v=new t(l),d=a.copy(v,0);u.copy(v,d),c.write(v)}else c.write(a),c.write(u);return this.sendContent(e,s)};var O=l.FRAME_OVERHEAD,A=h.makeBodyFrame;U.sendContent=function(e,n){if(!t.isBuffer(n))throw new TypeError(x("Expected buffer; got %s",n));for(var r=!0,i=this.channels[e].buffer,o=this.frameMax-O,s=0;s<n.length;s+=o){var a=s+o,u=a>n.length?n.slice(s):n.slice(s,a),c=A(e,u);r=i.write(c)}return this.sentSinceLastCheck=!0,r};var R=h.parseFrame,L=h.decodeFrame;U.recvFrame=function(){var e=R(this.rest,this.frameMax);if(e)return this.rest=e.rest,L(e);var n=this.stream.read();return null===n?!1:(this.recvSinceLastCheck=!0,this.rest=t.concat([this.rest,n]),this.recvFrame())},e.exports.Connection=r,e.exports.isFatalError=c}).call(t,n(3).Buffer)},function(e,t,n){(function(t){/** @preserve This file is generated by the script
	 * ../bin/generate-defs.js, which is not in general included in a
	 * distribution, but is available in the source repository e.g. at
	 * https://github.com/squaremo/amqp.node/
	 */
"use strict";function r(e){var t,n,r=0,i={versionMajor:void 0,versionMinor:void 0,serverProperties:void 0,mechanisms:void 0,locales:void 0};return t=e[r],r++,i.versionMajor=t,t=e[r],r++,i.versionMinor=t,n=e.readUInt32BE(r),r+=4,t=Tt(e.slice(r,r+n)),r+=n,i.serverProperties=t,n=e.readUInt32BE(r),r+=4,t=e.slice(r,r+n),r+=n,i.mechanisms=t,n=e.readUInt32BE(r),r+=4,t=e.slice(r,r+n),r+=n,i.locales=t,i}function i(e,n){var r,i=0,o=null,s=0,a=0;if(o=n.serverProperties,void 0===o)throw new Error("Missing value for mandatory field 'serverProperties'");if("object"!=typeof o)throw new TypeError("Field 'serverProperties' is the wrong type; must be an object");r=Ct(Ut,o,a);var u=Ut.slice(a,a+r);if(a+=r,s+=u.length,o=n.mechanisms,void 0===o)o=new t("PLAIN");else if(!t.isBuffer(o))throw new TypeError("Field 'mechanisms' is the wrong type; must be a Buffer");if(s+=o.length,o=n.locales,void 0===o)o=new t("en_US");else if(!t.isBuffer(o))throw new TypeError("Field 'locales' is the wrong type; must be a Buffer");s+=o.length;var c=new t(22+s);if(c[0]=1,c.writeUInt16BE(e,1),c.writeUInt32BE(655370,7),i=11,o=n.versionMajor,void 0===o)o=0;else if("number"!=typeof o||isNaN(o))throw new TypeError("Field 'versionMajor' is the wrong type; must be a number (but not NaN)");if(c.writeUInt8(o,i),i++,o=n.versionMinor,void 0===o)o=9;else if("number"!=typeof o||isNaN(o))throw new TypeError("Field 'versionMinor' is the wrong type; must be a number (but not NaN)");return c.writeUInt8(o,i),i++,i+=u.copy(c,i),o=n.mechanisms,void 0===o&&(o=new t("PLAIN")),r=o.length,c.writeUInt32BE(r,i),i+=4,o.copy(c,i),i+=r,o=n.locales,void 0===o&&(o=new t("en_US")),r=o.length,c.writeUInt32BE(r,i),i+=4,o.copy(c,i),i+=r,c[i]=206,c.writeUInt32BE(i-7,3),c}function o(e){var t,n,r=0,i={clientProperties:void 0,mechanism:void 0,response:void 0,locale:void 0};return n=e.readUInt32BE(r),r+=4,t=Tt(e.slice(r,r+n)),r+=n,i.clientProperties=t,n=e.readUInt8(r),r++,t=e.toString("utf8",r,r+n),r+=n,i.mechanism=t,n=e.readUInt32BE(r),r+=4,t=e.slice(r,r+n),r+=n,i.response=t,n=e.readUInt8(r),r++,t=e.toString("utf8",r,r+n),r+=n,i.locale=t,i}function s(e,n){var r,i=0,o=null,s=0,a=0;if(o=n.clientProperties,void 0===o)throw new Error("Missing value for mandatory field 'clientProperties'");if("object"!=typeof o)throw new TypeError("Field 'clientProperties' is the wrong type; must be an object");r=Ct(Ut,o,a);var u=Ut.slice(a,a+r);if(a+=r,s+=u.length,o=n.mechanism,void 0===o)o="PLAIN";else if(!("string"==typeof o&&t.byteLength(o)<256))throw new TypeError("Field 'mechanism' is the wrong type; must be a string (up to 255 chars)");var c=t.byteLength(o,"utf8");if(s+=c,o=n.response,void 0===o)throw new Error("Missing value for mandatory field 'response'");if(!t.isBuffer(o))throw new TypeError("Field 'response' is the wrong type; must be a Buffer");if(s+=o.length,o=n.locale,void 0===o)o="en_US";else if(!("string"==typeof o&&t.byteLength(o)<256))throw new TypeError("Field 'locale' is the wrong type; must be a string (up to 255 chars)");var l=t.byteLength(o,"utf8");s+=l;var f=new t(18+s);return f[0]=1,f.writeUInt16BE(e,1),f.writeUInt32BE(655371,7),i=11,i+=u.copy(f,i),o=n.mechanism,void 0===o&&(o="PLAIN"),f[i]=c,i++,f.write(o,i,"utf8"),i+=c,o=n.response,void 0===o&&(o=new t(void 0)),r=o.length,f.writeUInt32BE(r,i),i+=4,o.copy(f,i),i+=r,o=n.locale,void 0===o&&(o="en_US"),f[i]=l,i++,f.write(o,i,"utf8"),i+=l,f[i]=206,f.writeUInt32BE(i-7,3),f}function a(e){var t,n,r=0,i={challenge:void 0};return n=e.readUInt32BE(r),r+=4,t=e.slice(r,r+n),r+=n,i.challenge=t,i}function u(e,n){var r,i=0,o=null,s=0;if(o=n.challenge,void 0===o)throw new Error("Missing value for mandatory field 'challenge'");if(!t.isBuffer(o))throw new TypeError("Field 'challenge' is the wrong type; must be a Buffer");s+=o.length;var a=new t(16+s);return a[0]=1,a.writeUInt16BE(e,1),a.writeUInt32BE(655380,7),i=11,o=n.challenge,void 0===o&&(o=new t(void 0)),r=o.length,a.writeUInt32BE(r,i),i+=4,o.copy(a,i),i+=r,a[i]=206,a.writeUInt32BE(i-7,3),a}function c(e){var t,n,r=0,i={response:void 0};return n=e.readUInt32BE(r),r+=4,t=e.slice(r,r+n),r+=n,i.response=t,i}function l(e,n){var r,i=0,o=null,s=0;if(o=n.response,void 0===o)throw new Error("Missing value for mandatory field 'response'");if(!t.isBuffer(o))throw new TypeError("Field 'response' is the wrong type; must be a Buffer");s+=o.length;var a=new t(16+s);return a[0]=1,a.writeUInt16BE(e,1),a.writeUInt32BE(655381,7),i=11,o=n.response,void 0===o&&(o=new t(void 0)),r=o.length,a.writeUInt32BE(r,i),i+=4,o.copy(a,i),i+=r,a[i]=206,a.writeUInt32BE(i-7,3),a}function f(e){var t,n=0,r={channelMax:void 0,frameMax:void 0,heartbeat:void 0};return t=e.readUInt16BE(n),n+=2,r.channelMax=t,t=e.readUInt32BE(n),n+=4,r.frameMax=t,t=e.readUInt16BE(n),n+=2,r.heartbeat=t,r}function h(e,n){var r=0,i=null,o=0,s=new t(20+o);if(s[0]=1,s.writeUInt16BE(e,1),s.writeUInt32BE(655390,7),r=11,i=n.channelMax,void 0===i)i=0;else if("number"!=typeof i||isNaN(i))throw new TypeError("Field 'channelMax' is the wrong type; must be a number (but not NaN)");if(s.writeUInt16BE(i,r),r+=2,i=n.frameMax,void 0===i)i=0;else if("number"!=typeof i||isNaN(i))throw new TypeError("Field 'frameMax' is the wrong type; must be a number (but not NaN)");if(s.writeUInt32BE(i,r),r+=4,i=n.heartbeat,void 0===i)i=0;else if("number"!=typeof i||isNaN(i))throw new TypeError("Field 'heartbeat' is the wrong type; must be a number (but not NaN)");return s.writeUInt16BE(i,r),r+=2,s[r]=206,s.writeUInt32BE(r-7,3),s}function p(e){var t,n=0,r={channelMax:void 0,frameMax:void 0,heartbeat:void 0};return t=e.readUInt16BE(n),n+=2,r.channelMax=t,t=e.readUInt32BE(n),n+=4,r.frameMax=t,t=e.readUInt16BE(n),n+=2,r.heartbeat=t,r}function d(e,n){var r=0,i=null,o=0,s=new t(20+o);if(s[0]=1,s.writeUInt16BE(e,1),s.writeUInt32BE(655391,7),r=11,i=n.channelMax,void 0===i)i=0;else if("number"!=typeof i||isNaN(i))throw new TypeError("Field 'channelMax' is the wrong type; must be a number (but not NaN)");if(s.writeUInt16BE(i,r),r+=2,i=n.frameMax,void 0===i)i=0;else if("number"!=typeof i||isNaN(i))throw new TypeError("Field 'frameMax' is the wrong type; must be a number (but not NaN)");if(s.writeUInt32BE(i,r),r+=4,i=n.heartbeat,void 0===i)i=0;else if("number"!=typeof i||isNaN(i))throw new TypeError("Field 'heartbeat' is the wrong type; must be a number (but not NaN)");return s.writeUInt16BE(i,r),r+=2,s[r]=206,s.writeUInt32BE(r-7,3),s}function v(e){var t,n,r=0,i={virtualHost:void 0,capabilities:void 0,insist:void 0};return n=e.readUInt8(r),r++,t=e.toString("utf8",r,r+n),r+=n,i.virtualHost=t,n=e.readUInt8(r),r++,t=e.toString("utf8",r,r+n),r+=n,i.capabilities=t,t=!!(1&e[r]),i.insist=t,i}function g(e,n){var r=0,i=null,o=0,s=0;if(i=n.virtualHost,void 0===i)i="/";else if(!("string"==typeof i&&t.byteLength(i)<256))throw new TypeError("Field 'virtualHost' is the wrong type; must be a string (up to 255 chars)");var a=t.byteLength(i,"utf8");if(s+=a,i=n.capabilities,void 0===i)i="";else if(!("string"==typeof i&&t.byteLength(i)<256))throw new TypeError("Field 'capabilities' is the wrong type; must be a string (up to 255 chars)");var u=t.byteLength(i,"utf8");s+=u;var c=new t(15+s);return c[0]=1,c.writeUInt16BE(e,1),c.writeUInt32BE(655400,7),r=11,i=n.virtualHost,void 0===i&&(i="/"),c[r]=a,r++,c.write(i,r,"utf8"),r+=a,i=n.capabilities,void 0===i&&(i=""),c[r]=u,r++,c.write(i,r,"utf8"),r+=u,i=n.insist,void 0===i&&(i=!1),i&&(o+=1),c[r]=o,r++,c[r]=206,c.writeUInt32BE(r-7,3),c}function y(e){var t,n,r=0,i={knownHosts:void 0};return n=e.readUInt8(r),r++,t=e.toString("utf8",r,r+n),r+=n,i.knownHosts=t,i}function m(e,n){var r=0,i=null,o=0;if(i=n.knownHosts,void 0===i)i="";else if(!("string"==typeof i&&t.byteLength(i)<256))throw new TypeError("Field 'knownHosts' is the wrong type; must be a string (up to 255 chars)");var s=t.byteLength(i,"utf8");o+=s;var a=new t(13+o);return a[0]=1,a.writeUInt16BE(e,1),a.writeUInt32BE(655401,7),r=11,i=n.knownHosts,void 0===i&&(i=""),a[r]=s,r++,a.write(i,r,"utf8"),r+=s,a[r]=206,a.writeUInt32BE(r-7,3),a}function b(e){var t,n,r=0,i={replyCode:void 0,replyText:void 0,classId:void 0,methodId:void 0};return t=e.readUInt16BE(r),r+=2,i.replyCode=t,n=e.readUInt8(r),r++,t=e.toString("utf8",r,r+n),r+=n,i.replyText=t,t=e.readUInt16BE(r),r+=2,i.classId=t,t=e.readUInt16BE(r),r+=2,i.methodId=t,i}function w(e,n){var r=0,i=null,o=0;if(i=n.replyText,void 0===i)i="";else if(!("string"==typeof i&&t.byteLength(i)<256))throw new TypeError("Field 'replyText' is the wrong type; must be a string (up to 255 chars)");var s=t.byteLength(i,"utf8");o+=s;var a=new t(19+o);if(a[0]=1,a.writeUInt16BE(e,1),a.writeUInt32BE(655410,7),r=11,i=n.replyCode,void 0===i)throw new Error("Missing value for mandatory field 'replyCode'");if("number"!=typeof i||isNaN(i))throw new TypeError("Field 'replyCode' is the wrong type; must be a number (but not NaN)");if(a.writeUInt16BE(i,r),r+=2,i=n.replyText,void 0===i&&(i=""),a[r]=s,r++,a.write(i,r,"utf8"),r+=s,i=n.classId,void 0===i)throw new Error("Missing value for mandatory field 'classId'");if("number"!=typeof i||isNaN(i))throw new TypeError("Field 'classId' is the wrong type; must be a number (but not NaN)");if(a.writeUInt16BE(i,r),r+=2,i=n.methodId,void 0===i)throw new Error("Missing value for mandatory field 'methodId'");if("number"!=typeof i||isNaN(i))throw new TypeError("Field 'methodId' is the wrong type; must be a number (but not NaN)");return a.writeUInt16BE(i,r),r+=2,a[r]=206,a.writeUInt32BE(r-7,3),a}function _(e){var t={};return t}function E(e,n){var r=0,i=0,o=new t(12+i);return o[0]=1,o.writeUInt16BE(e,1),o.writeUInt32BE(655411,7),r=11,o[r]=206,o.writeUInt32BE(r-7,3),o}function x(e){var t,n,r=0,i={reason:void 0};return n=e.readUInt8(r),r++,t=e.toString("utf8",r,r+n),r+=n,i.reason=t,i}function I(e,n){var r=0,i=null,o=0;if(i=n.reason,void 0===i)i="";else if(!("string"==typeof i&&t.byteLength(i)<256))throw new TypeError("Field 'reason' is the wrong type; must be a string (up to 255 chars)");var s=t.byteLength(i,"utf8");o+=s;var a=new t(13+o);return a[0]=1,a.writeUInt16BE(e,1),a.writeUInt32BE(655420,7),r=11,i=n.reason,void 0===i&&(i=""),a[r]=s,r++,a.write(i,r,"utf8"),r+=s,a[r]=206,a.writeUInt32BE(r-7,3),a}function k(e){var t={};return t}function S(e,n){var r=0,i=0,o=new t(12+i);return o[0]=1,o.writeUInt16BE(e,1),o.writeUInt32BE(655421,7),r=11,o[r]=206,o.writeUInt32BE(r-7,3),o}function C(e){var t,n,r=0,i={outOfBand:void 0};return n=e.readUInt8(r),r++,t=e.toString("utf8",r,r+n),r+=n,i.outOfBand=t,i}function T(e,n){var r=0,i=null,o=0;if(i=n.outOfBand,void 0===i)i="";else if(!("string"==typeof i&&t.byteLength(i)<256))throw new TypeError("Field 'outOfBand' is the wrong type; must be a string (up to 255 chars)");var s=t.byteLength(i,"utf8");o+=s;var a=new t(13+o);return a[0]=1,a.writeUInt16BE(e,1),a.writeUInt32BE(1310730,7),r=11,i=n.outOfBand,void 0===i&&(i=""),a[r]=s,r++,a.write(i,r,"utf8"),r+=s,a[r]=206,a.writeUInt32BE(r-7,3),a}function U(e){var t,n,r=0,i={channelId:void 0};return n=e.readUInt32BE(r),r+=4,t=e.slice(r,r+n),r+=n,i.channelId=t,i}function B(e,n){var r,i=0,o=null,s=0;if(o=n.channelId,void 0===o)o=new t("");else if(!t.isBuffer(o))throw new TypeError("Field 'channelId' is the wrong type; must be a Buffer");s+=o.length;var a=new t(16+s);return a[0]=1,a.writeUInt16BE(e,1),a.writeUInt32BE(1310731,7),i=11,o=n.channelId,void 0===o&&(o=new t("")),r=o.length,a.writeUInt32BE(r,i),i+=4,o.copy(a,i),i+=r,a[i]=206,a.writeUInt32BE(i-7,3),a}function j(e){var t,n=0,r={active:void 0};return t=!!(1&e[n]),r.active=t,r}function O(e,n){var r=0,i=null,o=0,s=0,a=new t(13+s);if(a[0]=1,a.writeUInt16BE(e,1),a.writeUInt32BE(1310740,7),r=11,i=n.active,void 0===i)throw new Error("Missing value for mandatory field 'active'");return i&&(o+=1),a[r]=o,r++,a[r]=206,a.writeUInt32BE(r-7,3),a}function A(e){var t,n=0,r={active:void 0};return t=!!(1&e[n]),r.active=t,r}function R(e,n){var r=0,i=null,o=0,s=0,a=new t(13+s);if(a[0]=1,a.writeUInt16BE(e,1),a.writeUInt32BE(1310741,7),r=11,i=n.active,void 0===i)throw new Error("Missing value for mandatory field 'active'");return i&&(o+=1),a[r]=o,r++,a[r]=206,a.writeUInt32BE(r-7,3),a}function L(e){var t,n,r=0,i={replyCode:void 0,replyText:void 0,classId:void 0,methodId:void 0};return t=e.readUInt16BE(r),r+=2,i.replyCode=t,n=e.readUInt8(r),r++,t=e.toString("utf8",r,r+n),r+=n,i.replyText=t,t=e.readUInt16BE(r),r+=2,i.classId=t,t=e.readUInt16BE(r),r+=2,i.methodId=t,i}function M(e,n){var r=0,i=null,o=0;if(i=n.replyText,void 0===i)i="";else if(!("string"==typeof i&&t.byteLength(i)<256))throw new TypeError("Field 'replyText' is the wrong type; must be a string (up to 255 chars)");var s=t.byteLength(i,"utf8");o+=s;var a=new t(19+o);if(a[0]=1,a.writeUInt16BE(e,1),a.writeUInt32BE(1310760,7),r=11,i=n.replyCode,void 0===i)throw new Error("Missing value for mandatory field 'replyCode'");if("number"!=typeof i||isNaN(i))throw new TypeError("Field 'replyCode' is the wrong type; must be a number (but not NaN)");if(a.writeUInt16BE(i,r),r+=2,i=n.replyText,void 0===i&&(i=""),a[r]=s,r++,a.write(i,r,"utf8"),r+=s,i=n.classId,void 0===i)throw new Error("Missing value for mandatory field 'classId'");if("number"!=typeof i||isNaN(i))throw new TypeError("Field 'classId' is the wrong type; must be a number (but not NaN)");if(a.writeUInt16BE(i,r),r+=2,i=n.methodId,void 0===i)throw new Error("Missing value for mandatory field 'methodId'");if("number"!=typeof i||isNaN(i))throw new TypeError("Field 'methodId' is the wrong type; must be a number (but not NaN)");return a.writeUInt16BE(i,r),r+=2,a[r]=206,a.writeUInt32BE(r-7,3),a}function P(e){var t={};return t}function F(e,n){var r=0,i=0,o=new t(12+i);return o[0]=1,o.writeUInt16BE(e,1),o.writeUInt32BE(1310761,7),r=11,o[r]=206,o.writeUInt32BE(r-7,3),o}function N(e){var t,n,r=0,i={realm:void 0,exclusive:void 0,passive:void 0,active:void 0,write:void 0,read:void 0};return n=e.readUInt8(r),r++,t=e.toString("utf8",r,r+n),r+=n,i.realm=t,t=!!(1&e[r]),i.exclusive=t,t=!!(2&e[r]),i.passive=t,t=!!(4&e[r]),i.active=t,t=!!(8&e[r]),i.write=t,t=!!(16&e[r]),i.read=t,i}function D(e,n){var r=0,i=null,o=0,s=0;if(i=n.realm,void 0===i)i="/data";else if(!("string"==typeof i&&t.byteLength(i)<256))throw new TypeError("Field 'realm' is the wrong type; must be a string (up to 255 chars)");var a=t.byteLength(i,"utf8");s+=a;var u=new t(14+s);return u[0]=1,u.writeUInt16BE(e,1),u.writeUInt32BE(1966090,7),r=11,i=n.realm,void 0===i&&(i="/data"),u[r]=a,r++,u.write(i,r,"utf8"),r+=a,i=n.exclusive,void 0===i&&(i=!1),i&&(o+=1),i=n.passive,void 0===i&&(i=!0),i&&(o+=2),i=n.active,void 0===i&&(i=!0),i&&(o+=4),i=n.write,void 0===i&&(i=!0),i&&(o+=8),i=n.read,void 0===i&&(i=!0),i&&(o+=16),u[r]=o,r++,u[r]=206,u.writeUInt32BE(r-7,3),u}function q(e){var t,n=0,r={ticket:void 0};return t=e.readUInt16BE(n),n+=2,r.ticket=t,r}function z(e,n){var r=0,i=null,o=0,s=new t(14+o);if(s[0]=1,s.writeUInt16BE(e,1),s.writeUInt32BE(1966091,7),r=11,i=n.ticket,void 0===i)i=1;else if("number"!=typeof i||isNaN(i))throw new TypeError("Field 'ticket' is the wrong type; must be a number (but not NaN)");return s.writeUInt16BE(i,r),r+=2,s[r]=206,s.writeUInt32BE(r-7,3),s}function H(e){var t,n,r=0,i={ticket:void 0,exchange:void 0,type:void 0,passive:void 0,durable:void 0,autoDelete:void 0,internal:void 0,nowait:void 0,arguments:void 0};return t=e.readUInt16BE(r),r+=2,i.ticket=t,n=e.readUInt8(r),r++,t=e.toString("utf8",r,r+n),r+=n,i.exchange=t,n=e.readUInt8(r),r++,t=e.toString("utf8",r,r+n),r+=n,i.type=t,t=!!(1&e[r]),i.passive=t,t=!!(2&e[r]),i.durable=t,t=!!(4&e[r]),i.autoDelete=t,t=!!(8&e[r]),i.internal=t,t=!!(16&e[r]),i.nowait=t,r++,n=e.readUInt32BE(r),r+=4,t=Tt(e.slice(r,r+n)),r+=n,i.arguments=t,i}function Q(e,n){var r,i=0,o=null,s=0,a=0,u=0;if(o=n.exchange,void 0===o)throw new Error("Missing value for mandatory field 'exchange'");if(!("string"==typeof o&&t.byteLength(o)<256))throw new TypeError("Field 'exchange' is the wrong type; must be a string (up to 255 chars)");var c=t.byteLength(o,"utf8");if(a+=c,o=n.type,void 0===o)o="direct";else if(!("string"==typeof o&&t.byteLength(o)<256))throw new TypeError("Field 'type' is the wrong type; must be a string (up to 255 chars)");var l=t.byteLength(o,"utf8");if(a+=l,o=n.arguments,void 0===o)o={};else if("object"!=typeof o)throw new TypeError("Field 'arguments' is the wrong type; must be an object");r=Ct(Ut,o,u);var f=Ut.slice(u,u+r);u+=r,a+=f.length;var h=new t(17+a);if(h[0]=1,h.writeUInt16BE(e,1),h.writeUInt32BE(2621450,7),i=11,o=n.ticket,void 0===o)o=0;else if("number"!=typeof o||isNaN(o))throw new TypeError("Field 'ticket' is the wrong type; must be a number (but not NaN)");return h.writeUInt16BE(o,i),i+=2,o=n.exchange,void 0===o&&(o=void 0),h[i]=c,i++,h.write(o,i,"utf8"),i+=c,o=n.type,void 0===o&&(o="direct"),h[i]=l,i++,h.write(o,i,"utf8"),i+=l,o=n.passive,void 0===o&&(o=!1),o&&(s+=1),o=n.durable,void 0===o&&(o=!1),o&&(s+=2),o=n.autoDelete,void 0===o&&(o=!1),o&&(s+=4),o=n.internal,void 0===o&&(o=!1),o&&(s+=8),o=n.nowait,void 0===o&&(o=!1),o&&(s+=16),h[i]=s,i++,s=0,i+=f.copy(h,i),h[i]=206,h.writeUInt32BE(i-7,3),h}function W(e){var t={};return t}function K(e,n){var r=0,i=0,o=new t(12+i);return o[0]=1,o.writeUInt16BE(e,1),o.writeUInt32BE(2621451,7),r=11,o[r]=206,o.writeUInt32BE(r-7,3),o}function Y(e){var t,n,r=0,i={ticket:void 0,exchange:void 0,ifUnused:void 0,nowait:void 0};return t=e.readUInt16BE(r),r+=2,i.ticket=t,n=e.readUInt8(r),r++,t=e.toString("utf8",r,r+n),r+=n,i.exchange=t,t=!!(1&e[r]),i.ifUnused=t,t=!!(2&e[r]),i.nowait=t,i}function V(e,n){var r=0,i=null,o=0,s=0;if(i=n.exchange,void 0===i)throw new Error("Missing value for mandatory field 'exchange'");if(!("string"==typeof i&&t.byteLength(i)<256))throw new TypeError("Field 'exchange' is the wrong type; must be a string (up to 255 chars)");var a=t.byteLength(i,"utf8");s+=a;var u=new t(16+s);if(u[0]=1,u.writeUInt16BE(e,1),u.writeUInt32BE(2621460,7),r=11,i=n.ticket,void 0===i)i=0;else if("number"!=typeof i||isNaN(i))throw new TypeError("Field 'ticket' is the wrong type; must be a number (but not NaN)");return u.writeUInt16BE(i,r),r+=2,i=n.exchange,void 0===i&&(i=void 0),u[r]=a,r++,u.write(i,r,"utf8"),r+=a,i=n.ifUnused,void 0===i&&(i=!1),i&&(o+=1),i=n.nowait,void 0===i&&(i=!1),i&&(o+=2),u[r]=o,r++,u[r]=206,u.writeUInt32BE(r-7,3),u}function G(e){var t={};return t}function $(e,n){var r=0,i=0,o=new t(12+i);return o[0]=1,o.writeUInt16BE(e,1),o.writeUInt32BE(2621461,7),r=11,o[r]=206,o.writeUInt32BE(r-7,3),o}function X(e){var t,n,r=0,i={ticket:void 0,destination:void 0,source:void 0,routingKey:void 0,nowait:void 0,arguments:void 0};return t=e.readUInt16BE(r),r+=2,i.ticket=t,n=e.readUInt8(r),r++,t=e.toString("utf8",r,r+n),r+=n,i.destination=t,n=e.readUInt8(r),r++,t=e.toString("utf8",r,r+n),r+=n,i.source=t,n=e.readUInt8(r),r++,t=e.toString("utf8",r,r+n),r+=n,i.routingKey=t,t=!!(1&e[r]),i.nowait=t,r++,n=e.readUInt32BE(r),r+=4,t=Tt(e.slice(r,r+n)),r+=n,i.arguments=t,i}function J(e,n){var r,i=0,o=null,s=0,a=0,u=0;if(o=n.destination,void 0===o)throw new Error("Missing value for mandatory field 'destination'");if(!("string"==typeof o&&t.byteLength(o)<256))throw new TypeError("Field 'destination' is the wrong type; must be a string (up to 255 chars)");var c=t.byteLength(o,"utf8");if(a+=c,o=n.source,void 0===o)throw new Error("Missing value for mandatory field 'source'");if(!("string"==typeof o&&t.byteLength(o)<256))throw new TypeError("Field 'source' is the wrong type; must be a string (up to 255 chars)");var l=t.byteLength(o,"utf8");if(a+=l,o=n.routingKey,void 0===o)o="";else if(!("string"==typeof o&&t.byteLength(o)<256))throw new TypeError("Field 'routingKey' is the wrong type; must be a string (up to 255 chars)");var f=t.byteLength(o,"utf8");if(a+=f,o=n.arguments,void 0===o)o={};else if("object"!=typeof o)throw new TypeError("Field 'arguments' is the wrong type; must be an object");r=Ct(Ut,o,u);var h=Ut.slice(u,u+r);u+=r,a+=h.length;var p=new t(18+a);if(p[0]=1,p.writeUInt16BE(e,1),p.writeUInt32BE(2621470,7),i=11,o=n.ticket,void 0===o)o=0;else if("number"!=typeof o||isNaN(o))throw new TypeError("Field 'ticket' is the wrong type; must be a number (but not NaN)");return p.writeUInt16BE(o,i),i+=2,o=n.destination,void 0===o&&(o=void 0),p[i]=c,i++,p.write(o,i,"utf8"),i+=c,o=n.source,void 0===o&&(o=void 0),p[i]=l,i++,p.write(o,i,"utf8"),i+=l,o=n.routingKey,void 0===o&&(o=""),p[i]=f,i++,p.write(o,i,"utf8"),i+=f,o=n.nowait,void 0===o&&(o=!1),o&&(s+=1),p[i]=s,i++,s=0,i+=h.copy(p,i),p[i]=206,p.writeUInt32BE(i-7,3),p}function Z(e){var t={};return t}function ee(e,n){var r=0,i=0,o=new t(12+i);return o[0]=1,o.writeUInt16BE(e,1),o.writeUInt32BE(2621471,7),r=11,o[r]=206,o.writeUInt32BE(r-7,3),o}function te(e){var t,n,r=0,i={ticket:void 0,destination:void 0,source:void 0,routingKey:void 0,nowait:void 0,arguments:void 0};return t=e.readUInt16BE(r),r+=2,i.ticket=t,n=e.readUInt8(r),r++,t=e.toString("utf8",r,r+n),r+=n,i.destination=t,n=e.readUInt8(r),r++,t=e.toString("utf8",r,r+n),r+=n,i.source=t,n=e.readUInt8(r),r++,t=e.toString("utf8",r,r+n),r+=n,i.routingKey=t,t=!!(1&e[r]),i.nowait=t,r++,n=e.readUInt32BE(r),r+=4,t=Tt(e.slice(r,r+n)),r+=n,i.arguments=t,i}function ne(e,n){var r,i=0,o=null,s=0,a=0,u=0;if(o=n.destination,void 0===o)throw new Error("Missing value for mandatory field 'destination'");if(!("string"==typeof o&&t.byteLength(o)<256))throw new TypeError("Field 'destination' is the wrong type; must be a string (up to 255 chars)");var c=t.byteLength(o,"utf8");if(a+=c,o=n.source,void 0===o)throw new Error("Missing value for mandatory field 'source'");if(!("string"==typeof o&&t.byteLength(o)<256))throw new TypeError("Field 'source' is the wrong type; must be a string (up to 255 chars)");var l=t.byteLength(o,"utf8");if(a+=l,o=n.routingKey,void 0===o)o="";else if(!("string"==typeof o&&t.byteLength(o)<256))throw new TypeError("Field 'routingKey' is the wrong type; must be a string (up to 255 chars)");var f=t.byteLength(o,"utf8");if(a+=f,o=n.arguments,void 0===o)o={};else if("object"!=typeof o)throw new TypeError("Field 'arguments' is the wrong type; must be an object");r=Ct(Ut,o,u);var h=Ut.slice(u,u+r);u+=r,a+=h.length;var p=new t(18+a);if(p[0]=1,p.writeUInt16BE(e,1),p.writeUInt32BE(2621480,7),i=11,o=n.ticket,void 0===o)o=0;else if("number"!=typeof o||isNaN(o))throw new TypeError("Field 'ticket' is the wrong type; must be a number (but not NaN)");return p.writeUInt16BE(o,i),i+=2,o=n.destination,void 0===o&&(o=void 0),p[i]=c,i++,p.write(o,i,"utf8"),i+=c,o=n.source,void 0===o&&(o=void 0),p[i]=l,i++,p.write(o,i,"utf8"),i+=l,o=n.routingKey,void 0===o&&(o=""),p[i]=f,i++,p.write(o,i,"utf8"),i+=f,o=n.nowait,void 0===o&&(o=!1),o&&(s+=1),p[i]=s,i++,s=0,i+=h.copy(p,i),p[i]=206,p.writeUInt32BE(i-7,3),p}function re(e){var t={};return t}function ie(e,n){var r=0,i=0,o=new t(12+i);return o[0]=1,o.writeUInt16BE(e,1),o.writeUInt32BE(2621491,7),r=11,o[r]=206,o.writeUInt32BE(r-7,3),o}function oe(e){var t,n,r=0,i={ticket:void 0,queue:void 0,passive:void 0,durable:void 0,exclusive:void 0,autoDelete:void 0,nowait:void 0,arguments:void 0};return t=e.readUInt16BE(r),r+=2,i.ticket=t,n=e.readUInt8(r),r++,t=e.toString("utf8",r,r+n),r+=n,i.queue=t,t=!!(1&e[r]),i.passive=t,t=!!(2&e[r]),i.durable=t,t=!!(4&e[r]),i.exclusive=t,t=!!(8&e[r]),i.autoDelete=t,t=!!(16&e[r]),i.nowait=t,r++,n=e.readUInt32BE(r),r+=4,t=Tt(e.slice(r,r+n)),r+=n,i.arguments=t,i}function se(e,n){var r,i=0,o=null,s=0,a=0,u=0;if(o=n.queue,void 0===o)o="";else if(!("string"==typeof o&&t.byteLength(o)<256))throw new TypeError("Field 'queue' is the wrong type; must be a string (up to 255 chars)");var c=t.byteLength(o,"utf8");if(a+=c,o=n.arguments,void 0===o)o={};else if("object"!=typeof o)throw new TypeError("Field 'arguments' is the wrong type; must be an object");r=Ct(Ut,o,u);var l=Ut.slice(u,u+r);u+=r,a+=l.length;var f=new t(16+a);if(f[0]=1,f.writeUInt16BE(e,1),f.writeUInt32BE(3276810,7),i=11,o=n.ticket,void 0===o)o=0;else if("number"!=typeof o||isNaN(o))throw new TypeError("Field 'ticket' is the wrong type; must be a number (but not NaN)");return f.writeUInt16BE(o,i),i+=2,o=n.queue,void 0===o&&(o=""),f[i]=c,i++,f.write(o,i,"utf8"),i+=c,o=n.passive,void 0===o&&(o=!1),o&&(s+=1),o=n.durable,void 0===o&&(o=!1),o&&(s+=2),o=n.exclusive,void 0===o&&(o=!1),o&&(s+=4),o=n.autoDelete,void 0===o&&(o=!1),o&&(s+=8),o=n.nowait,void 0===o&&(o=!1),o&&(s+=16),f[i]=s,i++,s=0,i+=l.copy(f,i),f[i]=206,f.writeUInt32BE(i-7,3),f}function ae(e){var t,n,r=0,i={queue:void 0,messageCount:void 0,consumerCount:void 0};return n=e.readUInt8(r),r++,t=e.toString("utf8",r,r+n),r+=n,i.queue=t,t=e.readUInt32BE(r),r+=4,i.messageCount=t,t=e.readUInt32BE(r),r+=4,i.consumerCount=t,i}function ue(e,n){var r=0,i=null,o=0;if(i=n.queue,void 0===i)throw new Error("Missing value for mandatory field 'queue'");if(!("string"==typeof i&&t.byteLength(i)<256))throw new TypeError("Field 'queue' is the wrong type; must be a string (up to 255 chars)");var s=t.byteLength(i,"utf8");o+=s;var a=new t(21+o);if(a[0]=1,a.writeUInt16BE(e,1),a.writeUInt32BE(3276811,7),r=11,i=n.queue,void 0===i&&(i=void 0),a[r]=s,r++,a.write(i,r,"utf8"),r+=s,i=n.messageCount,void 0===i)throw new Error("Missing value for mandatory field 'messageCount'");if("number"!=typeof i||isNaN(i))throw new TypeError("Field 'messageCount' is the wrong type; must be a number (but not NaN)");if(a.writeUInt32BE(i,r),r+=4,i=n.consumerCount,void 0===i)throw new Error("Missing value for mandatory field 'consumerCount'");if("number"!=typeof i||isNaN(i))throw new TypeError("Field 'consumerCount' is the wrong type; must be a number (but not NaN)");return a.writeUInt32BE(i,r),r+=4,a[r]=206,a.writeUInt32BE(r-7,3),a}function ce(e){var t,n,r=0,i={ticket:void 0,queue:void 0,exchange:void 0,routingKey:void 0,nowait:void 0,arguments:void 0};return t=e.readUInt16BE(r),r+=2,i.ticket=t,n=e.readUInt8(r),r++,t=e.toString("utf8",r,r+n),r+=n,i.queue=t,n=e.readUInt8(r),r++,t=e.toString("utf8",r,r+n),r+=n,i.exchange=t,n=e.readUInt8(r),r++,t=e.toString("utf8",r,r+n),r+=n,i.routingKey=t,t=!!(1&e[r]),i.nowait=t,r++,n=e.readUInt32BE(r),r+=4,t=Tt(e.slice(r,r+n)),r+=n,i.arguments=t,i}function le(e,n){var r,i=0,o=null,s=0,a=0,u=0;if(o=n.queue,void 0===o)o="";else if(!("string"==typeof o&&t.byteLength(o)<256))throw new TypeError("Field 'queue' is the wrong type; must be a string (up to 255 chars)");var c=t.byteLength(o,"utf8");if(a+=c,o=n.exchange,void 0===o)throw new Error("Missing value for mandatory field 'exchange'");if(!("string"==typeof o&&t.byteLength(o)<256))throw new TypeError("Field 'exchange' is the wrong type; must be a string (up to 255 chars)");var l=t.byteLength(o,"utf8");if(a+=l,o=n.routingKey,void 0===o)o="";else if(!("string"==typeof o&&t.byteLength(o)<256))throw new TypeError("Field 'routingKey' is the wrong type; must be a string (up to 255 chars)");var f=t.byteLength(o,"utf8");if(a+=f,o=n.arguments,void 0===o)o={};else if("object"!=typeof o)throw new TypeError("Field 'arguments' is the wrong type; must be an object");r=Ct(Ut,o,u);var h=Ut.slice(u,u+r);u+=r,a+=h.length;var p=new t(18+a);if(p[0]=1,p.writeUInt16BE(e,1),p.writeUInt32BE(3276820,7),i=11,o=n.ticket,void 0===o)o=0;else if("number"!=typeof o||isNaN(o))throw new TypeError("Field 'ticket' is the wrong type; must be a number (but not NaN)");return p.writeUInt16BE(o,i),i+=2,o=n.queue,void 0===o&&(o=""),p[i]=c,i++,p.write(o,i,"utf8"),i+=c,o=n.exchange,void 0===o&&(o=void 0),p[i]=l,i++,p.write(o,i,"utf8"),i+=l,o=n.routingKey,void 0===o&&(o=""),p[i]=f,i++,p.write(o,i,"utf8"),i+=f,o=n.nowait,void 0===o&&(o=!1),o&&(s+=1),p[i]=s,i++,s=0,i+=h.copy(p,i),p[i]=206,p.writeUInt32BE(i-7,3),p}function fe(e){var t={};return t}function he(e,n){var r=0,i=0,o=new t(12+i);return o[0]=1,o.writeUInt16BE(e,1),o.writeUInt32BE(3276821,7),r=11,o[r]=206,o.writeUInt32BE(r-7,3),o}function pe(e){var t,n,r=0,i={ticket:void 0,queue:void 0,nowait:void 0};return t=e.readUInt16BE(r),r+=2,i.ticket=t,n=e.readUInt8(r),r++,t=e.toString("utf8",r,r+n),r+=n,i.queue=t,t=!!(1&e[r]),i.nowait=t,i}function de(e,n){var r=0,i=null,o=0,s=0;if(i=n.queue,void 0===i)i="";else if(!("string"==typeof i&&t.byteLength(i)<256))throw new TypeError("Field 'queue' is the wrong type; must be a string (up to 255 chars)");var a=t.byteLength(i,"utf8");s+=a;var u=new t(16+s);if(u[0]=1,u.writeUInt16BE(e,1),u.writeUInt32BE(3276830,7),r=11,i=n.ticket,void 0===i)i=0;else if("number"!=typeof i||isNaN(i))throw new TypeError("Field 'ticket' is the wrong type; must be a number (but not NaN)");return u.writeUInt16BE(i,r),r+=2,i=n.queue,void 0===i&&(i=""),u[r]=a,r++,u.write(i,r,"utf8"),r+=a,i=n.nowait,void 0===i&&(i=!1),i&&(o+=1),u[r]=o,r++,u[r]=206,u.writeUInt32BE(r-7,3),u}function ve(e){var t,n=0,r={messageCount:void 0};return t=e.readUInt32BE(n),n+=4,r.messageCount=t,r}function ge(e,n){var r=0,i=null,o=0,s=new t(16+o);if(s[0]=1,s.writeUInt16BE(e,1),s.writeUInt32BE(3276831,7),r=11,i=n.messageCount,void 0===i)throw new Error("Missing value for mandatory field 'messageCount'");if("number"!=typeof i||isNaN(i))throw new TypeError("Field 'messageCount' is the wrong type; must be a number (but not NaN)");return s.writeUInt32BE(i,r),r+=4,s[r]=206,s.writeUInt32BE(r-7,3),s}function ye(e){var t,n,r=0,i={ticket:void 0,queue:void 0,ifUnused:void 0,ifEmpty:void 0,nowait:void 0};return t=e.readUInt16BE(r),r+=2,i.ticket=t,n=e.readUInt8(r),r++,t=e.toString("utf8",r,r+n),r+=n,i.queue=t,t=!!(1&e[r]),i.ifUnused=t,t=!!(2&e[r]),i.ifEmpty=t,t=!!(4&e[r]),i.nowait=t,i}function me(e,n){var r=0,i=null,o=0,s=0;if(i=n.queue,void 0===i)i="";else if(!("string"==typeof i&&t.byteLength(i)<256))throw new TypeError("Field 'queue' is the wrong type; must be a string (up to 255 chars)");var a=t.byteLength(i,"utf8");s+=a;var u=new t(16+s);if(u[0]=1,u.writeUInt16BE(e,1),u.writeUInt32BE(3276840,7),r=11,i=n.ticket,void 0===i)i=0;else if("number"!=typeof i||isNaN(i))throw new TypeError("Field 'ticket' is the wrong type; must be a number (but not NaN)");return u.writeUInt16BE(i,r),r+=2,i=n.queue,void 0===i&&(i=""),u[r]=a,r++,u.write(i,r,"utf8"),r+=a,i=n.ifUnused,void 0===i&&(i=!1),i&&(o+=1),i=n.ifEmpty,void 0===i&&(i=!1),i&&(o+=2),i=n.nowait,void 0===i&&(i=!1),i&&(o+=4),u[r]=o,r++,u[r]=206,u.writeUInt32BE(r-7,3),u}function be(e){var t,n=0,r={messageCount:void 0};return t=e.readUInt32BE(n),n+=4,r.messageCount=t,r}function we(e,n){var r=0,i=null,o=0,s=new t(16+o);if(s[0]=1,s.writeUInt16BE(e,1),s.writeUInt32BE(3276841,7),r=11,i=n.messageCount,void 0===i)throw new Error("Missing value for mandatory field 'messageCount'");if("number"!=typeof i||isNaN(i))throw new TypeError("Field 'messageCount' is the wrong type; must be a number (but not NaN)");return s.writeUInt32BE(i,r),r+=4,s[r]=206,s.writeUInt32BE(r-7,3),s}function _e(e){var t,n,r=0,i={ticket:void 0,queue:void 0,exchange:void 0,routingKey:void 0,arguments:void 0};return t=e.readUInt16BE(r),r+=2,i.ticket=t,n=e.readUInt8(r),r++,t=e.toString("utf8",r,r+n),r+=n,i.queue=t,n=e.readUInt8(r),r++,t=e.toString("utf8",r,r+n),r+=n,i.exchange=t,n=e.readUInt8(r),r++,t=e.toString("utf8",r,r+n),r+=n,i.routingKey=t,n=e.readUInt32BE(r),r+=4,t=Tt(e.slice(r,r+n)),r+=n,i.arguments=t,i}function Ee(e,n){var r,i=0,o=null,s=0,a=0;if(o=n.queue,void 0===o)o="";else if(!("string"==typeof o&&t.byteLength(o)<256))throw new TypeError("Field 'queue' is the wrong type; must be a string (up to 255 chars)");var u=t.byteLength(o,"utf8");if(s+=u,o=n.exchange,void 0===o)throw new Error("Missing value for mandatory field 'exchange'");if(!("string"==typeof o&&t.byteLength(o)<256))throw new TypeError("Field 'exchange' is the wrong type; must be a string (up to 255 chars)");var c=t.byteLength(o,"utf8");if(s+=c,o=n.routingKey,void 0===o)o="";else if(!("string"==typeof o&&t.byteLength(o)<256))throw new TypeError("Field 'routingKey' is the wrong type; must be a string (up to 255 chars)");var l=t.byteLength(o,"utf8");if(s+=l,o=n.arguments,void 0===o)o={};else if("object"!=typeof o)throw new TypeError("Field 'arguments' is the wrong type; must be an object");r=Ct(Ut,o,a);var f=Ut.slice(a,a+r);a+=r,s+=f.length;var h=new t(17+s);if(h[0]=1,h.writeUInt16BE(e,1),h.writeUInt32BE(3276850,7),i=11,o=n.ticket,void 0===o)o=0;else if("number"!=typeof o||isNaN(o))throw new TypeError("Field 'ticket' is the wrong type; must be a number (but not NaN)");
return h.writeUInt16BE(o,i),i+=2,o=n.queue,void 0===o&&(o=""),h[i]=u,i++,h.write(o,i,"utf8"),i+=u,o=n.exchange,void 0===o&&(o=void 0),h[i]=c,i++,h.write(o,i,"utf8"),i+=c,o=n.routingKey,void 0===o&&(o=""),h[i]=l,i++,h.write(o,i,"utf8"),i+=l,i+=f.copy(h,i),h[i]=206,h.writeUInt32BE(i-7,3),h}function xe(e){var t={};return t}function Ie(e,n){var r=0,i=0,o=new t(12+i);return o[0]=1,o.writeUInt16BE(e,1),o.writeUInt32BE(3276851,7),r=11,o[r]=206,o.writeUInt32BE(r-7,3),o}function ke(e){var t,n=0,r={prefetchSize:void 0,prefetchCount:void 0,global:void 0};return t=e.readUInt32BE(n),n+=4,r.prefetchSize=t,t=e.readUInt16BE(n),n+=2,r.prefetchCount=t,t=!!(1&e[n]),r.global=t,r}function Se(e,n){var r=0,i=null,o=0,s=0,a=new t(19+s);if(a[0]=1,a.writeUInt16BE(e,1),a.writeUInt32BE(3932170,7),r=11,i=n.prefetchSize,void 0===i)i=0;else if("number"!=typeof i||isNaN(i))throw new TypeError("Field 'prefetchSize' is the wrong type; must be a number (but not NaN)");if(a.writeUInt32BE(i,r),r+=4,i=n.prefetchCount,void 0===i)i=0;else if("number"!=typeof i||isNaN(i))throw new TypeError("Field 'prefetchCount' is the wrong type; must be a number (but not NaN)");return a.writeUInt16BE(i,r),r+=2,i=n.global,void 0===i&&(i=!1),i&&(o+=1),a[r]=o,r++,a[r]=206,a.writeUInt32BE(r-7,3),a}function Ce(e){var t={};return t}function Te(e,n){var r=0,i=0,o=new t(12+i);return o[0]=1,o.writeUInt16BE(e,1),o.writeUInt32BE(3932171,7),r=11,o[r]=206,o.writeUInt32BE(r-7,3),o}function Ue(e){var t,n,r=0,i={ticket:void 0,queue:void 0,consumerTag:void 0,noLocal:void 0,noAck:void 0,exclusive:void 0,nowait:void 0,arguments:void 0};return t=e.readUInt16BE(r),r+=2,i.ticket=t,n=e.readUInt8(r),r++,t=e.toString("utf8",r,r+n),r+=n,i.queue=t,n=e.readUInt8(r),r++,t=e.toString("utf8",r,r+n),r+=n,i.consumerTag=t,t=!!(1&e[r]),i.noLocal=t,t=!!(2&e[r]),i.noAck=t,t=!!(4&e[r]),i.exclusive=t,t=!!(8&e[r]),i.nowait=t,r++,n=e.readUInt32BE(r),r+=4,t=Tt(e.slice(r,r+n)),r+=n,i.arguments=t,i}function Be(e,n){var r,i=0,o=null,s=0,a=0,u=0;if(o=n.queue,void 0===o)o="";else if(!("string"==typeof o&&t.byteLength(o)<256))throw new TypeError("Field 'queue' is the wrong type; must be a string (up to 255 chars)");var c=t.byteLength(o,"utf8");if(a+=c,o=n.consumerTag,void 0===o)o="";else if(!("string"==typeof o&&t.byteLength(o)<256))throw new TypeError("Field 'consumerTag' is the wrong type; must be a string (up to 255 chars)");var l=t.byteLength(o,"utf8");if(a+=l,o=n.arguments,void 0===o)o={};else if("object"!=typeof o)throw new TypeError("Field 'arguments' is the wrong type; must be an object");r=Ct(Ut,o,u);var f=Ut.slice(u,u+r);u+=r,a+=f.length;var h=new t(17+a);if(h[0]=1,h.writeUInt16BE(e,1),h.writeUInt32BE(3932180,7),i=11,o=n.ticket,void 0===o)o=0;else if("number"!=typeof o||isNaN(o))throw new TypeError("Field 'ticket' is the wrong type; must be a number (but not NaN)");return h.writeUInt16BE(o,i),i+=2,o=n.queue,void 0===o&&(o=""),h[i]=c,i++,h.write(o,i,"utf8"),i+=c,o=n.consumerTag,void 0===o&&(o=""),h[i]=l,i++,h.write(o,i,"utf8"),i+=l,o=n.noLocal,void 0===o&&(o=!1),o&&(s+=1),o=n.noAck,void 0===o&&(o=!1),o&&(s+=2),o=n.exclusive,void 0===o&&(o=!1),o&&(s+=4),o=n.nowait,void 0===o&&(o=!1),o&&(s+=8),h[i]=s,i++,s=0,i+=f.copy(h,i),h[i]=206,h.writeUInt32BE(i-7,3),h}function je(e){var t,n,r=0,i={consumerTag:void 0};return n=e.readUInt8(r),r++,t=e.toString("utf8",r,r+n),r+=n,i.consumerTag=t,i}function Oe(e,n){var r=0,i=null,o=0;if(i=n.consumerTag,void 0===i)throw new Error("Missing value for mandatory field 'consumerTag'");if(!("string"==typeof i&&t.byteLength(i)<256))throw new TypeError("Field 'consumerTag' is the wrong type; must be a string (up to 255 chars)");var s=t.byteLength(i,"utf8");o+=s;var a=new t(13+o);return a[0]=1,a.writeUInt16BE(e,1),a.writeUInt32BE(3932181,7),r=11,i=n.consumerTag,void 0===i&&(i=void 0),a[r]=s,r++,a.write(i,r,"utf8"),r+=s,a[r]=206,a.writeUInt32BE(r-7,3),a}function Ae(e){var t,n,r=0,i={consumerTag:void 0,nowait:void 0};return n=e.readUInt8(r),r++,t=e.toString("utf8",r,r+n),r+=n,i.consumerTag=t,t=!!(1&e[r]),i.nowait=t,i}function Re(e,n){var r=0,i=null,o=0,s=0;if(i=n.consumerTag,void 0===i)throw new Error("Missing value for mandatory field 'consumerTag'");if(!("string"==typeof i&&t.byteLength(i)<256))throw new TypeError("Field 'consumerTag' is the wrong type; must be a string (up to 255 chars)");var a=t.byteLength(i,"utf8");s+=a;var u=new t(14+s);return u[0]=1,u.writeUInt16BE(e,1),u.writeUInt32BE(3932190,7),r=11,i=n.consumerTag,void 0===i&&(i=void 0),u[r]=a,r++,u.write(i,r,"utf8"),r+=a,i=n.nowait,void 0===i&&(i=!1),i&&(o+=1),u[r]=o,r++,u[r]=206,u.writeUInt32BE(r-7,3),u}function Le(e){var t,n,r=0,i={consumerTag:void 0};return n=e.readUInt8(r),r++,t=e.toString("utf8",r,r+n),r+=n,i.consumerTag=t,i}function Me(e,n){var r=0,i=null,o=0;if(i=n.consumerTag,void 0===i)throw new Error("Missing value for mandatory field 'consumerTag'");if(!("string"==typeof i&&t.byteLength(i)<256))throw new TypeError("Field 'consumerTag' is the wrong type; must be a string (up to 255 chars)");var s=t.byteLength(i,"utf8");o+=s;var a=new t(13+o);return a[0]=1,a.writeUInt16BE(e,1),a.writeUInt32BE(3932191,7),r=11,i=n.consumerTag,void 0===i&&(i=void 0),a[r]=s,r++,a.write(i,r,"utf8"),r+=s,a[r]=206,a.writeUInt32BE(r-7,3),a}function Pe(e){var t,n,r=0,i={ticket:void 0,exchange:void 0,routingKey:void 0,mandatory:void 0,immediate:void 0};return t=e.readUInt16BE(r),r+=2,i.ticket=t,n=e.readUInt8(r),r++,t=e.toString("utf8",r,r+n),r+=n,i.exchange=t,n=e.readUInt8(r),r++,t=e.toString("utf8",r,r+n),r+=n,i.routingKey=t,t=!!(1&e[r]),i.mandatory=t,t=!!(2&e[r]),i.immediate=t,i}function Fe(e,n){var r=0,i=null,o=0,s=0;if(i=n.exchange,void 0===i)i="";else if(!("string"==typeof i&&t.byteLength(i)<256))throw new TypeError("Field 'exchange' is the wrong type; must be a string (up to 255 chars)");var a=t.byteLength(i,"utf8");if(s+=a,i=n.routingKey,void 0===i)i="";else if(!("string"==typeof i&&t.byteLength(i)<256))throw new TypeError("Field 'routingKey' is the wrong type; must be a string (up to 255 chars)");var u=t.byteLength(i,"utf8");s+=u;var c=new t(17+s);if(c[0]=1,c.writeUInt16BE(e,1),c.writeUInt32BE(3932200,7),r=11,i=n.ticket,void 0===i)i=0;else if("number"!=typeof i||isNaN(i))throw new TypeError("Field 'ticket' is the wrong type; must be a number (but not NaN)");return c.writeUInt16BE(i,r),r+=2,i=n.exchange,void 0===i&&(i=""),c[r]=a,r++,c.write(i,r,"utf8"),r+=a,i=n.routingKey,void 0===i&&(i=""),c[r]=u,r++,c.write(i,r,"utf8"),r+=u,i=n.mandatory,void 0===i&&(i=!1),i&&(o+=1),i=n.immediate,void 0===i&&(i=!1),i&&(o+=2),c[r]=o,r++,c[r]=206,c.writeUInt32BE(r-7,3),c}function Ne(e){var t,n,r=0,i={replyCode:void 0,replyText:void 0,exchange:void 0,routingKey:void 0};return t=e.readUInt16BE(r),r+=2,i.replyCode=t,n=e.readUInt8(r),r++,t=e.toString("utf8",r,r+n),r+=n,i.replyText=t,n=e.readUInt8(r),r++,t=e.toString("utf8",r,r+n),r+=n,i.exchange=t,n=e.readUInt8(r),r++,t=e.toString("utf8",r,r+n),r+=n,i.routingKey=t,i}function De(e,n){var r=0,i=null,o=0;if(i=n.replyText,void 0===i)i="";else if(!("string"==typeof i&&t.byteLength(i)<256))throw new TypeError("Field 'replyText' is the wrong type; must be a string (up to 255 chars)");var s=t.byteLength(i,"utf8");if(o+=s,i=n.exchange,void 0===i)throw new Error("Missing value for mandatory field 'exchange'");if(!("string"==typeof i&&t.byteLength(i)<256))throw new TypeError("Field 'exchange' is the wrong type; must be a string (up to 255 chars)");var a=t.byteLength(i,"utf8");if(o+=a,i=n.routingKey,void 0===i)throw new Error("Missing value for mandatory field 'routingKey'");if(!("string"==typeof i&&t.byteLength(i)<256))throw new TypeError("Field 'routingKey' is the wrong type; must be a string (up to 255 chars)");var u=t.byteLength(i,"utf8");o+=u;var c=new t(17+o);if(c[0]=1,c.writeUInt16BE(e,1),c.writeUInt32BE(3932210,7),r=11,i=n.replyCode,void 0===i)throw new Error("Missing value for mandatory field 'replyCode'");if("number"!=typeof i||isNaN(i))throw new TypeError("Field 'replyCode' is the wrong type; must be a number (but not NaN)");return c.writeUInt16BE(i,r),r+=2,i=n.replyText,void 0===i&&(i=""),c[r]=s,r++,c.write(i,r,"utf8"),r+=s,i=n.exchange,void 0===i&&(i=void 0),c[r]=a,r++,c.write(i,r,"utf8"),r+=a,i=n.routingKey,void 0===i&&(i=void 0),c[r]=u,r++,c.write(i,r,"utf8"),r+=u,c[r]=206,c.writeUInt32BE(r-7,3),c}function qe(e){var t,n,r=0,i={consumerTag:void 0,deliveryTag:void 0,redelivered:void 0,exchange:void 0,routingKey:void 0};return n=e.readUInt8(r),r++,t=e.toString("utf8",r,r+n),r+=n,i.consumerTag=t,t=St.readUInt64BE(e,r),r+=8,i.deliveryTag=t,t=!!(1&e[r]),i.redelivered=t,r++,n=e.readUInt8(r),r++,t=e.toString("utf8",r,r+n),r+=n,i.exchange=t,n=e.readUInt8(r),r++,t=e.toString("utf8",r,r+n),r+=n,i.routingKey=t,i}function ze(e,n){var r=0,i=null,o=0,s=0;if(i=n.consumerTag,void 0===i)throw new Error("Missing value for mandatory field 'consumerTag'");if(!("string"==typeof i&&t.byteLength(i)<256))throw new TypeError("Field 'consumerTag' is the wrong type; must be a string (up to 255 chars)");var a=t.byteLength(i,"utf8");if(s+=a,i=n.exchange,void 0===i)throw new Error("Missing value for mandatory field 'exchange'");if(!("string"==typeof i&&t.byteLength(i)<256))throw new TypeError("Field 'exchange' is the wrong type; must be a string (up to 255 chars)");var u=t.byteLength(i,"utf8");if(s+=u,i=n.routingKey,void 0===i)throw new Error("Missing value for mandatory field 'routingKey'");if(!("string"==typeof i&&t.byteLength(i)<256))throw new TypeError("Field 'routingKey' is the wrong type; must be a string (up to 255 chars)");var c=t.byteLength(i,"utf8");s+=c;var l=new t(24+s);if(l[0]=1,l.writeUInt16BE(e,1),l.writeUInt32BE(3932220,7),r=11,i=n.consumerTag,void 0===i&&(i=void 0),l[r]=a,r++,l.write(i,r,"utf8"),r+=a,i=n.deliveryTag,void 0===i)throw new Error("Missing value for mandatory field 'deliveryTag'");if("number"!=typeof i||isNaN(i))throw new TypeError("Field 'deliveryTag' is the wrong type; must be a number (but not NaN)");return St.writeUInt64BE(l,i,r),r+=8,i=n.redelivered,void 0===i&&(i=!1),i&&(o+=1),l[r]=o,r++,o=0,i=n.exchange,void 0===i&&(i=void 0),l[r]=u,r++,l.write(i,r,"utf8"),r+=u,i=n.routingKey,void 0===i&&(i=void 0),l[r]=c,r++,l.write(i,r,"utf8"),r+=c,l[r]=206,l.writeUInt32BE(r-7,3),l}function He(e){var t,n,r=0,i={ticket:void 0,queue:void 0,noAck:void 0};return t=e.readUInt16BE(r),r+=2,i.ticket=t,n=e.readUInt8(r),r++,t=e.toString("utf8",r,r+n),r+=n,i.queue=t,t=!!(1&e[r]),i.noAck=t,i}function Qe(e,n){var r=0,i=null,o=0,s=0;if(i=n.queue,void 0===i)i="";else if(!("string"==typeof i&&t.byteLength(i)<256))throw new TypeError("Field 'queue' is the wrong type; must be a string (up to 255 chars)");var a=t.byteLength(i,"utf8");s+=a;var u=new t(16+s);if(u[0]=1,u.writeUInt16BE(e,1),u.writeUInt32BE(3932230,7),r=11,i=n.ticket,void 0===i)i=0;else if("number"!=typeof i||isNaN(i))throw new TypeError("Field 'ticket' is the wrong type; must be a number (but not NaN)");return u.writeUInt16BE(i,r),r+=2,i=n.queue,void 0===i&&(i=""),u[r]=a,r++,u.write(i,r,"utf8"),r+=a,i=n.noAck,void 0===i&&(i=!1),i&&(o+=1),u[r]=o,r++,u[r]=206,u.writeUInt32BE(r-7,3),u}function We(e){var t,n,r=0,i={deliveryTag:void 0,redelivered:void 0,exchange:void 0,routingKey:void 0,messageCount:void 0};return t=St.readUInt64BE(e,r),r+=8,i.deliveryTag=t,t=!!(1&e[r]),i.redelivered=t,r++,n=e.readUInt8(r),r++,t=e.toString("utf8",r,r+n),r+=n,i.exchange=t,n=e.readUInt8(r),r++,t=e.toString("utf8",r,r+n),r+=n,i.routingKey=t,t=e.readUInt32BE(r),r+=4,i.messageCount=t,i}function Ke(e,n){var r=0,i=null,o=0,s=0;if(i=n.exchange,void 0===i)throw new Error("Missing value for mandatory field 'exchange'");if(!("string"==typeof i&&t.byteLength(i)<256))throw new TypeError("Field 'exchange' is the wrong type; must be a string (up to 255 chars)");var a=t.byteLength(i,"utf8");if(s+=a,i=n.routingKey,void 0===i)throw new Error("Missing value for mandatory field 'routingKey'");if(!("string"==typeof i&&t.byteLength(i)<256))throw new TypeError("Field 'routingKey' is the wrong type; must be a string (up to 255 chars)");var u=t.byteLength(i,"utf8");s+=u;var c=new t(27+s);if(c[0]=1,c.writeUInt16BE(e,1),c.writeUInt32BE(3932231,7),r=11,i=n.deliveryTag,void 0===i)throw new Error("Missing value for mandatory field 'deliveryTag'");if("number"!=typeof i||isNaN(i))throw new TypeError("Field 'deliveryTag' is the wrong type; must be a number (but not NaN)");if(St.writeUInt64BE(c,i,r),r+=8,i=n.redelivered,void 0===i&&(i=!1),i&&(o+=1),c[r]=o,r++,o=0,i=n.exchange,void 0===i&&(i=void 0),c[r]=a,r++,c.write(i,r,"utf8"),r+=a,i=n.routingKey,void 0===i&&(i=void 0),c[r]=u,r++,c.write(i,r,"utf8"),r+=u,i=n.messageCount,void 0===i)throw new Error("Missing value for mandatory field 'messageCount'");if("number"!=typeof i||isNaN(i))throw new TypeError("Field 'messageCount' is the wrong type; must be a number (but not NaN)");return c.writeUInt32BE(i,r),r+=4,c[r]=206,c.writeUInt32BE(r-7,3),c}function Ye(e){var t,n,r=0,i={clusterId:void 0};return n=e.readUInt8(r),r++,t=e.toString("utf8",r,r+n),r+=n,i.clusterId=t,i}function Ve(e,n){var r=0,i=null,o=0;if(i=n.clusterId,void 0===i)i="";else if(!("string"==typeof i&&t.byteLength(i)<256))throw new TypeError("Field 'clusterId' is the wrong type; must be a string (up to 255 chars)");var s=t.byteLength(i,"utf8");o+=s;var a=new t(13+o);return a[0]=1,a.writeUInt16BE(e,1),a.writeUInt32BE(3932232,7),r=11,i=n.clusterId,void 0===i&&(i=""),a[r]=s,r++,a.write(i,r,"utf8"),r+=s,a[r]=206,a.writeUInt32BE(r-7,3),a}function Ge(e){var t,n=0,r={deliveryTag:void 0,multiple:void 0};return t=St.readUInt64BE(e,n),n+=8,r.deliveryTag=t,t=!!(1&e[n]),r.multiple=t,r}function $e(e,n){var r=0,i=null,o=0,s=0,a=new t(21+s);if(a[0]=1,a.writeUInt16BE(e,1),a.writeUInt32BE(3932240,7),r=11,i=n.deliveryTag,void 0===i)i=0;else if("number"!=typeof i||isNaN(i))throw new TypeError("Field 'deliveryTag' is the wrong type; must be a number (but not NaN)");return St.writeUInt64BE(a,i,r),r+=8,i=n.multiple,void 0===i&&(i=!1),i&&(o+=1),a[r]=o,r++,a[r]=206,a.writeUInt32BE(r-7,3),a}function Xe(e){var t,n=0,r={deliveryTag:void 0,requeue:void 0};return t=St.readUInt64BE(e,n),n+=8,r.deliveryTag=t,t=!!(1&e[n]),r.requeue=t,r}function Je(e,n){var r=0,i=null,o=0,s=0,a=new t(21+s);if(a[0]=1,a.writeUInt16BE(e,1),a.writeUInt32BE(3932250,7),r=11,i=n.deliveryTag,void 0===i)throw new Error("Missing value for mandatory field 'deliveryTag'");if("number"!=typeof i||isNaN(i))throw new TypeError("Field 'deliveryTag' is the wrong type; must be a number (but not NaN)");return St.writeUInt64BE(a,i,r),r+=8,i=n.requeue,void 0===i&&(i=!0),i&&(o+=1),a[r]=o,r++,a[r]=206,a.writeUInt32BE(r-7,3),a}function Ze(e){var t,n=0,r={requeue:void 0};return t=!!(1&e[n]),r.requeue=t,r}function et(e,n){var r=0,i=null,o=0,s=0,a=new t(13+s);return a[0]=1,a.writeUInt16BE(e,1),a.writeUInt32BE(3932260,7),r=11,i=n.requeue,void 0===i&&(i=!1),i&&(o+=1),a[r]=o,r++,a[r]=206,a.writeUInt32BE(r-7,3),a}function tt(e){var t,n=0,r={requeue:void 0};return t=!!(1&e[n]),r.requeue=t,r}function nt(e,n){var r=0,i=null,o=0,s=0,a=new t(13+s);return a[0]=1,a.writeUInt16BE(e,1),a.writeUInt32BE(3932270,7),r=11,i=n.requeue,void 0===i&&(i=!1),i&&(o+=1),a[r]=o,r++,a[r]=206,a.writeUInt32BE(r-7,3),a}function rt(e){var t={};return t}function it(e,n){var r=0,i=0,o=new t(12+i);return o[0]=1,o.writeUInt16BE(e,1),o.writeUInt32BE(3932271,7),r=11,o[r]=206,o.writeUInt32BE(r-7,3),o}function ot(e){var t,n=0,r={deliveryTag:void 0,multiple:void 0,requeue:void 0};return t=St.readUInt64BE(e,n),n+=8,r.deliveryTag=t,t=!!(1&e[n]),r.multiple=t,t=!!(2&e[n]),r.requeue=t,r}function st(e,n){var r=0,i=null,o=0,s=0,a=new t(21+s);if(a[0]=1,a.writeUInt16BE(e,1),a.writeUInt32BE(3932280,7),r=11,i=n.deliveryTag,void 0===i)i=0;else if("number"!=typeof i||isNaN(i))throw new TypeError("Field 'deliveryTag' is the wrong type; must be a number (but not NaN)");return St.writeUInt64BE(a,i,r),r+=8,i=n.multiple,void 0===i&&(i=!1),i&&(o+=1),i=n.requeue,void 0===i&&(i=!0),i&&(o+=2),a[r]=o,r++,a[r]=206,a.writeUInt32BE(r-7,3),a}function at(e){var t={};return t}function ut(e,n){var r=0,i=0,o=new t(12+i);return o[0]=1,o.writeUInt16BE(e,1),o.writeUInt32BE(5898250,7),r=11,o[r]=206,o.writeUInt32BE(r-7,3),o}function ct(e){var t={};return t}function lt(e,n){var r=0,i=0,o=new t(12+i);return o[0]=1,o.writeUInt16BE(e,1),o.writeUInt32BE(5898251,7),r=11,o[r]=206,o.writeUInt32BE(r-7,3),o}function ft(e){var t={};return t}function ht(e,n){var r=0,i=0,o=new t(12+i);return o[0]=1,o.writeUInt16BE(e,1),o.writeUInt32BE(5898260,7),r=11,o[r]=206,o.writeUInt32BE(r-7,3),o}function pt(e){var t={};return t}function dt(e,n){var r=0,i=0,o=new t(12+i);return o[0]=1,o.writeUInt16BE(e,1),o.writeUInt32BE(5898261,7),r=11,o[r]=206,o.writeUInt32BE(r-7,3),o}function vt(e){var t={};return t}function gt(e,n){var r=0,i=0,o=new t(12+i);return o[0]=1,o.writeUInt16BE(e,1),o.writeUInt32BE(5898270,7),r=11,o[r]=206,o.writeUInt32BE(r-7,3),o}function yt(e){var t={};return t}function mt(e,n){var r=0,i=0,o=new t(12+i);return o[0]=1,o.writeUInt16BE(e,1),o.writeUInt32BE(5898271,7),r=11,o[r]=206,o.writeUInt32BE(r-7,3),o}function bt(e){var t,n=0,r={nowait:void 0};return t=!!(1&e[n]),r.nowait=t,r}function wt(e,n){var r=0,i=null,o=0,s=0,a=new t(13+s);return a[0]=1,a.writeUInt16BE(e,1),a.writeUInt32BE(5570570,7),r=11,i=n.nowait,void 0===i&&(i=!1),i&&(o+=1),a[r]=o,r++,a[r]=206,a.writeUInt32BE(r-7,3),a}function _t(e){var t={};return t}function Et(e,n){var r=0,i=0,o=new t(12+i);return o[0]=1,o.writeUInt16BE(e,1),o.writeUInt32BE(5570571,7),r=11,o[r]=206,o.writeUInt32BE(r-7,3),o}function xt(e,n,r){var i,o,s=0,a=0,u=0,c=0;if(i=r.contentType,void 0!=i){if(!("string"==typeof i&&t.byteLength(i)<256))throw new TypeError("Field 'contentType' is the wrong type; must be a string (up to 255 chars)");var l=t.byteLength(i,"utf8");c+=1,c+=l}if(i=r.contentEncoding,void 0!=i){if(!("string"==typeof i&&t.byteLength(i)<256))throw new TypeError("Field 'contentEncoding' is the wrong type; must be a string (up to 255 chars)");var f=t.byteLength(i,"utf8");c+=1,c+=f}if(i=r.headers,void 0!=i){if("object"!=typeof i)throw new TypeError("Field 'headers' is the wrong type; must be an object");o=Ct(Ut,i,u);var h=Ut.slice(u,u+o);u+=o,c+=h.length}if(i=r.deliveryMode,void 0!=i){if("number"!=typeof i||isNaN(i))throw new TypeError("Field 'deliveryMode' is the wrong type; must be a number (but not NaN)");c+=1}if(i=r.priority,void 0!=i){if("number"!=typeof i||isNaN(i))throw new TypeError("Field 'priority' is the wrong type; must be a number (but not NaN)");c+=1}if(i=r.correlationId,void 0!=i){if(!("string"==typeof i&&t.byteLength(i)<256))throw new TypeError("Field 'correlationId' is the wrong type; must be a string (up to 255 chars)");var p=t.byteLength(i,"utf8");c+=1,c+=p}if(i=r.replyTo,void 0!=i){if(!("string"==typeof i&&t.byteLength(i)<256))throw new TypeError("Field 'replyTo' is the wrong type; must be a string (up to 255 chars)");var d=t.byteLength(i,"utf8");c+=1,c+=d}if(i=r.expiration,void 0!=i){if(!("string"==typeof i&&t.byteLength(i)<256))throw new TypeError("Field 'expiration' is the wrong type; must be a string (up to 255 chars)");var v=t.byteLength(i,"utf8");c+=1,c+=v}if(i=r.messageId,void 0!=i){if(!("string"==typeof i&&t.byteLength(i)<256))throw new TypeError("Field 'messageId' is the wrong type; must be a string (up to 255 chars)");var g=t.byteLength(i,"utf8");c+=1,c+=g}if(i=r.timestamp,void 0!=i){if("number"!=typeof i||isNaN(i))throw new TypeError("Field 'timestamp' is the wrong type; must be a number (but not NaN)");c+=8}if(i=r.type,void 0!=i){if(!("string"==typeof i&&t.byteLength(i)<256))throw new TypeError("Field 'type' is the wrong type; must be a string (up to 255 chars)");var y=t.byteLength(i,"utf8");c+=1,c+=y}if(i=r.userId,void 0!=i){if(!("string"==typeof i&&t.byteLength(i)<256))throw new TypeError("Field 'userId' is the wrong type; must be a string (up to 255 chars)");var m=t.byteLength(i,"utf8");c+=1,c+=m}if(i=r.appId,void 0!=i){if(!("string"==typeof i&&t.byteLength(i)<256))throw new TypeError("Field 'appId' is the wrong type; must be a string (up to 255 chars)");var b=t.byteLength(i,"utf8");c+=1,c+=b}if(i=r.clusterId,void 0!=i){if(!("string"==typeof i&&t.byteLength(i)<256))throw new TypeError("Field 'clusterId' is the wrong type; must be a string (up to 255 chars)");var w=t.byteLength(i,"utf8");c+=1,c+=w}var _=new t(22+c);return _[0]=2,_.writeUInt16BE(e,1),_.writeUInt32BE(3932160,7),St.writeUInt64BE(_,n,11),a=0,s=21,i=r.contentType,void 0!=i&&(a+=32768,_[s]=l,s++,_.write(i,s,"utf8"),s+=l),i=r.contentEncoding,void 0!=i&&(a+=16384,_[s]=f,s++,_.write(i,s,"utf8"),s+=f),i=r.headers,void 0!=i&&(a+=8192,s+=h.copy(_,s)),i=r.deliveryMode,void 0!=i&&(a+=4096,_.writeUInt8(i,s),s++),i=r.priority,void 0!=i&&(a+=2048,_.writeUInt8(i,s),s++),i=r.correlationId,void 0!=i&&(a+=1024,_[s]=p,s++,_.write(i,s,"utf8"),s+=p),i=r.replyTo,void 0!=i&&(a+=512,_[s]=d,s++,_.write(i,s,"utf8"),s+=d),i=r.expiration,void 0!=i&&(a+=256,_[s]=v,s++,_.write(i,s,"utf8"),s+=v),i=r.messageId,void 0!=i&&(a+=128,_[s]=g,s++,_.write(i,s,"utf8"),s+=g),i=r.timestamp,void 0!=i&&(a+=64,St.writeUInt64BE(_,i,s),s+=8),i=r.type,void 0!=i&&(a+=32,_[s]=y,s++,_.write(i,s,"utf8"),s+=y),i=r.userId,void 0!=i&&(a+=16,_[s]=m,s++,_.write(i,s,"utf8"),s+=m),i=r.appId,void 0!=i&&(a+=8,_[s]=b,s++,_.write(i,s,"utf8"),s+=b),i=r.clusterId,void 0!=i&&(a+=4,_[s]=w,s++,_.write(i,s,"utf8"),s+=w),_[s]=206,_.writeUInt32BE(s-7,3),_.writeUInt16BE(a,19),_.slice(0,s+1)}function It(e){var t,n,r,i=2;if(t=e.readUInt16BE(0),0===t)return{};var o={contentType:void 0,contentEncoding:void 0,headers:void 0,deliveryMode:void 0,priority:void 0,correlationId:void 0,replyTo:void 0,expiration:void 0,messageId:void 0,timestamp:void 0,type:void 0,userId:void 0,appId:void 0,clusterId:void 0};return 32768&t&&(r=e.readUInt8(i),i++,n=e.toString("utf8",i,i+r),i+=r,o.contentType=n),16384&t&&(r=e.readUInt8(i),i++,n=e.toString("utf8",i,i+r),i+=r,o.contentEncoding=n),8192&t&&(r=e.readUInt32BE(i),i+=4,n=Tt(e.slice(i,i+r)),i+=r,o.headers=n),4096&t&&(n=e[i],i++,o.deliveryMode=n),2048&t&&(n=e[i],i++,o.priority=n),1024&t&&(r=e.readUInt8(i),i++,n=e.toString("utf8",i,i+r),i+=r,o.correlationId=n),512&t&&(r=e.readUInt8(i),i++,n=e.toString("utf8",i,i+r),i+=r,o.replyTo=n),256&t&&(r=e.readUInt8(i),i++,n=e.toString("utf8",i,i+r),i+=r,o.expiration=n),128&t&&(r=e.readUInt8(i),i++,n=e.toString("utf8",i,i+r),i+=r,o.messageId=n),64&t&&(n=St.readUInt64BE(e,i),i+=8,o.timestamp=n),32&t&&(r=e.readUInt8(i),i++,n=e.toString("utf8",i,i+r),i+=r,o.type=n),16&t&&(r=e.readUInt8(i),i++,n=e.toString("utf8",i,i+r),i+=r,o.userId=n),8&t&&(r=e.readUInt8(i),i++,n=e.toString("utf8",i,i+r),i+=r,o.appId=n),4&t&&(r=e.readUInt8(i),i++,n=e.toString("utf8",i,i+r),i+=r,o.clusterId=n),o}var kt=n(70),St=n(71),Ct=kt.encodeTable,Tt=kt.decodeFields,Ut=new t(4096);Object.freeze({});e.exports.constants={FRAME_METHOD:1,FRAME_HEADER:2,FRAME_BODY:3,FRAME_HEARTBEAT:8,FRAME_MIN_SIZE:4096,FRAME_END:206,REPLY_SUCCESS:200,CONTENT_TOO_LARGE:311,NO_ROUTE:312,NO_CONSUMERS:313,ACCESS_REFUSED:403,NOT_FOUND:404,RESOURCE_LOCKED:405,PRECONDITION_FAILED:406,CONNECTION_FORCED:320,INVALID_PATH:402,FRAME_ERROR:501,SYNTAX_ERROR:502,COMMAND_INVALID:503,CHANNEL_ERROR:504,UNEXPECTED_FRAME:505,RESOURCE_ERROR:506,NOT_ALLOWED:530,NOT_IMPLEMENTED:540,INTERNAL_ERROR:541},e.exports.constant_strs={1:"FRAME-METHOD",2:"FRAME-HEADER",3:"FRAME-BODY",8:"FRAME-HEARTBEAT",200:"REPLY-SUCCESS",206:"FRAME-END",311:"CONTENT-TOO-LARGE",312:"NO-ROUTE",313:"NO-CONSUMERS",320:"CONNECTION-FORCED",402:"INVALID-PATH",403:"ACCESS-REFUSED",404:"NOT-FOUND",405:"RESOURCE-LOCKED",406:"PRECONDITION-FAILED",501:"FRAME-ERROR",502:"SYNTAX-ERROR",503:"COMMAND-INVALID",504:"CHANNEL-ERROR",505:"UNEXPECTED-FRAME",506:"RESOURCE-ERROR",530:"NOT-ALLOWED",540:"NOT-IMPLEMENTED",541:"INTERNAL-ERROR",4096:"FRAME-MIN-SIZE"},e.exports.FRAME_OVERHEAD=8,e.exports.decode=function(e,t){switch(e){case 655370:return r(t);case 655371:return o(t);case 655380:return a(t);case 655381:return c(t);case 655390:return f(t);case 655391:return p(t);case 655400:return v(t);case 655401:return y(t);case 655410:return b(t);case 655411:return _(t);case 655420:return x(t);case 655421:return k(t);case 1310730:return C(t);case 1310731:return U(t);case 1310740:return j(t);case 1310741:return A(t);case 1310760:return L(t);case 1310761:return P(t);case 1966090:return N(t);case 1966091:return q(t);case 2621450:return H(t);case 2621451:return W(t);case 2621460:return Y(t);case 2621461:return G(t);case 2621470:return X(t);case 2621471:return Z(t);case 2621480:return te(t);case 2621491:return re(t);case 3276810:return oe(t);case 3276811:return ae(t);case 3276820:return ce(t);case 3276821:return fe(t);case 3276830:return pe(t);case 3276831:return ve(t);case 3276840:return ye(t);case 3276841:return be(t);case 3276850:return _e(t);case 3276851:return xe(t);case 3932170:return ke(t);case 3932171:return Ce(t);case 3932180:return Ue(t);case 3932181:return je(t);case 3932190:return Ae(t);case 3932191:return Le(t);case 3932200:return Pe(t);case 3932210:return Ne(t);case 3932220:return qe(t);case 3932230:return He(t);case 3932231:return We(t);case 3932232:return Ye(t);case 3932240:return Ge(t);case 3932250:return Xe(t);case 3932260:return Ze(t);case 3932270:return tt(t);case 3932271:return rt(t);case 3932280:return ot(t);case 5898250:return at(t);case 5898251:return ct(t);case 5898260:return ft(t);case 5898261:return pt(t);case 5898270:return vt(t);case 5898271:return yt(t);case 5570570:return bt(t);case 5570571:return _t(t);case 60:return It(t);default:throw new Error("Unknown class/method ID")}},e.exports.encodeMethod=function(e,t,n){switch(e){case 655370:return i(t,n);case 655371:return s(t,n);case 655380:return u(t,n);case 655381:return l(t,n);case 655390:return h(t,n);case 655391:return d(t,n);case 655400:return g(t,n);case 655401:return m(t,n);case 655410:return w(t,n);case 655411:return E(t,n);case 655420:return I(t,n);case 655421:return S(t,n);case 1310730:return T(t,n);case 1310731:return B(t,n);case 1310740:return O(t,n);case 1310741:return R(t,n);case 1310760:return M(t,n);case 1310761:return F(t,n);case 1966090:return D(t,n);case 1966091:return z(t,n);case 2621450:return Q(t,n);case 2621451:return K(t,n);case 2621460:return V(t,n);case 2621461:return $(t,n);case 2621470:return J(t,n);case 2621471:return ee(t,n);case 2621480:return ne(t,n);case 2621491:return ie(t,n);case 3276810:return se(t,n);case 3276811:return ue(t,n);case 3276820:return le(t,n);case 3276821:return he(t,n);case 3276830:return de(t,n);case 3276831:return ge(t,n);case 3276840:return me(t,n);case 3276841:return we(t,n);case 3276850:return Ee(t,n);case 3276851:return Ie(t,n);case 3932170:return Se(t,n);case 3932171:return Te(t,n);case 3932180:return Be(t,n);case 3932181:return Oe(t,n);case 3932190:return Re(t,n);case 3932191:return Me(t,n);case 3932200:return Fe(t,n);case 3932210:return De(t,n);case 3932220:return ze(t,n);case 3932230:return Qe(t,n);case 3932231:return Ke(t,n);case 3932232:return Ve(t,n);case 3932240:return $e(t,n);case 3932250:return Je(t,n);case 3932260:return et(t,n);case 3932270:return nt(t,n);case 3932271:return it(t,n);case 3932280:return st(t,n);case 5898250:return ut(t,n);case 5898251:return lt(t,n);case 5898260:return ht(t,n);case 5898261:return dt(t,n);case 5898270:return gt(t,n);case 5898271:return mt(t,n);case 5570570:return wt(t,n);case 5570571:return Et(t,n);default:throw new Error("Unknown class/method ID")}},e.exports.encodeProperties=function(e,t,n,r){switch(e){case 60:return xt(t,n,r);default:throw new Error("Unknown class/properties ID")}},e.exports.info=function(e){switch(e){case 655370:return Bt;case 655371:return jt;case 655380:return Ot;case 655381:return At;case 655390:return Rt;case 655391:return Lt;case 655400:return Mt;case 655401:return Pt;case 655410:return Ft;case 655411:return Nt;case 655420:return Dt;case 655421:return qt;case 1310730:return zt;case 1310731:return Ht;case 1310740:return Qt;case 1310741:return Wt;case 1310760:return Kt;case 1310761:return Yt;case 1966090:return Vt;case 1966091:return Gt;case 2621450:return $t;case 2621451:return Xt;case 2621460:return Jt;case 2621461:return Zt;case 2621470:return en;case 2621471:return tn;case 2621480:return nn;case 2621491:return rn;case 3276810:return on;case 3276811:return sn;case 3276820:return an;case 3276821:return un;case 3276830:return cn;case 3276831:return ln;case 3276840:return fn;case 3276841:return hn;case 3276850:return pn;case 3276851:return dn;case 3932170:return vn;case 3932171:return gn;case 3932180:return yn;case 3932181:return mn;case 3932190:return bn;case 3932191:return wn;case 3932200:return _n;case 3932210:return En;case 3932220:return xn;case 3932230:return In;case 3932231:return kn;case 3932232:return Sn;case 3932240:return Cn;case 3932250:return Tn;case 3932260:return Un;case 3932270:return Bn;case 3932271:return jn;case 3932280:return On;case 5898250:return An;case 5898251:return Rn;case 5898260:return Ln;case 5898261:return Mn;case 5898270:return Pn;case 5898271:return Fn;case 5570570:return Nn;case 5570571:return Dn;case 60:return qn;default:throw new Error("Unknown class/method ID")}},e.exports.ConnectionStart=655370;var Bt=e.exports.methodInfoConnectionStart={id:655370,name:"ConnectionStart",args:[{type:"octet",name:"versionMajor","default":0},{type:"octet",name:"versionMinor","default":9},{type:"table",name:"serverProperties"},{type:"longstr",name:"mechanisms","default":"PLAIN"},{type:"longstr",name:"locales","default":"en_US"}]};e.exports.ConnectionStartOk=655371;var jt=e.exports.methodInfoConnectionStartOk={id:655371,name:"ConnectionStartOk",args:[{type:"table",name:"clientProperties"},{type:"shortstr",name:"mechanism","default":"PLAIN"},{type:"longstr",name:"response"},{type:"shortstr",name:"locale","default":"en_US"}]};e.exports.ConnectionSecure=655380;var Ot=e.exports.methodInfoConnectionSecure={id:655380,name:"ConnectionSecure",args:[{type:"longstr",name:"challenge"}]};e.exports.ConnectionSecureOk=655381;var At=e.exports.methodInfoConnectionSecureOk={id:655381,name:"ConnectionSecureOk",args:[{type:"longstr",name:"response"}]};e.exports.ConnectionTune=655390;var Rt=e.exports.methodInfoConnectionTune={id:655390,name:"ConnectionTune",args:[{type:"short",name:"channelMax","default":0},{type:"long",name:"frameMax","default":0},{type:"short",name:"heartbeat","default":0}]};e.exports.ConnectionTuneOk=655391;var Lt=e.exports.methodInfoConnectionTuneOk={id:655391,name:"ConnectionTuneOk",args:[{type:"short",name:"channelMax","default":0},{type:"long",name:"frameMax","default":0},{type:"short",name:"heartbeat","default":0}]};e.exports.ConnectionOpen=655400;var Mt=e.exports.methodInfoConnectionOpen={id:655400,name:"ConnectionOpen",args:[{type:"shortstr",name:"virtualHost","default":"/"},{type:"shortstr",name:"capabilities","default":""},{type:"bit",name:"insist","default":!1}]};e.exports.ConnectionOpenOk=655401;var Pt=e.exports.methodInfoConnectionOpenOk={id:655401,name:"ConnectionOpenOk",args:[{type:"shortstr",name:"knownHosts","default":""}]};e.exports.ConnectionClose=655410;var Ft=e.exports.methodInfoConnectionClose={id:655410,name:"ConnectionClose",args:[{type:"short",name:"replyCode"},{type:"shortstr",name:"replyText","default":""},{type:"short",name:"classId"},{type:"short",name:"methodId"}]};e.exports.ConnectionCloseOk=655411;var Nt=e.exports.methodInfoConnectionCloseOk={id:655411,name:"ConnectionCloseOk",args:[]};e.exports.ConnectionBlocked=655420;var Dt=e.exports.methodInfoConnectionBlocked={id:655420,name:"ConnectionBlocked",args:[{type:"shortstr",name:"reason","default":""}]};e.exports.ConnectionUnblocked=655421;var qt=e.exports.methodInfoConnectionUnblocked={id:655421,name:"ConnectionUnblocked",args:[]};e.exports.ChannelOpen=1310730;var zt=e.exports.methodInfoChannelOpen={id:1310730,name:"ChannelOpen",args:[{type:"shortstr",name:"outOfBand","default":""}]};e.exports.ChannelOpenOk=1310731;var Ht=e.exports.methodInfoChannelOpenOk={id:1310731,name:"ChannelOpenOk",args:[{type:"longstr",name:"channelId","default":""}]};e.exports.ChannelFlow=1310740;var Qt=e.exports.methodInfoChannelFlow={id:1310740,name:"ChannelFlow",args:[{type:"bit",name:"active"
}]};e.exports.ChannelFlowOk=1310741;var Wt=e.exports.methodInfoChannelFlowOk={id:1310741,name:"ChannelFlowOk",args:[{type:"bit",name:"active"}]};e.exports.ChannelClose=1310760;var Kt=e.exports.methodInfoChannelClose={id:1310760,name:"ChannelClose",args:[{type:"short",name:"replyCode"},{type:"shortstr",name:"replyText","default":""},{type:"short",name:"classId"},{type:"short",name:"methodId"}]};e.exports.ChannelCloseOk=1310761;var Yt=e.exports.methodInfoChannelCloseOk={id:1310761,name:"ChannelCloseOk",args:[]};e.exports.AccessRequest=1966090;var Vt=e.exports.methodInfoAccessRequest={id:1966090,name:"AccessRequest",args:[{type:"shortstr",name:"realm","default":"/data"},{type:"bit",name:"exclusive","default":!1},{type:"bit",name:"passive","default":!0},{type:"bit",name:"active","default":!0},{type:"bit",name:"write","default":!0},{type:"bit",name:"read","default":!0}]};e.exports.AccessRequestOk=1966091;var Gt=e.exports.methodInfoAccessRequestOk={id:1966091,name:"AccessRequestOk",args:[{type:"short",name:"ticket","default":1}]};e.exports.ExchangeDeclare=2621450;var $t=e.exports.methodInfoExchangeDeclare={id:2621450,name:"ExchangeDeclare",args:[{type:"short",name:"ticket","default":0},{type:"shortstr",name:"exchange"},{type:"shortstr",name:"type","default":"direct"},{type:"bit",name:"passive","default":!1},{type:"bit",name:"durable","default":!1},{type:"bit",name:"autoDelete","default":!1},{type:"bit",name:"internal","default":!1},{type:"bit",name:"nowait","default":!1},{type:"table",name:"arguments","default":{}}]};e.exports.ExchangeDeclareOk=2621451;var Xt=e.exports.methodInfoExchangeDeclareOk={id:2621451,name:"ExchangeDeclareOk",args:[]};e.exports.ExchangeDelete=2621460;var Jt=e.exports.methodInfoExchangeDelete={id:2621460,name:"ExchangeDelete",args:[{type:"short",name:"ticket","default":0},{type:"shortstr",name:"exchange"},{type:"bit",name:"ifUnused","default":!1},{type:"bit",name:"nowait","default":!1}]};e.exports.ExchangeDeleteOk=2621461;var Zt=e.exports.methodInfoExchangeDeleteOk={id:2621461,name:"ExchangeDeleteOk",args:[]};e.exports.ExchangeBind=2621470;var en=e.exports.methodInfoExchangeBind={id:2621470,name:"ExchangeBind",args:[{type:"short",name:"ticket","default":0},{type:"shortstr",name:"destination"},{type:"shortstr",name:"source"},{type:"shortstr",name:"routingKey","default":""},{type:"bit",name:"nowait","default":!1},{type:"table",name:"arguments","default":{}}]};e.exports.ExchangeBindOk=2621471;var tn=e.exports.methodInfoExchangeBindOk={id:2621471,name:"ExchangeBindOk",args:[]};e.exports.ExchangeUnbind=2621480;var nn=e.exports.methodInfoExchangeUnbind={id:2621480,name:"ExchangeUnbind",args:[{type:"short",name:"ticket","default":0},{type:"shortstr",name:"destination"},{type:"shortstr",name:"source"},{type:"shortstr",name:"routingKey","default":""},{type:"bit",name:"nowait","default":!1},{type:"table",name:"arguments","default":{}}]};e.exports.ExchangeUnbindOk=2621491;var rn=e.exports.methodInfoExchangeUnbindOk={id:2621491,name:"ExchangeUnbindOk",args:[]};e.exports.QueueDeclare=3276810;var on=e.exports.methodInfoQueueDeclare={id:3276810,name:"QueueDeclare",args:[{type:"short",name:"ticket","default":0},{type:"shortstr",name:"queue","default":""},{type:"bit",name:"passive","default":!1},{type:"bit",name:"durable","default":!1},{type:"bit",name:"exclusive","default":!1},{type:"bit",name:"autoDelete","default":!1},{type:"bit",name:"nowait","default":!1},{type:"table",name:"arguments","default":{}}]};e.exports.QueueDeclareOk=3276811;var sn=e.exports.methodInfoQueueDeclareOk={id:3276811,name:"QueueDeclareOk",args:[{type:"shortstr",name:"queue"},{type:"long",name:"messageCount"},{type:"long",name:"consumerCount"}]};e.exports.QueueBind=3276820;var an=e.exports.methodInfoQueueBind={id:3276820,name:"QueueBind",args:[{type:"short",name:"ticket","default":0},{type:"shortstr",name:"queue","default":""},{type:"shortstr",name:"exchange"},{type:"shortstr",name:"routingKey","default":""},{type:"bit",name:"nowait","default":!1},{type:"table",name:"arguments","default":{}}]};e.exports.QueueBindOk=3276821;var un=e.exports.methodInfoQueueBindOk={id:3276821,name:"QueueBindOk",args:[]};e.exports.QueuePurge=3276830;var cn=e.exports.methodInfoQueuePurge={id:3276830,name:"QueuePurge",args:[{type:"short",name:"ticket","default":0},{type:"shortstr",name:"queue","default":""},{type:"bit",name:"nowait","default":!1}]};e.exports.QueuePurgeOk=3276831;var ln=e.exports.methodInfoQueuePurgeOk={id:3276831,name:"QueuePurgeOk",args:[{type:"long",name:"messageCount"}]};e.exports.QueueDelete=3276840;var fn=e.exports.methodInfoQueueDelete={id:3276840,name:"QueueDelete",args:[{type:"short",name:"ticket","default":0},{type:"shortstr",name:"queue","default":""},{type:"bit",name:"ifUnused","default":!1},{type:"bit",name:"ifEmpty","default":!1},{type:"bit",name:"nowait","default":!1}]};e.exports.QueueDeleteOk=3276841;var hn=e.exports.methodInfoQueueDeleteOk={id:3276841,name:"QueueDeleteOk",args:[{type:"long",name:"messageCount"}]};e.exports.QueueUnbind=3276850;var pn=e.exports.methodInfoQueueUnbind={id:3276850,name:"QueueUnbind",args:[{type:"short",name:"ticket","default":0},{type:"shortstr",name:"queue","default":""},{type:"shortstr",name:"exchange"},{type:"shortstr",name:"routingKey","default":""},{type:"table",name:"arguments","default":{}}]};e.exports.QueueUnbindOk=3276851;var dn=e.exports.methodInfoQueueUnbindOk={id:3276851,name:"QueueUnbindOk",args:[]};e.exports.BasicQos=3932170;var vn=e.exports.methodInfoBasicQos={id:3932170,name:"BasicQos",args:[{type:"long",name:"prefetchSize","default":0},{type:"short",name:"prefetchCount","default":0},{type:"bit",name:"global","default":!1}]};e.exports.BasicQosOk=3932171;var gn=e.exports.methodInfoBasicQosOk={id:3932171,name:"BasicQosOk",args:[]};e.exports.BasicConsume=3932180;var yn=e.exports.methodInfoBasicConsume={id:3932180,name:"BasicConsume",args:[{type:"short",name:"ticket","default":0},{type:"shortstr",name:"queue","default":""},{type:"shortstr",name:"consumerTag","default":""},{type:"bit",name:"noLocal","default":!1},{type:"bit",name:"noAck","default":!1},{type:"bit",name:"exclusive","default":!1},{type:"bit",name:"nowait","default":!1},{type:"table",name:"arguments","default":{}}]};e.exports.BasicConsumeOk=3932181;var mn=e.exports.methodInfoBasicConsumeOk={id:3932181,name:"BasicConsumeOk",args:[{type:"shortstr",name:"consumerTag"}]};e.exports.BasicCancel=3932190;var bn=e.exports.methodInfoBasicCancel={id:3932190,name:"BasicCancel",args:[{type:"shortstr",name:"consumerTag"},{type:"bit",name:"nowait","default":!1}]};e.exports.BasicCancelOk=3932191;var wn=e.exports.methodInfoBasicCancelOk={id:3932191,name:"BasicCancelOk",args:[{type:"shortstr",name:"consumerTag"}]};e.exports.BasicPublish=3932200;var _n=e.exports.methodInfoBasicPublish={id:3932200,name:"BasicPublish",args:[{type:"short",name:"ticket","default":0},{type:"shortstr",name:"exchange","default":""},{type:"shortstr",name:"routingKey","default":""},{type:"bit",name:"mandatory","default":!1},{type:"bit",name:"immediate","default":!1}]};e.exports.BasicReturn=3932210;var En=e.exports.methodInfoBasicReturn={id:3932210,name:"BasicReturn",args:[{type:"short",name:"replyCode"},{type:"shortstr",name:"replyText","default":""},{type:"shortstr",name:"exchange"},{type:"shortstr",name:"routingKey"}]};e.exports.BasicDeliver=3932220;var xn=e.exports.methodInfoBasicDeliver={id:3932220,name:"BasicDeliver",args:[{type:"shortstr",name:"consumerTag"},{type:"longlong",name:"deliveryTag"},{type:"bit",name:"redelivered","default":!1},{type:"shortstr",name:"exchange"},{type:"shortstr",name:"routingKey"}]};e.exports.BasicGet=3932230;var In=e.exports.methodInfoBasicGet={id:3932230,name:"BasicGet",args:[{type:"short",name:"ticket","default":0},{type:"shortstr",name:"queue","default":""},{type:"bit",name:"noAck","default":!1}]};e.exports.BasicGetOk=3932231;var kn=e.exports.methodInfoBasicGetOk={id:3932231,name:"BasicGetOk",args:[{type:"longlong",name:"deliveryTag"},{type:"bit",name:"redelivered","default":!1},{type:"shortstr",name:"exchange"},{type:"shortstr",name:"routingKey"},{type:"long",name:"messageCount"}]};e.exports.BasicGetEmpty=3932232;var Sn=e.exports.methodInfoBasicGetEmpty={id:3932232,name:"BasicGetEmpty",args:[{type:"shortstr",name:"clusterId","default":""}]};e.exports.BasicAck=3932240;var Cn=e.exports.methodInfoBasicAck={id:3932240,name:"BasicAck",args:[{type:"longlong",name:"deliveryTag","default":0},{type:"bit",name:"multiple","default":!1}]};e.exports.BasicReject=3932250;var Tn=e.exports.methodInfoBasicReject={id:3932250,name:"BasicReject",args:[{type:"longlong",name:"deliveryTag"},{type:"bit",name:"requeue","default":!0}]};e.exports.BasicRecoverAsync=3932260;var Un=e.exports.methodInfoBasicRecoverAsync={id:3932260,name:"BasicRecoverAsync",args:[{type:"bit",name:"requeue","default":!1}]};e.exports.BasicRecover=3932270;var Bn=e.exports.methodInfoBasicRecover={id:3932270,name:"BasicRecover",args:[{type:"bit",name:"requeue","default":!1}]};e.exports.BasicRecoverOk=3932271;var jn=e.exports.methodInfoBasicRecoverOk={id:3932271,name:"BasicRecoverOk",args:[]};e.exports.BasicNack=3932280;var On=e.exports.methodInfoBasicNack={id:3932280,name:"BasicNack",args:[{type:"longlong",name:"deliveryTag","default":0},{type:"bit",name:"multiple","default":!1},{type:"bit",name:"requeue","default":!0}]};e.exports.TxSelect=5898250;var An=e.exports.methodInfoTxSelect={id:5898250,name:"TxSelect",args:[]};e.exports.TxSelectOk=5898251;var Rn=e.exports.methodInfoTxSelectOk={id:5898251,name:"TxSelectOk",args:[]};e.exports.TxCommit=5898260;var Ln=e.exports.methodInfoTxCommit={id:5898260,name:"TxCommit",args:[]};e.exports.TxCommitOk=5898261;var Mn=e.exports.methodInfoTxCommitOk={id:5898261,name:"TxCommitOk",args:[]};e.exports.TxRollback=5898270;var Pn=e.exports.methodInfoTxRollback={id:5898270,name:"TxRollback",args:[]};e.exports.TxRollbackOk=5898271;var Fn=e.exports.methodInfoTxRollbackOk={id:5898271,name:"TxRollbackOk",args:[]};e.exports.ConfirmSelect=5570570;var Nn=e.exports.methodInfoConfirmSelect={id:5570570,name:"ConfirmSelect",args:[{type:"bit",name:"nowait","default":!1}]};e.exports.ConfirmSelectOk=5570571;var Dn=e.exports.methodInfoConfirmSelectOk={id:5570571,name:"ConfirmSelectOk",args:[]};e.exports.BasicProperties=60;var qn=e.exports.propertiesInfoBasicProperties={id:60,name:"BasicProperties",args:[{type:"shortstr",name:"contentType"},{type:"shortstr",name:"contentEncoding"},{type:"table",name:"headers"},{type:"octet",name:"deliveryMode"},{type:"octet",name:"priority"},{type:"shortstr",name:"correlationId"},{type:"shortstr",name:"replyTo"},{type:"shortstr",name:"expiration"},{type:"shortstr",name:"messageId"},{type:"timestamp",name:"timestamp"},{type:"shortstr",name:"type"},{type:"shortstr",name:"userId"},{type:"shortstr",name:"appId"},{type:"shortstr",name:"clusterId"}]}}).call(t,n(3).Buffer)},function(e,t,n){(function(t){"use strict";function r(e){return e>=0x8000000000000000||Math.abs(e)<0x4000000000000&&Math.floor(e)!==e}function i(e,n,r){var i=r;r+=4;for(var o in n)if(void 0!==n[o]){var a=t.byteLength(o);e.writeUInt8(a,r),r++,e.write(o,r,"utf8"),r+=a,r+=s(e,n[o],r)}var u=r-i;return e.writeUInt32BE(u-4,i),u}function o(e,t,n){var r=n;n+=4;for(var i=0,o=t.length;o>i;i++)n+=s(e,t[i],n);var a=n-r;return e.writeUInt32BE(a-4,r),a}function s(e,n,s){function a(t){e.write(t,s),s++}var c=s,l=typeof n,f=n;switch(n&&"object"===l&&n.hasOwnProperty("!")&&(f=n.value,l=n["!"]),l){case"string":var h=t.byteLength(f,"utf8");a("S"),e.writeUInt32BE(h,s),s+=4,e.write(f,s,"utf8"),s+=h;break;case"object":null===f?a("V"):Array.isArray(f)?(a("A"),s+=o(e,f,s)):t.isBuffer(f)?(a("x"),e.writeUInt32BE(f.length,s),s+=4,f.copy(e,s),s+=f.length):(a("F"),s+=i(e,f,s));break;case"boolean":a("t"),e.writeUInt8(f?1:0,s),s++;break;case"number":r(f)?(a("d"),e.writeDoubleBE(f,s),s+=8):128>f&&f>=-128?(a("b"),e.writeInt8(f,s),s++):f>=-32768&&32768>f?(a("s"),e.writeInt16BE(f,s),s+=2):f>=-2147483648&&2147483648>f?(a("I"),e.writeInt32BE(f,s),s+=4):(a("l"),u.writeInt64BE(e,f,s),s+=8);break;case"timestamp":a("T"),u.writeUInt64BE(e,f,s),s+=8;break;case"float":a("f"),e.writeFloatBE(f,s),s+=4;break;case"decimal":if(a("D"),!(f.hasOwnProperty("places")&&f.hasOwnProperty("digits")&&f.places>=0&&f.places<256))throw new TypeError("Decimal value must be {'places': 0..255, 'digits': uint32}, got "+JSON.stringify(f));e[s]=f.places,s++,e.writeUInt32BE(f.digits,s),s+=4;break;default:throw new TypeError("Unknown type to encode: "+l)}return s-c}function a(e){function t(){var t=String.fromCharCode(e[c]);switch(c++,t){case"b":o=e.readInt8(c),c++;break;case"S":r=e.readUInt32BE(c),c+=4,o=e.toString("utf8",c,c+r),c+=r;break;case"I":o=e.readInt32BE(c),c+=4;break;case"D":var i=e[c];c++;var s=e.readUInt32BE(c);c+=4,o={"!":"decimal",value:{places:i,digits:s}};break;case"T":o=u.readUInt64BE(e,c),c+=8,o={"!":"timestamp",value:o};break;case"F":r=e.readUInt32BE(c),c+=4,o=a(e.slice(c,c+r)),c+=r;break;case"A":r=e.readUInt32BE(c),c+=4,n(c+r);break;case"d":o=e.readDoubleBE(c),c+=8;break;case"f":o=e.readFloatBE(c),c+=4;break;case"l":o=u.readInt64BE(e,c),c+=8;break;case"s":o=e.readInt16BE(c),c+=2;break;case"t":o=0!=e[c],c++;break;case"V":o=null;break;case"x":r=e.readUInt32BE(c),c+=4,o=e.slice(c,c+r),c+=r;break;default:throw new TypeError('Unexpected type tag "'+t+'"')}}function n(e){for(var n=[];e>c;)t(),n.push(o);o=n}for(var r,i,o,s={},c=0,l=e.length;l>c;)r=e.readUInt8(c),c++,i=e.toString("utf8",c,c+r),c+=r,t(),s[i]=o;return s}var u=n(71);e.exports.encodeTable=i,e.exports.decodeFields=a}).call(t,n(3).Buffer)},function(e,t,n){(function(t){"use strict";function r(e){return G>=e&&e>=-G}function i(e){K(r(e),"number cannot be represented as a contiguous integer")}function o(e,t,n){K.ok("number"==typeof e&&e>=t&&n>=e&&Math.floor(e)===e,"not a number in the required range")}function s(e,t,n){return e.readUInt8(t,n)<<16|e.readUInt16BE(t+1,n)}function a(e,t,n,r){r||(o(t,0,16777215),K.ok(n+3<=e.length,"attempt to write beyond end of buffer")),e.writeUInt8(t>>>16,n,r),e.writeUInt16BE(65535&t,n+1,r)}function u(e,t,n){return(e.readUInt8(t,n)||0)*Y+e.readUInt32BE(t+1,n)}function c(e,t,n,r){r||(o(t,0,0xffffffffff),K.ok(n+5<=e.length,"attempt to write beyond end of buffer")),e.writeUInt8(Math.floor(t*V),n,r),e.writeInt32BE(-1&t,n+1,r)}function l(e,t,n){return e.readUInt16BE(t,n)*Y+e.readUInt32BE(t+2,n)}function f(e,t,n,r){r||(o(t,0,0xffffffffffff),K.ok(n+6<=e.length,"attempt to write beyond end of buffer")),e.writeUInt16BE(Math.floor(t*V),n,r),e.writeInt32BE(-1&t,n+2,r)}function h(e,t,n){return((e.readUInt8(t,n)||0)<<16|e.readUInt16BE(t+1,n))*Y+e.readUInt32BE(t+3,n)}function p(e,t,n,r){if(r||(o(t,0,72057594037927940),K.ok(n+7<=e.length,"attempt to write beyond end of buffer")),72057594037927940>t){var i=Math.floor(t*V);e.writeUInt8(i>>>16,n,r),e.writeUInt16BE(65535&i,n+1,r),e.writeInt32BE(-1&t,n+3,r)}else e[n]=255,e[n+1]=255,e[n+2]=255,e[n+3]=255,e[n+4]=255,e[n+5]=255,e[n+6]=255}function d(e,t,n){return e.readUInt32BE(t,n)*Y+e.readUInt32BE(t+4,n)}function v(e,t,n,r){r||(o(t,0,0x10000000000000000),K.ok(n+8<=e.length,"attempt to write beyond end of buffer")),0x10000000000000000>t?(e.writeUInt32BE(Math.floor(t*V),n,r),e.writeInt32BE(-1&t,n+4,r)):(e[n]=255,e[n+1]=255,e[n+2]=255,e[n+3]=255,e[n+4]=255,e[n+5]=255,e[n+6]=255,e[n+7]=255)}function g(e,t,n){return e.readUInt8(t+2,n)<<16|e.readUInt16LE(t,n)}function y(e,t,n,r){r||(o(t,0,16777215),K.ok(n+3<=e.length,"attempt to write beyond end of buffer")),e.writeUInt16LE(65535&t,n,r),e.writeUInt8(t>>>16,n+2,r)}function m(e,t,n){return(e.readUInt8(t+4,n)||0)*Y+e.readUInt32LE(t,n)}function b(e,t,n,r){r||(o(t,0,0xffffffffff),K.ok(n+5<=e.length,"attempt to write beyond end of buffer")),e.writeInt32LE(-1&t,n,r),e.writeUInt8(Math.floor(t*V),n+4,r)}function w(e,t,n){return e.readUInt16LE(t+4,n)*Y+e.readUInt32LE(t,n)}function _(e,t,n,r){r||(o(t,0,0xffffffffffff),K.ok(n+6<=e.length,"attempt to write beyond end of buffer")),e.writeInt32LE(-1&t,n,r),e.writeUInt16LE(Math.floor(t*V),n+4,r)}function E(e,t,n){return((e.readUInt8(t+6,n)||0)<<16|e.readUInt16LE(t+4,n))*Y+e.readUInt32LE(t,n)}function x(e,t,n,r){if(r||(o(t,0,72057594037927940),K.ok(n+7<=e.length,"attempt to write beyond end of buffer")),72057594037927940>t){e.writeInt32LE(-1&t,n,r);var i=Math.floor(t*V);e.writeUInt16LE(65535&i,n+4,r),e.writeUInt8(i>>>16,n+6,r)}else e[n]=255,e[n+1]=255,e[n+2]=255,e[n+3]=255,e[n+4]=255,e[n+5]=255,e[n+6]=255}function I(e,t,n){return e.readUInt32LE(t+4,n)*Y+e.readUInt32LE(t,n)}function k(e,t,n,r){r||(o(t,0,0x10000000000000000),K.ok(n+8<=e.length,"attempt to write beyond end of buffer")),0x10000000000000000>t?(e.writeInt32LE(-1&t,n,r),e.writeUInt32LE(Math.floor(t*V),n+4,r)):(e[n]=255,e[n+1]=255,e[n+2]=255,e[n+3]=255,e[n+4]=255,e[n+5]=255,e[n+6]=255,e[n+7]=255)}function S(e,t,n){return(e.readInt8(t,n)<<16)+e.readUInt16BE(t+1,n)}function C(e,t,n,r){r||(o(t,-8388608,8388607),K.ok(n+3<=e.length,"attempt to write beyond end of buffer")),e.writeInt8(t>>16,n,r),e.writeUInt16BE(65535&t,n+1,r)}function T(e,t,n){return(e.readInt8(t,n)||0)*Y+e.readUInt32BE(t+1,n)}function U(e,t,n,r){r||(o(t,-549755813888,549755813887),K.ok(n+5<=e.length,"attempt to write beyond end of buffer")),e.writeInt8(Math.floor(t*V),n,r),e.writeInt32BE(-1&t,n+1,r)}function B(e,t,n){return e.readInt16BE(t,n)*Y+e.readUInt32BE(t+2,n)}function j(e,t,n,r){r||(o(t,-0x800000000000,0x7fffffffffff),K.ok(n+6<=e.length,"attempt to write beyond end of buffer")),e.writeInt16BE(Math.floor(t*V),n,r),e.writeInt32BE(-1&t,n+2,r)}function O(e,t,n){return(((e.readInt8(t,n)||0)<<16)+e.readUInt16BE(t+1,n))*Y+e.readUInt32BE(t+3,n)}function A(e,t,n,r){if(r||(o(t,-0x800000000000000,0x80000000000000),K.ok(n+7<=e.length,"attempt to write beyond end of buffer")),0x80000000000000>t){var i=Math.floor(t*V);e.writeInt8(i>>16,n,r),e.writeUInt16BE(65535&i,n+1,r),e.writeInt32BE(-1&t,n+3,r)}else e[n]=127,e[n+1]=255,e[n+2]=255,e[n+3]=255,e[n+4]=255,e[n+5]=255,e[n+6]=255}function R(e,t,n){return e.readInt32BE(t,n)*Y+e.readUInt32BE(t+4,n)}function L(e,t,n,r){r||(o(t,-0x800000000000000000,0x8000000000000000),K.ok(n+8<=e.length,"attempt to write beyond end of buffer")),0x8000000000000000>t?(e.writeInt32BE(Math.floor(t*V),n,r),e.writeInt32BE(-1&t,n+4,r)):(e[n]=127,e[n+1]=255,e[n+2]=255,e[n+3]=255,e[n+4]=255,e[n+5]=255,e[n+6]=255,e[n+7]=255)}function M(e,t,n){return(e.readInt8(t+2,n)<<16)+e.readUInt16LE(t,n)}function P(e,t,n,r){r||(o(t,-8388608,8388607),K.ok(n+3<=e.length,"attempt to write beyond end of buffer")),e.writeUInt16LE(65535&t,n,r),e.writeInt8(t>>16,n+2,r)}function F(e,t,n){return(e.readInt8(t+4,n)||0)*Y+e.readUInt32LE(t,n)}function N(e,t,n,r){r||(o(t,-549755813888,549755813887),K.ok(n+5<=e.length,"attempt to write beyond end of buffer")),e.writeInt32LE(-1&t,n,r),e.writeInt8(Math.floor(t*V),n+4,r)}function D(e,t,n){return e.readInt16LE(t+4,n)*Y+e.readUInt32LE(t,n)}function q(e,t,n,r){r||(o(t,-0x800000000000,0x7fffffffffff),K.ok(n+6<=e.length,"attempt to write beyond end of buffer")),e.writeInt32LE(-1&t,n,r),e.writeInt16LE(Math.floor(t*V),n+4,r)}function z(e,t,n){return(((e.readInt8(t+6,n)||0)<<16)+e.readUInt16LE(t+4,n))*Y+e.readUInt32LE(t,n)}function H(e,t,n,r){if(r||(o(t,-0x80000000000000,0x80000000000000),K.ok(n+7<=e.length,"attempt to write beyond end of buffer")),0x80000000000000>t){e.writeInt32LE(-1&t,n,r);var i=Math.floor(t*V);e.writeUInt16LE(65535&i,n+4,r),e.writeInt8(i>>16,n+6,r)}else e[n]=255,e[n+1]=255,e[n+2]=255,e[n+3]=255,e[n+4]=255,e[n+5]=255,e[n+6]=127}function Q(e,t,n){return e.readInt32LE(t+4,n)*Y+e.readUInt32LE(t,n)}function W(e,t,n,r){r||(o(t,-0x8000000000000000,0x8000000000000000),K.ok(n+8<=e.length,"attempt to write beyond end of buffer")),0x8000000000000000>t?(e.writeInt32LE(-1&t,n,r),e.writeInt32LE(Math.floor(t*V),n+4,r)):(e[n]=255,e[n+1]=255,e[n+2]=255,e[n+3]=255,e[n+4]=255,e[n+5]=255,e[n+6]=255,e[n+7]=127)}var K=n(72),Y=4294967296,V=1/Y,G=9007199254740991;e.exports.isContiguousInt=r,e.exports.assertContiguousInt=i,["UInt","Int"].forEach(function(n){var r=n+"8";e.exports["read"+r]=t.prototype["read"+r].call,e.exports["write"+r]=t.prototype["write"+r].call,["16","32"].forEach(function(r){["LE","BE"].forEach(function(i){var o=n+r+i,s=t.prototype["read"+o];e.exports["read"+o]=function(e,t,n){return s.call(e,t,n)};var a=t.prototype["write"+o];e.exports["write"+o]=function(e,t,n,r){return a.call(e,t,n,r)}})})}),e.exports.readUInt24BE=s,e.exports.writeUInt24BE=a,e.exports.readUInt40BE=u,e.exports.writeUInt40BE=c,e.exports.readUInt48BE=l,e.exports.writeUInt48BE=f,e.exports.readUInt56BE=h,e.exports.writeUInt56BE=p,e.exports.readUInt64BE=d,e.exports.writeUInt64BE=v,e.exports.readUInt24LE=g,e.exports.writeUInt24LE=y,e.exports.readUInt40LE=m,e.exports.writeUInt40LE=b,e.exports.readUInt48LE=w,e.exports.writeUInt48LE=_,e.exports.readUInt56LE=E,e.exports.writeUInt56LE=x,e.exports.readUInt64LE=I,e.exports.writeUInt64LE=k,e.exports.readInt24BE=S,e.exports.writeInt24BE=C,e.exports.readInt40BE=T,e.exports.writeInt40BE=U,e.exports.readInt48BE=B,e.exports.writeInt48BE=j,e.exports.readInt56BE=O,e.exports.writeInt56BE=A,e.exports.readInt64BE=R,e.exports.writeInt64BE=L,e.exports.readInt24LE=M,e.exports.writeInt24LE=P,e.exports.readInt40LE=F,e.exports.writeInt40LE=N,e.exports.readInt48LE=D,e.exports.writeInt48LE=q,e.exports.readInt56LE=z,e.exports.writeInt56LE=H,e.exports.readInt64LE=Q,e.exports.writeInt64LE=W}).call(t,n(3).Buffer)},function(e,t,n){function r(e,t){return p.isUndefined(t)?""+t:p.isNumber(t)&&!isFinite(t)?t.toString():p.isFunction(t)||p.isRegExp(t)?t.toString():t}function i(e,t){return p.isString(e)?e.length<t?e:e.slice(0,t):e}function o(e){return i(JSON.stringify(e.actual,r),128)+" "+e.operator+" "+i(JSON.stringify(e.expected,r),128)}function s(e,t,n,r,i){throw new g.AssertionError({message:n,actual:e,expected:t,operator:r,stackStartFunction:i})}function a(e,t){e||s(e,!0,t,"==",g.ok)}function u(e,t){if(e===t)return!0;if(p.isBuffer(e)&&p.isBuffer(t)){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return p.isDate(e)&&p.isDate(t)?e.getTime()===t.getTime():p.isRegExp(e)&&p.isRegExp(t)?e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase:p.isObject(e)||p.isObject(t)?l(e,t):e==t}function c(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function l(e,t){if(p.isNullOrUndefined(e)||p.isNullOrUndefined(t))return!1;if(e.prototype!==t.prototype)return!1;if(p.isPrimitive(e)||p.isPrimitive(t))return e===t;var n=c(e),r=c(t);if(n&&!r||!n&&r)return!1;if(n)return e=d.call(e),t=d.call(t),u(e,t);var i,o,s=y(e),a=y(t);if(s.length!=a.length)return!1;for(s.sort(),a.sort(),o=s.length-1;o>=0;o--)if(s[o]!=a[o])return!1;for(o=s.length-1;o>=0;o--)if(i=s[o],!u(e[i],t[i]))return!1;return!0}function f(e,t){return e&&t?"[object RegExp]"==Object.prototype.toString.call(t)?t.test(e):e instanceof t?!0:t.call({},e)===!0:!1}function h(e,t,n,r){var i;p.isString(n)&&(r=n,n=null);try{t()}catch(o){i=o}if(r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),e&&!i&&s(i,n,"Missing expected exception"+r),!e&&f(i,n)&&s(i,n,"Got unwanted exception"+r),e&&i&&n&&!f(i,n)||!e&&i)throw i}var p=n(73),d=Array.prototype.slice,v=Object.prototype.hasOwnProperty,g=e.exports=a;g.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=o(this),this.generatedMessage=!0);var t=e.stackStartFunction||s;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var n=new Error;if(n.stack){var r=n.stack,i=t.name,a=r.indexOf("\n"+i);if(a>=0){var u=r.indexOf("\n",a+1);r=r.substring(u+1)}this.stack=r}}},p.inherits(g.AssertionError,Error),g.fail=s,g.ok=a,g.equal=function(e,t,n){e!=t&&s(e,t,n,"==",g.equal)},g.notEqual=function(e,t,n){e==t&&s(e,t,n,"!=",g.notEqual)},g.deepEqual=function(e,t,n){u(e,t)||s(e,t,n,"deepEqual",g.deepEqual)},g.notDeepEqual=function(e,t,n){u(e,t)&&s(e,t,n,"notDeepEqual",g.notDeepEqual)},g.strictEqual=function(e,t,n){e!==t&&s(e,t,n,"===",g.strictEqual)},g.notStrictEqual=function(e,t,n){e===t&&s(e,t,n,"!==",g.notStrictEqual)},g["throws"]=function(e,t,n){h.apply(this,[!0].concat(d.call(arguments)))},g.doesNotThrow=function(e,t){h.apply(this,[!1].concat(d.call(arguments)))},g.ifError=function(e){if(e)throw e};var y=Object.keys||function(e){var t=[];for(var n in e)v.call(e,n)&&t.push(n);return t}},function(e,t,n){(function(e,r){function i(e,n){var r={seen:[],stylize:s};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),v(n)?r.showHidden=n:n&&t._extend(r,n),_(r.showHidden)&&(r.showHidden=!1),_(r.depth)&&(r.depth=2),_(r.colors)&&(r.colors=!1),_(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=o),u(r,e,r.depth)}function o(e,t){var n=i.styles[t];return n?"["+i.colors[n][0]+"m"+e+"["+i.colors[n][1]+"m":e}function s(e,t){return e}function a(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}function u(e,n,r){if(e.customInspect&&n&&S(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,e);return b(i)||(i=u(e,i,r)),i}var o=c(e,n);if(o)return o;var s=Object.keys(n),v=a(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(n)),k(n)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return l(n);if(0===s.length){if(S(n)){var g=n.name?": "+n.name:"";return e.stylize("[Function"+g+"]","special")}if(E(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(I(n))return e.stylize(Date.prototype.toString.call(n),"date");if(k(n))return l(n)}var y="",m=!1,w=["{","}"];if(d(n)&&(m=!0,w=["[","]"]),S(n)){var _=n.name?": "+n.name:"";y=" [Function"+_+"]"}if(E(n)&&(y=" "+RegExp.prototype.toString.call(n)),I(n)&&(y=" "+Date.prototype.toUTCString.call(n)),k(n)&&(y=" "+l(n)),0===s.length&&(!m||0==n.length))return w[0]+y+w[1];if(0>r)return E(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special");e.seen.push(n);var x;return x=m?f(e,n,r,v,s):s.map(function(t){return h(e,n,r,v,t,m)}),e.seen.pop(),p(x,y,w)}function c(e,t){if(_(t))return e.stylize("undefined","undefined");if(b(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return m(t)?e.stylize(""+t,"number"):v(t)?e.stylize(""+t,"boolean"):g(t)?e.stylize("null","null"):void 0}function l(e){return"["+Error.prototype.toString.call(e)+"]"}function f(e,t,n,r,i){for(var o=[],s=0,a=t.length;a>s;++s)j(t,String(s))?o.push(h(e,t,n,r,String(s),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(h(e,t,n,r,i,!0))}),o}function h(e,t,n,r,i,o){var s,a,c;if(c=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},c.get?a=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(a=e.stylize("[Setter]","special")),j(r,i)||(s="["+i+"]"),a||(e.seen.indexOf(c.value)<0?(a=g(n)?u(e,c.value,null):u(e,c.value,n-1),a.indexOf("\n")>-1&&(a=o?a.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+a.split("\n").map(function(e){return"   "+e}).join("\n"))):a=e.stylize("[Circular]","special")),_(s)){if(o&&i.match(/^\d+$/))return a;s=JSON.stringify(""+i),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function p(e,t,n){var r=0,i=e.reduce(function(e,t){return r++,t.indexOf("\n")>=0&&r++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function d(e){return Array.isArray(e)}function v(e){return"boolean"==typeof e}function g(e){return null===e}function y(e){return null==e}function m(e){return"number"==typeof e}function b(e){return"string"==typeof e}function w(e){return"symbol"==typeof e}function _(e){return void 0===e}function E(e){return x(e)&&"[object RegExp]"===T(e)}function x(e){return"object"==typeof e&&null!==e}function I(e){return x(e)&&"[object Date]"===T(e)}function k(e){return x(e)&&("[object Error]"===T(e)||e instanceof Error)}function S(e){return"function"==typeof e}function C(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function T(e){return Object.prototype.toString.call(e)}function U(e){return 10>e?"0"+e.toString(10):e.toString(10)}function B(){var e=new Date,t=[U(e.getHours()),U(e.getMinutes()),U(e.getSeconds())].join(":");return[e.getDate(),L[e.getMonth()],t].join(" ")}function j(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var O=/%[sdj%]/g;t.format=function(e){if(!b(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(i(arguments[n]));return t.join(" ")}for(var n=1,r=arguments,o=r.length,s=String(e).replace(O,function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return e}}),a=r[n];o>n;a=r[++n])s+=g(a)||!x(a)?" "+a:" "+i(a);return s},t.deprecate=function(n,i){function o(){if(!s){if(r.throwDeprecation)throw new Error(i);r.traceDeprecation?console.trace(i):console.error(i),s=!0}return n.apply(this,arguments)}if(_(e.process))return function(){return t.deprecate(n,i).apply(this,arguments)};if(r.noDeprecation===!0)return n;var s=!1;return o};var A,R={};t.debuglog=function(e){if(_(A)&&(A={NODE_ENV:"production"}.NODE_DEBUG||""),e=e.toUpperCase(),!R[e])if(new RegExp("\\b"+e+"\\b","i").test(A)){var n=r.pid;R[e]=function(){var r=t.format.apply(t,arguments);console.error("%s %d: %s",e,n,r)}}else R[e]=function(){};return R[e]},t.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=d,t.isBoolean=v,t.isNull=g,t.isNullOrUndefined=y,t.isNumber=m,t.isString=b,t.isSymbol=w,t.isUndefined=_,t.isRegExp=E,t.isObject=x,t.isDate=I,t.isError=k,t.isFunction=S,t.isPrimitive=C,t.isBuffer=n(74);var L=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];t.log=function(){console.log("%s - %s",B(),t.format.apply(t,arguments))},t.inherits=n(75),t._extend=function(e,t){if(!t||!x(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(t,function(){return this}(),n(38))},function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){(function(t){"use strict";function r(e,t){var n=d(e);if(n){var r=n.size,i=n.rest;if(r>t)throw new Error("Frame size exceeds frame max");if(i.length>r){if(i[r]!==h)throw new Error("Invalid frame");return{type:n.type,channel:n.channel,size:r,payload:i.slice(0,r),rest:i.slice(r+1)}}}return!1}var i=n(69),o=i.constants,s=i.decode,a=n(77);e.exports.PROTOCOL_HEADER="AMQP"+String.fromCharCode(0,0,9,1);var u=o.FRAME_METHOD,c=o.FRAME_HEARTBEAT,l=o.FRAME_HEADER,f=o.FRAME_BODY,h=o.FRAME_END,p=a.builder(f,"channel:16, size:32, payload:size/binary",h);e.exports.makeBodyFrame=function(e,t){return p({channel:e,size:t.length,payload:t})};var d=a.matcher("type:8","channel:16","size:32","rest/binary");e.exports.parseFrame=r;var v=a.matcher("class:16","_weight:16","size:64","flagsAndfields/binary"),g=a.matcher("id:32, args/binary"),y={channel:0};e.exports.decodeFrame=function(e){var t=e.payload;switch(e.type){case u:var n=g(t),r=n.id,i=s(r,n.args);return{id:r,channel:e.channel,
fields:i};case l:var o=v(t),r=o["class"],i=s(r,o.flagsAndfields);return{id:r,channel:e.channel,size:o.size,fields:i};case f:return{channel:e.channel,content:e.payload};case c:return y;default:throw new Error("Unknown frame type "+e.type)}},e.exports.HEARTBEAT_BUF=new t([o.FRAME_HEARTBEAT,0,0,0,0,0,0,o.FRAME_END]),e.exports.HEARTBEAT=y}).call(t,n(3).Buffer)},function(e,t,n){"use strict";e.exports.parse=n(78).parse,e.exports.match=n(81).match,e.exports.build=n(82).build,e.exports.write=n(82).write,e.exports.matcher=e.exports.compile=n(83).compile,e.exports.builder=n(83).compile_builder},function(e,t,n){"use strict";function r(e){for(var t=o.parse(e),n=0,r=t.length;r>n;n++){var s=t[n];if(void 0!=s.string)t[n]=i.string(s.string);else if(void 0!=s.value)t[n]=i.value(s.value,s.size,s.specifiers);else{if(void 0==s.name)throw"Unknown segment "+s;t[n]=i.variable(s.name,s.size,s.specifiers)}}return t}var i=n(79),o=n(80);e.exports.parse=function(){var e=[].join.call(arguments,",");return r(e)}},function(e,t){"use strict";function n(e){var t={};for(var n in e)t[e[n]]=1;return t}function r(e,t,r){var i=n(r),o={name:e};return o.type=s(i),a(o,o.type,i),o.size=f(o,o.type,t,o.unit),o}function i(e,t,r){var i=n(r),o={value:e};return o.type=s(i),a(o,o.type,i),o.size=f(o,o.type,t,o.unit),o}function o(e){return{value:e,type:"string"}}function s(e){for(var t in e)if(h[t])return t;return"integer"}function a(e,t,n){switch(t){case"integer":e.signed=c(n);case"float":e.bigendian=u(n);default:e.unit=l(n,e.type)}return e}function u(e){return!e.little}function c(e){return e.signed}function l(e,t){for(var n in e)if("unit:"==n.substr(0,5)){var r=parseInt(n.substr(5));return r}switch(t){case"binary":return 8;case"integer":case"float":return 1}}function f(e,t,n,r){if(void 0!==n&&""!==n)return n;switch(t){case"integer":return 8;case"float":return 64;case"binary":return!0}}e.exports.variable=r,e.exports.rest=function(){return r("_",!0,["binary"])},e.exports.value=i,e.exports.string=o;var h={integer:1,binary:1,"float":1}},function(e,t){e.exports=function(){function e(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}var t={parse:function(t,n){function r(e){I>E||(E>I&&(I=E,k=[]),k.push(e))}function i(){var e,t,n,r,i,a;if(i=E,a=E,e=m(),null!==e)if(t=s(),null!==t){for(n=[],r=o();null!==r;)n.push(r),r=o();null!==n?e=[e,t,n]:(e=null,E=a)}else e=null,E=a;else e=null,E=a;return null!==e&&(e=function(e,t,n){return n.unshift(t),n}(i,e[1],e[2])),null===e&&(E=i),e}function o(){var e,n,i,o,a,u;return a=E,u=E,e=m(),null!==e?(44===t.charCodeAt(E)?(n=",",E++):(n=null,0===x&&r('","')),null!==n?(i=m(),null!==i?(o=s(),null!==o?e=[e,n,i,o]:(e=null,E=u)):(e=null,E=u)):(e=null,E=u)):(e=null,E=u),null!==e&&(e=function(e,t){return t}(a,e[3])),null===e&&(E=a),e}function s(){var e,t,n,r,i;return r=E,e=a(),null!==e&&(e=function(e,t){return{string:t}}(r,e)),null===e&&(E=r),null===e&&(r=E,i=E,e=f(),null!==e?(t=p(),t=null!==t?t:"",null!==t?(n=d(),n=null!==n?n:"",null!==n?e=[e,t,n]:(e=null,E=i)):(e=null,E=i)):(e=null,E=i),null!==e&&(e=function(e,t,n,r){return{name:t,size:n,specifiers:r}}(r,e[0],e[1],e[2])),null===e&&(E=r),null===e&&(r=E,i=E,e=h(),null!==e?(t=p(),t=null!==t?t:"",null!==t?(n=d(),n=null!==n?n:"",null!==n?e=[e,t,n]:(e=null,E=i)):(e=null,E=i)):(e=null,E=i),null!==e&&(e=function(e,t,n,r){return{value:t,size:n,specifiers:r}}(r,e[0],e[1],e[2])),null===e&&(E=r))),e}function a(){var e,n,i,o,s;return o=E,s=E,34===t.charCodeAt(E)?(e='"',E++):(e=null,0===x&&r('"\\""')),null!==e?(34===t.charCodeAt(E)?(n='"',E++):(n=null,0===x&&r('"\\""')),null!==n?e=[e,n]:(e=null,E=s)):(e=null,E=s),null!==e&&(e=function(e){return""}(o)),null===e&&(E=o),null===e&&(o=E,s=E,34===t.charCodeAt(E)?(e='"',E++):(e=null,0===x&&r('"\\""')),null!==e?(n=u(),null!==n?(34===t.charCodeAt(E)?(i='"',E++):(i=null,0===x&&r('"\\""')),null!==i?e=[e,n,i]:(e=null,E=s)):(e=null,E=s)):(e=null,E=s),null!==e&&(e=function(e,t){return t}(o,e[1])),null===e&&(E=o)),e}function u(){var e,t,n;if(n=E,t=c(),null!==t)for(e=[];null!==t;)e.push(t),t=c();else e=null;return null!==e&&(e=function(e,t){return t.join("")}(n,e)),null===e&&(E=n),e}function c(){var e,n,i,o,s,a,u;return/^[^"\\\0-\x1F]/.test(t.charAt(E))?(e=t.charAt(E),E++):(e=null,0===x&&r('[^"\\\\\\0-\\x1F]')),null===e&&(a=E,'\\"'===t.substr(E,2)?(e='\\"',E+=2):(e=null,0===x&&r('"\\\\\\""')),null!==e&&(e=function(e){return'"'}(a)),null===e&&(E=a),null===e&&(a=E,"\\\\"===t.substr(E,2)?(e="\\\\",E+=2):(e=null,0===x&&r('"\\\\\\\\"')),null!==e&&(e=function(e){return"\\"}(a)),null===e&&(E=a),null===e&&(a=E,"\\/"===t.substr(E,2)?(e="\\/",E+=2):(e=null,0===x&&r('"\\\\/"')),null!==e&&(e=function(e){return"/"}(a)),null===e&&(E=a),null===e&&(a=E,"\\b"===t.substr(E,2)?(e="\\b",E+=2):(e=null,0===x&&r('"\\\\b"')),null!==e&&(e=function(e){return"\b"}(a)),null===e&&(E=a),null===e&&(a=E,"\\f"===t.substr(E,2)?(e="\\f",E+=2):(e=null,0===x&&r('"\\\\f"')),null!==e&&(e=function(e){return"\f"}(a)),null===e&&(E=a),null===e&&(a=E,"\\n"===t.substr(E,2)?(e="\\n",E+=2):(e=null,0===x&&r('"\\\\n"')),null!==e&&(e=function(e){return"\n"}(a)),null===e&&(E=a),null===e&&(a=E,"\\r"===t.substr(E,2)?(e="\\r",E+=2):(e=null,0===x&&r('"\\\\r"')),null!==e&&(e=function(e){return"\r"}(a)),null===e&&(E=a),null===e&&(a=E,"\\t"===t.substr(E,2)?(e="\\t",E+=2):(e=null,0===x&&r('"\\\\t"')),null!==e&&(e=function(e){return"	"}(a)),null===e&&(E=a),null===e&&(a=E,u=E,"\\u"===t.substr(E,2)?(e="\\u",E+=2):(e=null,0===x&&r('"\\\\u"')),null!==e?(n=l(),null!==n?(i=l(),null!==i?(o=l(),null!==o?(s=l(),null!==s?e=[e,n,i,o,s]:(e=null,E=u)):(e=null,E=u)):(e=null,E=u)):(e=null,E=u)):(e=null,E=u),null!==e&&(e=function(e,t,n,r,i){return String.fromCharCode(parseInt("0x"+t+n+r+i))}(a,e[1],e[2],e[3],e[4])),null===e&&(E=a)))))))))),e}function l(){var e;return/^[0-9a-fA-F]/.test(t.charAt(E))?(e=t.charAt(E),E++):(e=null,0===x&&r("[0-9a-fA-F]")),e}function f(){var e,n,i,o,s;if(o=E,s=E,/^[_a-zA-Z]/.test(t.charAt(E))?(e=t.charAt(E),E++):(e=null,0===x&&r("[_a-zA-Z]")),null!==e){for(n=[],/^[_a-zA-Z0-9]/.test(t.charAt(E))?(i=t.charAt(E),E++):(i=null,0===x&&r("[_a-zA-Z0-9]"));null!==i;)n.push(i),/^[_a-zA-Z0-9]/.test(t.charAt(E))?(i=t.charAt(E),E++):(i=null,0===x&&r("[_a-zA-Z0-9]"));null!==n?e=[e,n]:(e=null,E=s)}else e=null,E=s;return null!==e&&(e=function(e,t,n){return t+n.join("")}(o,e[0],e[1])),null===e&&(E=o),e}function h(){var e,n,i,o,s;if(o=E,48===t.charCodeAt(E)?(e="0",E++):(e=null,0===x&&r('"0"')),null!==e&&(e=function(e){return 0}(o)),null===e&&(E=o),null===e){if(o=E,s=E,/^[1-9]/.test(t.charAt(E))?(e=t.charAt(E),E++):(e=null,0===x&&r("[1-9]")),null!==e){for(n=[],/^[0-9]/.test(t.charAt(E))?(i=t.charAt(E),E++):(i=null,0===x&&r("[0-9]"));null!==i;)n.push(i),/^[0-9]/.test(t.charAt(E))?(i=t.charAt(E),E++):(i=null,0===x&&r("[0-9]"));null!==n?e=[e,n]:(e=null,E=s)}else e=null,E=s;null!==e&&(e=function(e,t,n){return parseInt(t+n.join(""))}(o,e[0],e[1])),null===e&&(E=o)}return e}function p(){var e,n,i,o;return i=E,o=E,58===t.charCodeAt(E)?(e=":",E++):(e=null,0===x&&r('":"')),null!==e?(n=h(),null!==n?e=[e,n]:(e=null,E=o)):(e=null,E=o),null!==e&&(e=function(e,t){return t}(i,e[1])),null===e&&(E=i),null===e&&(i=E,o=E,58===t.charCodeAt(E)?(e=":",E++):(e=null,0===x&&r('":"')),null!==e?(n=f(),null!==n?e=[e,n]:(e=null,E=o)):(e=null,E=o),null!==e&&(e=function(e,t){return t}(i,e[1])),null===e&&(E=i)),e}function d(){var e,n,i,o,s,a;if(s=E,a=E,47===t.charCodeAt(E)?(e="/",E++):(e=null,0===x&&r('"/"')),null!==e)if(n=g(),null!==n){for(i=[],o=v();null!==o;)i.push(o),o=v();null!==i?e=[e,n,i]:(e=null,E=a)}else e=null,E=a;else e=null,E=a;return null!==e&&(e=function(e,t,n){return n.unshift(t),n}(s,e[1],e[2])),null===e&&(E=s),e}function v(){var e,n,i,o;return i=E,o=E,45===t.charCodeAt(E)?(e="-",E++):(e=null,0===x&&r('"-"')),null!==e?(n=g(),null!==n?e=[e,n]:(e=null,E=o)):(e=null,E=o),null!==e&&(e=function(e,t){return t}(i,e[1])),null===e&&(E=i),e}function g(){var e;return"little"===t.substr(E,6)?(e="little",E+=6):(e=null,0===x&&r('"little"')),null===e&&("big"===t.substr(E,3)?(e="big",E+=3):(e=null,0===x&&r('"big"')),null===e&&("signed"===t.substr(E,6)?(e="signed",E+=6):(e=null,0===x&&r('"signed"')),null===e&&("unsigned"===t.substr(E,8)?(e="unsigned",E+=8):(e=null,0===x&&r('"unsigned"')),null===e&&("integer"===t.substr(E,7)?(e="integer",E+=7):(e=null,0===x&&r('"integer"')),null===e&&("binary"===t.substr(E,6)?(e="binary",E+=6):(e=null,0===x&&r('"binary"')),null===e&&("float"===t.substr(E,5)?(e="float",E+=5):(e=null,0===x&&r('"float"')),null===e&&(e=y()))))))),e}function y(){var e,n,i,o;return i=E,o=E,"unit:"===t.substr(E,5)?(e="unit:",E+=5):(e=null,0===x&&r('"unit:"')),null!==e?(n=h(),null!==n?e=[e,n]:(e=null,E=o)):(e=null,E=o),null!==e&&(e=function(e,t){return"unit:"+t}(i,e[1])),null===e&&(E=i),e}function m(){var e,n;for(e=[],/^[ \t\n]/.test(t.charAt(E))?(n=t.charAt(E),E++):(n=null,0===x&&r("[ \\t\\n]"));null!==n;)e.push(n),/^[ \t\n]/.test(t.charAt(E))?(n=t.charAt(E),E++):(n=null,0===x&&r("[ \\t\\n]"));return e}function b(e){e.sort();for(var t=null,n=[],r=0;r<e.length;r++)e[r]!==t&&(n.push(e[r]),t=e[r]);return n}function w(){for(var e=1,n=1,r=!1,i=0;i<Math.max(E,I);i++){var o=t.charAt(i);"\n"===o?(r||e++,n=1,r=!1):"\r"===o||"\u2028"===o||"\u2029"===o?(e++,n=1,r=!0):(n++,r=!1)}return{line:e,column:n}}var _={start:i,segmentTail:o,segment:s,string:a,chars:u,"char":c,hexDigit:l,identifier:f,number:h,size:p,specifierList:d,specifierTail:v,specifier:g,unit:y,ws:m};if(void 0!==n){if(void 0===_[n])throw new Error("Invalid rule name: "+e(n)+".")}else n="start";var E=0,x=0,I=0,k=[],S=_[n]();if(null===S||E!==t.length){var C=Math.max(E,I),T=C<t.length?t.charAt(C):null,U=w();throw new this.SyntaxError(b(k),T,C,U.line,U.column)}return S},toSource:function(){return this._source}};return t.SyntaxError=function(t,n,r,i,o){function s(t,n){var r,i;switch(t.length){case 0:r="end of input";break;case 1:r=t[0];break;default:r=t.slice(0,t.length-1).join(", ")+" or "+t[t.length-1]}return i=n?e(n):"end of input","Expected "+r+" but "+i+" found."}this.name="SyntaxError",this.expected=t,this.found=n,this.message=s(t,n),this.offset=r,this.line=i,this.column=o},t.SyntaxError.prototype=Error.prototype,t}()},function(e,t,n){"use strict";function r(e,t,n,r,i){switch(n){case 1:return i?e.readInt8(t):e.readUInt8(t);case 2:return r?i?e.readInt16BE(t):e.readUInt16BE(t):i?e.readInt16LE(t):e.readUInt16LE(t);case 4:return r?i?e.readInt32BE(t):e.readUInt32BE(t):i?e.readInt32LE(t):e.readUInt32LE(t);case 8:return r?(i?c.readInt64BE:c.readUInt64BE)(e,t):(i?c.readInt64LE:c.readUInt64LE)(e,t);default:throw"Integers must be 8-, 16-, 32- or 64-bit"}}function i(e,t,n,r){switch(n){case 4:return r?e.readFloatBE(t):e.readFloatLE(t);case 8:return r?e.readDoubleBE(t):e.readDoubleLE(t);default:throw"Floats must be 32- or 64-bit"}}function o(e,t){var n=e.size;return"string"==typeof n?t[n]:n}function s(e){function t(){}return t.prototype=e,new t}function a(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function u(e,t,n){function u(e){l("skip bits"),l(e);var t=o(e,v);if(t===!0)return d%8===0?(d=g,!0):!1;var n=e.unit*t;return d+n>g?!1:void(d+=n)}function c(e){l("get_integer"),l(e);var n=e.unit,i=o(e,v),s=i*n,a=d/8;return d+=s,s%8>0||d>g?!1:r(t,a,s/8,e.bigendian,e.signed)}function f(e){l("get_float"),l(e);var n=e.unit,r=o(e,v),s=r*n,a=d/8;return d+=s,d>g?!1:i(t,a,s/8,e.bigendian)}function h(e){l("get_binary"),l(e);var n=e.unit,r=o(e,v),i=d/8;if(r===!0)return d=g,t.slice(i);var s=r*n;return s%8>0||d+s>g?!1:(d+=s,t.slice(i,i+s/8))}function p(e){l("get_string"),l(e);var n=e.value.length,r=d/8;return d+=8*n,d>g?!1:t.slice(r,r+n).toString("utf8")}for(var d=0,v=s(n),g=8*t.length,y=e.length,m=0;y>m;m++){var b=e[m],w=!1;if("_"===b.name)w=u(b);else{switch(b.type){case"string":w=p(b);break;case"integer":w=c(b);break;case"float":w=f(b);break;case"binary":w=h(b)}if(w===!1)return!1;if(b.name)v[b.name]=w;else if(b.value!=w)return!1}}return d==g?a(v):!1}var c=n(71),l={NODE_ENV:"production"}.DEBUG?function(e){console.log(e)}:function(){};e.exports.match=u,e.exports.parse_int=r,e.exports.parse_float=i},function(e,t,n){(function(t){"use strict";function r(e,t,n,r){for(var i=0,o=n.length;o>i;i++){var s=n[i];switch(s.type){case"string":t+=e.write(s.value,t,"utf8");break;case"binary":t+=a(s,e,t,r);break;case"integer":t+=u(s,e,t,r);break;case"float":t+=l(s,e,t,r)}}return t}function i(e,n){var i=s(e,n),o=new t(i);return r(o,0,e,n),o}function o(e,n){if("string"==typeof e.size)return n[e.size]*e.unit/8;if("string"===e.type)return t.byteLength(e.value,"utf8");if("binary"===e.type&&e.size===!0){var r=n[e.name];return r.length}return e.size*e.unit/8}function s(e,t){for(var n=0,r=0,i=e.length;i>r;r++)n+=o(e[r],t);return n}function a(e,t,n,r){var i=r[e.name],s=o(e,r);return i.copy(t,n,0,s),s}function u(e,t,n,r){var i=e.name?r[e.name]:e.value,s=o(e,r);return c(t,i,n,s,e.bigendian)}function c(e,t,n,r,i){switch(r){case 1:e.writeUInt8(t,n);break;case 2:i?e.writeUInt16BE(t,n):e.writeUInt16LE(t,n);break;case 4:i?e.writeUInt32BE(t,n):e.writeUInt32LE(t,n);break;case 8:i?h.writeUInt64BE(e,t,n):h.writeUInt64LE(e,t,n);break;default:throw new Error("integer size * unit must be 8, 16, 32 or 64")}return r}function l(e,t,n,r){var i=e.name?r[e.name]:e.value,s=o(e,r);return f(t,i,n,s,e.bigendian)}function f(e,t,n,r,i){if(4===r)i?e.writeFloatBE(t,n):e.writeFloatLE(t,n);else{if(8!==r)throw new Error("float size * unit must be 32 or 64");i?e.writeDoubleBE(t,n):e.writeDoubleLE(t,n)}return r}var h=n(71),p=n(78).parse;e.exports.write=r,e.exports.build=i,e.exports.write_int=c,e.exports.write_float=f,e.exports.builder=function(e){e=arguments.length>1?[].join.call(arguments,","):e;var t=p(e);return function(e){return i(t,e)}}}).call(t,n(3).Buffer)},function(e,t,n){(function(t){"use strict";function r(){T=[]}function i(){T.push(w.apply(null,arguments))}function o(){return T.join("\n")}function s(e){return"string"==typeof e.size?w("%s * %d",h(e.size),e.unit):(e.size*e.unit).toString()}function a(e){i("bits = %s;\n",s(e));var t="integer"===e.type?"parse_int":"parse_float",n=e.bigendian,r=e.signed;i("byteoffset = offset / 8; offset += bits"),i("if (offset > binsize) { return false; }"),i("else { result = %s(bin, byteoffset, bits / 8, %s, %s); }",t,n,r)}function u(e){i("byteoffset = offset / 8;"),e.size===!0?(i("offset = binsize;"),i("result = bin.slice(byteoffset);")):(i("bits = %s;",s(e)),i("offset += bits;"),i("if (offset > binsize) { return false; }"),i("else { result = bin.slice(byteoffset,","byteoffset + bits / 8); }"))}function c(e){i("byteoffset = offset / 8;");var t=e.value.length,n=8*t;i("offset += %d;",n),i("if (offset > binsize) { return false; }"),i("else { result = bin.toString(byteoffset,",w("byteoffset + %d); }",t))}function l(e){if("string"==typeof e.size)i("var skipbits = %s * %d;",h(e.size),e.unit),i("if (offset + skipbits > binsize) { return false; }"),i("else { offset += skipbits; }");else if(e.size===!0)i("if (offset % 8 === 0) { offset = binsize; }"),i("else { return false; }");else{var t=e.unit*e.size;i("if (offset + %d > binsize) { return false; }",t),i("else { offset += %d; }",t)}}function f(e){if("_"===e.name)l(e);else{switch(e.type){case"integer":case"float":a(e);break;case"binary":u(e);break;case"string":c(e)}if(i("if (result === false) return false;"),e.name)i("else if (%s !== undefined) {",h(e.name)),i("if (%s != result) return false;",h(e.name)),i("}"),i("else %s = result;",h(e.name));else{var t=JSON.stringify(e.value);i("else if (result != %s) return false;",t)}}}function h(e){return"var_"+e}function p(e){for(var t={},n=0;n<e.length;n++){var r=e[n].name;r&&"_"!==r&&(t[r]=!0),r=e[n].size,"string"==typeof r&&(t[r]=!0)}return Object.keys(t)}function d(e){r(),i("return function(binary, env) {"),i("'use strict';"),i("var bin = binary, env = env || {};"),i("var offset = 0, binsize = bin.length * 8;"),i("var bits, result, byteoffset;");for(var t=p(e),n=0;n<t.length;n++){var s=t[n];i("var %s = env['%s'];",h(s),s)}for(var a=e.length,u=0;a>u;u++){var c=e[u];i("// "+JSON.stringify(c)),f(c)}i("if (offset == binsize) {"),i("return {");for(var n=0;n<t.length;n++){var s=t[n];i("%s: %s,",s,h(s))}i("};"),i("}"),i("else return false;"),i("}");var l=new Function("parse_int","parse_float",o());return l(x,I)}function v(e){switch(e.type){case"string":i("offset += buf.write(%s, offset, 'utf8');",JSON.stringify(e.value));break;case"binary":i("val = bindings['%s'];",e.name),e.size===!0?i("size = val.length;"):"string"==typeof e.size?i("size = (bindings['%s'] * %d) / 8;",e.size,e.unit):i("size = %d;",e.size*e.unit/8),i("val.copy(buf, offset, 0, size);"),i("offset += size;");break;case"integer":case"float":g(e)}}function g(e){e.name?i("val = bindings['%s'];",e.name):i("val = %d",e.value);var t="integer"===e.type?"write_int":"write_float";"string"==typeof e.size?i("size = (bindings['%s'] * %d) / 8;",e.size,e.unit):i("size = %d;",e.size*e.unit/8),i("%s(buf, val, offset, size, %s);",t,e.bigendian),i("offset += size;")}function y(e){for(var n=[],r=0,o=0;o<e.length;o++){var s=e[o];"string"==typeof s.size||s.size===!0?n.push(s):r+="string"===s.type?t.byteLength(s.value):s.size*s.unit/8}if(i("var buffersize = %d;",r),n.length>0)for(var a=0;a<n.length;a++){var s=n[a];s.size===!0?i("buffersize += bindings['%s'].length;",s.name):i("buffersize += (bindings['%s'] * %d) / 8;",s.size,s.unit)}}function m(e){i("var val, size;");for(var t=e.length,n=0;t>n;n++){var r=e[n];i("// %s",JSON.stringify(r)),v(r)}}function b(e){return r(),i("return function(bindings) {"),i("'use strict';"),y(e),i("var buf = new Buffer(buffersize);"),i("var offset = 0;"),m(e),i("return buf;"),i("}"),new Function("write_int","write_float",o())(S,C)}n(71);var w=n(73).format,_=n(78).parse,E=n(81),x=E.parse_int,I=E.parse_float,k=n(82),S=k.write_int,C=k.write_float,T=[];e.exports.compile_pattern=d,e.exports.compile=function(){var e=[].join.call(arguments,","),t=_(e);return d(t)},e.exports.compile_builder=function(){var e=[].join.call(arguments,","),t=_(e);return b(t)}}).call(t,n(3).Buffer)},function(e,t,n){(function(t,r){"use strict";function i(e){this.newStreams=[],this.oldStreams=[],this.blocked=!1,this.scheduledRead=!1,this.out=e;var t=this;e.on("drain",function(){t.blocked=!1,t._readIncoming()})}var o=(n(73).inherits,n(72)),s="function"==typeof t?t:r.nextTick;i.prototype._readIncoming=function(){function e(e){var r;if(1===e.length){for(r=e.shift();t;){var i=r.read();if(null===i)break;t=n.write(i)}t||e.push(r)}else for(;t&&(r=e.shift());){var i=r.read();null!==i&&(t=n.write(i),e.push(r))}}if(!this.blocked){var t=!0,n=this.out;e(this.newStreams),t?(o.equal(0,this.newStreams.length),e(this.oldStreams)):(o(this.newStreams.length>0,"Expect some new streams to remain"),this.oldStreams=this.oldStreams.concat(this.newStreams),this.newStreams=[]),this.blocked=!t}},i.prototype._scheduleRead=function(){var e=this;e.scheduledRead||(s(function(){e.scheduledRead=!1,e._readIncoming()}),e.scheduledRead=!0)},i.prototype.pipeFrom=function(e){function t(){i.newStreams.push(e),i._scheduleRead()}function n(){e.removeListener("readable",t),e.removeListener("error",n),e.removeListener("end",n),e.removeListener("unpipeFrom",r)}function r(e){e===i&&n()}var i=this;e.on("unpipeFrom",r),e.on("end",n),e.on("error",n),e.on("readable",t)},i.prototype.unpipeFrom=function(e){e.emit("unpipeFrom",this)},e.exports.Mux=i}).call(t,n(39).setImmediate,n(38))},function(e,t,n){function r(){i.call(this)}e.exports=r;var i=n(86).EventEmitter,o=n(75);o(r,i),r.Readable=n(87),r.Writable=n(100),r.Duplex=n(101),r.Transform=n(102),r.PassThrough=n(103),r.Stream=r,r.prototype.pipe=function(e,t){function n(t){e.writable&&!1===e.write(t)&&c.pause&&c.pause()}function r(){c.readable&&c.resume&&c.resume()}function o(){l||(l=!0,e.end())}function s(){l||(l=!0,"function"==typeof e.destroy&&e.destroy())}function a(e){if(u(),0===i.listenerCount(this,"error"))throw e}function u(){c.removeListener("data",n),e.removeListener("drain",r),c.removeListener("end",o),c.removeListener("close",s),c.removeListener("error",a),e.removeListener("error",a),c.removeListener("end",u),c.removeListener("close",u),e.removeListener("close",u)}var c=this;c.on("data",n),e.on("drain",r),e._isStdio||t&&t.end===!1||(c.on("end",o),c.on("close",s));var l=!1;return c.on("error",a),e.on("error",a),c.on("end",u),c.on("close",u),e.on("close",u),e.emit("pipe",c),e}},function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function i(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function s(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!i(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,i,a,u,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],s(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),n.apply(this,a)}else if(o(n))for(a=Array.prototype.slice.call(arguments,1),c=n.slice(),i=c.length,u=0;i>u;u++)c[u].apply(this,a);return!0},n.prototype.addListener=function(e,t){var i;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned&&(i=s(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),i||(i=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var i=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,i,s,a;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],s=n.length,i=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(a=s;a-- >0;)if(n[a]===t||n[a].listener&&n[a].listener===t){i=a;break}if(0>i)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],r(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,n){(function(r){t=e.exports=n(88),t.Stream=n(85),t.Readable=t,t.Writable=n(96),t.Duplex=n(95),t.Transform=n(98),t.PassThrough=n(99),r.browser||"disable"!=={NODE_ENV:"production"}.READABLE_STREAM||(e.exports=n(85))}).call(t,n(38))},function(e,t,n){(function(t){function r(e,t){var r=n(95);e=e||{};var i=e.highWaterMark,o=e.objectMode?16:16384;this.highWaterMark=i||0===i?i:o,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!e.objectMode,t instanceof r&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(T||(T=n(97).StringDecoder),this.decoder=new T(e.encoding),this.encoding=e.encoding)}function i(e){n(95);return this instanceof i?(this._readableState=new r(e,this),this.readable=!0,void S.call(this)):new i(e)}function o(e,t,n,r,i){var o=c(t,n);if(o)e.emit("error",o);else if(C.isNullOrUndefined(n))t.reading=!1,t.ended||l(e,t);else if(t.objectMode||n&&n.length>0)if(t.ended&&!i){var a=new Error("stream.push() after EOF");e.emit("error",a)}else if(t.endEmitted&&i){var a=new Error("stream.unshift() after end event");e.emit("error",a)}else!t.decoder||i||r||(n=t.decoder.write(n)),i||(t.reading=!1),t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,i?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&f(e)),p(e,t);else i||(t.reading=!1);return s(t)}function s(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function a(e){if(e>=B)e=B;else{e--;for(var t=1;32>t;t<<=1)e|=e>>t;e++}return e}function u(e,t){return 0===t.length&&t.ended?0:t.objectMode?0===e?0:1:isNaN(e)||C.isNull(e)?t.flowing&&t.buffer.length?t.buffer[0].length:t.length:0>=e?0:(e>t.highWaterMark&&(t.highWaterMark=a(e)),e>t.length?t.ended?t.length:(t.needReadable=!0,0):e)}function c(e,t){var n=null;return C.isBuffer(t)||C.isString(t)||C.isNullOrUndefined(t)||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function l(e,t){if(t.decoder&&!t.ended){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,f(e)}function f(e){var n=e._readableState;n.needReadable=!1,n.emittedReadable||(U("emitReadable",n.flowing),n.emittedReadable=!0,n.sync?t.nextTick(function(){h(e)}):h(e))}function h(e){U("emit readable"),e.emit("readable"),m(e)}function p(e,n){n.readingMore||(n.readingMore=!0,t.nextTick(function(){d(e,n)}))}function d(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(U("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function v(e){return function(){var t=e._readableState;U("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&k.listenerCount(e,"data")&&(t.flowing=!0,m(e))}}function g(e,n){n.resumeScheduled||(n.resumeScheduled=!0,t.nextTick(function(){y(e,n)}))}function y(e,t){t.resumeScheduled=!1,e.emit("resume"),m(e),t.flowing&&!t.reading&&e.read(0)}function m(e){var t=e._readableState;if(U("flow",t.flowing),t.flowing)do var n=e.read();while(null!==n&&t.flowing)}function b(e,t){var n,r=t.buffer,i=t.length,o=!!t.decoder,s=!!t.objectMode;if(0===r.length)return null;if(0===i)n=null;else if(s)n=r.shift();else if(!e||e>=i)n=o?r.join(""):I.concat(r,i),r.length=0;else if(e<r[0].length){var a=r[0];n=a.slice(0,e),r[0]=a.slice(e)}else if(e===r[0].length)n=r.shift();else{n=o?"":new I(e);for(var u=0,c=0,l=r.length;l>c&&e>u;c++){var a=r[0],f=Math.min(e-u,a.length);o?n+=a.slice(0,f):a.copy(n,u,0,f),f<a.length?r[0]=a.slice(f):r.shift(),u+=f}}return n}function w(e){var n=e._readableState;if(n.length>0)throw new Error("endReadable called on non-empty stream");n.endEmitted||(n.ended=!0,t.nextTick(function(){n.endEmitted||0!==n.length||(n.endEmitted=!0,e.readable=!1,e.emit("end"))}))}function _(e,t){for(var n=0,r=e.length;r>n;n++)t(e[n],n)}function E(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1}e.exports=i;var x=n(89),I=n(90).Buffer;i.ReadableState=r;var k=n(86).EventEmitter;k.listenerCount||(k.listenerCount=function(e,t){return e.listeners(t).length});var S=n(85),C=n(93);C.inherits=n(75);var T,U=n(94);U=U&&U.debuglog?U.debuglog("stream"):function(){},C.inherits(i,S),i.prototype.push=function(e,t){var n=this._readableState;return C.isString(e)&&!n.objectMode&&(t=t||n.defaultEncoding,t!==n.encoding&&(e=new I(e,t),t="")),o(this,n,e,t,!1)},i.prototype.unshift=function(e){var t=this._readableState;return o(this,t,e,"",!0)},i.prototype.setEncoding=function(e){return T||(T=n(97).StringDecoder),this._readableState.decoder=new T(e),this._readableState.encoding=e,this};var B=8388608;i.prototype.read=function(e){U("read",e);var t=this._readableState,n=e;if((!C.isNumber(e)||e>0)&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return U("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?w(this):f(this),null;if(e=u(e,t),0===e&&t.ended)return 0===t.length&&w(this),null;var r=t.needReadable;U("need readable",r),(0===t.length||t.length-e<t.highWaterMark)&&(r=!0,U("length less than watermark",r)),(t.ended||t.reading)&&(r=!1,U("reading or ended",r)),r&&(U("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1),r&&!t.reading&&(e=u(n,t));var i;return i=e>0?b(e,t):null,C.isNull(i)&&(t.needReadable=!0,e=0),t.length-=e,0!==t.length||t.ended||(t.needReadable=!0),n!==e&&t.ended&&0===t.length&&w(this),C.isNull(i)||this.emit("data",i),i},i.prototype._read=function(e){this.emit("error",new Error("not implemented"))},i.prototype.pipe=function(e,n){function r(e){U("onunpipe"),e===f&&o()}function i(){U("onend"),e.end()}function o(){U("cleanup"),e.removeListener("close",u),e.removeListener("finish",c),e.removeListener("drain",g),e.removeListener("error",a),e.removeListener("unpipe",r),f.removeListener("end",i),f.removeListener("end",o),f.removeListener("data",s),!h.awaitDrain||e._writableState&&!e._writableState.needDrain||g()}function s(t){U("ondata");var n=e.write(t);!1===n&&(U("false write response, pause",f._readableState.awaitDrain),f._readableState.awaitDrain++,f.pause())}function a(t){U("onerror",t),l(),e.removeListener("error",a),0===k.listenerCount(e,"error")&&e.emit("error",t)}function u(){e.removeListener("finish",c),l()}function c(){U("onfinish"),e.removeListener("close",u),l()}function l(){U("unpipe"),f.unpipe(e)}var f=this,h=this._readableState;switch(h.pipesCount){case 0:h.pipes=e;break;case 1:h.pipes=[h.pipes,e];break;default:h.pipes.push(e)}h.pipesCount+=1,U("pipe count=%d opts=%j",h.pipesCount,n);var p=(!n||n.end!==!1)&&e!==t.stdout&&e!==t.stderr,d=p?i:o;h.endEmitted?t.nextTick(d):f.once("end",d),e.on("unpipe",r);var g=v(f);return e.on("drain",g),f.on("data",s),e._events&&e._events.error?x(e._events.error)?e._events.error.unshift(a):e._events.error=[a,e._events.error]:e.on("error",a),e.once("close",u),e.once("finish",c),e.emit("pipe",f),h.flowing||(U("pipe resume"),f.resume()),e},i.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var n=t.pipes,r=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;r>i;i++)n[i].emit("unpipe",this);return this}var i=E(t.pipes,e);return-1===i?this:(t.pipes.splice(i,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},i.prototype.on=function(e,n){var r=S.prototype.on.call(this,e,n);if("data"===e&&!1!==this._readableState.flowing&&this.resume(),"readable"===e&&this.readable){var i=this._readableState;if(!i.readableListening)if(i.readableListening=!0,i.emittedReadable=!1,i.needReadable=!0,
i.reading)i.length&&f(this,i);else{var o=this;t.nextTick(function(){U("readable nexttick read 0"),o.read(0)})}}return r},i.prototype.addListener=i.prototype.on,i.prototype.resume=function(){var e=this._readableState;return e.flowing||(U("resume"),e.flowing=!0,e.reading||(U("resume read 0"),this.read(0)),g(this,e)),this},i.prototype.pause=function(){return U("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(U("pause"),this._readableState.flowing=!1,this.emit("pause")),this},i.prototype.wrap=function(e){var t=this._readableState,n=!1,r=this;e.on("end",function(){if(U("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&r.push(e)}r.push(null)}),e.on("data",function(i){if(U("wrapped data"),t.decoder&&(i=t.decoder.write(i)),i&&(t.objectMode||i.length)){var o=r.push(i);o||(n=!0,e.pause())}});for(var i in e)C.isFunction(e[i])&&C.isUndefined(this[i])&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));var o=["error","close","destroy","pause","resume"];return _(o,function(t){e.on(t,r.emit.bind(r,t))}),r._read=function(t){U("wrapped _read",t),n&&(n=!1,e.resume())},r},i._fromList=b}).call(t,n(38))},function(e,t){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},function(e,t,n){(function(e,r){/*!
	 * The buffer module from node.js, for the browser.
	 *
	 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
	 * @license  MIT
	 */
"use strict";function i(){try{var e=new Uint8Array(1);return e.foo=function(){return 42},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}function o(){return e.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function e(t){return this instanceof e?(e.TYPED_ARRAY_SUPPORT||(this.length=0,this.parent=void 0),"number"==typeof t?s(this,t):"string"==typeof t?a(this,t,arguments.length>1?arguments[1]:"utf8"):u(this,t)):arguments.length>1?new e(t,arguments[1]):new e(t)}function s(t,n){if(t=v(t,0>n?0:0|g(n)),!e.TYPED_ARRAY_SUPPORT)for(var r=0;n>r;r++)t[r]=0;return t}function a(e,t,n){"string"==typeof n&&""!==n||(n="utf8");var r=0|m(t,n);return e=v(e,r),e.write(t,n),e}function u(t,n){if(e.isBuffer(n))return c(t,n);if($(n))return l(t,n);if(null==n)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(n.buffer instanceof ArrayBuffer)return f(t,n);if(n instanceof ArrayBuffer)return h(t,n)}return n.length?p(t,n):d(t,n)}function c(e,t){var n=0|g(t.length);return e=v(e,n),t.copy(e,0,0,n),e}function l(e,t){var n=0|g(t.length);e=v(e,n);for(var r=0;n>r;r+=1)e[r]=255&t[r];return e}function f(e,t){var n=0|g(t.length);e=v(e,n);for(var r=0;n>r;r+=1)e[r]=255&t[r];return e}function h(t,n){return n.byteLength,e.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(n),t.__proto__=e.prototype):t=f(t,new Uint8Array(n)),t}function p(e,t){var n=0|g(t.length);e=v(e,n);for(var r=0;n>r;r+=1)e[r]=255&t[r];return e}function d(e,t){var n,r=0;"Buffer"===t.type&&$(t.data)&&(n=t.data,r=0|g(n.length)),e=v(e,r);for(var i=0;r>i;i+=1)e[i]=255&n[i];return e}function v(t,n){e.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(n),t.__proto__=e.prototype):t.length=n;var r=0!==n&&n<=e.poolSize>>>1;return r&&(t.parent=X),t}function g(e){if(e>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|e}function y(t,n){if(!(this instanceof y))return new y(t,n);var r=new e(t,n);return delete r.parent,r}function m(e,t){"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"binary":case"raw":case"raws":return n;case"utf8":case"utf-8":return H(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return K(e).length;default:if(r)return H(e).length;t=(""+t).toLowerCase(),r=!0}}function b(e,t,n){var r=!1;if(t=0|t,n=void 0===n||n===1/0?this.length:0|n,e||(e="utf8"),0>t&&(t=0),n>this.length&&(n=this.length),t>=n)return"";for(;;)switch(e){case"hex":return j(this,t,n);case"utf8":case"utf-8":return C(this,t,n);case"ascii":return U(this,t,n);case"binary":return B(this,t,n);case"base64":return S(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function w(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;var o=t.length;if(o%2!==0)throw new Error("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;r>s;s++){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))throw new Error("Invalid hex string");e[n+s]=a}return s}function _(e,t,n,r){return Y(H(t,e.length-n),e,n,r)}function E(e,t,n,r){return Y(Q(t),e,n,r)}function x(e,t,n,r){return E(e,t,n,r)}function I(e,t,n,r){return Y(K(t),e,n,r)}function k(e,t,n,r){return Y(W(t,e.length-n),e,n,r)}function S(e,t,n){return 0===t&&n===e.length?V.fromByteArray(e):V.fromByteArray(e.slice(t,n))}function C(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;n>i;){var o=e[i],s=null,a=o>239?4:o>223?3:o>191?2:1;if(n>=i+a){var u,c,l,f;switch(a){case 1:128>o&&(s=o);break;case 2:u=e[i+1],128===(192&u)&&(f=(31&o)<<6|63&u,f>127&&(s=f));break;case 3:u=e[i+1],c=e[i+2],128===(192&u)&&128===(192&c)&&(f=(15&o)<<12|(63&u)<<6|63&c,f>2047&&(55296>f||f>57343)&&(s=f));break;case 4:u=e[i+1],c=e[i+2],l=e[i+3],128===(192&u)&&128===(192&c)&&128===(192&l)&&(f=(15&o)<<18|(63&u)<<12|(63&c)<<6|63&l,f>65535&&1114112>f&&(s=f))}}null===s?(s=65533,a=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|1023&s),r.push(s),i+=a}return T(r)}function T(e){var t=e.length;if(J>=t)return String.fromCharCode.apply(String,e);for(var n="",r=0;t>r;)n+=String.fromCharCode.apply(String,e.slice(r,r+=J));return n}function U(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;n>i;i++)r+=String.fromCharCode(127&e[i]);return r}function B(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;n>i;i++)r+=String.fromCharCode(e[i]);return r}function j(e,t,n){var r=e.length;(!t||0>t)&&(t=0),(!n||0>n||n>r)&&(n=r);for(var i="",o=t;n>o;o++)i+=z(e[o]);return i}function O(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function A(e,t,n){if(e%1!==0||0>e)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function R(t,n,r,i,o,s){if(!e.isBuffer(t))throw new TypeError("buffer must be a Buffer instance");if(n>o||s>n)throw new RangeError("value is out of bounds");if(r+i>t.length)throw new RangeError("index out of range")}function L(e,t,n,r){0>t&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);o>i;i++)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function M(e,t,n,r){0>t&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);o>i;i++)e[n+i]=t>>>8*(r?i:3-i)&255}function P(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("index out of range");if(0>n)throw new RangeError("index out of range")}function F(e,t,n,r,i){return i||P(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),G.write(e,t,n,r,23,4),n+4}function N(e,t,n,r,i){return i||P(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),G.write(e,t,n,r,52,8),n+8}function D(e){if(e=q(e).replace(Z,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function q(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function z(e){return 16>e?"0"+e.toString(16):e.toString(16)}function H(e,t){t=t||1/0;for(var n,r=e.length,i=null,o=[],s=0;r>s;s++){if(n=e.charCodeAt(s),n>55295&&57344>n){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(56320>n){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=(i-55296<<10|n-56320)+65536}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,128>n){if((t-=1)<0)break;o.push(n)}else if(2048>n){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(65536>n){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(1114112>n))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function Q(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t}function W(e,t){for(var n,r,i,o=[],s=0;s<e.length&&!((t-=2)<0);s++)n=e.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r);return o}function K(e){return V.toByteArray(D(e))}function Y(e,t,n,r){for(var i=0;r>i&&!(i+n>=t.length||i>=e.length);i++)t[i+n]=e[i];return i}var V=n(91),G=n(5),$=n(92);t.Buffer=e,t.SlowBuffer=y,t.INSPECT_MAX_BYTES=50,e.poolSize=8192;var X={};e.TYPED_ARRAY_SUPPORT=void 0!==r.TYPED_ARRAY_SUPPORT?r.TYPED_ARRAY_SUPPORT:i(),e._augment=function(t){return t.__proto__=e.prototype,t},e.TYPED_ARRAY_SUPPORT?(e.prototype.__proto__=Uint8Array.prototype,e.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&e[Symbol.species]===e&&Object.defineProperty(e,Symbol.species,{value:null,configurable:!0})):(e.prototype.length=void 0,e.prototype.parent=void 0),e.isBuffer=function(e){return!(null==e||!e._isBuffer)},e.compare=function(t,n){if(!e.isBuffer(t)||!e.isBuffer(n))throw new TypeError("Arguments must be Buffers");if(t===n)return 0;for(var r=t.length,i=n.length,o=0,s=Math.min(r,i);s>o;++o)if(t[o]!==n[o]){r=t[o],i=n[o];break}return i>r?-1:r>i?1:0},e.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},e.concat=function(t,n){if(!$(t))throw new TypeError("list argument must be an Array of Buffers.");if(0===t.length)return new e(0);var r;if(void 0===n)for(n=0,r=0;r<t.length;r++)n+=t[r].length;var i=new e(n),o=0;for(r=0;r<t.length;r++){var s=t[r];s.copy(i,o),o+=s.length}return i},e.byteLength=m,e.prototype._isBuffer=!0,e.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?C(this,0,e):b.apply(this,arguments)},e.prototype.equals=function(t){if(!e.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:0===e.compare(this,t)},e.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},e.prototype.compare=function(t){if(!e.isBuffer(t))throw new TypeError("Argument must be a Buffer");return e.compare(this,t)},e.prototype.indexOf=function(t,n){function r(e,t,n){for(var r=-1,i=0;n+i<e.length;i++)if(e[n+i]===t[-1===r?0:i-r]){if(-1===r&&(r=i),i-r+1===t.length)return n+r}else r=-1;return-1}if(n>2147483647?n=2147483647:-2147483648>n&&(n=-2147483648),n>>=0,0===this.length)return-1;if(n>=this.length)return-1;if(0>n&&(n=Math.max(this.length+n,0)),"string"==typeof t)return 0===t.length?-1:String.prototype.indexOf.call(this,t,n);if(e.isBuffer(t))return r(this,t,n);if("number"==typeof t)return e.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,t,n):r(this,[t],n);throw new TypeError("val must be string, number or Buffer")},e.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else if(isFinite(t))t=0|t,isFinite(n)?(n=0|n,void 0===r&&(r="utf8")):(r=n,n=void 0);else{var i=r;r=t,t=0|n,n=i}var o=this.length-t;if((void 0===n||n>o)&&(n=o),e.length>0&&(0>n||0>t)||t>this.length)throw new RangeError("attempt to write outside buffer bounds");r||(r="utf8");for(var s=!1;;)switch(r){case"hex":return w(this,e,t,n);case"utf8":case"utf-8":return _(this,e,t,n);case"ascii":return E(this,e,t,n);case"binary":return x(this,e,t,n);case"base64":return I(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,e,t,n);default:if(s)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),s=!0}},e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var J=4096;e.prototype.slice=function(t,n){var r=this.length;t=~~t,n=void 0===n?r:~~n,0>t?(t+=r,0>t&&(t=0)):t>r&&(t=r),0>n?(n+=r,0>n&&(n=0)):n>r&&(n=r),t>n&&(n=t);var i;if(e.TYPED_ARRAY_SUPPORT)i=this.subarray(t,n),i.__proto__=e.prototype;else{var o=n-t;i=new e(o,void 0);for(var s=0;o>s;s++)i[s]=this[s+t]}return i.length&&(i.parent=this.parent||this),i},e.prototype.readUIntLE=function(e,t,n){e=0|e,t=0|t,n||A(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},e.prototype.readUIntBE=function(e,t,n){e=0|e,t=0|t,n||A(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},e.prototype.readUInt8=function(e,t){return t||A(e,1,this.length),this[e]},e.prototype.readUInt16LE=function(e,t){return t||A(e,2,this.length),this[e]|this[e+1]<<8},e.prototype.readUInt16BE=function(e,t){return t||A(e,2,this.length),this[e]<<8|this[e+1]},e.prototype.readUInt32LE=function(e,t){return t||A(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},e.prototype.readUInt32BE=function(e,t){return t||A(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},e.prototype.readIntLE=function(e,t,n){e=0|e,t=0|t,n||A(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},e.prototype.readIntBE=function(e,t,n){e=0|e,t=0|t,n||A(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},e.prototype.readInt8=function(e,t){return t||A(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},e.prototype.readInt16LE=function(e,t){t||A(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},e.prototype.readInt16BE=function(e,t){t||A(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},e.prototype.readInt32LE=function(e,t){return t||A(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},e.prototype.readInt32BE=function(e,t){return t||A(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},e.prototype.readFloatLE=function(e,t){return t||A(e,4,this.length),G.read(this,e,!0,23,4)},e.prototype.readFloatBE=function(e,t){return t||A(e,4,this.length),G.read(this,e,!1,23,4)},e.prototype.readDoubleLE=function(e,t){return t||A(e,8,this.length),G.read(this,e,!0,52,8)},e.prototype.readDoubleBE=function(e,t){return t||A(e,8,this.length),G.read(this,e,!1,52,8)},e.prototype.writeUIntLE=function(e,t,n,r){e=+e,t=0|t,n=0|n,r||R(this,e,t,n,Math.pow(2,8*n),0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},e.prototype.writeUIntBE=function(e,t,n,r){e=+e,t=0|t,n=0|n,r||R(this,e,t,n,Math.pow(2,8*n),0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},e.prototype.writeUInt8=function(t,n,r){return t=+t,n=0|n,r||R(this,t,n,1,255,0),e.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[n]=255&t,n+1},e.prototype.writeUInt16LE=function(t,n,r){return t=+t,n=0|n,r||R(this,t,n,2,65535,0),e.TYPED_ARRAY_SUPPORT?(this[n]=255&t,this[n+1]=t>>>8):L(this,t,n,!0),n+2},e.prototype.writeUInt16BE=function(t,n,r){return t=+t,n=0|n,r||R(this,t,n,2,65535,0),e.TYPED_ARRAY_SUPPORT?(this[n]=t>>>8,this[n+1]=255&t):L(this,t,n,!1),n+2},e.prototype.writeUInt32LE=function(t,n,r){return t=+t,n=0|n,r||R(this,t,n,4,4294967295,0),e.TYPED_ARRAY_SUPPORT?(this[n+3]=t>>>24,this[n+2]=t>>>16,this[n+1]=t>>>8,this[n]=255&t):M(this,t,n,!0),n+4},e.prototype.writeUInt32BE=function(t,n,r){return t=+t,n=0|n,r||R(this,t,n,4,4294967295,0),e.TYPED_ARRAY_SUPPORT?(this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=255&t):M(this,t,n,!1),n+4},e.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t=0|t,!r){var i=Math.pow(2,8*n-1);R(this,e,t,n,i-1,-i)}var o=0,s=1,a=0>e?1:0;for(this[t]=255&e;++o<n&&(s*=256);)this[t+o]=(e/s>>0)-a&255;return t+n},e.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t=0|t,!r){var i=Math.pow(2,8*n-1);R(this,e,t,n,i-1,-i)}var o=n-1,s=1,a=0>e?1:0;for(this[t+o]=255&e;--o>=0&&(s*=256);)this[t+o]=(e/s>>0)-a&255;return t+n},e.prototype.writeInt8=function(t,n,r){return t=+t,n=0|n,r||R(this,t,n,1,127,-128),e.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),0>t&&(t=255+t+1),this[n]=255&t,n+1},e.prototype.writeInt16LE=function(t,n,r){return t=+t,n=0|n,r||R(this,t,n,2,32767,-32768),e.TYPED_ARRAY_SUPPORT?(this[n]=255&t,this[n+1]=t>>>8):L(this,t,n,!0),n+2},e.prototype.writeInt16BE=function(t,n,r){return t=+t,n=0|n,r||R(this,t,n,2,32767,-32768),e.TYPED_ARRAY_SUPPORT?(this[n]=t>>>8,this[n+1]=255&t):L(this,t,n,!1),n+2},e.prototype.writeInt32LE=function(t,n,r){return t=+t,n=0|n,r||R(this,t,n,4,2147483647,-2147483648),e.TYPED_ARRAY_SUPPORT?(this[n]=255&t,this[n+1]=t>>>8,this[n+2]=t>>>16,this[n+3]=t>>>24):M(this,t,n,!0),n+4},e.prototype.writeInt32BE=function(t,n,r){return t=+t,n=0|n,r||R(this,t,n,4,2147483647,-2147483648),0>t&&(t=4294967295+t+1),e.TYPED_ARRAY_SUPPORT?(this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=255&t):M(this,t,n,!1),n+4},e.prototype.writeFloatLE=function(e,t,n){return F(this,e,t,!0,n)},e.prototype.writeFloatBE=function(e,t,n){return F(this,e,t,!1,n)},e.prototype.writeDoubleLE=function(e,t,n){return N(this,e,t,!0,n)},e.prototype.writeDoubleBE=function(e,t,n){return N(this,e,t,!1,n)},e.prototype.copy=function(t,n,r,i){if(r||(r=0),i||0===i||(i=this.length),n>=t.length&&(n=t.length),n||(n=0),i>0&&r>i&&(i=r),i===r)return 0;if(0===t.length||0===this.length)return 0;if(0>n)throw new RangeError("targetStart out of bounds");if(0>r||r>=this.length)throw new RangeError("sourceStart out of bounds");if(0>i)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-n<i-r&&(i=t.length-n+r);var o,s=i-r;if(this===t&&n>r&&i>n)for(o=s-1;o>=0;o--)t[o+n]=this[o+r];else if(1e3>s||!e.TYPED_ARRAY_SUPPORT)for(o=0;s>o;o++)t[o+n]=this[o+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+s),n);return s},e.prototype.fill=function(e,t,n){if(e||(e=0),t||(t=0),n||(n=this.length),t>n)throw new RangeError("end < start");if(n!==t&&0!==this.length){if(0>t||t>=this.length)throw new RangeError("start out of bounds");if(0>n||n>this.length)throw new RangeError("end out of bounds");var r;if("number"==typeof e)for(r=t;n>r;r++)this[r]=e;else{var i=H(e.toString()),o=i.length;for(r=t;n>r;r++)this[r]=i[r%o]}return this}};var Z=/[^+\/0-9A-Za-z-_]/g}).call(t,n(3).Buffer,function(){return this}())},function(e,t){"use strict";function n(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,n=e.length;n>t;++t)a[t]=e[t],u[e.charCodeAt(t)]=t;u["-".charCodeAt(0)]=62,u["_".charCodeAt(0)]=63}function r(e){var t,n,r,i,o,s,a=e.length;if(a%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o="="===e[a-2]?2:"="===e[a-1]?1:0,s=new c(3*a/4-o),r=o>0?a-4:a;var l=0;for(t=0,n=0;r>t;t+=4,n+=3)i=u[e.charCodeAt(t)]<<18|u[e.charCodeAt(t+1)]<<12|u[e.charCodeAt(t+2)]<<6|u[e.charCodeAt(t+3)],s[l++]=i>>16&255,s[l++]=i>>8&255,s[l++]=255&i;return 2===o?(i=u[e.charCodeAt(t)]<<2|u[e.charCodeAt(t+1)]>>4,s[l++]=255&i):1===o&&(i=u[e.charCodeAt(t)]<<10|u[e.charCodeAt(t+1)]<<4|u[e.charCodeAt(t+2)]>>2,s[l++]=i>>8&255,s[l++]=255&i),s}function i(e){return a[e>>18&63]+a[e>>12&63]+a[e>>6&63]+a[63&e]}function o(e,t,n){for(var r,o=[],s=t;n>s;s+=3)r=(e[s]<<16)+(e[s+1]<<8)+e[s+2],o.push(i(r));return o.join("")}function s(e){for(var t,n=e.length,r=n%3,i="",s=[],u=16383,c=0,l=n-r;l>c;c+=u)s.push(o(e,c,c+u>l?l:c+u));return 1===r?(t=e[n-1],i+=a[t>>2],i+=a[t<<4&63],i+="=="):2===r&&(t=(e[n-2]<<8)+e[n-1],i+=a[t>>10],i+=a[t>>4&63],i+=a[t<<2&63],i+="="),s.push(i),s.join("")}t.toByteArray=r,t.fromByteArray=s;var a=[],u=[],c="undefined"!=typeof Uint8Array?Uint8Array:Array;n()},6,function(e,t,n){(function(e){function n(e){return Array.isArray?Array.isArray(e):"[object Array]"===g(e)}function r(e){return"boolean"==typeof e}function i(e){return null===e}function o(e){return null==e}function s(e){return"number"==typeof e}function a(e){return"string"==typeof e}function u(e){return"symbol"==typeof e}function c(e){return void 0===e}function l(e){return"[object RegExp]"===g(e)}function f(e){return"object"==typeof e&&null!==e}function h(e){return"[object Date]"===g(e)}function p(e){return"[object Error]"===g(e)||e instanceof Error}function d(e){return"function"==typeof e}function v(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function g(e){return Object.prototype.toString.call(e)}t.isArray=n,t.isBoolean=r,t.isNull=i,t.isNullOrUndefined=o,t.isNumber=s,t.isString=a,t.isSymbol=u,t.isUndefined=c,t.isRegExp=l,t.isObject=f,t.isDate=h,t.isError=p,t.isFunction=d,t.isPrimitive=v,t.isBuffer=e.isBuffer}).call(t,n(3).Buffer)},43,[306,88,96],function(e,t,n){(function(t){function r(e,t,n){this.chunk=e,this.encoding=t,this.callback=n}function i(e,t){var r=n(95);e=e||{};var i=e.highWaterMark,o=e.objectMode?16:16384;this.highWaterMark=i||0===i?i:o,this.objectMode=!!e.objectMode,t instanceof r&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var s=e.decodeStrings===!1;this.decodeStrings=!s,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){p(t,e)},this.writecb=null,this.writelen=0,this.buffer=[],this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1}function o(e){var t=n(95);return this instanceof o||this instanceof t?(this._writableState=new i(e,this),this.writable=!0,void x.call(this)):new o(e)}function s(e,n,r){var i=new Error("write after end");e.emit("error",i),t.nextTick(function(){r(i)})}function a(e,n,r,i){var o=!0;if(!(E.isBuffer(r)||E.isString(r)||E.isNullOrUndefined(r)||n.objectMode)){var s=new TypeError("Invalid non-string/buffer chunk");e.emit("error",s),t.nextTick(function(){i(s)}),o=!1}return o}function u(e,t,n){return!e.objectMode&&e.decodeStrings!==!1&&E.isString(t)&&(t=new _(t,n)),t}function c(e,t,n,i,o){n=u(t,n,i),E.isBuffer(n)&&(i="buffer");var s=t.objectMode?1:n.length;t.length+=s;var a=t.length<t.highWaterMark;return a||(t.needDrain=!0),t.writing||t.corked?t.buffer.push(new r(n,i,o)):l(e,t,!1,s,n,i,o),a}function l(e,t,n,r,i,o,s){t.writelen=r,t.writecb=s,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function f(e,n,r,i,o){r?t.nextTick(function(){n.pendingcb--,o(i)}):(n.pendingcb--,o(i)),e._writableState.errorEmitted=!0,e.emit("error",i)}function h(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function p(e,n){var r=e._writableState,i=r.sync,o=r.writecb;if(h(r),n)f(e,r,i,n,o);else{var s=y(e,r);s||r.corked||r.bufferProcessing||!r.buffer.length||g(e,r),i?t.nextTick(function(){d(e,r,s,o)}):d(e,r,s,o)}}function d(e,t,n,r){n||v(e,t),t.pendingcb--,r(),b(e,t)}function v(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function g(e,t){if(t.bufferProcessing=!0,e._writev&&t.buffer.length>1){for(var n=[],r=0;r<t.buffer.length;r++)n.push(t.buffer[r].callback);t.pendingcb++,l(e,t,!0,t.length,t.buffer,"",function(e){for(var r=0;r<n.length;r++)t.pendingcb--,n[r](e)}),t.buffer=[]}else{for(var r=0;r<t.buffer.length;r++){var i=t.buffer[r],o=i.chunk,s=i.encoding,a=i.callback,u=t.objectMode?1:o.length;if(l(e,t,!1,u,o,s,a),t.writing){r++;break}}r<t.buffer.length?t.buffer=t.buffer.slice(r):t.buffer.length=0}t.bufferProcessing=!1}function y(e,t){return t.ending&&0===t.length&&!t.finished&&!t.writing}function m(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function b(e,t){var n=y(e,t);return n&&(0===t.pendingcb?(m(e,t),t.finished=!0,e.emit("finish")):m(e,t)),n}function w(e,n,r){n.ending=!0,b(e,n),r&&(n.finished?t.nextTick(r):e.once("finish",r)),n.ended=!0}e.exports=o;var _=n(90).Buffer;o.WritableState=i;var E=n(93);E.inherits=n(75);var x=n(85);E.inherits(o,x),o.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},o.prototype.write=function(e,t,n){var r=this._writableState,i=!1;return E.isFunction(t)&&(n=t,t=null),E.isBuffer(e)?t="buffer":t||(t=r.defaultEncoding),E.isFunction(n)||(n=function(){}),r.ended?s(this,r,n):a(this,r,e,n)&&(r.pendingcb++,i=c(this,r,e,t,n)),i},o.prototype.cork=function(){var e=this._writableState;e.corked++},o.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.buffer.length||g(this,e))},o.prototype._write=function(e,t,n){n(new Error("not implemented"))},o.prototype._writev=null,o.prototype.end=function(e,t,n){var r=this._writableState;E.isFunction(e)?(n=e,e=null,t=null):E.isFunction(t)&&(n=t,t=null),E.isNullOrUndefined(e)||this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||w(this,r,n)}}).call(t,n(38))},function(e,t,n){function r(e){if(e&&!u(e))throw new Error("Unknown encoding: "+e)}function i(e){return e.toString(this.encoding)}function o(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function s(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}var a=n(90).Buffer,u=a.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},c=t.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),r(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=o;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=s;break;default:return void(this.write=i)}this.charBuffer=new a(6),this.charReceived=0,this.charLength=0};c.prototype.write=function(e){for(var t="";this.charLength;){var n=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";e=e.slice(n,e.length),t=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var r=t.charCodeAt(t.length-1);if(!(r>=55296&&56319>=r)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var i=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,i),i-=this.charReceived),t+=e.toString(this.encoding,0,i);var i=t.length-1,r=t.charCodeAt(i);if(r>=55296&&56319>=r){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),e.copy(this.charBuffer,0,0,o),t.substring(0,i)}return t},c.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var n=e[e.length-t];if(1==t&&n>>5==6){this.charLength=2;break}if(2>=t&&n>>4==14){this.charLength=3;break}if(3>=t&&n>>3==30){this.charLength=4;break}}this.charReceived=t},c.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var n=this.charReceived,r=this.charBuffer,i=this.encoding;t+=r.slice(0,n).toString(i)}return t}},function(e,t,n){function r(e,t){this.afterTransform=function(e,n){return i(t,e,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function i(e,t,n){var r=e._transformState;r.transforming=!1;var i=r.writecb;if(!i)return e.emit("error",new Error("no writecb in Transform class"));r.writechunk=null,r.writecb=null,u.isNullOrUndefined(n)||e.push(n),i&&i(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}function o(e){if(!(this instanceof o))return new o(e);a.call(this,e),this._transformState=new r(e,this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("prefinish",function(){u.isFunction(this._flush)?this._flush(function(e){s(t,e)}):s(t)})}function s(e,t){if(t)return e.emit("error",t);var n=e._writableState,r=e._transformState;if(n.length)throw new Error("calling transform done when ws.length != 0");if(r.transforming)throw new Error("calling transform done when still transforming");return e.push(null)}e.exports=o;var a=n(95),u=n(93);u.inherits=n(75),u.inherits(o,a),o.prototype.push=function(e,t){return this._transformState.needTransform=!1,a.prototype.push.call(this,e,t)},o.prototype._transform=function(e,t,n){throw new Error("not implemented")},o.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(e){var t=this._transformState;u.isNull(t.writechunk)||!t.writecb||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))}},[307,98],function(e,t,n){e.exports=n(96)},[308,95],[309,98],function(e,t,n){e.exports=n(99)},function(e,t,n){"use strict";function r(t,n,r){function i(){return r()?(c=0,!0):++c<2}o.call(this),this.interval=t;var s=t*e.exports.UNITS_TO_MS,a=this.emit.bind(this,"beat"),u=this.emit.bind(this,"timeout");this.sendTimer=setInterval(this.runHeartbeat.bind(this,n,a),s/2);var c=0;this.recvTimer=setInterval(this.runHeartbeat.bind(this,i,u),s)}var i=n(73).inherits,o=n(86).EventEmitter;e.exports.UNITS_TO_MS=1e3,i(r,o),e.exports.Heart=r,r.prototype.clear=function(){clearInterval(this.sendTimer),clearInterval(this.recvTimer)},r.prototype.runHeartbeat=function(e,t){e()||t()}},function(e,t,n){"use strict";var r=n(69),i=n(73).format,o=(n(73).inherits,n(76).HEARTBEAT);e.exports.closeMessage=function(e){var t=e.fields.replyCode;return i('%d (%s) with message "%s"',t,r.constant_strs[t],e.fields.replyText)},e.exports.methodName=function(e){return r.info(e).name},e.exports.inspect=function(e,t){if(e===o)return"<Heartbeat>";if(e.id){var n=r.info(e.id);return i("<%s channel:%d%s>",n.name,e.channel,t?" "+JSON.stringify(e.fields,void 0,2):"")}return i("<Content channel:%d size:%d>",e.channel,e.size)}},function(e,t){"use strict";function n(e){if(e){var t=Math.ceil(e/32);this.words=new Array(t)}else this.words=[];this.wordsInUse=0}function r(e){return Math.floor(e/32)}function i(e){if(0===e)return 32;var t,n=31;return t=e<<16,0!=t&&(n-=16,e=t),t=e<<8,0!=t&&(n-=8,e=t),t=e<<4,0!=t&&(n-=4,e=t),t=e<<2,0!=t&&(n-=2,e=t),n-(e<<1>>>31)}var o=n.prototype;o.ensureSize=function(e){var t=this.words.length;e>t&&(this.words=this.words.concat(new Array(e-t)))},o.set=function(e){var t=r(e);t>=this.wordsInUse&&(this.ensureSize(t+1),this.wordsInUse=t+1);var n=1<<e;this.words[t]|=n},o.clear=function(e){var t=r(e);if(!(t>=this.wordsInUse)){var n=~(1<<e);this.words[t]&=n}},o.get=function(e){var t=r(e);if(t>=this.wordsInUse)return!1;var n=1<<e;return!!(this.words[t]&n)},o.nextSetBit=function(e){var t=r(e);if(t>=this.wordsInUse)return-1;for(var n=this.words[t]&4294967295<<e;;){if(n)return 32*t+i(n);if(t++,t===this.wordsInUse)return-1;n=this.words[t]}},o.nextClearBit=function(e){var t=r(e);if(t>=this.wordsInUse)return e;for(var n=~this.words[t]&4294967295<<e;;){if(n)return 32*t+i(n);if(t++,t==this.wordsInUse)return 32*t;n=~this.words[t]}},e.exports.BitSet=n},function(e,t,n){function r(e,t){return e&&e.split("\n").slice(t).join("\n")}function i(e,t){var n=new Error;this.message=e,this.stack=this.toString()+"\n"+r(n.stack,2),this.stackAtStateChange=t}function o(e){var t=new Error;return"Stack capture: "+e+"\n"+r(t.stack,2)}var s=n(73).inherits;s(i,Error),i.prototype.name="IllegalOperationError",e.exports.IllegalOperationError=i,e.exports.stackCapture=o},function(e,t,n){(function(t){e.exports.plain=function(e,n){return{mechanism:"PLAIN",response:function(){return new t(["",e,n].join(String.fromCharCode(0)))}}},e.exports.external=function(){return{mechanism:"EXTERNAL",response:function(){return new t("")}}}}).call(t,n(3).Buffer)},function(e,t){e.exports={_args:[["amqplib@^0.4.0","/Users/gfoiani/Dev/work/spacebunny/sdk/node"]],_from:"amqplib@>=0.4.0 <0.5.0",_id:"amqplib@0.4.1",_inCache:!0,_installable:!0,_location:"/amqplib",_nodeVersion:"0.10.25",_npmOperationalInternal:{host:"packages-5-east.internal.npmjs.com",tmp:"tmp/amqplib-0.4.1.tgz_1454652521626_0.6085246792063117"},_npmUser:{email:"mikeb@squaremobius.net",name:"squaremo"},_npmVersion:"3.3.3",_phantomChildren:{},_requested:{name:"amqplib",raw:"amqplib@^0.4.0",rawSpec:"^0.4.0",scope:null,spec:">=0.4.0 <0.5.0",type:"range"},_requiredBy:["/"],_resolved:"https://registry.npmjs.org/amqplib/-/amqplib-0.4.1.tgz",_shasum:"988e5c65eb992b2df8486d52ef2f6bbbc8fdbd0e",_shrinkwrap:null,_spec:"amqplib@^0.4.0",_where:"/Users/gfoiani/Dev/work/spacebunny/sdk/node",author:{email:"mikeb@squaremobius.net",name:"Michael Bridgen"},bugs:{url:"https://github.com/squaremo/amqp.node/issues"},dependencies:{bitsyntax:"~0.0.4","buffer-more-ints":"0.0.2","readable-stream":"1.x >=1.1.9",when:"~3.6.2"},description:"An AMQP 0-9-1 (e.g., RabbitMQ) library and client.",devDependencies:{claire:"0.4.1",istanbul:"0.1.x",mocha:"~1","uglify-js":"2.4.x"},directories:{},dist:{shasum:"988e5c65eb992b2df8486d52ef2f6bbbc8fdbd0e",tarball:"https://registry.npmjs.org/amqplib/-/amqplib-0.4.1.tgz"},engines:{node:">=0.8 <5 || ^5"},gitHead:"e6e52d94ef308ece88188b3a89c4a68b5d70863f",homepage:"http://squaremo.github.io/amqp.node/",keywords:["AMQP","AMQP 0-9-1","RabbitMQ"],license:"MIT",main:"./channel_api.js",maintainers:[{name:"squaremo",email:"mikeb@squaremobius.net"}],name:"amqplib",optionalDependencies:{},readme:"ERROR: No README data found!",repository:{type:"git",url:"git+https://github.com/squaremo/amqp.node.git"},scripts:{prepublish:"make",test:"make test"
},version:"0.4.1"}},function(e,t){},function(e,t,n){"use strict";function r(e){if(!(this instanceof r))return new r(e);l.call(this),this.connection=e;var t=this;["error","close","blocked","unblocked"].forEach(function(n){e.on(n,t.emit.bind(t,n))})}function i(e){f.call(this,e),this.on("delivery",this.handleDelivery.bind(this)),this.on("cancel",this.handleCancel.bind(this))}function o(e){i.call(this,e)}var s=n(69),a=n(112),u=a.defer,c=n(73).inherits,l=n(86).EventEmitter,f=n(131).BaseChannel,h=n(131).acceptMessage,p=n(132);c(r,l),e.exports.ChannelModel=r;var d=r.prototype;d.close=function(){var e=u();return this.connection.close(function(t){null===t?e.resolve():e.reject(t)}),e.promise},c(i,f),e.exports.Channel=i,d.createChannel=function(){var e=new i(this.connection);return e.open().then(function(t){return e})};var v=i.prototype;v.rpc=function(e,t,n){var r=u();return this._rpc(e,t,n,function(e,t){null!==e?r.reject(e):r.resolve(t.fields)}),r.promise},v.open=function(){return a["try"](this.allocate.bind(this)).then(function(e){return e.rpc(s.ChannelOpen,{outOfBand:""},s.ChannelOpenOk)})},v.close=function(){var e=u();return this.closeBecause("Goodbye",s.constants.REPLY_SUCCESS,e.resolve),e.promise},v.assertQueue=function(e,t){return this.rpc(s.QueueDeclare,p.assertQueue(e,t),s.QueueDeclareOk)},v.checkQueue=function(e){return this.rpc(s.QueueDeclare,p.checkQueue(e),s.QueueDeclareOk)},v.deleteQueue=function(e,t){return this.rpc(s.QueueDelete,p.deleteQueue(e,t),s.QueueDeleteOk)},v.purgeQueue=function(e){return this.rpc(s.QueuePurge,p.purgeQueue(e),s.QueuePurgeOk)},v.bindQueue=function(e,t,n,r){return this.rpc(s.QueueBind,p.bindQueue(e,t,n,r),s.QueueBindOk)},v.unbindQueue=function(e,t,n,r){return this.rpc(s.QueueUnbind,p.unbindQueue(e,t,n,r),s.QueueUnbindOk)},v.assertExchange=function(e,t,n){return this.rpc(s.ExchangeDeclare,p.assertExchange(e,t,n),s.ExchangeDeclareOk).then(function(t){return{exchange:e}})},v.checkExchange=function(e){return this.rpc(s.ExchangeDeclare,p.checkExchange(e),s.ExchangeDeclareOk)},v.deleteExchange=function(e,t){return this.rpc(s.ExchangeDelete,p.deleteExchange(e,t),s.ExchangeDeleteOk)},v.bindExchange=function(e,t,n,r){return this.rpc(s.ExchangeBind,p.bindExchange(e,t,n,r),s.ExchangeBindOk)},v.unbindExchange=function(e,t,n,r){return this.rpc(s.ExchangeUnbind,p.unbindExchange(e,t,n,r),s.ExchangeUnbindOk)},v.publish=function(e,t,n,r){var i=p.publish(e,t,r);return this.sendMessage(i,i,n)},v.sendToQueue=function(e,t,n){return this.publish("",e,t,n)},v.consume=function(e,t,n){var r=this,i=p.consume(e,n),o=u();return this._rpc(s.BasicConsume,i,s.BasicConsumeOk,function(e,n){null===e?(r.registerConsumer(n.fields.consumerTag,t),o.resolve(n.fields)):o.reject(e)}),o.promise},v.cancel=function(e){var t=this,n=u();return this._rpc(s.BasicCancel,p.cancel(e),s.BasicCancelOk,function(r,i){null===r?(t.unregisterConsumer(e),n.resolve(i.fields)):n.reject(r)}),n.promise},v.get=function(e,t){var n=u(),r=this,i=p.get(e,t);return this.sendOrEnqueue(s.BasicGet,i,function(e,t){if(null===e)if(t.id===s.BasicGetEmpty)n.resolve(!1);else if(t.id===s.BasicGetOk){var i=t.fields;r.handleMessage=h(function(e){e.fields=i,n.resolve(e)})}else n.reject(new Error("Unexpected response to BasicGet: "+inspect(t)));else n.reject(e)}),n.promise},v.ack=function(e,t){this.sendImmediately(s.BasicAck,p.ack(e.fields.deliveryTag,t))},v.ackAll=function(){this.sendImmediately(s.BasicAck,p.ack(0,!0))},v.nack=function(e,t,n){this.sendImmediately(s.BasicNack,p.nack(e.fields.deliveryTag,t,n))},v.nackAll=function(e){this.sendImmediately(s.BasicNack,p.nack(0,!0,e))},v.reject=function(e,t){this.sendImmediately(s.BasicReject,p.reject(e.fields.deliveryTag,t))},v.prefetch=v.qos=function(e,t){return this.rpc(s.BasicQos,p.prefetch(e,t),s.BasicQosOk)},v.recover=function(){return this.rpc(s.BasicRecover,p.recover(),s.BasicRecoverOk)},c(o,i),e.exports.ConfirmChannel=o,d.createConfirmChannel=function(){var e=new o(this.connection);return e.open().then(function(t){return e.rpc(s.ConfirmSelect,{nowait:!1},s.ConfirmSelectOk)}).then(function(){return e})};var g=o.prototype;g.publish=function(e,t,n,r,i){return this.pushConfirmCallback(i),v.publish.call(this,e,t,n,r)},g.sendToQueue=function(e,t,n,r){return this.publish("",e,t,n,r)},g.waitForConfirms=function(){var e=[],t=this.unconfirmed;return t.forEach(function(n,r){if(null===n);else{var i=u();t[r]=function(e){n&&n(e),null===e?i.resolve():i.reject(e)},e.push(i.promise)}}),a.all(e)}},function(e,t,n){var r;/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(i){"use strict";r=function(e){function t(e,t,n,r){var i=I.resolve(e);return arguments.length<2?i:i.then(t,n,r)}function r(e){return new I(e)}function i(e){return function(){for(var t=0,n=arguments.length,r=new Array(n);n>t;++t)r[t]=arguments[t];return k(e,this,r)}}function o(e){for(var t=0,n=arguments.length-1,r=new Array(n);n>t;++t)r[t]=arguments[t+1];return k(e,this,r)}function s(){return new a}function a(){function e(e){r._handler.resolve(e)}function t(e){r._handler.reject(e)}function n(e){r._handler.notify(e)}var r=I._defer();this.promise=r,this.resolve=e,this.reject=t,this.notify=n,this.resolver={resolve:e,reject:t,notify:n}}function u(e){return e&&"function"==typeof e.then}function c(){return I.all(arguments)}function l(e){return t(e,I.all)}function f(e){return t(e,I.settle)}function h(e,n){return t(e,function(e){return I.map(e,n)})}function p(e,n){return t(e,function(e){return I.filter(e,n)})}var d=n(113),v=n(117),g=n(120),y=n(121),m=n(122),b=n(123),w=n(124),_=n(125),E=n(126),x=n(116),I=[v,g,y,b,w,m,_,d,E].reduce(function(e,t){return t(e)},n(128)),k=n(119)(I);return t.promise=r,t.resolve=I.resolve,t.reject=I.reject,t.lift=i,t["try"]=o,t.attempt=o,t.iterate=I.iterate,t.unfold=I.unfold,t.join=c,t.all=l,t.settle=f,t.any=i(I.any),t.some=i(I.some),t.race=i(I.race),t.map=h,t.filter=p,t.reduce=i(I.reduce),t.reduceRight=i(I.reduceRight),t.isPromiseLike=u,t.Promise=I,t.defer=s,t.TimeoutError=x,t}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))}(n(44))},[303,114,116],function(e,t,n){var r;(function(i){/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(o){"use strict";r=function(e){function t(){return"undefined"!=typeof i&&null!==i&&"function"==typeof i.nextTick}function r(){return"function"==typeof MutationObserver&&MutationObserver||"function"==typeof WebKitMutationObserver&&WebKitMutationObserver}function o(e){function t(){var e=n;n=void 0,e()}var n,r=document.createTextNode(""),i=new e(t);i.observe(r,{characterData:!0});var o=0;return function(e){n=e,r.data=o^=1}}var s,a="undefined"!=typeof setTimeout&&setTimeout,u=function(e,t){return setTimeout(e,t)},c=function(e){return clearTimeout(e)},l=function(e){return a(e,0)};if(t())l=function(e){return i.nextTick(e)};else if(s=r())l=o(s);else if(!a){var f=n(115);u=function(e,t){return f.setTimer(t,e)},c=f.cancelTimer,l=f.runOnLoop||f.runOnContext}return{setTimer:u,clearTimer:c,asap:l}}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))}(n(44))}).call(t,n(38))},43,45,function(e,t,n){var r;/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(i){"use strict";r=function(e){var t=n(118),r=n(119);return function(e){function n(t){function n(e){l=null,this.resolve(e)}function r(e){this.resolved||(l.push(e),0===--c&&this.reject(l))}for(var i,o,s=e._defer(),a=s._handler,u=t.length>>>0,c=u,l=[],f=0;u>f;++f)if(o=t[f],void 0!==o||f in t){if(i=e._handler(o),i.state()>0){a.become(i),e._visitRemaining(t,f,i);break}i.visit(a,n,r)}else--c;return 0===c&&a.reject(new RangeError("any(): array must not be empty")),s}function i(t,n){function r(e){this.resolved||(l.push(e),0===--p&&(f=null,this.resolve(l)))}function i(e){this.resolved||(f.push(e),0===--o&&(l=null,this.reject(f)))}var o,s,a,u=e._defer(),c=u._handler,l=[],f=[],h=t.length>>>0,p=0;for(a=0;h>a;++a)s=t[a],(void 0!==s||a in t)&&++p;for(n=Math.max(n,0),o=p-n+1,p=Math.min(n,p),n>p?c.reject(new RangeError("some(): array must contain at least "+n+" item(s), but had "+p)):0===p&&c.resolve(l),a=0;h>a;++a)s=t[a],(void 0!==s||a in t)&&e._handler(s).visit(c,r,i,c.notify);return u}function o(t,n){return e._traverse(n,t)}function s(t,n){var r=m.call(t);return e._traverse(n,r).then(function(e){return a(r,e)})}function a(t,n){for(var r=n.length,i=new Array(r),o=0,s=0;r>o;++o)n[o]&&(i[s++]=e._handler(t[o]).value);return i.length=s,i}function u(e){return v(e.map(c))}function c(n){var r=e._handler(n);return 0===r.state()?d(n).then(t.fulfilled,t.rejected):t.inspect(r)}function l(e,t){return arguments.length>2?g.call(e,h(t),arguments[2]):g.call(e,h(t))}function f(e,t){return arguments.length>2?y.call(e,h(t),arguments[2]):y.call(e,h(t))}function h(e){return function(t,n,r){return p(e,void 0,[t,n,r])}}var p=r(e),d=e.resolve,v=e.all,g=Array.prototype.reduce,y=Array.prototype.reduceRight,m=Array.prototype.slice;return e.any=n,e.some=i,e.settle=u,e.map=o,e.filter=s,e.reduce=l,e.reduceRight=f,e.prototype.spread=function(e){return this.then(v).then(function(t){return e.apply(this,t)})},e}}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))}(n(44))},47,48,49,50,[304,118],52,53,54,function(e,t,n){var r;/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(i){"use strict";r=function(e){function t(e){throw e}function r(){}var i=n(114).setTimer,o=n(127);return function(e){function n(e){e.handled||(p.push(e),l("Potentially unhandled rejection ["+e.id+"] "+o.formatError(e.value)))}function s(e){var t=p.indexOf(e);t>=0&&(p.splice(t,1),f("Handled previous rejection ["+e.id+"] "+o.formatObject(e.value)))}function a(e,t){h.push(e,t),null===d&&(d=i(u,0))}function u(){for(d=null;h.length>0;)h.shift()(h.shift())}var c,l=r,f=r;"undefined"!=typeof console&&(c=console,l="undefined"!=typeof c.error?function(e){c.error(e)}:function(e){c.log(e)},f="undefined"!=typeof c.info?function(e){c.info(e)}:function(e){c.log(e)}),e.onPotentiallyUnhandledRejection=function(e){a(n,e)},e.onPotentiallyUnhandledRejectionHandled=function(e){a(s,e)},e.onFatalRejection=function(e){a(t,e.value)};var h=[],p=[],d=null;return e}}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))}(n(44))},function(e,t,n){var r;/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(i){"use strict";r=function(){function e(e){var n="object"==typeof e&&null!==e&&e.stack?e.stack:t(e);return e instanceof Error?n:n+" (WARNING: non-Error used)"}function t(e){var t=String(e);return"[object Object]"===t&&"undefined"!=typeof JSON&&(t=n(e,t)),t}function n(e,t){try{return JSON.stringify(e)}catch(n){return t}}return{formatError:e,formatObject:t,tryStringify:n}}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))}(n(44))},[305,129,130,114],function(e,t,n){var r;/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(i){"use strict";r=function(){return function(e){function t(e,t){this._handler=e===b?t:n(e)}function n(e){function t(e){i.resolve(e)}function n(e){i.reject(e)}function r(e){i.notify(e)}var i=new _;try{e(t,n,r)}catch(o){n(o)}return i}function r(e){return R(e)?e:new t(b,new E(g(e)))}function i(e){return new t(b,new E(new k(e)))}function o(){return X}function s(){return new t(b,new _)}function a(e,t){var n=new _(e.receiver,e.join().context);return new t(b,n)}function u(e){return l(Q,null,e)}function c(e,t){return l(N,e,t)}function l(e,n,r){function i(t,i,s){s.resolved||f(r,o,t,e(n,i,t),s)}function o(e,t,n){l[e]=t,0===--c&&n.become(new I(l))}for(var s,a="function"==typeof n?i:o,u=new _,c=r.length>>>0,l=new Array(c),h=0;h<r.length&&!u.resolved;++h)s=r[h],void 0!==s||h in r?f(r,a,h,s,u):--c;return 0===c&&u.become(new I(l)),new t(b,u)}function f(e,t,n,r,i){if(L(r)){var o=y(r),s=o.state();0===s?o.fold(t,n,void 0,i):s>0?t(n,o.value,i):(i.become(o),h(e,n+1,o))}else t(n,r,i)}function h(e,t,n){for(var r=t;r<e.length;++r)p(g(e[r]),n)}function p(e,t){if(e!==t){var n=e.state();0===n?e.visit(e,void 0,e._unreport):0>n&&e._unreport()}}function d(e){return"object"!=typeof e||null===e?i(new TypeError("non-iterable passed to race()")):0===e.length?o():1===e.length?r(e[0]):v(e)}function v(e){var n,r,i,o=new _;for(n=0;n<e.length;++n)if(r=e[n],void 0!==r||n in e){if(i=g(r),0!==i.state()){o.become(i),h(e,n+1,i);break}i.visit(o,o.resolve,o.reject)}return new t(b,o)}function g(e){return R(e)?e._handler.join():L(e)?m(e):new I(e)}function y(e){return R(e)?e._handler.join():m(e)}function m(e){try{var t=e.then;return"function"==typeof t?new x(t,e):new I(e)}catch(n){return new k(n)}}function b(){}function w(){}function _(e,n){t.createContext(this,n),this.consumers=void 0,this.receiver=e,this.handler=void 0,this.resolved=!1}function E(e){this.handler=e}function x(e,t){_.call(this),K.enqueue(new j(e,t,this))}function I(e){t.createContext(this),this.value=e}function k(e){t.createContext(this),this.id=++G,this.value=e,this.handled=!1,this.reported=!1,this._report()}function S(e,t){this.rejection=e,this.context=t}function C(e){this.rejection=e}function T(){return new k(new TypeError("Promise cycle"))}function U(e,t){this.continuation=e,this.handler=t}function B(e,t){this.handler=t,this.value=e}function j(e,t,n){this._then=e,this.thenable=t,this.resolver=n}function O(e,t,n,r,i){try{e.call(t,n,r,i)}catch(o){r(o)}}function A(e,t,n,r){this.f=e,this.z=t,this.c=n,this.to=r,this.resolver=V,this.receiver=this}function R(e){return e instanceof t}function L(e){return("object"==typeof e||"function"==typeof e)&&null!==e}function M(e,n,r,i){return"function"!=typeof e?i.become(n):(t.enterContext(n),D(e,n.value,r,i),void t.exitContext())}function P(e,n,r,i,o){return"function"!=typeof e?o.become(r):(t.enterContext(r),q(e,n,r.value,i,o),void t.exitContext())}function F(e,n,r,i,o){return"function"!=typeof e?o.notify(n):(t.enterContext(r),z(e,n,i,o),void t.exitContext())}function N(e,t,n){try{return e(t,n)}catch(r){return i(r)}}function D(e,t,n,r){try{r.become(g(e.call(n,t)))}catch(i){r.become(new k(i))}}function q(e,t,n,r,i){try{e.call(r,t,n,i)}catch(o){i.become(new k(o))}}function z(e,t,n,r){try{r.notify(e.call(n,t))}catch(i){r.notify(i)}}function H(e,t){t.prototype=Y(e.prototype),t.prototype.constructor=t}function Q(e,t){return t}function W(){}var K=e.scheduler,Y=Object.create||function(e){function t(){}return t.prototype=e,new t};t.resolve=r,t.reject=i,t.never=o,t._defer=s,t._handler=g,t.prototype.then=function(e,t,n){var r=this._handler,i=r.join().state();if("function"!=typeof e&&i>0||"function"!=typeof t&&0>i)return new this.constructor(b,r);var o=this._beget(),s=o._handler;return r.chain(s,r.receiver,e,t,n),o},t.prototype["catch"]=function(e){return this.then(void 0,e)},t.prototype._beget=function(){return a(this._handler,this.constructor)},t.all=u,t.race=d,t._traverse=c,t._visitRemaining=h,b.prototype.when=b.prototype.become=b.prototype.notify=b.prototype.fail=b.prototype._unreport=b.prototype._report=W,b.prototype._state=0,b.prototype.state=function(){return this._state},b.prototype.join=function(){for(var e=this;void 0!==e.handler;)e=e.handler;return e},b.prototype.chain=function(e,t,n,r,i){this.when({resolver:e,receiver:t,fulfilled:n,rejected:r,progress:i})},b.prototype.visit=function(e,t,n,r){this.chain(V,e,t,n,r)},b.prototype.fold=function(e,t,n,r){this.when(new A(e,t,n,r))},H(b,w),w.prototype.become=function(e){e.fail()};var V=new w;H(b,_),_.prototype._state=0,_.prototype.resolve=function(e){this.become(g(e))},_.prototype.reject=function(e){this.resolved||this.become(new k(e))},_.prototype.join=function(){if(!this.resolved)return this;for(var e=this;void 0!==e.handler;)if(e=e.handler,e===this)return this.handler=T();return e},_.prototype.run=function(){var e=this.consumers,t=this.join();this.consumers=void 0;for(var n=0;n<e.length;++n)t.when(e[n])},_.prototype.become=function(e){this.resolved||(this.resolved=!0,this.handler=e,void 0!==this.consumers&&K.enqueue(this),void 0!==this.context&&e._report(this.context))},_.prototype.when=function(e){this.resolved?K.enqueue(new U(e,this.handler)):void 0===this.consumers?this.consumers=[e]:this.consumers.push(e)},_.prototype.notify=function(e){this.resolved||K.enqueue(new B(e,this))},_.prototype.fail=function(e){var t="undefined"==typeof e?this.context:e;this.resolved&&this.handler.join().fail(t)},_.prototype._report=function(e){this.resolved&&this.handler.join()._report(e)},_.prototype._unreport=function(){this.resolved&&this.handler.join()._unreport()},H(b,E),E.prototype.when=function(e){K.enqueue(new U(e,this))},E.prototype._report=function(e){this.join()._report(e)},E.prototype._unreport=function(){this.join()._unreport()},H(_,x),H(b,I),I.prototype._state=1,I.prototype.fold=function(e,t,n,r){P(e,t,this,n,r)},I.prototype.when=function(e){M(e.fulfilled,this,e.receiver,e.resolver)};var G=0;H(b,k),k.prototype._state=-1,k.prototype.fold=function(e,t,n,r){r.become(this)},k.prototype.when=function(e){"function"==typeof e.rejected&&this._unreport(),M(e.rejected,this,e.receiver,e.resolver)},k.prototype._report=function(e){K.afterQueue(new S(this,e))},k.prototype._unreport=function(){this.handled||(this.handled=!0,K.afterQueue(new C(this)))},k.prototype.fail=function(e){t.onFatalRejection(this,void 0===e?this.context:e)},S.prototype.run=function(){this.rejection.handled||(this.rejection.reported=!0,t.onPotentiallyUnhandledRejection(this.rejection,this.context))},C.prototype.run=function(){this.rejection.reported&&t.onPotentiallyUnhandledRejectionHandled(this.rejection)},t.createContext=t.enterContext=t.exitContext=t.onPotentiallyUnhandledRejection=t.onPotentiallyUnhandledRejectionHandled=t.onFatalRejection=W;var $=new b,X=new t(b,$);return U.prototype.run=function(){this.handler.join().when(this.continuation)},B.prototype.run=function(){var e=this.handler.consumers;if(void 0!==e)for(var t,n=0;n<e.length;++n)t=e[n],F(t.progress,this.value,this.handler,t.receiver,t.resolver)},j.prototype.run=function(){function e(e){r.resolve(e)}function t(e){r.reject(e)}function n(e){r.notify(e)}var r=this.resolver;O(this._then,this.thenable,e,t,n)},A.prototype.fulfilled=function(e){this.f.call(this.c,this.z,e,this.to)},A.prototype.rejected=function(e){this.to.reject(e)},A.prototype.progress=function(e){this.to.notify(e)},t}}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))}(n(44))},function(e,t,n){var r;/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(i){"use strict";r=function(){function e(e){this._async=e,this._running=!1,this._queue=new Array(65536),this._queueLen=0,this._afterQueue=new Array(16),this._afterQueueLen=0;var t=this;this.drain=function(){t._drain()}}return e.prototype.enqueue=function(e){this._queue[this._queueLen++]=e,this.run()},e.prototype.afterQueue=function(e){this._afterQueue[this._afterQueueLen++]=e,this.run()},e.prototype.run=function(){this._running||(this._running=!0,this._async(this.drain))},e.prototype._drain=function(){for(var e=0;e<this._queueLen;++e)this._queue[e].run(),this._queue[e]=void 0;for(this._queueLen=0,this._running=!1,e=0;e<this._afterQueueLen;++e)this._afterQueue[e].run(),this._afterQueue[e]=void 0;this._afterQueueLen=0},e}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))}(n(44))},function(e,t,n){(function(t){"use strict";function r(e){v.call(this),this.connection=e,this.reply=null,this.pending=[],this.lwm=1,this.unconfirmed=[],this.on("ack",this.handleConfirm.bind(this,function(e){e&&e(null)})),this.on("nack",this.handleConfirm.bind(this,function(e){e&&e(new Error("message nacked"))})),this.handleMessage=s}function i(e,t){return function(){throw new y(e,t)}}function o(e,t,n){e.sendImmediately=e.sendOrEnqueue=e.sendMessage=i(t,n)}function s(e){var t;if(e.id===c.BasicDeliver)t="delivery";else{if(e.id!==c.BasicReturn)throw g("Expected BasicDeliver or BasicReturn; got %s",f(e));t="return"}var n=this,r=e.fields;return a(function(e){e.fields=r,n.emit(t,e)})}function a(e){function n(n){if(n.id===c.BasicProperties)return u.properties=n.fields,i=o=n.size,0===i?(u.content=new t(0),e(u),s):r;throw"Expected headers frame after delivery"}function r(n){if(n.content){var c=n.content.length;if(o-=c,0===o)return null!==a?(a.push(n.content),u.content=t.concat(a)):u.content=n.content,e(u),s;if(0>o)throw g("Too much content sent! Expected %d bytes",i);return null!==a?a.push(n.content):a=[n.content],r}throw"Expected content frame after headers"}var i=0,o=0,a=null,u={fields:null,properties:null,content:null};return n}function u(e){r.call(this,e),this.consumers={}}var c=n(69),l=n(105).closeMessage,f=n(105).inspect,h=n(105).methodName,p=n(72),d=n(73).inherits,v=n(86).EventEmitter,g=n(73).format,y=n(107).IllegalOperationError,m=n(107).stackCapture;d(r,v),e.exports.Channel=r,e.exports.acceptMessage=a;var b=r.prototype;b.allocate=function(){return this.ch=this.connection.freshChannel(this),this},b.sendImmediately=function(e,t){return this.connection.sendMethod(this.ch,e,t)},b.sendOrEnqueue=function(e,t,n){this.reply?this.pending.push({method:e,fields:t,reply:n}):(p(0===this.pending.length),this.reply=n,this.sendImmediately(e,t))},b.sendMessage=function(e,t,n){return this.connection.sendMessage(this.ch,c.BasicPublish,e,c.BasicProperties,t,n)},b._rpc=function(e,t,n,r){function i(t,i){if(null===t){if(i.id===n)return r(null,i);var s=h(n),a=new Error(g("Expected %s; got %s",s,f(i,!1)));return o.closeWithError(g("Expected %s; got %s",s,h(i.id)),c.constants.UNEXPECTED_FRAME,a),r(a)}if(t instanceof Error)return r(t);var u=(t.fields.classId<<16)+t.fields.methodId,a=e===u?g("Operation failed: %s; %s",h(e),l(t)):g("Channel closed by server: %s",l(t));return r(new Error(a))}var o=this;this.sendOrEnqueue(e,t,i)},b.toClosed=function(e){this._rejectPending(),o(this,"Channel closed",e),this.accept=i("Channel closed",e),this.connection.releaseChannel(this.ch),this.emit("close")},b.toClosing=function(e,t){var n=this.sendImmediately.bind(this);o(this,"Channel closing",e),this.accept=function(e){if(e.id===c.ChannelCloseOk){t&&t();var r=m("ChannelCloseOk frame received");this.toClosed(r)}else e.id===c.ChannelClose&&n(c.ChannelCloseOk,{})}},b._rejectPending=function(){function e(e){e(new Error("Channel ended, no reply will be forthcoming"))}null!==this.reply&&e(this.reply),this.reply=null;for(var t;t=this.pending.shift();)e(t.reply);this.pending=null},b.closeBecause=function(e,t,n){this.sendImmediately(c.ChannelClose,{replyText:e,replyCode:t,methodId:0,classId:0});var r=m("closeBecause called: "+e);this.toClosing(r,n)},b.closeWithError=function(e,t,n){var r=this;this.closeBecause(e,t,function(){n.code=t,r.emit("error",n)})},b.acceptMessageFrame=function(e){try{this.handleMessage=this.handleMessage(e)}catch(t){"string"==typeof t?this.closeWithError(t,c.constants.UNEXPECTED_FRAME,new Error(t)):t instanceof Error?this.closeWithError("Error while processing message",c.constants.INTERNAL_ERROR,t):this.closeWithError("Internal error while processing message",c.constants.INTERNAL_ERROR,new Error(t.toString()))}},b.handleConfirm=function(e,t){var n=t.deliveryTag,r=t.multiple;if(r){var i=this.unconfirmed.splice(0,n-this.lwm+1);this.lwm=n+1,i.forEach(e)}else{var o;if(n===this.lwm)for(o=this.unconfirmed.shift(),this.lwm++;null===this.unconfirmed[0];)this.unconfirmed.shift(),this.lwm++;else o=this.unconfirmed[n-this.lwm],this.unconfirmed[n-this.lwm]=null;e(o)}},b.pushConfirmCallback=function(e){this.unconfirmed.push(e||!1)},b.accept=function(e){switch(e.id){case void 0:case c.BasicDeliver:case c.BasicReturn:case c.BasicProperties:return this.acceptMessageFrame(e);case c.BasicAck:return this.emit("ack",e.fields);case c.BasicNack:return this.emit("nack",e.fields);case c.BasicCancel:return this.emit("cancel",e.fields);case c.ChannelClose:if(this.reply){var t=this.reply;this.reply=null,t(e)}var n="Channel closed by server: "+l(e);this.sendImmediately(c.ChannelCloseOk,{});var r=new Error(n);r.code=e.fields.replyCode,this.emit("error",r);var i=m(n);return void this.toClosed(i);case c.BasicFlow:return this.closeWithError("Flow not implemented",c.constants.NOT_IMPLEMENTED,new Error("Flow not implemented"));default:var t=this.reply;if(this.reply=null,this.pending.length>0){var o=this.pending.shift();this.reply=o.reply,this.sendImmediately(o.method,o.fields)}return t(null,e)}},b.onBufferDrain=function(){this.emit("drain")},d(u,r),e.exports.BaseChannel=u,u.prototype.registerConsumer=function(e,t){this.consumers[e]=t},u.prototype.unregisterConsumer=function(e){delete this.consumers[e]},u.prototype.dispatchMessage=function(e,t){var n=e.consumerTag,r=this.consumers[n];if(r)return r(t);throw new Error("Unknown consumer: "+n)},u.prototype.handleDelivery=function(e){return this.dispatchMessage(e.fields,e)},u.prototype.handleCancel=function(e){return this.dispatchMessage(e,null)}}).call(t,n(3).Buffer)},function(e,t){"use strict";function n(e,t,n){void 0!=n&&(e[t]=n)}var r=Object.freeze({}),i={};i.assertQueue=function(e,t){e=e||"",t=t||r;var i=Object.create(t.arguments||null);return n(i,"x-expires",t.expires),n(i,"x-message-ttl",t.messageTtl),n(i,"x-dead-letter-exchange",t.deadLetterExchange),n(i,"x-dead-letter-routing-key",t.deadLetterRoutingKey),n(i,"x-max-length",t.maxLength),n(i,"x-max-priority",t.maxPriority),{queue:e,exclusive:!!t.exclusive,durable:void 0===t.durable?!0:t.durable,autoDelete:!!t.autoDelete,arguments:i,passive:!1,ticket:0,nowait:!1}},i.checkQueue=function(e){return{queue:e,passive:!0,nowait:!1,durable:!0,autoDelete:!1,exclusive:!1,ticket:0}},i.deleteQueue=function(e,t){return t=t||r,{queue:e,ifUnused:!!t.ifUnused,ifEmpty:!!t.ifEmpty,ticket:0,nowait:!1}},i.purgeQueue=function(e){return{queue:e,ticket:0,nowait:!1}},i.bindQueue=function(e,t,n,r){return{queue:e,exchange:t,routingKey:n,arguments:r,ticket:0,nowait:!1}},i.unbindQueue=function(e,t,n,r){return{queue:e,exchange:t,routingKey:n,arguments:r,ticket:0,nowait:!1}},i.assertExchange=function(e,t,i){i=i||r;var o=Object.create(i.arguments||null);return n(o,"alternate-exchange",i.alternateExchange),{exchange:e,ticket:0,type:t,passive:!1,durable:void 0===i.durable?!0:i.durable,autoDelete:!!i.autoDelete,internal:!!i.internal,nowait:!1,arguments:o}},i.checkExchange=function(e){return{exchange:e,passive:!0,nowait:!1,durable:!0,internal:!1,type:"",autoDelete:!1,ticket:0}},i.deleteExchange=function(e,t){return t=t||r,{exchange:e,ifUnused:!!t.ifUnused,ticket:0,nowait:!1}},i.bindExchange=function(e,t,n,r){return{source:t,destination:e,routingKey:n,arguments:r,ticket:0,nowait:!1}},i.unbindExchange=function(e,t,n,r){return{source:t,destination:e,routingKey:n,arguments:r,ticket:0,nowait:!1}},i.publish=function(e,t,i){function o(e){return void 0===e?void 0:Array.isArray(e)?e.map(String):[String(e)]}i=i||r;var s=Object.create(i.headers||null);n(s,"CC",o(i.CC)),n(s,"BCC",o(i.BCC));var a;void 0!==i.persistent?a=i.persistent?2:1:"number"==typeof i.deliveryMode?a=i.deliveryMode:i.deliveryMode&&(a=2);var u=i.expiration;return void 0!==u&&(u=u.toString()),{exchange:e,routingKey:t,mandatory:!!i.mandatory,immediate:!1,ticket:void 0,contentType:i.contentType,contentEncoding:i.contentEncoding,headers:s,deliveryMode:a,priority:i.priority,correlationId:i.correlationId,replyTo:i.replyTo,expiration:u,messageId:i.messageId,timestamp:i.timestamp,type:i.type,userId:i.userId,appId:i.appId,clusterId:void 0}},i.consume=function(e,t){t=t||r;var i=Object.create(t.arguments||null);return n(i,"x-priority",t.priority),{ticket:0,queue:e,consumerTag:t.consumerTag||"",noLocal:!!t.noLocal,noAck:!!t.noAck,exclusive:!!t.exclusive,nowait:!1,arguments:i}},i.cancel=function(e){return{consumerTag:e,nowait:!1}},i.get=function(e,t){return t=t||r,{ticket:0,queue:e,noAck:!!t.noAck}},i.ack=function(e,t){return{deliveryTag:e,multiple:!!t}},i.nack=function(e,t,n){return{deliveryTag:e,multiple:!!t,requeue:void 0===n?!0:n}},i.reject=function(e,t){return{deliveryTag:e,requeue:void 0===t?!0:t}},i.prefetch=function(e,t){return{prefetchCount:e||0,prefetchSize:0,global:!!t}},i.recover=function(){return{requeue:!0}},e.exports=Object.freeze(i)},function(e,t,n){(function(e){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=n(134),s=r(o),a=n(214),u=r(a),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(110),f=r(l),h=n(35),p=r(h),d=n(216),v=r(d),g=n(234),y=r(g),m=n(37),b=r(m),w=n(235).CONFIG,_=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];i(this,t),this._connectionParams=(0,p["default"])({},y["default"].camelizeKeys(e)),this._endpointConfigs=void 0,this._endpointUrl=this._connectionParams.endpointUrl,this._deviceKey=this._connectionParams.deviceKey,this._channels=this._connectionParams.channels,this._deviceId=this._connectionParams.deviceId,this._client=this._connectionParams.client,this._secret=this._connectionParams.secret,this._host=this._connectionParams.host,this._port=this._connectionParams.port,this._vhost=this._connectionParams.vhost,this._protocol=w.protocol,this._inboxTopic=this._connectionParams.inputTopic||w.inboxTopic,this._liveStreamSuffix=w.liveStreamSuffix,this._tempQueueSuffix=w.tempQueueSuffix,this._liveStreams=[],this._tls=this._connectionParams.tls||!1,this._tlsOpts={},this._connectionParams.cert&&(this._tlsOpts.cert=f["default"].readFileSync(this._connectionParams.cert)),this._connectionParams.key&&(this._tlsOpts.key=f["default"].readFileSync(this._connectionParams.key)),this._connectionParams.passphrase&&(this._tlsOpts.passphrase=this._connectionParams.passphrase),this._connectionParams.ca&&(Array.isArray(this._connectionParams.ca)?this._tlsOpts.ca=this._connectionParams.ca.map(function(e){return f["default"].readFileSync(e)}):this._tlsOpts.ca=[f["default"].readFileSync(this._connectionParams.ca)]),this._connectionParams.pfx&&(this._tlsOpts.pfx=f["default"].readFileSync(this._connectionParams.pfx)),this._connectionParams.disableCertCheck?this._tlsOpts.rejectUnauthorized=!1:this._tlsOpts.rejectUnauthorized=!0,this._tlsOpts.secureProtocol=this._connectionParams.secureProtocol||w.tls.secureProtocol}return c(t,[{key:"getEndpointConfigs",value:function(){var e=this;return new b["default"](function(t,n){void 0!==e._endpointConfigs&&t(e._endpointConfigs);var r="";if(e._deviceId&&e._secret||e._deviceKey){r=w.deviceEndpoint;var i=e._generateHostname(r),o=""+i+r.api_version+r.path;if(e._deviceKey){var s={url:o,method:"get",responseType:"json",headers:{"Device-Key":e._deviceKey,"Content-Type":"application/json"}};(0,v["default"])(s).then(function(n){e._endpointConfigs=y["default"].camelizeKeys(n.data),e._connectionParams=e._endpointConfigs.connection,t(e._endpointConfigs)})["catch"](function(e){n(e)})}else e._deviceId&&e._secret&&e._host&&e._port&&e._vhost&&(e._connectionParams.protocols={},e._tls?e._connectionParams.protocols[e._protocol]={tlsPort:e._port}:e._connectionParams.protocols[e._protocol]={port:e._port},e._endpointConfigs={connection:e._connectionParams,channels:[]},t(e._endpointConfigs))}else if(e._client&&e._secret)if(e._host&&e._port&&e._vhost)e._connectionParams.protocols={},e._tls?e._connectionParams.protocols[e._protocol]={tlsPort:e._port}:e._connectionParams.protocols[e._protocol]={port:e._port},e._endpointConfigs={connection:e._connectionParams,liveStreams:[]},t(e._endpointConfigs);else{r=w.accessKeyEndpoint;var a=e._generateHostname(r),u=""+a+r.api_version+r.path,c={url:u,method:"get",responseType:"json",headers:{"Live-Stream-Key-Client":e._client,"Live-Stream-Key-Secret":e._secret,"Content-Type":"application/json"}};(0,v["default"])(c).then(function(n){e._endpointConfigs=y["default"].camelizeKeys(n.data),e._connectionParams=e._endpointConfigs.connection,e._liveStreams=e._endpointConfigs.liveStreams||[],t(e._endpointConfigs)})["catch"](function(e){n(e)})}else n("Missing Device Key or wrong connection parameters")})}},{key:"channels",value:function(){return this._endpointConfigs.channels?(this._channels=this._endpointConfigs.channels.map(function(e){return e.name}),this._channels||[]):[]}},{key:"deviceId",value:function(){return this._deviceId=this._deviceId||this._connectionParams.deviceId,this._deviceId}},{key:"liveStreamByName",value:function(e){var t=(0,s["default"])(this._liveStreams,function(t){return t.name===e});return t.length>0?t[0].id||e:e}},{key:"liveStreamExists",value:function(e){var t=(0,s["default"])(this._liveStreams,function(t){return t.name===e});return t.length>0}},{key:"tempQueue",value:function(e,t,n){var r=n||(new Date).getTime();return r+"-"+this._connectionParams.client+"-"+(this.exchangeName(e,t)+".")+(""+this._tempQueueSuffix)}},{key:"exchangeName",value:function(e,t){return e&&t?this.liveStreamByName(e)+"."+t:""+t}},{key:"_encapsulateContent",value:function(e){var t=e;try{t=JSON.stringify(e)}catch(n){t=e}return t}},{key:"_generateHostname",value:function(e){var t=""+(this._endpointUrl||e.url),n=w.endpoint.protocol;return(0,u["default"])(t,n)||(t=n+"://"+t),t}},{key:"_parseContent",value:function(t){var n=t;if(e.isBuffer(n)){var r=n.toString("utf-8");try{n=JSON.parse(r)}catch(i){n=r}}return n}}]),t}();t["default"]=_}).call(t,n(3).Buffer)},function(e,t,n){function r(e,t){var n=a(e)?i:o;return n(e,s(t,3))}var i=n(135),o=n(136),s=n(142),a=n(17);e.exports=r},function(e,t){function n(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var s=e[n];t(s,n,e)&&(o[i++]=s)}return o}e.exports=n},function(e,t,n){function r(e,t){var n=[];return i(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n}var i=n(137);e.exports=r},function(e,t,n){var r=n(138),i=n(141),o=i(r);e.exports=o},function(e,t,n){function r(e,t){return e&&i(e,t,o)}var i=n(139),o=n(25);e.exports=r},function(e,t,n){var r=n(140),i=r();e.exports=i},function(e,t){function n(e){return function(t,n,r){for(var i=-1,o=Object(t),s=r(t),a=s.length;a--;){var u=s[e?a:++i];if(n(o[u],u,o)===!1)break}return t}}e.exports=n},function(e,t,n){function r(e,t){return function(n,r){if(null==n)return n;if(!i(n))return e(n,r);for(var o=n.length,s=t?o:-1,a=Object(n);(t?s--:++s<o)&&r(a[s],s,a)!==!1;);return n}}var i=n(10);e.exports=r},function(e,t,n){function r(e){return"function"==typeof e?e:null==e?s:"object"==typeof e?a(e)?o(e[0],e[1]):i(e):u(e)}var i=n(143),o=n(198),s=n(211),a=n(17),u=n(212);e.exports=r},function(e,t,n){function r(e){var t=o(e);return 1==t.length&&t[0][2]?s(t[0][0],t[0][1]):function(n){return n===e||i(n,e,t)}}var i=n(144),o=n(193),s=n(197);e.exports=r},function(e,t,n){function r(e,t,n,r){var u=n.length,c=u,l=!r;if(null==e)return!c;for(e=Object(e);u--;){var f=n[u];if(l&&f[2]?f[1]!==e[f[0]]:!(f[0]in e))return!1}for(;++u<c;){f=n[u];var h=f[0],p=e[h],d=f[1];if(l&&f[2]){if(void 0===p&&!(h in e))return!1}else{var v=new i;if(r)var g=r(p,d,h,e,t,v);if(!(void 0===g?o(d,p,r,s|a,v):g))return!1}}return!0}var i=n(145),o=n(177),s=1,a=2;e.exports=r},function(e,t,n){function r(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}var i=n(146),o=n(147),s=n(151),a=n(153),u=n(155);r.prototype.clear=i,r.prototype["delete"]=o,r.prototype.get=s,r.prototype.has=a,r.prototype.set=u,e.exports=r},function(e,t){function n(){this.__data__={array:[],map:null}}e.exports=n},function(e,t,n){function r(e){var t=this.__data__,n=t.array;return n?i(n,e):t.map["delete"](e)}var i=n(148);e.exports=r},function(e,t,n){function r(e,t){var n=i(e,t);if(0>n)return!1;var r=e.length-1;return n==r?e.pop():s.call(e,n,1),!0}var i=n(149),o=Array.prototype,s=o.splice;e.exports=r},function(e,t,n){function r(e,t){for(var n=e.length;n--;)if(i(e[n][0],t))return n;return-1}var i=n(150);e.exports=r},function(e,t){function n(e,t){return e===t||e!==e&&t!==t}e.exports=n},function(e,t,n){function r(e){var t=this.__data__,n=t.array;return n?i(n,e):t.map.get(e)}var i=n(152);e.exports=r},function(e,t,n){function r(e,t){var n=i(e,t);return 0>n?void 0:e[n][1]}var i=n(149);e.exports=r},function(e,t,n){function r(e){var t=this.__data__,n=t.array;return n?i(n,e):t.map.has(e)}var i=n(154);e.exports=r},function(e,t,n){function r(e,t){return i(e,t)>-1}var i=n(149);e.exports=r},function(e,t,n){function r(e,t){var n=this.__data__,r=n.array;r&&(r.length<s-1?o(r,e,t):(n.array=null,n.map=new i(r)));var a=n.map;return a&&a.set(e,t),this}var i=n(156),o=n(175),s=200;e.exports=r},function(e,t,n){function r(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}var i=n(157),o=n(167),s=n(171),a=n(173),u=n(174);r.prototype.clear=i,r.prototype["delete"]=o,r.prototype.get=s,r.prototype.has=a,r.prototype.set=u,e.exports=r},function(e,t,n){function r(){this.__data__={hash:new i,map:o?new o:[],string:new i}}var i=n(158),o=n(164);e.exports=r},function(e,t,n){function r(){}var i=n(159),o=Object.prototype;r.prototype=i?i(null):o,e.exports=r},function(e,t,n){var r=n(160),i=r(Object,"create");e.exports=i},function(e,t,n){function r(e,t){var n=e[t];return i(n)?n:void 0}var i=n(161);e.exports=r},function(e,t,n){function r(e){if(!s(e))return!1;var t=i(e)||o(e)?p:c;return t.test(a(e))}var i=n(13),o=n(162),s=n(14),a=n(163),u=/[\\^$.*+?()[\]{}|]/g,c=/^\[object .+?Constructor\]$/,l=Object.prototype,f=Function.prototype.toString,h=l.hasOwnProperty,p=RegExp("^"+f.call(h).replace(u,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=r},function(e,t){function n(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(n){}return t}e.exports=n},function(e,t){function n(e){if(null!=e){try{return r.call(e)}catch(t){}try{return e+""}catch(t){}}return""}var r=Function.prototype.toString;e.exports=n},function(e,t,n){var r=n(160),i=n(165),o=r(i,"Map");e.exports=o},function(e,t,n){(function(e,r){var i=n(166),o={"function":!0,object:!0},s=o[typeof t]&&t&&!t.nodeType?t:void 0,a=o[typeof e]&&e&&!e.nodeType?e:void 0,u=i(s&&a&&"object"==typeof r&&r),c=i(o[typeof self]&&self),l=i(o[typeof window]&&window),f=i(o[typeof this]&&this),h=u||l!==(f&&f.window)&&l||c||f||Function("return this")();e.exports=h}).call(t,n(36)(e),function(){return this}())},function(e,t){function n(e){return e&&e.Object===Object?e:null}e.exports=n},function(e,t,n){function r(e){var t=this.__data__;return a(e)?s("string"==typeof e?t.string:t.hash,e):i?t.map["delete"](e):o(t.map,e)}var i=n(164),o=n(148),s=n(168),a=n(170);e.exports=r},function(e,t,n){function r(e,t){return i(e,t)&&delete e[t]}var i=n(169);e.exports=r},function(e,t,n){function r(e,t){return i?void 0!==e[t]:s.call(e,t)}var i=n(159),o=Object.prototype,s=o.hasOwnProperty;e.exports=r},function(e,t){function n(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}e.exports=n},function(e,t,n){function r(e){var t=this.__data__;return a(e)?s("string"==typeof e?t.string:t.hash,e):i?t.map.get(e):o(t.map,e)}var i=n(164),o=n(152),s=n(172),a=n(170);e.exports=r},function(e,t,n){function r(e,t){if(i){var n=e[t];return n===o?void 0:n}return a.call(e,t)?e[t]:void 0}var i=n(159),o="__lodash_hash_undefined__",s=Object.prototype,a=s.hasOwnProperty;e.exports=r},function(e,t,n){function r(e){var t=this.__data__;return a(e)?s("string"==typeof e?t.string:t.hash,e):i?t.map.has(e):o(t.map,e)}var i=n(164),o=n(154),s=n(169),a=n(170);e.exports=r},function(e,t,n){function r(e,t){var n=this.__data__;return a(e)?s("string"==typeof e?n.string:n.hash,e,t):i?n.map.set(e,t):o(n.map,e,t),this}var i=n(164),o=n(175),s=n(176),a=n(170);e.exports=r},function(e,t,n){function r(e,t,n){var r=i(e,t);0>r?e.push([t,n]):e[r][1]=n}var i=n(149);e.exports=r},function(e,t,n){function r(e,t,n){e[t]=i&&void 0===n?o:n}var i=n(159),o="__lodash_hash_undefined__";e.exports=r},function(e,t,n){function r(e,t,n,a,u){return e===t?!0:null==e||null==t||!o(e)&&!s(t)?e!==e&&t!==t:i(e,t,r,n,a,u)}var i=n(178),o=n(14),s=n(18);e.exports=r},function(e,t,n){function r(e,t,n,r,g,m){var b=c(e),w=c(t),_=d,E=d;b||(_=u(e),_=_==p?v:_),w||(E=u(t),E=E==p?v:E);var x=_==v&&!l(e),I=E==v&&!l(t),k=_==E;if(k&&!x)return m||(m=new i),b||f(e)?o(e,t,n,r,g,m):s(e,t,_,n,r,g,m);if(!(g&h)){var S=x&&y.call(e,"__wrapped__"),C=I&&y.call(t,"__wrapped__");if(S||C){var T=S?e.value():e,U=C?t.value():t;return m||(m=new i),n(T,U,r,g,m)}}return k?(m||(m=new i),a(e,t,n,r,g,m)):!1}var i=n(145),o=n(179),s=n(181),a=n(186),u=n(187),c=n(17),l=n(162),f=n(192),h=2,p="[object Arguments]",d="[object Array]",v="[object Object]",g=Object.prototype,y=g.hasOwnProperty;e.exports=r},function(e,t,n){function r(e,t,n,r,a,u){var c=-1,l=a&s,f=a&o,h=e.length,p=t.length;if(h!=p&&!(l&&p>h))return!1;var d=u.get(e);if(d)return d==t;var v=!0;for(u.set(e,t);++c<h;){var g=e[c],y=t[c];if(r)var m=l?r(y,g,c,t,e,u):r(g,y,c,e,t,u);if(void 0!==m){if(m)continue;v=!1;break}if(f){if(!i(t,function(e){return g===e||n(g,e,r,a,u)})){v=!1;break}}else if(g!==y&&!n(g,y,r,a,u)){v=!1;break}}return u["delete"](e),v}var i=n(180),o=1,s=2;e.exports=r},function(e,t){function n(e,t){for(var n=-1,r=e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}e.exports=n},function(e,t,n){function r(e,t,n,r,i,E,I){switch(n){case _:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case w:return!(e.byteLength!=t.byteLength||!r(new o(e),new o(t)));case f:case h:return+e==+t;case p:return e.name==t.name&&e.message==t.message;case v:return e!=+e?t!=+t:e==+t;case g:case m:return e==t+"";case d:var k=a;case y:var S=E&l;if(k||(k=u),e.size!=t.size&&!S)return!1;var C=I.get(e);return C?C==t:(E|=c,I.set(e,t),s(k(e),k(t),r,i,E,I));case b:if(x)return x.call(e)==x.call(t)}return!1}var i=n(182),o=n(183),s=n(179),a=n(184),u=n(185),c=1,l=2,f="[object Boolean]",h="[object Date]",p="[object Error]",d="[object Map]",v="[object Number]",g="[object RegExp]",y="[object Set]",m="[object String]",b="[object Symbol]",w="[object ArrayBuffer]",_="[object DataView]",E=i?i.prototype:void 0,x=E?E.valueOf:void 0;e.exports=r},function(e,t,n){var r=n(165),i=r.Symbol;e.exports=i},function(e,t,n){var r=n(165),i=r.Uint8Array;e.exports=i},function(e,t){function n(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}e.exports=n},function(e,t){function n(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}e.exports=n},function(e,t,n){function r(e,t,n,r,a,u){var c=a&s,l=o(e),f=l.length,h=o(t),p=h.length;if(f!=p&&!c)return!1;for(var d=f;d--;){var v=l[d];if(!(c?v in t:i(t,v)))return!1}var g=u.get(e);if(g)return g==t;var y=!0;u.set(e,t);for(var m=c;++d<f;){v=l[d];var b=e[v],w=t[v];if(r)var _=c?r(w,b,v,t,e,u):r(b,w,v,e,t,u);if(!(void 0===_?b===w||n(b,w,r,a,u):_)){y=!1;break}m||(m="constructor"==v)}if(y&&!m){var E=e.constructor,x=t.constructor;E!=x&&"constructor"in e&&"constructor"in t&&!("function"==typeof E&&E instanceof E&&"function"==typeof x&&x instanceof x)&&(y=!1)}return u["delete"](e),y}var i=n(26),o=n(25),s=2;e.exports=r},function(e,t,n){function r(e){return y.call(e)}var i=n(188),o=n(164),s=n(189),a=n(190),u=n(191),c=n(163),l="[object Map]",f="[object Object]",h="[object Promise]",p="[object Set]",d="[object WeakMap]",v="[object DataView]",g=Object.prototype,y=g.toString,m=c(i),b=c(o),w=c(s),_=c(a),E=c(u);(i&&r(new i(new ArrayBuffer(1)))!=v||o&&r(new o)!=l||s&&r(s.resolve())!=h||a&&r(new a)!=p||u&&r(new u)!=d)&&(r=function(e){var t=y.call(e),n=t==f?e.constructor:void 0,r=n?c(n):void 0;if(r)switch(r){case m:return v;case b:return l;case w:return h;case _:return p;case E:return d}return t}),e.exports=r},function(e,t,n){var r=n(160),i=n(165),o=r(i,"DataView");e.exports=o},function(e,t,n){var r=n(160),i=n(165),o=r(i,"Promise");e.exports=o},function(e,t,n){var r=n(160),i=n(165),o=r(i,"Set");e.exports=o},function(e,t,n){var r=n(160),i=n(165),o=r(i,"WeakMap");e.exports=o},function(e,t,n){function r(e){return o(e)&&i(e.length)&&!!B[O.call(e)]}var i=n(15),o=n(18),s="[object Arguments]",a="[object Array]",u="[object Boolean]",c="[object Date]",l="[object Error]",f="[object Function]",h="[object Map]",p="[object Number]",d="[object Object]",v="[object RegExp]",g="[object Set]",y="[object String]",m="[object WeakMap]",b="[object ArrayBuffer]",w="[object DataView]",_="[object Float32Array]",E="[object Float64Array]",x="[object Int8Array]",I="[object Int16Array]",k="[object Int32Array]",S="[object Uint8Array]",C="[object Uint8ClampedArray]",T="[object Uint16Array]",U="[object Uint32Array]",B={};B[_]=B[E]=B[x]=B[I]=B[k]=B[S]=B[C]=B[T]=B[U]=!0,B[s]=B[a]=B[b]=B[u]=B[w]=B[c]=B[l]=B[f]=B[h]=B[p]=B[d]=B[v]=B[g]=B[y]=B[m]=!1;var j=Object.prototype,O=j.toString;e.exports=r},function(e,t,n){function r(e){for(var t=o(e),n=t.length;n--;)t[n][2]=i(t[n][1]);return t}var i=n(194),o=n(195);e.exports=r},function(e,t,n){function r(e){return e===e&&!i(e)}var i=n(14);e.exports=r},function(e,t,n){function r(e){return i(e,o(e))}var i=n(196),o=n(25);e.exports=r},function(e,t,n){function r(e,t){return i(t,function(t){return[t,e[t]]})}var i=n(24);e.exports=r},function(e,t){function n(e,t){return function(n){return null==n?!1:n[e]===t&&(void 0!==t||e in Object(n))}}e.exports=n},function(e,t,n){function r(e,t){return a(e)&&u(t)?c(l(e),t):function(n){var r=o(n,e);return void 0===r&&r===t?s(n,e):i(t,r,void 0,f|h)}}var i=n(177),o=n(199),s=n(208),a=n(206),u=n(194),c=n(197),l=n(207),f=1,h=2;e.exports=r},function(e,t,n){function r(e,t,n){var r=null==e?void 0:i(e,t);return void 0===r?n:r}var i=n(200);e.exports=r},function(e,t,n){function r(e,t){t=o(t,e)?[t]:i(t);for(var n=0,r=t.length;null!=e&&r>n;)e=e[s(t[n++])];return n&&n==r?e:void 0}var i=n(201),o=n(206),s=n(207);e.exports=r},function(e,t,n){function r(e){return i(e)?e:o(e)}var i=n(17),o=n(202);e.exports=r},function(e,t,n){var r=n(203),i=n(204),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]/g,s=/\\(\\)?/g,a=r(function(e){var t=[];return i(e).replace(o,function(e,n,r,i){t.push(r?i.replace(s,"$1"):n||e)}),t});e.exports=a},function(e,t,n){function r(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError(o);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=e.apply(this,r);return n.cache=o.set(i,s),s};return n.cache=new(r.Cache||i),n}var i=n(156),o="Expected a function";r.Cache=i,e.exports=r},function(e,t,n){function r(e){return null==e?"":i(e)}var i=n(205);e.exports=r},function(e,t,n){function r(e){if("string"==typeof e)return e;if(o(e))return u?u.call(e):"";var t=e+"";return"0"==t&&1/e==-s?"-0":t}var i=n(182),o=n(21),s=1/0,a=i?i.prototype:void 0,u=a?a.toString:void 0;e.exports=r},function(e,t,n){function r(e,t){if(i(e))return!1;var n=typeof e;return"number"==n||"symbol"==n||"boolean"==n||null==e||o(e)?!0:a.test(e)||!s.test(e)||null!=t&&e in Object(t)}var i=n(17),o=n(21),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;e.exports=r},function(e,t,n){function r(e){if("string"==typeof e||i(e))return e;var t=e+"";return"0"==t&&1/e==-o?"-0":t}var i=n(21),o=1/0;e.exports=r},function(e,t,n){function r(e,t){return null!=e&&o(e,t,i)}var i=n(209),o=n(210);e.exports=r},function(e,t){function n(e,t){return t in Object(e)}e.exports=n},function(e,t,n){function r(e,t,n){t=u(t,e)?[t]:i(t);for(var r,h=-1,p=t.length;++h<p;){var d=f(t[h]);if(!(r=null!=e&&n(e,d)))break;e=e[d]}if(r)return r;var p=e?e.length:0;return!!p&&c(p)&&a(d,p)&&(s(e)||l(e)||o(e))}var i=n(201),o=n(31),s=n(17),a=n(33),u=n(206),c=n(15),l=n(16),f=n(207);e.exports=r},function(e,t){function n(e){return e}e.exports=n},function(e,t,n){function r(e){return s(e)?i(a(e)):o(e)}var i=n(12),o=n(213),s=n(206),a=n(207);e.exports=r},function(e,t,n){function r(e){return function(t){return i(t,e)}}var i=n(200);e.exports=r},function(e,t,n){function r(e,t,n){return e=a(e),n=i(s(n),0,e.length),e.lastIndexOf(o(t),n)==n}var i=n(215),o=n(205),s=n(19),a=n(204);e.exports=r},function(e,t){function n(e,t,n){return e===e&&(void 0!==n&&(e=n>=e?e:n),void 0!==t&&(e=e>=t?e:t)),e}e.exports=n},function(e,t,n){e.exports=n(217)},function(e,t,n){"use strict";function r(e){this.defaults=o.merge({},e),this.interceptors={request:new a,response:new a}}var i=n(218),o=n(219),s=n(220),a=n(229),u=n(230),c=n(231),l=n(232),f=n(224);r.prototype.request=function(e){"string"==typeof e&&(e=o.merge({url:arguments[0]},arguments[1])),e=o.merge(i,this.defaults,{method:"get"},e),e.baseURL&&!u(e.url)&&(e.url=c(e.baseURL,e.url)),e.withCredentials=e.withCredentials||this.defaults.withCredentials,e.data=f(e.data,e.headers,e.transformRequest),e.headers=o.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),o.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]});var t=[s,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)n=n.then(t.shift(),t.shift());return n};var h=new r(i),p=e.exports=l(r.prototype.request,h);p.defaults=h.defaults,p.interceptors=h.interceptors,p.create=function(e){return new r(e)},p.all=function(e){return Promise.all(e)},p.spread=n(233),o.forEach(["delete","get","head"],function(e){r.prototype[e]=function(t,n){return this.request(o.merge(n||{},{method:e,url:t}))},p[e]=l(r.prototype[e],h)}),o.forEach(["post","put","patch"],function(e){r.prototype[e]=function(t,n,r){return this.request(o.merge(r||{},{method:e,url:t,data:n}))},p[e]=l(r.prototype[e],h)})},function(e,t,n){"use strict";var r=n(219),i=/^\)\]\}',?\n/,o={"Content-Type":"application/x-www-form-urlencoded"};e.exports={transformRequest:[function(e,t){return r.isFormData(e)||r.isArrayBuffer(e)||r.isStream(e)?e:r.isArrayBufferView(e)?e.buffer:!r.isObject(e)||r.isFile(e)||r.isBlob(e)?e:(r.isUndefined(t)||(r.forEach(t,function(e,n){"content-type"===n.toLowerCase()&&(t["Content-Type"]=e)}),r.isUndefined(t["Content-Type"])&&(t["Content-Type"]="application/json;charset=utf-8")),JSON.stringify(e))}],transformResponse:[function(e){if("string"==typeof e){e=e.replace(i,"");try{e=JSON.parse(e)}catch(t){}}return e}],headers:{common:{Accept:"application/json, text/plain, */*"},patch:r.merge(o),post:r.merge(o),put:r.merge(o)},timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&300>e}}},function(e,t){"use strict";function n(e){return"[object Array]"===b.call(e)}function r(e){return"[object ArrayBuffer]"===b.call(e)}function i(e){return"[object FormData]"===b.call(e)}function o(e){
var t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer}function s(e){return"string"==typeof e}function a(e){return"number"==typeof e}function u(e){return"undefined"==typeof e}function c(e){return null!==e&&"object"==typeof e}function l(e){return"[object Date]"===b.call(e)}function f(e){return"[object File]"===b.call(e)}function h(e){return"[object Blob]"===b.call(e)}function p(e){return"[object Function]"===b.call(e)}function d(e){return c(e)&&p(e.pipe)}function v(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}function g(){return"undefined"!=typeof window&&"undefined"!=typeof document&&"function"==typeof document.createElement}function y(e,t){if(null!==e&&"undefined"!=typeof e)if("object"==typeof e||n(e)||(e=[e]),n(e))for(var r=0,i=e.length;i>r;r++)t.call(null,e[r],r,e);else for(var o in e)e.hasOwnProperty(o)&&t.call(null,e[o],o,e)}function m(){function e(e,n){"object"==typeof t[n]&&"object"==typeof e?t[n]=m(t[n],e):t[n]=e}for(var t={},n=0,r=arguments.length;r>n;n++)y(arguments[n],e);return t}var b=Object.prototype.toString;e.exports={isArray:n,isArrayBuffer:r,isFormData:i,isArrayBufferView:o,isString:s,isNumber:a,isObject:c,isUndefined:u,isDate:l,isFile:f,isBlob:h,isFunction:p,isStream:d,isStandardBrowserEnv:g,forEach:y,merge:m,trim:v}},function(e,t,n){(function(t){"use strict";e.exports=function(e){return new Promise(function(r,i){try{var o;"function"==typeof e.adapter?o=e.adapter:"undefined"!=typeof XMLHttpRequest?o=n(221):"undefined"!=typeof t&&(o=n(221)),"function"==typeof o&&o(r,i,e)}catch(s){i(s)}})}}).call(t,n(38))},function(e,t,n){"use strict";var r=n(219),i=n(222),o=n(223),s=n(224),a=n(225),u="undefined"!=typeof window&&window.btoa||n(226),c=n(227);e.exports=function(e,t,l){var f=l.data,h=l.headers;r.isFormData(f)&&delete h["Content-Type"];var p=new XMLHttpRequest,d="onreadystatechange",v=!1;if("undefined"==typeof window||!window.XDomainRequest||"withCredentials"in p||a(l.url)||(p=new window.XDomainRequest,d="onload",v=!0),l.auth){var g=l.auth.username||"",y=l.auth.password||"";h.Authorization="Basic "+u(g+":"+y)}if(p.open(l.method.toUpperCase(),i(l.url,l.params,l.paramsSerializer),!0),p.timeout=l.timeout,p.onprogress=function(){},p.ontimeout=function(){},p[d]=function(){if(p&&(4===p.readyState||v)&&0!==p.status){var n="getAllResponseHeaders"in p?o(p.getAllResponseHeaders()):null,r=l.responseType&&"text"!==l.responseType?p.response:p.responseText,i={data:s(r,n,l.transformResponse),status:1223===p.status?204:p.status,statusText:1223===p.status?"No Content":p.statusText,headers:n,config:l,request:p};c(e,t,i),p=null}},p.onerror=function(){t(new Error("Network Error")),p=null},p.ontimeout=function(){var e=new Error("timeout of "+l.timeout+"ms exceeded");e.timeout=l.timeout,e.code="ECONNABORTED",t(e),p=null},r.isStandardBrowserEnv()){var m=n(228),b=l.withCredentials||a(l.url)?m.read(l.xsrfCookieName):void 0;b&&(h[l.xsrfHeaderName]=b)}if("setRequestHeader"in p&&r.forEach(h,function(e,t){"undefined"==typeof f&&"content-type"===t.toLowerCase()?delete h[t]:p.setRequestHeader(t,e)}),l.withCredentials&&(p.withCredentials=!0),l.responseType)try{p.responseType=l.responseType}catch(w){if("json"!==p.responseType)throw w}l.progress&&("post"===l.method||"put"===l.method?p.upload.addEventListener("progress",l.progress):"get"===l.method&&p.addEventListener("progress",l.progress)),void 0===f&&(f=null),p.send(f)}},function(e,t,n){"use strict";function r(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var i=n(219);e.exports=function(e,t,n){if(!t)return e;var o;if(n)o=n(t);else{var s=[];i.forEach(t,function(e,t){null!==e&&"undefined"!=typeof e&&(i.isArray(e)&&(t+="[]"),i.isArray(e)||(e=[e]),i.forEach(e,function(e){i.isDate(e)?e=e.toISOString():i.isObject(e)&&(e=JSON.stringify(e)),s.push(r(t)+"="+r(e))}))}),o=s.join("&")}return o&&(e+=(-1===e.indexOf("?")?"?":"&")+o),e}},function(e,t,n){"use strict";var r=n(219);e.exports=function(e){var t,n,i,o={};return e?(r.forEach(e.split("\n"),function(e){i=e.indexOf(":"),t=r.trim(e.substr(0,i)).toLowerCase(),n=r.trim(e.substr(i+1)),t&&(o[t]=o[t]?o[t]+", "+n:n)}),o):o}},function(e,t,n){"use strict";var r=n(219);e.exports=function(e,t,n){return r.forEach(n,function(n){e=n(e,t)}),e}},function(e,t,n){"use strict";var r=n(219);e.exports=r.isStandardBrowserEnv()?function(){function e(e){var t=e;return n&&(i.setAttribute("href",t),t=i.href),i.setAttribute("href",t),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}var t,n=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");return t=e(window.location.href),function(n){var i=r.isString(n)?e(n):n;return i.protocol===t.protocol&&i.host===t.host}}():function(){return function(){return!0}}()},function(e,t){"use strict";function n(){this.message="String contains an invalid character"}function r(e){for(var t,r,o=String(e),s="",a=0,u=i;o.charAt(0|a)||(u="=",a%1);s+=u.charAt(63&t>>8-a%1*8)){if(r=o.charCodeAt(a+=.75),r>255)throw new n;t=t<<8|r}return s}var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.prototype=new Error,n.prototype.code=5,n.prototype.name="InvalidCharacterError",e.exports=r},function(e,t){"use strict";e.exports=function(e,t,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(n):e(n)}},function(e,t,n){"use strict";var r=n(219);e.exports=r.isStandardBrowserEnv()?function(){return{write:function(e,t,n,i,o,s){var a=[];a.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),r.isString(i)&&a.push("path="+i),r.isString(o)&&a.push("domain="+o),s===!0&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},function(e,t,n){"use strict";function r(){this.handlers=[]}var i=n(219);r.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},r.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},r.prototype.forEach=function(e){i.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=r},function(e,t){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t){"use strict";e.exports=function(e,t){return e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,"")}},function(e,t){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},function(e,t){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,n){var r,i;!function(o){var s=function(e,t,n){if(!h(t)||d(t)||v(t)||g(t))return t;var r,i=0,o=0;if(p(t))for(r=[],o=t.length;o>i;i++)r.push(s(e,t[i],n));else{r={};for(var a in t)t.hasOwnProperty(a)&&(r[e(a,n)]=s(e,t[a],n))}return r},a=function(e,t){t=t||{};var n=t.separator||"_",r=t.split||/(?=[A-Z])/;return e.split(r).join(n)},u=function(e){return y(e)?e:(e=e.replace(/[\-_\s]+(.)?/g,function(e,t){return t?t.toUpperCase():""}),e.substr(0,1).toLowerCase()+e.substr(1))},c=function(e){var t=u(e);return t.substr(0,1).toUpperCase()+t.substr(1)},l=function(e,t){return a(e,t).toLowerCase()},f=Object.prototype.toString,h=function(e){return e===Object(e)},p=function(e){return"[object Array]"==f.call(e)},d=function(e){return"[object Date]"==f.call(e)},v=function(e){return"[object RegExp]"==f.call(e)},g=function(e){return"[object Boolean]"==f.call(e)},y=function(e){return e-=0,e===e},m=function(e,t){var n=t&&"process"in t?t.process:t;return"function"!=typeof n?e:function(t,r){return n(t,e,r)}},b={camelize:u,decamelize:l,pascalize:c,depascalize:l,camelizeKeys:function(e,t){return s(m(u,t),e)},decamelizeKeys:function(e,t){return s(m(l,t),e,t)},pascalizeKeys:function(e,t){return s(m(c,t),e)},depascalizeKeys:function(){return this.decamelizeKeys.apply(this,arguments)}};r=b,i="function"==typeof r?r.call(t,n,t,e):r,!(void 0!==i&&(e.exports=i))}(this)},function(e,t){"use strict";t.CONFIG={endpoint:{protocol:"http",secureProtocol:"https"},deviceEndpoint:{url:"https://api.spacebunny.io",api_version:"/v1",path:"/device_configurations"},accessKeyEndpoint:{url:"https://api.spacebunny.io",api_version:"/v1",path:"/live_stream_key_configurations"},tls:{secureProtocol:"TLSv1_2_method"},fromApiHeader:"x-from-sb-api",protocol:"amqp",inboxTopic:"inbox",liveStreamSuffix:"live_stream",tempQueueSuffix:"temp",amqp:{ackTypes:["auto","manual"],protocol:"amqp",tls:{protocol:"amqps"},inputQueueArgs:{},deviceExchangeArgs:{},subscribeArgs:{noAck:!0,requeue:!1,allUpTo:!1},publishArgs:{withConfirm:!1},socketOptions:{frameMax:32768,heartbeat:60},stream:{defaultStreamRoutingKey:"#",streamQueueArguments:{exclusive:!0,autoDelete:!0,durable:!1}}},mqtt:{protocol:"mqtt",tls:{protocol:"mqtts",rejectUnauthorized:!0},connection:{opts:{qos:1},timeout:5e3}},stomp:{ackTypes:["client"],connection:{headers:{max_hbrlck_fails:10,"accept-version":"1.0,1.1,1.2","heart-beat":"10000,10000"},opts:{}},existingQueuePrefix:"amq/queue",stream:{exchangePrefix:"exchange",defaultPattern:"#"}},webStomp:{ackTypes:["client"],webSocket:{protocol:"ws",tls:{protocol:"wss"},endpoint:"ws"}}}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(u){i=!0,o=u}finally{try{!r&&a["return"]&&a["return"]()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(235).CONFIG,a=function(){function e(t,n){var o=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];r(this,e),this.content=t.content,this.fields=t.fields,this.properties=t.properties;try{var s=this.fields.routingKey.split("."),a=i(s,2);this.senderId=a[0],this.channelName=a[1]}catch(u){console.error("Wrong routing key format")}this._receiverId=n,this._discardMine=o.discardMine||!1,this._discardFromApi=o.discardFromApi||!1}return o(e,[{key:"blackListed",value:function(){return this._discardMine&&this._receiverId===this.senderId&&!this.fromApi()?!0:!(!this._discardFromApi||!this.fromApi())}},{key:"fromApi",value:function(){return this.properties.headers&&this.properties.headers[s.fromApiHeader]}}]),e}();t["default"]=a},function(e,t,n){(function(e){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(238),u=r(a),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(35),f=r(l),h=n(37),p=r(h),d=n(241),v=r(d),g=n(133),y=r(g),m=n(235).CONFIG,b=function(t){function n(e){i(this,n);var t=o(this,Object.getPrototypeOf(n).call(this,e));t._topics={},t._mqttConnection=void 0,t._subscription=void 0;var r=m.mqtt;return t._protocol=r.protocol,t._tlsOpts.protocol=r.tls.protocol,t._tlsOpts.rejectUnauthorized=r.tls.rejectUnauthorized,t._connectionOpts=r.connection.opts,t._connectionTimeout=r.connection.timeout,t}return s(n,t),c(n,[{key:"onReceive",value:function(e,t){var n=this;return t=(0,f["default"])({},t),new p["default"](function(r,i){n.connect().then(function(o){n._topics[n._topicFor(n._inboxTopic)]=t.qos||n._connectionOpts.qos,o.subscribe(n._topics,(0,f["default"])(n._connectionOpts,t),function(t){t?i(!1):(o.on("message",function(t,r){e(t,n._parseContent(r))}),r(!0))})})["catch"](function(e){i(e)})})}},{key:"publish",value:function(t,n,r){var i=this;return new p["default"](function(o,s){i.connect().then(function(s){var a=function(){var a=new e(i._encapsulateContent(n));s.publish(i._topicFor(t),a,(0,f["default"])(i._connectionOpts,r),function(){o(!0)})};s.connected?a():s.on("connect",function(){a()})})["catch"](function(e){s(e)})})}},{key:"unsubscribe",value:function(e){var t=this;return new p["default"](function(n,r){try{(0,u["default"])(e)?n(!0):t._mqttConnection.unsubscribe(Object.keys(e),function(){n(!0)})}catch(i){r(i)}})}},{key:"disconnect",value:function(){var e=this;return new p["default"](function(t,n){void 0===e._mqttConnection?n("Invalid connection"):!function(){var r=function(){e._mqttConnection.end(!0,function(){e._mqttConnection=void 0,t(!0)})};try{(0,u["default"])(e._topics)?r():e._mqttConnection.unsubscribe(Object.keys(e._topics),function(){r()})}catch(i){n(i)}}()})}},{key:"connect",value:function(){var e=this,t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return t=(0,f["default"])(this._connectionOpts,t),new p["default"](function(n,r){e.getEndpointConfigs().then(function(i){var o=i.connection;if(void 0!==e._mqttConnection)n(e._mqttConnection);else try{var s={host:o.host,port:e._tls?o.protocols.mqtt.tlsPort:o.protocols.mqtt.port,username:o.vhost+":"+(o.deviceId||o.client),password:o.secret,clientId:o.deviceId||o.client,connectionTimeout:t.connectionTimeout||e._connectionTimeout};e._tls&&(s=(0,f["default"])(s,e._tlsOpts));var a=v["default"].connect(s);a.on("error",function(e){r(e)}),a.on("close",function(e){r(e)}),e._mqttConnection=a,n(e._mqttConnection)}catch(u){r(u)}})["catch"](function(e){r(e)})})}},{key:"_topicFor",value:function(e){return this.deviceId()+"/"+e}}]),n}(y["default"]);t["default"]=b}).call(t,n(3).Buffer)},function(e,t,n){function r(e){if(a(e)&&(s(e)||f(e)||c(e.splice)||o(e)||u(e)))return!e.length;if(l(e)){var t=i(e);if(t==p||t==d)return!e.size}for(var n in e)if(g.call(e,n))return!1;return!(m&&h(e).length)}var i=n(187),o=n(31),s=n(17),a=n(10),u=n(239),c=n(13),l=n(18),f=n(16),h=n(25),p="[object Map]",d="[object Set]",v=Object.prototype,g=v.hasOwnProperty,y=v.propertyIsEnumerable,m=!y.call({valueOf:1},"valueOf");e.exports=r},function(e,t,n){(function(e){var r=n(240),i=n(165),o={"function":!0,object:!0},s=o[typeof t]&&t&&!t.nodeType?t:void 0,a=o[typeof e]&&e&&!e.nodeType?e:void 0,u=a&&a.exports===s?s:void 0,c=u?i.Buffer:void 0,l=c?function(e){return e instanceof c}:r(!1);e.exports=l}).call(t,n(36)(e))},function(e,t){function n(e){return function(){return e}}e.exports=n},function(e,t,n){(function(t){"use strict";function r(e){var t;e.auth&&(t=e.auth.match(/^(.+):(.+)$/),t?(e.username=t[1],e.password=t[2]):e.username=e.auth)}function i(e,t){function n(e){return t.servers&&(e._reconnectCount&&e._reconnectCount!==t.servers.length||(e._reconnectCount=0),t.host=t.servers[e._reconnectCount].host,t.port=t.servers[e._reconnectCount].port,t.hostname=t.host,e._reconnectCount++),u[t.protocol](e,t)}if("object"!=typeof e||t||(t=e,e=null),t=t||{},e&&(t=a(s.parse(e,!0),t),t.protocol=t.protocol.replace(/\:$/,"")),r(t),t.query&&"string"==typeof t.query.clientId&&(t.clientId=t.query.clientId),t.cert&&t.key){if(!t.protocol)throw new Error("Missing secure protocol key");if(-1===["mqtts","wss"].indexOf(t.protocol))switch(t.protocol){case"mqtt":t.protocol="mqtts";break;case"ws":t.protocol="wss";break;default:throw new Error('Unknown protocol for secure conenction: "'+t.protocol+'"!')}}if(u[t.protocol]||(t.protocol=c.filter(function(e){return"function"==typeof u[e]})[0]),!1===t.clean&&!t.clientId)throw new Error("Missing clientId for unclean clients");return new o(n,t)}var o=n(242),s=n(62),a=n(264),u={},c=[];"browser"!==t.title&&(u.mqtt=n(265),u.tcp=n(265),u.ssl=n(267),u.tls=n(267),u.mqtts=n(267)),u.ws=n(269),u.wss=n(269),c=["mqtt","mqtts","ws","wss"],e.exports=i,e.exports.connect=i}).call(t,n(38))},function(e,t,n){(function(t,r){"use strict";function i(){return"mqttjs_"+Math.random().toString(16).substr(2,8)}function o(e,t,n){try{var r=h.generate(t);!e.stream.write(r)&&n?e.stream.once("drain",n):n&&n()}catch(i){n?n(i):e.emit("error",i)}}function s(e,t,n){e.outgoingStore.put(t,function(r){return r?n&&n(r):void o(e,t,n)})}function a(){}function u(e,t){var n,r=this;if(!(this instanceof u))return new u(e,t);this.options=t||{};for(n in y)"undefined"==typeof this.options[n]?this.options[n]=y[n]:this.options[n]=t[n];this.options.clientId=this.options.clientId||i(),this.streamBuilder=e,this.outgoingStore=this.options.outgoingStore||new l,this.incomingStore=this.options.incomingStore||new l,this.queueQoSZero=null==this.options.queueQoSZero?!0:this.options.queueQoSZero,this.pingTimer=null,this.connected=!1,this.disconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this.nextId=Math.floor(65535*Math.random()),this.outgoing={},this.on("connect",function(){this.connected=!0;var e=null;e=this.outgoingStore.createStream(),e.once("readable",function(){function t(){var n,i=e.read(1);i&&(!r.disconnecting&&!r.reconnectTimer&&0<r.options.reconnectPeriod?(e.read(0),n=r.outgoing[i.messageId],r.outgoing[i.messageId]=function(){n&&n(),t()},r._sendPacket(i)):e.destroy&&e.destroy())}t()}).on("error",this.emit.bind(this,"error"))}),this.on("close",function(){this.connected=!1,clearTimeout(this.connackTimer)}),this.on("connect",this._setupPingTimer),this.on("connect",function(){function e(){var n=t.shift(),i=null;n&&(i=n.packet,r._sendPacket(i,function(t){n.cb&&n.cb(t),e()}))}var t=this.queue;e()}),this.on("close",function(){null!==r.pingTimer&&(r.pingTimer.clear(),r.pingTimer=null)}),this.on("close",this._setupReconnect),c.EventEmitter.call(this),this._setupStream()}var c=n(86),l=n(243),f=n(250),h=n(253),p=n(244).Writable,d=n(75),v=n(263),g=t.setImmediate||function(e){r.nextTick(e)},y={keepalive:10,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:3e4,clean:!0};d(u,c.EventEmitter),u.prototype._setupStream=function(){function e(){var t=u.shift(),r=s;t?n._handlePacket(t,e):(s=null,r())}var t,n=this,r=new p,i=h.parser(this.options),s=null,u=[];this._clearReconnect(),this.stream=this.streamBuilder(this),i.on("packet",function(e){u.push(e)}),r._write=function(t,n,r){s=r,i.parse(t),e()},this.stream.pipe(r),this.stream.on("error",a),f(this.stream,this.emit.bind(this,"close")),t=Object.create(this.options),t.cmd="connect",o(this,t),i.on("error",this.emit.bind(this,"error")),this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout(function(){n._cleanUp(!0)},this.options.connectTimeout)},u.prototype._handlePacket=function(e,t){switch(e.cmd){case"publish":this._handlePublish(e,t);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":this._handleAck(e),t();break;case"pubrel":this._handlePubrel(e,t);break;case"connack":this._handleConnack(e),t();break;case"pingresp":this._handlePingresp(e),t()}},u.prototype._checkDisconnecting=function(e){return this.disconnecting&&(e?e(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting},u.prototype.publish=function(e,t,n,r){var i;if("function"==typeof n&&(r=n,n=null),n||(n={qos:0,retain:!1}),this._checkDisconnecting(r))return this;switch(i={cmd:"publish",topic:e,payload:t,qos:n.qos,retain:n.retain,messageId:this._nextId()},n.qos){case 1:case 2:this.outgoing[i.messageId]=r||a,this._sendPacket(i);break;default:this._sendPacket(i,r)}return this},u.prototype.subscribe=function(){var e,t=Array.prototype.slice.call(arguments),n=[],r=t.shift(),i=t.pop()||a,o=t.pop();return"string"==typeof r&&(r=[r]),"function"!=typeof i&&(o=i,i=a),this._checkDisconnecting(i)?this:(o||(o={qos:0}),Array.isArray(r)?r.forEach(function(e){n.push({topic:e,qos:o.qos})}):Object.keys(r).forEach(function(e){n.push({topic:e,qos:r[e]})}),e={cmd:"subscribe",subscriptions:n,qos:1,retain:!1,dup:!1,messageId:this._nextId()},this.outgoing[e.messageId]=i,this._sendPacket(e),this)},u.prototype.unsubscribe=function(e,t){var n={cmd:"unsubscribe",qos:1,messageId:this._nextId()};return t=t||a,this._checkDisconnecting(t)?this:("string"==typeof e?n.unsubscriptions=[e]:"object"==typeof e&&e.length&&(n.unsubscriptions=e),this.outgoing[n.messageId]=t,this._sendPacket(n),this)},u.prototype.end=function(e,t){function n(){i.incomingStore.close(function(){i.outgoingStore.close(t)})}function r(){i._cleanUp(e,n)}var i=this;return"function"==typeof e&&(t=e,e=!1),this.disconnecting?!0:(this.disconnecting=!0,!e&&0<Object.keys(this.outgoing).length?this.once("outgoingEmpty",setTimeout.bind(null,r,10)):r(),this)},u.prototype._reconnect=function(){this.emit("reconnect"),this._setupStream()},u.prototype._setupReconnect=function(){var e=this;!e.disconnecting&&!e.reconnectTimer&&0<e.options.reconnectPeriod&&(this.emit("offline"),e.reconnectTimer=setInterval(function(){e._reconnect()},e.options.reconnectPeriod))},u.prototype._clearReconnect=function(){this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=!1)},u.prototype._cleanUp=function(e,t){t&&this.stream.on("close",t),e?this.stream.destroy():this._sendPacket({cmd:"disconnect"},g.bind(null,this.stream.end.bind(this.stream))),this.reconnectTimer&&(this._clearReconnect(),this._setupReconnect()),null!==this.pingTimer&&(this.pingTimer.clear(),this.pingTimer=null)},u.prototype._sendPacket=function(e,t){if(!this.connected)return void(0<e.qos||"publish"!==e.cmd||this.queueQoSZero?this.queue.push({packet:e,cb:t}):t&&t(new Error("No connection to broker")));switch(this._shiftPingInterval(),e.qos){case 2:case 1:s(this,e,t);break;case 0:default:o(this,e,t)}},u.prototype._setupPingTimer=function(){var e=this;!this.pingTimer&&this.options.keepalive&&(this.pingResp=!0,this.pingTimer=v(function(){e._checkPing()},1e3*this.options.keepalive))},u.prototype._shiftPingInterval=function(){this.pingTimer&&this.options.keepalive&&this.options.reschedulePings&&this.pingTimer.reschedule(1e3*this.options.keepalive)},u.prototype._checkPing=function(){this.pingResp?(this.pingResp=!1,this._sendPacket({cmd:"pingreq"})):this._cleanUp(!0)},u.prototype._handlePingresp=function(){this.pingResp=!0},u.prototype._handleConnack=function(e){var t=e.returnCode,n=["","Unacceptable protocol version","Identifier rejected","Server unavailable","Bad username or password","Not authorized"];clearTimeout(this.connackTimer),0===t?this.emit("connect",e):t>0&&this.emit("error",new Error("Connection refused: "+n[t]))},u.prototype._handlePublish=function(e,t){var n=e.topic.toString(),r=e.payload,i=e.qos,o=e.messageId,s=this;switch(i){case 2:this.incomingStore.put(e,function(){s._sendPacket({cmd:"pubrec",messageId:o},t)});break;case 1:this._sendPacket({cmd:"puback",messageId:o});case 0:this.emit("message",n,r,e),this.handleMessage(e,t)}},u.prototype.handleMessage=function(e,t){t()},u.prototype._handleAck=function(e){var t=e.messageId,n=e.cmd,r=null,i=this.outgoing[t],o=this;if(i){switch(n){case"pubcomp":case"puback":delete this.outgoing[t],this.outgoingStore.del(e,i);break;case"pubrec":r={cmd:"pubrel",qos:2,messageId:t},this._sendPacket(r);break;case"suback":delete this.outgoing[t],this.outgoingStore.del(e,function(t,n){var r,s=n.subscriptions,a=e.granted;if(t)return o.emit("error",t);for(r=0;r<a.length;r+=1)s[r].qos=a[r];i(null,s)});break;case"unsuback":delete this.outgoing[t],this.outgoingStore.del(e,i);break;default:o.emit("error",new Error("unrecognized packet type"))}this.disconnecting&&0===Object.keys(this.outgoing).length&&this.emit("outgoingEmpty")}},u.prototype._handlePubrel=function(e,t){var n=e.messageId,r=this;r.incomingStore.get(e,function(i,o){return i?r.emit("error",i):("pubrel"!==o.cmd&&(r.emit("message",o.topic,o.payload,o),r.incomingStore.put(e)),void r._sendPacket({cmd:"pubcomp",messageId:n},t))})},u.prototype._nextId=function(){var e=this.nextId++;return 65535===e&&(this.nextId=1),e},e.exports=u}).call(t,function(){return this}(),n(38))},function(e,t,n){(function(t){"use strict";function r(){return this instanceof r?void(this._inflights={}):new r}var i=n(244).Readable,o={objectMode:!0};r.prototype.put=function(e,t){return this._inflights[e.messageId]=e,t&&t(),this},r.prototype.createStream=function(){var e=new i(o),n=this._inflights,r=Object.keys(this._inflights),s=!1,a=0;return e._read=function(){!s&&a<r.length?this.push(n[r[a++]]):this.push(null)},e.destroy=function(){if(!s){var e=this;s=!0,t.nextTick(function(){e.emit("close")})}},e},r.prototype.del=function(e,t){return e=this._inflights[e.messageId],e?(delete this._inflights[e.messageId],t(null,e)):t&&t(new Error("missing packet")),this},r.prototype.get=function(e,t){return e=this._inflights[e.messageId],e?t(null,e):t&&t(new Error("missing packet")),this},r.prototype.close=function(e){this._inflights=null,e&&e()},e.exports=r}).call(t,n(38))},function(e,t,n){(function(r){var i=n(85);t=e.exports=n(245),t.Stream=i,t.Readable=t,t.Writable=n(246),t.Duplex=n(247),t.Transform=n(248),t.PassThrough=n(249),r.browser||"disable"!=={NODE_ENV:"production"}.READABLE_STREAM||(e.exports=n(85))}).call(t,n(38))},function(e,t,n){(function(t){function r(e,t){e=e||{};var r=e.highWaterMark;this.highWaterMark=r||0===r?r:16384,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=!1,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.calledRead=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!e.objectMode,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(T||(T=n(97).StringDecoder),this.decoder=new T(e.encoding),this.encoding=e.encoding)}function i(e){return this instanceof i?(this._readableState=new r(e,this),this.readable=!0,void S.call(this)):new i(e)}function o(e,t,n,r,i){var o=c(t,n);if(o)e.emit("error",o);else if(null===n||void 0===n)t.reading=!1,t.ended||l(e,t);else if(t.objectMode||n&&n.length>0)if(t.ended&&!i){var a=new Error("stream.push() after EOF");e.emit("error",a)}else if(t.endEmitted&&i){var a=new Error("stream.unshift() after end event");e.emit("error",a)}else!t.decoder||i||r||(n=t.decoder.write(n)),t.length+=t.objectMode?1:n.length,i?t.buffer.unshift(n):(t.reading=!1,t.buffer.push(n)),t.needReadable&&f(e),p(e,t);else i||(t.reading=!1);return s(t)}function s(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function a(e){if(e>=U)e=U;else{e--;for(var t=1;32>t;t<<=1)e|=e>>t;e++}return e}function u(e,t){return 0===t.length&&t.ended?0:t.objectMode?0===e?0:1:null===e||isNaN(e)?t.flowing&&t.buffer.length?t.buffer[0].length:t.length:0>=e?0:(e>t.highWaterMark&&(t.highWaterMark=a(e)),e>t.length?t.ended?t.length:(t.needReadable=!0,0):e)}function c(e,t){var n=null;return I.isBuffer(t)||"string"==typeof t||null===t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function l(e,t){if(t.decoder&&!t.ended){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.length>0?f(e):w(e)}function f(e){var n=e._readableState;n.needReadable=!1,n.emittedReadable||(n.emittedReadable=!0,n.sync?t.nextTick(function(){h(e)}):h(e))}function h(e){e.emit("readable")}function p(e,n){n.readingMore||(n.readingMore=!0,t.nextTick(function(){d(e,n)}))}function d(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function v(e){return function(){var t=e._readableState;t.awaitDrain--,0===t.awaitDrain&&g(e)}}function g(e){function t(e,t,i){var o=e.write(n);!1===o&&r.awaitDrain++}var n,r=e._readableState;for(r.awaitDrain=0;r.pipesCount&&null!==(n=e.read());)if(1===r.pipesCount?t(r.pipes,0,null):_(r.pipes,t),e.emit("data",n),r.awaitDrain>0)return;return 0===r.pipesCount?(r.flowing=!1,void(k.listenerCount(e,"data")>0&&m(e))):void(r.ranOut=!0)}function y(){this._readableState.ranOut&&(this._readableState.ranOut=!1,g(this))}function m(e,n){var r=e._readableState;if(r.flowing)throw new Error("Cannot switch to old mode now.");var i=n||!1,o=!1;e.readable=!0,e.pipe=S.prototype.pipe,e.on=e.addListener=S.prototype.on,e.on("readable",function(){o=!0;for(var t;!i&&null!==(t=e.read());)e.emit("data",t);null===t&&(o=!1,e._readableState.needReadable=!0)}),e.pause=function(){i=!0,this.emit("pause")},e.resume=function(){i=!1,o?t.nextTick(function(){e.emit("readable")}):this.read(0),this.emit("resume")},e.emit("readable")}function b(e,t){var n,r=t.buffer,i=t.length,o=!!t.decoder,s=!!t.objectMode;if(0===r.length)return null;if(0===i)n=null;else if(s)n=r.shift();else if(!e||e>=i)n=o?r.join(""):I.concat(r,i),r.length=0;else if(e<r[0].length){var a=r[0];n=a.slice(0,e),r[0]=a.slice(e)}else if(e===r[0].length)n=r.shift();else{n=o?"":new I(e);for(var u=0,c=0,l=r.length;l>c&&e>u;c++){var a=r[0],f=Math.min(e-u,a.length);o?n+=a.slice(0,f):a.copy(n,u,0,f),f<a.length?r[0]=a.slice(f):r.shift(),u+=f}}return n}function w(e){var n=e._readableState;if(n.length>0)throw new Error("endReadable called on non-empty stream");!n.endEmitted&&n.calledRead&&(n.ended=!0,t.nextTick(function(){n.endEmitted||0!==n.length||(n.endEmitted=!0,e.readable=!1,e.emit("end"))}))}function _(e,t){for(var n=0,r=e.length;r>n;n++)t(e[n],n)}function E(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1}e.exports=i;var x=n(89),I=n(90).Buffer;i.ReadableState=r;var k=n(86).EventEmitter;k.listenerCount||(k.listenerCount=function(e,t){return e.listeners(t).length});var S=n(85),C=n(93);C.inherits=n(75);var T;C.inherits(i,S),i.prototype.push=function(e,t){var n=this._readableState;return"string"!=typeof e||n.objectMode||(t=t||n.defaultEncoding,t!==n.encoding&&(e=new I(e,t),t="")),o(this,n,e,t,!1)},i.prototype.unshift=function(e){var t=this._readableState;return o(this,t,e,"",!0)},i.prototype.setEncoding=function(e){T||(T=n(97).StringDecoder),this._readableState.decoder=new T(e),this._readableState.encoding=e};var U=8388608;i.prototype.read=function(e){var t=this._readableState;t.calledRead=!0;var n,r=e;if(("number"!=typeof e||e>0)&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return f(this),null;if(e=u(e,t),0===e&&t.ended)return n=null,t.length>0&&t.decoder&&(n=b(e,t),t.length-=n.length),0===t.length&&w(this),n;var i=t.needReadable;return t.length-e<=t.highWaterMark&&(i=!0),(t.ended||t.reading)&&(i=!1),i&&(t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1),i&&!t.reading&&(e=u(r,t)),n=e>0?b(e,t):null,null===n&&(t.needReadable=!0,e=0),t.length-=e,0!==t.length||t.ended||(t.needReadable=!0),t.ended&&!t.endEmitted&&0===t.length&&w(this),n},i.prototype._read=function(e){this.emit("error",new Error("not implemented"))},i.prototype.pipe=function(e,n){function r(e){e===l&&o()}function i(){e.end()}function o(){e.removeListener("close",a),e.removeListener("finish",u),e.removeListener("drain",d),
e.removeListener("error",s),e.removeListener("unpipe",r),l.removeListener("end",i),l.removeListener("end",o),e._writableState&&!e._writableState.needDrain||d()}function s(t){c(),e.removeListener("error",s),0===k.listenerCount(e,"error")&&e.emit("error",t)}function a(){e.removeListener("finish",u),c()}function u(){e.removeListener("close",a),c()}function c(){l.unpipe(e)}var l=this,f=this._readableState;switch(f.pipesCount){case 0:f.pipes=e;break;case 1:f.pipes=[f.pipes,e];break;default:f.pipes.push(e)}f.pipesCount+=1;var h=(!n||n.end!==!1)&&e!==t.stdout&&e!==t.stderr,p=h?i:o;f.endEmitted?t.nextTick(p):l.once("end",p),e.on("unpipe",r);var d=v(l);return e.on("drain",d),e._events&&e._events.error?x(e._events.error)?e._events.error.unshift(s):e._events.error=[s,e._events.error]:e.on("error",s),e.once("close",a),e.once("finish",u),e.emit("pipe",l),f.flowing||(this.on("readable",y),f.flowing=!0,t.nextTick(function(){g(l)})),e},i.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,this.removeListener("readable",y),t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var n=t.pipes,r=t.pipesCount;t.pipes=null,t.pipesCount=0,this.removeListener("readable",y),t.flowing=!1;for(var i=0;r>i;i++)n[i].emit("unpipe",this);return this}var i=E(t.pipes,e);return-1===i?this:(t.pipes.splice(i,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},i.prototype.on=function(e,t){var n=S.prototype.on.call(this,e,t);if("data"!==e||this._readableState.flowing||m(this),"readable"===e&&this.readable){var r=this._readableState;r.readableListening||(r.readableListening=!0,r.emittedReadable=!1,r.needReadable=!0,r.reading?r.length&&f(this,r):this.read(0))}return n},i.prototype.addListener=i.prototype.on,i.prototype.resume=function(){m(this),this.read(0),this.emit("resume")},i.prototype.pause=function(){m(this,!0),this.emit("pause")},i.prototype.wrap=function(e){var t=this._readableState,n=!1,r=this;e.on("end",function(){if(t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&r.push(e)}r.push(null)}),e.on("data",function(i){if(t.decoder&&(i=t.decoder.write(i)),(!t.objectMode||null!==i&&void 0!==i)&&(t.objectMode||i&&i.length)){var o=r.push(i);o||(n=!0,e.pause())}});for(var i in e)"function"==typeof e[i]&&"undefined"==typeof this[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));var o=["error","close","destroy","pause","resume"];return _(o,function(t){e.on(t,r.emit.bind(r,t))}),r._read=function(t){n&&(n=!1,e.resume())},r},i._fromList=b}).call(t,n(38))},[310,247],[306,245,246],function(e,t,n){function r(e,t){this.afterTransform=function(e,n){return i(t,e,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function i(e,t,n){var r=e._transformState;r.transforming=!1;var i=r.writecb;if(!i)return e.emit("error",new Error("no writecb in Transform class"));r.writechunk=null,r.writecb=null,null!==n&&void 0!==n&&e.push(n),i&&i(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}function o(e){if(!(this instanceof o))return new o(e);a.call(this,e);var t=(this._transformState=new r(e,this),this);this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("finish",function(){"function"==typeof this._flush?this._flush(function(e){s(t,e)}):s(t)})}function s(e,t){if(t)return e.emit("error",t);var n=e._writableState,r=(e._readableState,e._transformState);if(n.length)throw new Error("calling transform done when ws.length != 0");if(r.transforming)throw new Error("calling transform done when still transforming");return e.push(null)}e.exports=o;var a=n(247),u=n(93);u.inherits=n(75),u.inherits(o,a),o.prototype.push=function(e,t){return this._transformState.needTransform=!1,a.prototype.push.call(this,e,t)},o.prototype._transform=function(e,t,n){throw new Error("not implemented")},o.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0}},[307,248],function(e,t,n){var r=n(251),i=function(){},o=function(e){return e.setHeader&&"function"==typeof e.abort},s=function(e){return e.stdio&&Array.isArray(e.stdio)&&3===e.stdio.length},a=function(e,t,n){if("function"==typeof t)return a(e,null,t);t||(t={}),n=r(n||i);var u=e._writableState,c=e._readableState,l=t.readable||t.readable!==!1&&e.readable,f=t.writable||t.writable!==!1&&e.writable,h=function(){e.writable||p()},p=function(){f=!1,l||n()},d=function(){l=!1,f||n()},v=function(e){n(e?new Error("exited with error code: "+e):null)},g=function(){return(!l||c&&c.ended)&&(!f||u&&u.ended)?void 0:n(new Error("premature close"))},y=function(){e.req.on("finish",p)};return o(e)?(e.on("complete",p),e.on("abort",g),e.req?y():e.on("request",y)):f&&!u&&(e.on("end",h),e.on("close",h)),s(e)&&e.on("exit",v),e.on("end",d),e.on("finish",p),t.error!==!1&&e.on("error",n),e.on("close",g),function(){e.removeListener("complete",p),e.removeListener("abort",g),e.removeListener("request",y),e.req&&e.req.removeListener("finish",p),e.removeListener("end",h),e.removeListener("close",h),e.removeListener("finish",p),e.removeListener("exit",v),e.removeListener("end",d),e.removeListener("error",n),e.removeListener("close",g)}};e.exports=a},function(e,t,n){function r(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}var i=n(252);e.exports=i(r),r.proto=r(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return r(this)},configurable:!0})})},function(e,t){function n(e,t){function r(){for(var t=new Array(arguments.length),n=0;n<t.length;n++)t[n]=arguments[n];var r=e.apply(this,t),i=t[t.length-1];return"function"==typeof r&&r!==i&&Object.keys(i).forEach(function(e){r[e]=i[e]}),r}if(e&&t)return n(e)(t);if("function"!=typeof e)throw new TypeError("need wrapper function");return Object.keys(e).forEach(function(t){r[t]=e[t]}),r}e.exports=n},function(e,t,n){"use strict";t.parser=n(254),t.generate=n(262)},function(e,t,n){function r(){return this instanceof r?(this._list=i(),this._newPacket(),this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],void(this._stateCounter=0)):new r}var i=n(255),o=n(75),s=n(86).EventEmitter,a=n(260),u=n(261);o(r,s),r.prototype._newPacket=function(){return this.packet&&(this._list.consume(this.packet.length),this.emit("packet",this.packet)),this.packet=new a,!0},r.prototype.parse=function(e){for(this._list.append(e);(-1!=this.packet.length||this._list.length>0)&&this[this._states[this._stateCounter]]();)this._stateCounter++,this._stateCounter>=this._states.length&&(this._stateCounter=0);return this._list.length},r.prototype._parseHeader=function(){var e=this._list.readUInt8(0);return this.packet.cmd=u.types[e>>u.CMD_SHIFT],this.packet.retain=0!==(e&u.RETAIN_MASK),this.packet.qos=e>>u.QOS_SHIFT&u.QOS_MASK,this.packet.dup=0!==(e&u.DUP_MASK),this._list.consume(1),!0},r.prototype._parseLength=function(){for(var e,t=0,n=1,r=0,i=!0;5>t&&(e=this._list.readUInt8(t++),r+=n*(e&u.LENGTH_MASK),n*=128,0!==(e&u.LENGTH_FIN_MASK));)if(this._list.length<=t){i=!1;break}return i&&(this.packet.length=r,this._list.consume(t)),i},r.prototype._parsePayload=function(){var e=!1;if(0===this.packet.length||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseMessageId();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":case"disconnect":break;default:this.emit("error",new Error("not supported"))}e=!0}return e},r.prototype._parseConnect=function(){var e,t,n,r,i,o,s={},a=this.packet;if(e=this._parseString(),null===e)return this.emit("error",new Error("cannot parse protocol id"));if("MQTT"!=e&&"MQIsdp"!=e)return this.emit("error",new Error("invalid protocol id"));if(a.protocolId=e,this._pos>=this._list.length)return this.emit("error",new Error("packet too short"));if(a.protocolVersion=this._list.readUInt8(this._pos),3!=a.protocolVersion&&4!=a.protocolVersion)return this.emit("error",new Error("invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this.emit("error",new Error("packet too short"));if(s.username=this._list.readUInt8(this._pos)&u.USERNAME_MASK,s.password=this._list.readUInt8(this._pos)&u.PASSWORD_MASK,s.will=this._list.readUInt8(this._pos)&u.WILL_FLAG_MASK,s.will&&(a.will={},a.will.retain=0!==(this._list.readUInt8(this._pos)&u.WILL_RETAIN_MASK),a.will.qos=(this._list.readUInt8(this._pos)&u.WILL_QOS_MASK)>>u.WILL_QOS_SHIFT),a.clean=0!==(this._list.readUInt8(this._pos)&u.CLEAN_SESSION_MASK),this._pos++,a.keepalive=this._parseNum(),-1===a.keepalive)return this.emit("error",new Error("packet too short"));if(t=this._parseString(),null===t)return this.emit("error",new Error("packet too short"));if(a.clientId=t,s.will){if(n=this._parseString(),null===n)return this.emit("error",new Error("cannot parse will topic"));if(a.will.topic=n,r=this._parseBuffer(),null===r)return this.emit("error",new Error("cannot parse will payload"));a.will.payload=r}if(s.username){if(o=this._parseString(),null===o)return this.emit("error",new Error("cannot parse username"));a.username=o}if(s.password){if(i=this._parseBuffer(),null===i)return this.emit("error",new Error("cannot parse username"));a.password=i}return a},r.prototype._parseConnack=function(){var e=this.packet;return this._list.length<2?null:(e.sessionPresent=!!(this._list.readUInt8(this._pos++)&u.SESSIONPRESENT_MASK),e.returnCode=this._list.readUInt8(this._pos),-1===e.returnCode?this.emit("error",new Error("cannot parse return code")):void 0)},r.prototype._parsePublish=function(){var e=this.packet;return e.topic=this._parseString(),null===e.topic?this.emit("error",new Error("cannot parse topic")):void(e.qos>0&&!this._parseMessageId()||(e.payload=this._list.slice(this._pos,e.length)))},r.prototype._parseSubscribe=function(){var e,t,n=this.packet;if(1!=n.qos)return this.emit("error",new Error("wrong subscribe header"));if(n.subscriptions=[],this._parseMessageId())for(;this._pos<n.length;){if(e=this._parseString(),null===e)return this.emit("error",new Error("Parse error - cannot parse topic"));t=this._list.readUInt8(this._pos++),n.subscriptions.push({topic:e,qos:t})}},r.prototype._parseSuback=function(){if(this.packet.granted=[],this._parseMessageId())for(;this._pos<this.packet.length;)this.packet.granted.push(this._list.readUInt8(this._pos++))},r.prototype._parseUnsubscribe=function(){var e=this.packet;if(e.unsubscriptions=[],this._parseMessageId())for(;this._pos<e.length;){var t;if(t=this._parseString(),null===t)return this.emit("error",new Error("cannot parse topic"));e.unsubscriptions.push(t)}},r.prototype._parseUnsuback=function(){return this._parseMessageId()?void 0:this.emit("error",new Error("cannot parse message id"))},r.prototype._parseMessageId=function(){var e=this.packet;return e.messageId=this._parseNum(),null===e.messageId?(this.emit("error",new Error("cannot parse message id")),!1):!0},r.prototype._parseString=function(e){var t,n=this._parseNum(),r=n+this._pos;return-1===n||r>this._list.length||r>this.packet.length?null:(t=this._list.toString("utf8",this._pos,r),this._pos+=n,t)},r.prototype._parseBuffer=function(){var e,t=this._parseNum(),n=t+this._pos;return-1===t||n>this._list.length||n>this.packet.length?null:(e=this._list.slice(this._pos,n),this._pos+=t,e)},r.prototype._parseNum=function(){if(this._list.length-this._pos<2)return-1;var e=this._list.readUInt16BE(this._pos);return this._pos+=2,e},e.exports=r},function(e,t,n){(function(t){function r(e){if(!(this instanceof r))return new r(e);if(this._bufs=[],this.length=0,"function"==typeof e){this._callback=e;var n=function(e){this._callback&&(this._callback(e),this._callback=null)}.bind(this);this.on("pipe",function(e){e.on("error",n)}),this.on("unpipe",function(e){e.removeListener("error",n)})}else t.isBuffer(e)?this.append(e):Array.isArray(e)&&e.forEach(function(e){t.isBuffer(e)&&this.append(e)}.bind(this));i.call(this)}var i=n(256),o=n(73);o.inherits(r,i),r.prototype._offset=function(e){for(var t,n=0,r=0;r<this._bufs.length;r++){if(t=n+this._bufs[r].length,t>e)return[r,e-n];n=t}},r.prototype.append=function(e){var n=t.isBuffer(e)||e instanceof r;return"number"==typeof e&&(e=e.toString()),this._bufs.push(n?e:new t(e)),this.length+=e.length,this},r.prototype._write=function(e,t,n){this.append(e),n&&n()},r.prototype._read=function(e){return this.length?(e=Math.min(e,this.length),this.push(this.slice(0,e)),void this.consume(e)):this.push(null)},r.prototype.end=function(e){i.prototype.end.call(this,e),this._callback&&(this._callback(null,this.slice()),this._callback=null)},r.prototype.get=function(e){return this.slice(e,e+1)[0]},r.prototype.slice=function(e,t){return this.copy(null,0,e,t)},r.prototype.copy=function(e,n,r,i){if(("number"!=typeof r||0>r)&&(r=0),("number"!=typeof i||i>this.length)&&(i=this.length),r>=this.length)return e||new t(0);if(0>=i)return e||new t(0);var o,s,a=!!e,u=this._offset(r),c=i-r,l=c,f=a&&n||0,h=u[1];if(0===r&&i==this.length){if(!a)return t.concat(this._bufs);for(s=0;s<this._bufs.length;s++)this._bufs[s].copy(e,f),f+=this._bufs[s].length;return e}if(l<=this._bufs[u[0]].length-h)return a?this._bufs[u[0]].copy(e,n,h,h+l):this._bufs[u[0]].slice(h,h+l);for(a||(e=new t(c)),s=u[0];s<this._bufs.length;s++){if(o=this._bufs[s].length-h,!(l>o)){this._bufs[s].copy(e,f,h,h+l);break}this._bufs[s].copy(e,f,h),f+=o,l-=o,h&&(h=0)}return e},r.prototype.toString=function(e,t,n){return this.slice(t,n).toString(e)},r.prototype.consume=function(e){for(;this._bufs.length;){if(!(e>this._bufs[0].length)){this._bufs[0]=this._bufs[0].slice(e),this.length-=e;break}e-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift()}return this},r.prototype.duplicate=function(){for(var e=0,t=new r;e<this._bufs.length;e++)t.append(this._bufs[e]);return t},r.prototype.destroy=function(){this._bufs.length=0,this.length=0,this.push(null)},function(){var e={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1};for(var t in e)!function(t){r.prototype[t]=function(n){return this.slice(n,n+e[t])[t](0)}}(t)}(),e.exports=r}).call(t,n(3).Buffer)},[308,257],[306,258,259],245,[310,257],function(e,t){function n(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}e.exports=n},function(e,t){e.exports.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"reserved"},e.exports.codes={};for(var n in e.exports.types){var r=e.exports.types[n];e.exports.codes[r]=n}e.exports.CMD_SHIFT=4,e.exports.CMD_MASK=240,e.exports.DUP_MASK=8,e.exports.QOS_MASK=3,e.exports.QOS_SHIFT=1,e.exports.RETAIN_MASK=1,e.exports.LENGTH_MASK=127,e.exports.LENGTH_FIN_MASK=128,e.exports.SESSIONPRESENT_MASK=1,e.exports.USERNAME_MASK=128,e.exports.PASSWORD_MASK=64,e.exports.WILL_RETAIN_MASK=32,e.exports.WILL_QOS_MASK=24,e.exports.WILL_QOS_SHIFT=3,e.exports.WILL_FLAG_MASK=4,e.exports.CLEAN_SESSION_MASK=2},function(e,t,n){(function(t){"use strict";function r(e){switch(e.cmd){case"connect":return i(e);case"connack":return o(e);case"publish":return s(e);case"puback":case"pubrec":case"pubrel":case"pubcomp":case"unsuback":return a(e);case"subscribe":return u(e);case"suback":return c(e);case"unsubscribe":return l(e);case"pingreq":case"pingresp":case"disconnect":return f(e);default:throw new Error("unknown command")}}function i(e){var e=e||{},n=e.protocolId||"MQTT",r=e.protocolVersion||4,i=e.will,o=e.clean,s=e.keepalive||0,a=e.clientId||"",u=e.username,c=e.password;void 0===o&&(o=!0);var l=0;if(!n||"string"!=typeof n&&!t.isBuffer(n))throw new Error("Invalid protocol id");if(l+=n.length+2,!r||"number"!=typeof r||r>255||0>r)throw new Error("Invalid protocol version");if(l+=1,"string"!=typeof a&&!t.isBuffer(a)||!a&&4!=r||!a&&!o){if(4>r)throw new Error("clientId must be supplied before 3.1.1");if(0==o)throw new Error("clientId must be given if cleanSession set to 0")}else l+=a.length+2;if("number"!=typeof s||0>s||s>65535)throw new Error("Invalid keepalive");if(l+=2,l+=1,i){if("object"!=typeof i)throw new Error("Invalid will");if(!i.topic||"string"!=typeof i.topic)throw new Error("Invalid will topic");if(l+=t.byteLength(i.topic)+2,i.payload&&i.payload){if(!(i.payload.length>=0))throw new Error("Invalid will payload");l+="string"==typeof i.payload?t.byteLength(i.payload)+2:i.payload.length+2}else l+=2}if(u){if(!u.length)throw new Error("Invalid username");l+=t.byteLength(u)+2}if(c){if(!c.length)throw new Error("Invalid password");l+=b(c)+2}var f=new t(1+h(l)+l),v=0;f.writeUInt8(w.codes.connect<<w.CMD_SHIFT,v++,!0),v+=p(f,v,l),v+=m(f,v,n),f.writeUInt8(r,v++,!0);var g=0;return g|=u?w.USERNAME_MASK:0,g|=c?w.PASSWORD_MASK:0,g|=i&&i.retain?w.WILL_RETAIN_MASK:0,g|=i&&i.qos?i.qos<<w.WILL_QOS_SHIFT:0,g|=i?w.WILL_FLAG_MASK:0,g|=o?w.CLEAN_SESSION_MASK:0,f.writeUInt8(g,v++,!0),v+=y(f,v,s),v+=m(f,v,a),i&&(v+=d(f,v,i.topic),v+=m(f,v,i.payload)),u&&(v+=m(f,v,u)),c&&(v+=m(f,v,c)),f}function o(e){var e=e||{},n=e.returnCode;if("number"!=typeof n)throw new Error("Invalid return code");var r=new t(4),i=0;return r.writeUInt8(w.codes.connack<<w.CMD_SHIFT,i++,!0),i+=p(r,i,2),r.writeUInt8(e.sessionPresent&&w.SESSIONPRESENT_MASK||0,i++,!0),r.writeUInt8(n,i++,!0),r}function s(e){var e=e||{},n=e.dup?w.DUP_MASK:0,r=e.qos,i=e.retain?w.RETAIN_MASK:0,o=e.topic,s=e.payload||_,a=e.messageId,u=0;if("string"==typeof o)u+=t.byteLength(o)+2;else{if(!t.isBuffer(o))throw new Error("Invalid topic");u+=o.length+2}if(u+=t.isBuffer(s)?s.length:t.byteLength(s),r&&"number"!=typeof a)throw new Error("Invalid message id");r&&(u+=2);var c=new t(1+h(u)+u),l=0;return c.writeUInt8(w.codes.publish<<w.CMD_SHIFT|n|r<<w.QOS_SHIFT|i,l++,!0),l+=p(c,l,u),l+=m(c,l,o),r>0&&(l+=y(c,l,a)),t.isBuffer(s)?g(c,l,s):v(c,l,s),c}function a(e){var e=e||{},n=e.cmd||"puback",r=e.messageId,i=e.dup&&"pubrel"===n?w.DUP_MASK:0,o=0;if("pubrel"===n&&(o=1),"number"!=typeof r)throw new Error("Invalid message id");var s=new t(4),a=0;return s[a++]=w.codes[n]<<w.CMD_SHIFT|i|o<<w.QOS_SHIFT,a+=p(s,a,2),a+=y(s,a,r),s}function u(e){var e=e||{},n=e.dup?w.DUP_MASK:0,r=e.qos||0,i=e.messageId,o=e.subscriptions,s=0;if("number"!=typeof i)throw new Error("Invalid message id");if(s+=2,"object"!=typeof o||!o.length)throw new Error("Invalid subscriptions");for(var a=0;a<o.length;a+=1){var u=o[a].topic,r=o[a].qos;if("string"!=typeof u)throw new Error("Invalid subscriptions - invalid topic");if("number"!=typeof r)throw new Error("Invalid subscriptions - invalid qos");s+=t.byteLength(u)+2+1}var c=new t(1+h(s)+s),l=0;c.writeUInt8(w.codes.subscribe<<w.CMD_SHIFT|n|1<<w.QOS_SHIFT,l++,!0),l+=p(c,l,s),l+=y(c,l,i);for(var a=0;a<o.length;a++){var f=o[a],u=f.topic,r=f.qos;l+=d(c,l,u),c.writeUInt8(r,l++,!0)}return c}function c(e){var e=e||{},n=e.messageId,r=e.granted,i=0;if("number"!=typeof n)throw new Error("Invalid message id");if(i+=2,"object"!=typeof r||!r.length)throw new Error("Invalid qos vector");for(var o=0;o<r.length;o+=1){if("number"!=typeof r[o])throw new Error("Invalid qos vector");i+=1}var s=new t(1+h(i)+i),a=0;s.writeUInt8(w.codes.suback<<w.CMD_SHIFT,a++,!0),a+=p(s,a,i),a+=y(s,a,n);for(var o=0;o<r.length;o++)s.writeUInt8(r[o],a++,!0);return s}function l(e){var e=e||{},n=e.messageId,r=e.dup?w.DUP_MASK:0,i=e.unsubscriptions,o=0;if("number"!=typeof n)throw new Error("Invalid message id");if(o+=2,"object"!=typeof i||!i.length)throw new Error("Invalid unsubscriptions");for(var s=0;s<i.length;s+=1){if("string"!=typeof i[s])throw new Error("Invalid unsubscriptions");o+=t.byteLength(i[s])+2}var a=new t(1+h(o)+o),u=0;a[u++]=w.codes.unsubscribe<<w.CMD_SHIFT|r|1<<w.QOS_SHIFT,u+=p(a,u,o),u+=y(a,u,n);for(var s=0;s<i.length;s++)u+=d(a,u,i[s]);return a}function f(e){var n=new t(2);return n[0]=w.codes[e.cmd]<<4,n[1]=0,n}function h(e){return e>=0&&128>e?1:e>=128&&16384>e?2:e>=16384&&2097152>e?3:e>=2097152&&268435456>e?4:0}function p(e,t,n){var r=0,i=t;do r=n%128|0,n=n/128|0,n>0&&(r=128|r),e.writeUInt8(r,t++,!0);while(n>0);return t-i}function d(e,n,r){var i=t.byteLength(r);return y(e,n,i),v(e,n+2,r),i+2}function v(e,t,n){e.write(n,t)}function g(e,t,n){return n.copy(e,t),n.length}function y(e,t,n){return e.writeUInt8(n>>8,t,!0),e.writeUInt8(255&n,t+1,!0),2}function m(e,t,n){var r=0;return n&&"string"==typeof n?r+=d(e,t+r,n):n?(r+=y(e,t+r,n.length),r+=g(e,t+r,n)):r+=y(e,t+r,0),r}function b(e){return t.isBuffer(e)?e.length:t.byteLength(e)}var w=n(261),_=new t(0);e.exports=r}).call(t,n(3).Buffer)},function(e,t){"use strict";function n(e,t,n){var r=this;this._callback=e,this._args=n,this._interval=setInterval(e,t,this._args),this.reschedule=function(e){Date.now();r._interval&&clearInterval(r._interval),r._interval=setInterval(r._callback,e,r._args)},this.clear=function(){r._interval&&(clearInterval(r._interval),r._interval=void 0,r._callback=void 0,r._args=void 0)}}function r(){if("function"!=typeof arguments[0])throw new Error("callback needed");if("number"!=typeof arguments[1])throw new Error("interval needed");var e;if(arguments.length>0){e=new Array(arguments.length-2);for(var t=0;t<e.length;t++)e[t]=arguments[t+2]}return new n(arguments[0],arguments[1],e)}e.exports=r},function(e,t){function n(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var i in n)r.call(n,i)&&(e[i]=n[i])}return e}e.exports=n;var r=Object.prototype.hasOwnProperty},function(e,t,n){"use strict";function r(e,t){var n,r;return t.port=t.port||1883,t.hostname=t.hostname||t.host||"localhost",n=t.port,r=t.hostname,i.createConnection(n,r)}var i=n(266);e.exports=r},43,function(e,t,n){"use strict";function r(e,t){function n(n){t.rejectUnauthorized&&e.emit("error",n),r.end()}var r;return t.port=t.port||8883,t.host=t.hostname||t.host||"localhost",t.rejectUnauthorized=!1!==t.rejectUnauthorized,r=i.connect(t),r.on("secureConnect",function(){t.rejectUnauthorized&&!r.authorized?r.emit("error",new Error("TLS not authorized")):r.removeListener("error",n)}),r.on("error",n),r}var i=n(268);e.exports=r},43,function(e,t,n){(function(t){"use strict";function r(e,t){var n={protocol:"mqttv3.1"},r=t.hostname||"localhost",i=String(t.port||80),s=t.path||"/",u=t.protocol+"://"+r+":"+i+s;return"wss"===t.protocol&&a.forEach(function(e){t.hasOwnProperty(e)&&(n[e]=t[e])}),o(u,n)}function i(e,t){var n,r;if("undefined"==typeof document)throw new Error("Could not determine host. Specify host manually.");return r=s.parse(document.URL),t.protocol||("https:"===r.protocol?t.protocol="wss":t.protocol="ws"),t.hostname||(t.hostname=t.host),t.hostname||(t.hostname=r.hostname,t.port||(t.port=r.port)),t.port||("wss"===t.protocol?t.port=443:t.port=80),t.path||(t.path="/"),n=t.protocol+"://"+t.hostname+":"+t.port+t.path,o(n,"mqttv3.1")}var o=n(270),s=n(62),a=["rejectUnauthorized","ca","cert","key","pfx","passphrase"];"browser"!==t.title?e.exports=r:e.exports=i}).call(t,n(38))},function(e,t,n){(function(t,r,i){function o(e,n,o){function c(e,t,n){m.send(e,n)}function l(e,t,n){if(m.bufferedAmount>x)return void setTimeout(l,I,e,t,n);try{m.send(e)}catch(r){return n(r)}n()}function f(e){m.close(),e()}function h(){y.setReadable(E),y.setWritable(E),y.emit("connect")}function p(){y.end(),y.destroy()}function d(e){y.destroy(e)}function v(e){var t=e.data;t=new i(t instanceof ArrayBuffer?new Uint8Array(t):t),E.push(t)}function g(){m.close()}var y,m,b="browser"===t.title,w=!!r.WebSocket,_=b?l:c,E=s.obj(_,f);n&&!Array.isArray(n)&&"object"==typeof n&&(o=n,n=null),o||(o={});var x=o.browserBufferSize||524288,I=o.browserBufferTimeout||1e3;return"object"==typeof e?m=e:(m=w&&b?new u(e,n):new u(e,n,o),m.binaryType="arraybuffer"),1===m.readyState?y=E:(y=a.obj(),m.addEventListener("open",h)),y.socket=m,m.addEventListener("close",p),m.addEventListener("error",d),m.addEventListener("message",v),E.on("close",g),y}var s=n(271),a=n(281),u=n(291);e.exports=o}).call(t,n(38),function(){return this}(),n(3).Buffer)},function(e,t,n){(function(t){function r(e){s.call(this,e),this._destroyed=!1}function i(e,t,n){n(null,e)}function o(e){return function(t,n,r){return"function"==typeof t&&(r=n,n=t,t={}),"function"!=typeof n&&(n=i),"function"!=typeof r&&(r=null),e(t,n,r)}}var s=n(272),a=n(73).inherits,u=n(264);a(r,s),r.prototype.destroy=function(e){if(!this._destroyed){this._destroyed=!0;var n=this;t.nextTick(function(){e&&n.emit("error",e),n.emit("close")})}},e.exports=o(function(e,t,n){var i=new r(e);return i._transform=t,n&&(i._flush=n),i}),e.exports.ctor=o(function(e,t,n){function i(t){return this instanceof i?(this.options=u(e,t),void r.call(this,this.options)):new i(t)}return a(i,r),i.prototype._transform=t,n&&(i.prototype._flush=n),i}),e.exports.obj=o(function(e,t,n){var i=new r(u({objectMode:!0,highWaterMark:16},e));return i._transform=t,n&&(i._flush=n),i})}).call(t,n(38))},[309,273],[311,274],[312,276,279],function(e,t,n){(function(t){"use strict";function n(e){for(var n=new Array(arguments.length-1),r=0;r<n.length;)n[r++]=arguments[r];t.nextTick(function(){e.apply(null,n)})}!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports=n:e.exports=t.nextTick}).call(t,n(38))},[313,277,278,274,274],6,43,[314,274,274],function(e,t){(function(t){function n(e,t){function n(){if(!i){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),i=!0}return e.apply(this,arguments)}if(r("noDeprecation"))return e;var i=!1;return n}function r(e){try{if(!t.localStorage)return!1}catch(n){return!1}var r=t.localStorage[e];return null==r?!1:"true"===String(r).toLowerCase()}e.exports=n}).call(t,function(){return this}())},function(e,t,n){(function(t,r){var i=n(282),o=n(290),s=n(75),a=new t([0]),u=function(e,t){e._corked?e.once("uncork",t):t()},c=function(e,t){return function(n){n?e.destroy("premature close"===n.message?null:n):t&&!e._ended&&e.end()}},l=function(e,t){return e?e._writableState&&e._writableState.finished?t():e._writableState?e.end(t):(e.end(),void t()):t()},f=function(e){return new i.Readable({objectMode:!0,highWaterMark:16}).wrap(e)},h=function(e,t,n){return this instanceof h?(i.Duplex.call(this,n),this._writable=null,this._readable=null,this._readable2=null,this._forwardDestroy=!n||n.destroy!==!1,this._forwardEnd=!n||n.end!==!1,this._corked=1,this._ondrain=null,this._drained=!1,this._forwarding=!1,this._unwrite=null,this._unread=null,this._ended=!1,this.destroyed=!1,e&&this.setWritable(e),void(t&&this.setReadable(t))):new h(e,t,n)};s(h,i.Duplex),h.obj=function(e,t,n){return n||(n={}),n.objectMode=!0,n.highWaterMark=16,new h(e,t,n)},h.prototype.cork=function(){1===++this._corked&&this.emit("cork")},h.prototype.uncork=function(){this._corked&&0===--this._corked&&this.emit("uncork")},h.prototype.setWritable=function(e){if(this._unwrite&&this._unwrite(),this.destroyed)return void(e&&e.destroy&&e.destroy());if(null===e||e===!1)return void this.end();var t=this,n=o(e,{writable:!0,readable:!1},c(this,this._forwardEnd)),i=function(){var e=t._ondrain;t._ondrain=null,e&&e()},s=function(){t._writable.removeListener("drain",i),n()};this._unwrite&&r.nextTick(i),this._writable=e,this._writable.on("drain",i),this._unwrite=s,this.uncork()},h.prototype.setReadable=function(e){if(this._unread&&this._unread(),this.destroyed)return void(e&&e.destroy&&e.destroy());if(null===e||e===!1)return this.push(null),void this.resume();var t=this,n=o(e,{writable:!1,readable:!0},c(this)),r=function(){t._forward()},i=function(){t.push(null)},s=function(){t._readable2.removeListener("readable",r),t._readable2.removeListener("end",i),n()};this._drained=!0,this._readable=e,this._readable2=e._readableState?e:f(e),this._readable2.on("readable",r),this._readable2.on("end",i),this._unread=s,this._forward()},h.prototype._read=function(){this._drained=!0,this._forward()},h.prototype._forward=function(){if(!this._forwarding&&this._readable2&&this._drained){this._forwarding=!0;for(var e,t=this._readable2._readableState;null!==(e=this._readable2.read(t.buffer.length?t.buffer[0].length:t.length));)this._drained=this.push(e);this._forwarding=!1}},h.prototype.destroy=function(e){if(!this.destroyed){this.destroyed=!0;var t=this;r.nextTick(function(){t._destroy(e)})}},h.prototype._destroy=function(e){if(e){var t=this._ondrain;this._ondrain=null,t?t(e):this.emit("error",e)}this._forwardDestroy&&(this._readable&&this._readable.destroy&&this._readable.destroy(),this._writable&&this._writable.destroy&&this._writable.destroy()),this.emit("close")},h.prototype._write=function(e,t,n){return this.destroyed?n():this._corked?u(this,this._write.bind(this,e,t,n)):e===a?this._finish(n):this._writable?void(this._writable.write(e)===!1?this._ondrain=n:n()):n()},h.prototype._finish=function(e){var t=this;this.emit("preend"),u(this,function(){l(t._forwardEnd&&t._writable,function(){t._writableState.prefinished===!1&&(t._writableState.prefinished=!0),t.emit("prefinish"),u(t,e)})})},h.prototype.end=function(e,t,n){return"function"==typeof e?this.end(null,null,e):"function"==typeof t?this.end(e,null,t):(this._ended=!0,e&&this.write(e),this._writableState.ending||this.write(a),i.Writable.prototype.end.call(this,n))},e.exports=h}).call(t,n(3).Buffer,n(38))},function(e,t,n){(function(r){var i=function(){try{return n(85)}catch(e){}}();t=e.exports=n(283),t.Stream=i||t,t.Readable=t,t.Writable=n(287),t.Duplex=n(286),t.Transform=n(288),t.PassThrough=n(289),!r.browser&&"disable"==={NODE_ENV:"production"}.READABLE_STREAM&&i&&(e.exports=i)}).call(t,n(38))},[313,284,285,286,286],6,43,[312,283,287],[314,286,286],[311,286],function(e,t,n){"use strict";function r(e){return this instanceof r?void i.call(this,e):new r(e)}e.exports=r;var i=n(288),o=n(93);o.inherits=n(75),o.inherits(r,i),r.prototype._transform=function(e,t,n){n(null,e)}},function(e,t,n){var r=n(251),i=function(){},o=function(e){return e.setHeader&&"function"==typeof e.abort},s=function(e,t,n){if("function"==typeof t)return s(e,null,t);t||(t={}),n=r(n||i);var a=e._writableState,u=e._readableState,c=t.readable||t.readable!==!1&&e.readable,l=t.writable||t.writable!==!1&&e.writable,f=function(){e.writable||h()},h=function(){l=!1,c||n()},p=function(){c=!1,l||n()},d=function(){return(!c||u&&u.ended)&&(!l||a&&a.ended)?void 0:n(new Error("premature close"))},v=function(){e.req.on("finish",h)};return o(e)?(e.on("complete",h),e.on("abort",d),e.req?v():e.on("request",v)):l&&!a&&(e.on("end",f),e.on("close",f)),e.on("end",p),e.on("finish",h),t.error!==!1&&e.on("error",n),e.on("close",d),function(){e.removeListener("complete",h),e.removeListener("abort",d),e.removeListener("request",v),e.req&&e.req.removeListener("finish",h),e.removeListener("end",f),e.removeListener("close",f),e.removeListener("finish",h),e.removeListener("end",p),e.removeListener("error",n),e.removeListener("close",d)}};e.exports=s},function(e,t){e.exports=window.WebSocket||window.MozWebSocket},function(e,t,n){(function(e){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(7),u=r(a),c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(35),h=r(f),p=n(37),d=r(p),v=n(293),g=r(v),y=n(133),m=r(y),b=n(299),w=r(b),_=n(235).CONFIG,E=function(t){function n(t){i(this,n);var r=o(this,Object.getPrototypeOf(n).call(this,t));r._stompConnection=void 0,r._subscription=void 0,"object"===("undefined"==typeof e?"undefined":c(e))&&""+e=="[object process]"?r._protocol="stomp":r._protocol="webStomp";var s=_.stomp,a=_.webStomp;return r._webSocketOpts=a.webSocket,r._connectionHeaders=s.connection.headers,r._connectionOpts=s.connection.opts,r._existingQueuePrefix=s.existingQueuePrefix,r}return s(n,t),l(n,[{key:"onReceive",value:function(e,t){var n=this;return t=(0,h["default"])({},t),new d["default"](function(r,i){n.connect().then(function(i){var o=n._subcriptionFor(n._existingQueuePrefix,n._inboxTopic),s=function(r){var i=new w["default"](r,n._deviceId,t),o=n._autoAck(t.ack);return i.blackListed()?void(o&&r.nack()):(e(n._parseContent(i.body),i.headers),void(o&&r.ack()))};n._subscription=i.subscribe(o,s),r(!0)})["catch"](function(e){i(e)})})}},{key:"publish",value:function(e,t,n){var r=this;return n=(0,h["default"])({},n),new d["default"](function(n,i){r.connect().then(function(i){var o=r._destinationFor("exchange",e);i.send(o,r._connectionHeaders,r._encapsulateContent(t)),n(!0)})["catch"](function(e){i(e)})})}},{key:"disconnect",value:function(){var e=this;return new d["default"](function(t,n){void 0===e._stompConnection?n("Invalid connection"):(void 0!==e._subscription&&e._subscription.unsubscribe(),e._stompConnection.disconnect(function(){e._stompConnection=void 0,t(!0)})["catch"](function(e){n(e)}))})}},{key:"connect",value:function(){var t=this,n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return n=(0,h["default"])(this._connectionOpts,n),new d["default"](function(n,r){t.getEndpointConfigs().then(function(i){var o=i.connection;if(void 0!==t._stompConnection)n(t._stompConnection);else try{!function(){var i=void 0;if("object"===("undefined"==typeof e?"undefined":c(e))&&""+e=="[object process]")i=t._tls?g["default"].overTCP(o.host,o.protocols.stomp.tlsPort,t._tlsOpts):g["default"].overTCP(o.host,o.protocols.stomp.port);else{var s=t._tls?t._webSocketOpts.tls.protocol:t._webSocketOpts.protocol,a=t._tls?o.protocols.webStomp.tlsPort:o.protocols.webStomp.port,u=s+"://"+o.host+":"+a+"/"+t._webSocketOpts.endpoint,l=new WebSocket(u);i=g["default"].over(l),i.heartbeat.outgoing=1e4,i.heartbeat.incoming=1e4,i.debug=null}var f=(0,h["default"])(t._connectionHeaders,{login:o.deviceId||o.client,passcode:o.secret,host:o.vhost});i.connect(f,function(){t._stompConnection=i,n(t._stompConnection)},function(e){r(e)})}()}catch(s){r(s)}})["catch"](function(e){r(e)})})}},{key:"_subcriptionFor",value:function(e,t){return"/"+e+"/"+this.deviceId()+"."+t}},{key:"_destinationFor",value:function(e,t){return"/"+e+"/"+this.deviceId()+"/"+this.deviceId()+"."+t}},{key:"_autoAck",value:function(e){if(e)switch((0,u["default"])(_[this._protocol].ackTypes,e)||console.error("Wrong acknowledge type"),e){case"client":return!1;default:return!0}return!1}}]),n}(m["default"]);t["default"]=E}).call(t,n(38))},function(e,t,n){var r=n(294),i=n(295);e.exports=r.Stomp,e.exports.overTCP=i.overTCP,e.exports.overWS=i.overWS},function(e,t){(function(){var e,n,r,i,o={}.hasOwnProperty,s=[].slice;e={LF:"\n",NULL:"\x00"},r=function(){function t(e,t,n){this.command=e,this.headers=null!=t?t:{},this.body=null!=n?n:""}var n;return t.prototype.toString=function(){var n,r,i,s,a;n=[this.command],s=this.headers["content-length"]===!1,s&&delete this.headers["content-length"],i=this.headers;for(r in i)o.call(i,r)&&(a=i[r],n.push(r+":"+a));return this.body&&!s&&n.push("content-length:"+t.sizeOfUTF8(this.body)),n.push(e.LF+this.body),n.join(e.LF)},t.sizeOfUTF8=function(e){return e?encodeURI(e).match(/%..|./g).length:0},n=function(n){var r,i,o,s,a,u,c,l,f,h,p,d,v,g,y,m,b,w;for(s=n.search(RegExp(""+e.LF+e.LF)),a=n.substring(0,s).split(e.LF),o=a.shift(),u={},w=function(e){return e.replace(/^\s+|\s+$/g,"")},g=a.reverse(),f=0,d=g.length;d>f;f++)v=g[f],l=v.indexOf(":"),u[w(v.substring(0,l))]=w(v.substring(l+1));if(r="",b=s+2,u["content-length"])p=parseInt(u["content-length"]),r=(""+n).substring(b,b+p);else for(i=null,c=h=y=b,m=n.length;(m>=y?m>h:h>m)&&(i=n.charAt(c),i!==e.NULL);c=m>=y?++h:--h)r+=i;return new t(o,u,r)},t.unmarshall=function(t){var r,i,o,s;return i=t.split(RegExp(""+e.NULL+e.LF+"*")),s={frames:[],partial:""},s.frames=function(){var e,t,o,s;for(o=i.slice(0,-1),s=[],e=0,t=o.length;t>e;e++)r=o[e],s.push(n(r));return s}(),o=i.slice(-1)[0],o===e.LF||-1!==o.search(RegExp(""+e.NULL+e.LF+"*$"))?s.frames.push(n(o)):s.partial=o,s},t.marshall=function(n,r,i){var o;return o=new t(n,r,i),o.toString()+e.NULL},t}(),n=function(){function t(e){this.ws=e,this.ws.binaryType="arraybuffer",this.counter=0,this.connected=!1,this.heartbeat={outgoing:1e4,incoming:1e4},this.maxWebSocketFrameSize=16384,this.subscriptions={},this.partialData=""}var n;return t.prototype.debug=function(e){var t;return"undefined"!=typeof window&&null!==window&&null!=(t=window.console)?t.log(e):void 0},n=function(){return Date.now?Date.now():(new Date).valueOf},t.prototype._transmit=function(e,t,n){var i;for(i=r.marshall(e,t,n),"function"==typeof this.debug&&this.debug(">>> "+i);;){if(!(i.length>this.maxWebSocketFrameSize))return this.ws.send(i);this.ws.send(i.substring(0,this.maxWebSocketFrameSize)),i=i.substring(this.maxWebSocketFrameSize),"function"==typeof this.debug&&this.debug("remaining = "+i.length)}},t.prototype._setupHeartbeat=function(t){var r,o,s,a,u,c;if((r=t.version)===i.VERSIONS.V1_1||r===i.VERSIONS.V1_2)return o=function(){var e,n,r,i;for(r=t["heart-beat"].split(","),i=[],e=0,n=r.length;n>e;e++)c=r[e],i.push(parseInt(c));return i}(),a=o[0],s=o[1],0!==this.heartbeat.outgoing&&0!==s&&(u=Math.max(this.heartbeat.outgoing,s),"function"==typeof this.debug&&this.debug("send PING every "+u+"ms"),this.pinger=i.setInterval(u,function(t){return function(){return t.ws.send(e.LF),"function"==typeof t.debug?t.debug(">>> PING"):void 0}}(this))),0!==this.heartbeat.incoming&&0!==a?(u=Math.max(this.heartbeat.incoming,a),"function"==typeof this.debug&&this.debug("check PONG every "+u+"ms"),this.ponger=i.setInterval(u,function(e){return function(){var t;return t=n()-e.serverActivity,t>2*u?("function"==typeof e.debug&&e.debug("did not receive server activity for the last "+t+"ms"),e.ws.close()):void 0}}(this))):void 0},t.prototype._parseConnect=function(){var e,t,n,r;switch(e=1<=arguments.length?s.call(arguments,0):[],r={},e.length){case 2:r=e[0],t=e[1];break;case 3:e[1]instanceof Function?(r=e[0],t=e[1],n=e[2]):(r.login=e[0],r.passcode=e[1],t=e[2]);break;case 4:r.login=e[0],r.passcode=e[1],t=e[2],n=e[3];break;default:r.login=e[0],r.passcode=e[1],t=e[2],n=e[3],r.host=e[4]}return[r,t,n]},t.prototype.connect=function(){var t,o,a,u;return t=1<=arguments.length?s.call(arguments,0):[],u=this._parseConnect.apply(this,t),a=u[0],this.connectCallback=u[1],o=u[2],"function"==typeof this.debug&&this.debug("Opening Web Socket..."),this.ws.onmessage=function(t){return function(i){var s,a,u,c,l,f,h,p,d,v,g,y,m;if(c="undefined"!=typeof ArrayBuffer&&i.data instanceof ArrayBuffer?(s=new Uint8Array(i.data),"function"==typeof t.debug?t.debug("--- got data length: "+s.length):void 0,function(){var e,t,n;for(n=[],e=0,t=s.length;t>e;e++)a=s[e],n.push(String.fromCharCode(a));return n}().join("")):i.data,t.serverActivity=n(),c===e.LF)return void("function"==typeof t.debug&&t.debug("<<< PONG"));for("function"==typeof t.debug&&t.debug("<<< "+c),m=r.unmarshall(t.partialData+c),t.partialData=m.partial,v=m.frames,g=[],f=0,h=v.length;h>f;f++)switch(l=v[f],l.command){case"CONNECTED":"function"==typeof t.debug&&t.debug("connected to server "+l.headers.server),t.connected=!0,t._setupHeartbeat(l.headers),g.push("function"==typeof t.connectCallback?t.connectCallback(l):void 0);break;case"MESSAGE":y=l.headers.subscription,d=t.subscriptions[y]||t.onreceive,d?(u=t,p=l.headers["message-id"],l.ack=function(e){return null==e&&(e={}),u.ack(p,y,e)},l.nack=function(e){return null==e&&(e={}),u.nack(p,y,e)},g.push(d(l))):g.push("function"==typeof t.debug?t.debug("Unhandled received MESSAGE: "+l):void 0);break;case"RECEIPT":g.push("function"==typeof t.onreceipt?t.onreceipt(l):void 0);break;case"ERROR":g.push("function"==typeof o?o(l):void 0);break;default:g.push("function"==typeof t.debug?t.debug("Unhandled frame: "+l):void 0)}return g}}(this),this.ws.onclose=function(e){return function(){var t;return t="Whoops! Lost connection to "+e.ws.url,"function"==typeof e.debug&&e.debug(t),e._cleanUp(),"function"==typeof o?o(t):void 0}}(this),this.ws.onopen=function(e){return function(){return"function"==typeof e.debug&&e.debug("Web Socket Opened..."),a["accept-version"]=i.VERSIONS.supportedVersions(),a["heart-beat"]=[e.heartbeat.outgoing,e.heartbeat.incoming].join(","),e._transmit("CONNECT",a)}}(this)},t.prototype.disconnect=function(e,t){return null==t&&(t={}),this._transmit("DISCONNECT",t),this.ws.onclose=null,this.ws.close(),this._cleanUp(),"function"==typeof e?e():void 0},t.prototype._cleanUp=function(){return this.connected=!1,this.pinger&&i.clearInterval(this.pinger),this.ponger?i.clearInterval(this.ponger):void 0},t.prototype.send=function(e,t,n){return null==t&&(t={}),null==n&&(n=""),t.destination=e,this._transmit("SEND",t,n)},t.prototype.subscribe=function(e,t,n){var r;return null==n&&(n={}),n.id||(n.id="sub-"+this.counter++),n.destination=e,this.subscriptions[n.id]=t,this._transmit("SUBSCRIBE",n),r=this,{id:n.id,unsubscribe:function(){return r.unsubscribe(n.id)}}},t.prototype.unsubscribe=function(e){return delete this.subscriptions[e],this._transmit("UNSUBSCRIBE",{id:e})},t.prototype.begin=function(e){var t,n;return n=e||"tx-"+this.counter++,this._transmit("BEGIN",{transaction:n}),t=this,{id:n,commit:function(){return t.commit(n)},abort:function(){return t.abort(n)}}},t.prototype.commit=function(e){return this._transmit("COMMIT",{transaction:e})},t.prototype.abort=function(e){return this._transmit("ABORT",{transaction:e})},t.prototype.ack=function(e,t,n){return null==n&&(n={}),n["message-id"]=e,n.subscription=t,this._transmit("ACK",n)},t.prototype.nack=function(e,t,n){return null==n&&(n={}),n["message-id"]=e,n.subscription=t,this._transmit("NACK",n)},t}(),i={VERSIONS:{V1_0:"1.0",V1_1:"1.1",V1_2:"1.2",supportedVersions:function(){return"1.1,1.0"}},client:function(e,t){var r,o;return null==t&&(t=["v10.stomp","v11.stomp"]),r=i.WebSocketClass||WebSocket,o=new r(e,t),new n(o)},over:function(e){return new n(e)},Frame:r},"undefined"!=typeof t&&null!==t&&(t.Stomp=i),"undefined"!=typeof window&&null!==window?(i.setInterval=function(e,t){return window.setInterval(t,e)},i.clearInterval=function(e){return window.clearInterval(e)},window.Stomp=i):t||(self.Stomp=i)}).call(this)},function(e,t,n){(function(){var e,r,i,o,s,a,u;e=n(294),r=n(110),s=n(110),e.Stomp.setInterval=function(e,t){return setInterval(t,e)},e.Stomp.clearInterval=function(e){return clearInterval(e)},a=function(e,t,n){var i,o;return i=null,o={url:"tcp://"+e+":"+t,send:function(e){return i.write(e)},close:function(){return i.end()}},i=n?s.connect(t,e,n,function(e){return i.authorized?o.onopen():(console.error("SSL is not authorized: "+i.authorizationError),"function"==typeof o.onclose?o.onclose(e):void 0)}):r.connect(t,e,function(e){return o.onopen()}),i.on("error",function(e){return"function"==typeof o.onclose?o.onclose(e):void 0}),i.on("close",function(e){return"function"==typeof o.onclose?o.onclose(e):void 0}),i.on("data",function(e){var t;return t={data:e.toString()},o.onmessage(t)}),o},u=function(e){var t,r,i,o;return t=n(296).client,r=null,o={url:e,send:function(e){return r.sendUTF(e)},close:function(){return r.close()}},i=new t,i.on("connect",function(e){return r=e,o.onopen(),r.on("error",function(e){return"function"==typeof o.onclose?o.onclose(e):void 0}),r.on("close",function(){return"function"==typeof o.onclose?o.onclose():void 0}),r.on("message",function(e){var t;return"utf8"===e.type?(t={data:e.utf8Data},o.onmessage(t)):void 0})}),i.connect(e),o},i=function(t,n,r){var i;return i=a(t,n,r),e.Stomp.over(i)},o=function(t){var n;return n=u(t),e.Stomp.over(n)},t.overTCP=i,t.overWS=o}).call(this)},function(e,t,n){function r(e,t){var n;return n=t?new o(e,t):new o(e)}var i=function(){return this}(),o=i.WebSocket||i.MozWebSocket,s=n(297);e.exports={w3cwebsocket:o?r:null,version:s}},function(e,t,n){e.exports=n(298).version},function(e,t){e.exports={_args:[["websocket@latest","/Users/gfoiani/Dev/work/spacebunny/sdk/node/node_modules/stompjs"]],_from:"websocket@latest",_id:"websocket@1.0.22",_inCache:!0,_installable:!0,_location:"/websocket",_nodeVersion:"3.3.1",_npmUser:{email:"brian@worlize.com",name:"theturtle32"},_npmVersion:"2.14.3",_phantomChildren:{},_requested:{name:"websocket",raw:"websocket@latest",rawSpec:"latest",scope:null,spec:"latest",type:"tag"},_requiredBy:["/stompjs"],_resolved:"https://registry.npmjs.org/websocket/-/websocket-1.0.22.tgz",_shasum:"8c33e3449f879aaf518297c9744cebf812b9e3d8",_shrinkwrap:null,_spec:"websocket@latest",_where:"/Users/gfoiani/Dev/work/spacebunny/sdk/node/node_modules/stompjs",author:{email:"brian@worlize.com",name:"Brian McKelvey",url:"https://www.worlize.com/"},browser:"lib/browser.js",bugs:{url:"https://github.com/theturtle32/WebSocket-Node/issues"},config:{verbose:!1},contributors:[{name:"Iñaki Baz Castillo",email:"ibc@aliax.net",url:"http://dev.sipdoc.net"}],dependencies:{debug:"~2.2.0",nan:"~2.0.5","typedarray-to-buffer":"~3.0.3",yaeti:"~0.0.4"},description:"Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",devDependencies:{"buffer-equal":"^0.0.1",faucet:"^0.0.1",gulp:"git+https://github.com/gulpjs/gulp.git#4.0","gulp-jshint":"^1.11.2","jshint-stylish":"^1.0.2",tape:"^4.0.1"},directories:{lib:"./lib"},dist:{shasum:"8c33e3449f879aaf518297c9744cebf812b9e3d8",tarball:"https://registry.npmjs.org/websocket/-/websocket-1.0.22.tgz"},engines:{node:">=0.8.0"},gitHead:"19108bbfd7d94a5cd02dbff3495eafee9e901ca4",homepage:"https://github.com/theturtle32/WebSocket-Node",keywords:["RFC-6455","client","comet","networking","push","realtime","server","socket","websocket","websockets"],license:"Apache-2.0",main:"index",maintainers:[{name:"theturtle32",email:"brian@worlize.com"}],name:"websocket",optionalDependencies:{},readme:"ERROR: No README data found!",repository:{type:"git",url:"git+https://github.com/theturtle32/WebSocket-Node.git"},scripts:{gulp:"gulp",install:"(node-gyp rebuild 2> builderror.log) || (exit 0)",test:"faucet test/unit"},version:"1.0.22"}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(u){i=!0,o=u}finally{try{!r&&a["return"]&&a["return"]()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(235).CONFIG,a=function(){function e(t,n){var o=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];r(this,e),this.body=t.body,this.headers=t.headers;try{var s=this.headers.destination.split("/"),a=s[s.length-1].split("."),u=i(a,2);this.senderId=u[0],this.channelName=u[1]}catch(c){console.error("Wrong routing key format")}this._receiverId=n,this._discardMine=o.discardMine||!1,this._discardFromApi=o.discardFromApi||!1}return o(e,[{key:"blackListed",value:function(){return this._discardMine&&this._receiverId===this.senderId&&!this.fromApi()?!0:!(!this._discardFromApi||!this.fromApi())}},{key:"fromApi",value:function(){return this.headers&&this.headers[s.fromApiHeader]}}]),e}();t["default"]=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(35),c=r(u),l=n(37),f=r(l),h=n(2),p=r(h),d=n(235).CONFIG,v=function(e){function t(e){i(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e)),r=d.amqp.stream;return n._defaultStreamRoutingKey=r.defaultStreamRoutingKey,n._streamQueueArguments=r.streamQueueArguments,n}return s(t,e),a(t,[{key:"streamFrom",value:function(){var e=this,t=arguments.length<=0||void 0===arguments[0]?[]:arguments[0],n=arguments[1],r=t.map(function(t){return e._attachStreamHook(t,n)})||[];return r.length>0?f["default"].any(r):f["default"].reject("Missing stream hooks")}},{key:"_attachStreamHook",value:function(e,t){var n=this;return new f["default"](function(r,i){var o=e.deviceId,s=e.channel,a=e.stream,u="boolean"!=typeof e.cache?!0:e.cache;void 0!==a||void 0!==s&&void 0!==o||i("Missing Stream or Device ID and Channel");var l=e.routingKey||n._defaultStreamRoutingKey,f=function(){},h=e.callback||f,p=(new Date).getTime();n._createChannel(""+p).then(function(e){n._amqpChannels[""+p]=e;var i=void 0;return a?(n.liveStreamExists(a)||(console.error("Stream "+a+" does not exist"),r(!1)),u?!function(){var e=n._cachedStreamQueue(a);i=n._amqpChannels[""+p].checkQueue(e,n._streamQueueArguments).then(function(){return n._amqpChannels[""+p].consume(e,function(e){h(n._parseContent(e.content),e.fields,e.properties)},(0,c["default"])(n._subscribeArgs,t))})}():!function(){var e=n.exchangeName(a,n._liveStreamSuffix),r=n.tempQueue(a,n._liveStreamSuffix,p);i=n._amqpChannels[""+p].checkExchange(e).then(function(){return n._amqpChannels[""+p].assertQueue(r,n._streamQueueArguments)}).then(function(){return n._amqpChannels[""+p].bindQueue(r,e,l)}).then(function(){return n._amqpChannels[""+p].consume(r,function(e){h(n._parseContent(e.content),e.fields,e.properties)},(0,c["default"])(n._subscribeArgs,t))})}()):!function(){var e=n.exchangeName(o,s),r=n.tempQueue(o,s,p);i=n._amqpChannels[""+p].checkExchange(e).then(function(){return n._amqpChannels[""+p].assertQueue(r,n._streamQueueArguments)}).then(function(){return n._amqpChannels[""+p].bindQueue(r,e,l)}).then(function(){return n._amqpChannels[""+p].consume(r,function(e){h(n._parseContent(e.content),e.fields,e.properties)},(0,c["default"])(n._subscribeArgs,t))})}(),i}).then(function(){r(!0)})["catch"](function(e){i(e)})})}},{key:"_cachedStreamQueue",value:function(e){return this.liveStreamByName(e)+"."+this._liveStreamSuffix}}]),t}(p["default"]);delete v.onReceive,delete v.publish,delete v._routingKeyFor,t["default"]=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(35),c=r(u),l=n(37),f=r(l),h=n(237),p=r(h),d=function(e){function t(){return i(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return s(t,e),a(t,[{key:"streamFrom",value:function(){var e=this,t=arguments.length<=0||void 0===arguments[0]?[]:arguments[0],n=arguments[1];return new f["default"](function(r,i){e.connect().then(function(o){var s=function(){};t.forEach(function(t){var n=t.stream,o=t.deviceId,s=t.channel,a=t.qos,u="boolean"!=typeof t.cache?!0:t.cache;void 0!==n||void 0!==s&&void 0!==o||i("Missing Stream or Device ID and Channel"),n?(e.liveStreamExists(n)||(console.error("Stream "+n+" does not exist"),r(!1)),e._topics[e._streamTopicFor(n)]=u?1:0):e._topics[e._streamChannelTopicFor(o,s)]=a||e._connectionOpts.qos}),o.subscribe(e._topics,(0,c["default"])(e._connectionOpts,n),function(n){n?i(!1):(o.on("message",function(n,r){var i=n.split("/"),o=t.filter(function(t){return e.liveStreamByName(t.stream)===i[0]||t.deviceId===i[0]&&t.channel===i[1]}),a=s;o.length>0&&(a=o[0].callback||s),a(n,e._parseContent(r))}),r(!0))})})["catch"](function(e){i(e)})})}},{key:"_streamChannelTopicFor",value:function(e,t){return e+"/"+t}},{key:"_streamTopicFor",value:function(e){return this.liveStreamByName(e)+"/"+this._liveStreamSuffix}}]),t}(p["default"]);delete d.onReceive,delete d.publish,delete d._topicFor,t["default"]=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(35),c=r(u),l=n(37),f=r(l),h=n(292),p=r(h),d=n(235).CONFIG,v=function(e){function t(e){i(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));n._subscriptions={};var r=d.stomp.stream;return n._exchangePrefix=r.exchangePrefix,n._defaultPattern=r.defaultPattern,n}return s(t,e),a(t,[{key:"streamFrom",value:function(){var e=this,t=arguments.length<=0||void 0===arguments[0]?[]:arguments[0],n=arguments[1],r=t.map(function(t){return e._attachStreamHook(t,n)})||[];return r.length>0?f["default"].any(r):f["default"].reject("Missing stream hooks")}},{key:"unsubscribe",value:function(e,t){var n=this;return new f["default"](function(r,i){if(void 0===n._stompConnection)i("Invalid connection");else{var o=n._topicFor(e,t),s=n._subscriptions[o];s.unsubscribe(o),delete n._subscriptions[o],r(!0)}})}},{key:"disconnect",value:function(){var e=this;return new f["default"](function(t,n){if(void 0===e._stompConnection)n("Invalid connection");else{for(var r in e._subscriptions)r&&e._subscriptions[r].unsubscribe();e._subscriptions={},e._stompConnection.disconnect(function(){e._stompConnection=void 0,t(!0)})["catch"](function(e){n(e)})}})}},{key:"_attachStreamHook",value:function(e,t){var n=this;return t=(0,c["default"])({},t),new f["default"](function(t,r){var i=e.stream,o=e.deviceId,s=e.channel,a="boolean"!=typeof e.cache?!0:e.cache,u=function(){},c=e.callback||u;void 0!==i||void 0!==s&&void 0!==o||r("Missing Stream or Device ID and Channel"),n.connect().then(function(e){var r=void 0,u=void 0;i?(n.liveStreamExists(i)||(console.error("Stream "+i+" does not exist"),t(!1)),a?r=n._cachedStreamTopicFor(i):(r=n._streamTopicFor(i),u=n.tempQueue(i,n._liveStreamSuffix))):(r=n._streamChannelTopicFor(o,s),u=n.tempQueue(o,s));var l={};u&&(l["x-queue-name"]=u);var f=function(e){c(n._parseContent(e.body),e.headers)},h=e.subscribe(r,f,l);n._subscriptions[r]=h,t(!0)})["catch"](function(e){r(e)})})}},{key:"_streamChannelTopicFor",value:function(e,t,n,r){return"/"+(n||this._exchangePrefix)+"/"+e+"."+t+"/"+(r||this._defaultPattern)}},{key:"_cachedStreamTopicFor",value:function(e,t){return"/"+(t||this._existingQueuePrefix)+"/"+this.liveStreamByName(e)+"."+this._liveStreamSuffix}},{key:"_streamTopicFor",value:function(e,t,n){return"/"+(t||this._exchangePrefix)+"/"+this.liveStreamByName(e)+"."+(this._liveStreamSuffix+"/"+(n||this._defaultPattern))}}]),t}(p["default"]);delete v.onReceive,delete v.publish,delete v._subcriptionFor,delete v._destinationFor,t["default"]=v},function(e,t,n,r,i){var o;/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(s){"use strict";o=function(e){function t(e,t,n,r){return o.setTimer(function(){e(n,r,t)},t)}var o=n(r),s=n(i);return function(e){function n(e,n,i){t(r,e,n,i)}function r(e,t){t.resolve(e)}function i(e,t,n){var r="undefined"==typeof e?new s("timed out after "+n+"ms"):e;t.reject(r)}return e.prototype.delay=function(e){var t=this._beget();return this._handler.fold(n,e,void 0,t._handler),t},e.prototype.timeout=function(e,n){var r=this._beget(),s=r._handler,a=t(i,e,n,r._handler);return this._handler.visit(s,function(e){o.clearTimer(a),this.resolve(e)},function(e){o.clearTimer(a),this.reject(e)},s.notify),r},e}}.call(t,n,t,e),!(void 0!==o&&(e.exports=o))}(n(44))},function(e,t,n,r){var i;/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(o){"use strict";i=function(e){var t=n(r).inspect;return function(e){return e.prototype.inspect=function(){return t(e._handler(this))},e}}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))}(n(44))},function(e,t,n,r,i,o){var s;/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(a){"use strict";s=function(e){var t=n(r),s=n(i),a=n(o).asap;return t({scheduler:new s(a)})}.call(t,n,t,e),!(void 0!==s&&(e.exports=s))}(n(44))},function(e,t,n,r,i){(function(t){function o(e){return this instanceof o?(l.call(this,e),f.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",s)):new o(e)}function s(){this.allowHalfOpen||this._writableState.ended||t.nextTick(this.end.bind(this))}function a(e,t){for(var n=0,r=e.length;r>n;n++)t(e[n],n)}e.exports=o;var u=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t},c=n(93);c.inherits=n(75);var l=n(r),f=n(i);c.inherits(o,l),a(u(f.prototype),function(e){o.prototype[e]||(o.prototype[e]=f.prototype[e])})}).call(t,n(38))},function(e,t,n,r){function i(e){return this instanceof i?void o.call(this,e):new i(e)}e.exports=i;var o=n(r),s=n(93);s.inherits=n(75),s.inherits(i,o),i.prototype._transform=function(e,t,n){n(null,e)}},function(e,t,n,r){e.exports=n(r)},function(e,t,n,r){e.exports=n(r)},function(e,t,n,r){(function(t){function i(e,t,n){this.chunk=e,this.encoding=t,this.callback=n}function o(e,t){e=e||{};var n=e.highWaterMark;this.highWaterMark=n||0===n?n:16384,this.objectMode=!!e.objectMode,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var r=e.decodeStrings===!1;this.decodeStrings=!r,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){d(t,e)},this.writecb=null,this.writelen=0,this.buffer=[],this.errorEmitted=!1}function s(e){var t=n(r);return this instanceof s||this instanceof t?(this._writableState=new o(e,this),this.writable=!0,void x.call(this)):new s(e)}function a(e,n,r){var i=new Error("write after end");e.emit("error",i),t.nextTick(function(){r(i)})}function u(e,n,r,i){var o=!0;if(!_.isBuffer(r)&&"string"!=typeof r&&null!==r&&void 0!==r&&!n.objectMode){var s=new TypeError("Invalid non-string/buffer chunk");e.emit("error",s),t.nextTick(function(){i(s)}),o=!1}return o}function c(e,t,n){return e.objectMode||e.decodeStrings===!1||"string"!=typeof t||(t=new _(t,n)),t}function l(e,t,n,r,o){n=c(t,n,r),_.isBuffer(n)&&(r="buffer");var s=t.objectMode?1:n.length;t.length+=s;var a=t.length<t.highWaterMark;return a||(t.needDrain=!0),t.writing?t.buffer.push(new i(n,r,o)):f(e,t,s,n,r,o),a}function f(e,t,n,r,i,o){t.writelen=n,t.writecb=o,t.writing=!0,t.sync=!0,e._write(r,i,t.onwrite),t.sync=!1}function h(e,n,r,i,o){r?t.nextTick(function(){o(i)}):o(i),e._writableState.errorEmitted=!0,e.emit("error",i)}function p(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function d(e,n){var r=e._writableState,i=r.sync,o=r.writecb;if(p(r),n)h(e,r,i,n,o);else{var s=m(e,r);s||r.bufferProcessing||!r.buffer.length||y(e,r),i?t.nextTick(function(){v(e,r,s,o)}):v(e,r,s,o)}}function v(e,t,n,r){n||g(e,t),r(),n&&b(e,t)}function g(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function y(e,t){t.bufferProcessing=!0;for(var n=0;n<t.buffer.length;n++){var r=t.buffer[n],i=r.chunk,o=r.encoding,s=r.callback,a=t.objectMode?1:i.length;if(f(e,t,a,i,o,s),t.writing){n++;break}}t.bufferProcessing=!1,n<t.buffer.length?t.buffer=t.buffer.slice(n):t.buffer.length=0}function m(e,t){return t.ending&&0===t.length&&!t.finished&&!t.writing}function b(e,t){var n=m(e,t);return n&&(t.finished=!0,e.emit("finish")),n}function w(e,n,r){n.ending=!0,b(e,n),r&&(n.finished?t.nextTick(r):e.once("finish",r)),n.ended=!0}e.exports=s;var _=n(90).Buffer;s.WritableState=o;var E=n(93);E.inherits=n(75);var x=n(85);E.inherits(s,x),s.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},s.prototype.write=function(e,t,n){var r=this._writableState,i=!1;return"function"==typeof t&&(n=t,t=null),_.isBuffer(e)?t="buffer":t||(t=r.defaultEncoding),"function"!=typeof n&&(n=function(){}),r.ended?a(this,r,n):u(this,r,e,n)&&(i=l(this,r,e,t,n)),i},s.prototype._write=function(e,t,n){n(new Error("not implemented"))},s.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),"undefined"!=typeof e&&null!==e&&this.write(e,t),r.ending||r.finished||w(this,r,n)}}).call(t,n(38))},function(e,t,n,r){"use strict";function i(e){this.afterTransform=function(t,n){return o(e,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function o(e,t,n){var r=e._transformState;r.transforming=!1;var i=r.writecb;if(!i)return e.emit("error",new Error("no writecb in Transform class"));r.writechunk=null,r.writecb=null,null!==n&&void 0!==n&&e.push(n),i(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}function s(e){if(!(this instanceof s))return new s(e);u.call(this,e),this._transformState=new i(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(e){a(t,e)}):a(t)})}function a(e,t){if(t)return e.emit("error",t);var n=e._writableState,r=e._transformState;if(n.length)throw new Error("calling transform done when ws.length != 0");if(r.transforming)throw new Error("calling transform done when still transforming");return e.push(null)}e.exports=s;var u=n(r),c=n(93);c.inherits=n(75),c.inherits(s,u),s.prototype.push=function(e,t){return this._transformState.needTransform=!1,u.prototype.push.call(this,e,t)},s.prototype._transform=function(e,t,n){throw new Error("not implemented")},s.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},s.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0}},function(e,t,n,r,i){"use strict";function o(e){return this instanceof o?(f.call(this,e),h.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",s)):new o(e)}function s(){this.allowHalfOpen||this._writableState.ended||c(a,this)}function a(e){e.end()}var u=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=o;var c=n(275),l=n(93);l.inherits=n(75);var f=n(r),h=n(i);l.inherits(o,f);for(var p=u(h.prototype),d=0;d<p.length;d++){var v=p[d];o.prototype[v]||(o.prototype[v]=h.prototype[v])}},function(e,t,n,r,i,o,s){(function(t){"use strict";function a(e,t){F=F||n(o),e=e||{},this.objectMode=!!e.objectMode,t instanceof F&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var r=e.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:i,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(P||(P=n(97).StringDecoder),this.decoder=new P(e.encoding),this.encoding=e.encoding)}function u(e){return F=F||n(s),this instanceof u?(this._readableState=new a(e,this),this.readable=!0,e&&"function"==typeof e.read&&(this._read=e.read),void O.call(this)):new u(e)}function c(e,t,n,r,i){var o=p(t,n);if(o)e.emit("error",o);else if(null===n)t.reading=!1,d(e,t);else if(t.objectMode||n&&n.length>0)if(t.ended&&!i){var s=new Error("stream.push() after EOF");e.emit("error",s)}else if(t.endEmitted&&i){var s=new Error("stream.unshift() after end event");e.emit("error",s)}else{var a;!t.decoder||i||r||(n=t.decoder.write(n),a=!t.objectMode&&0===n.length),i||(t.reading=!1),a||(t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,i?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&v(e))),y(e,t)}else i||(t.reading=!1);return l(t)}function l(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function f(e){return e>=N?e=N:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function h(e,t){return 0===t.length&&t.ended?0:t.objectMode?0===e?0:1:null===e||isNaN(e)?t.flowing&&t.buffer.length?t.buffer[0].length:t.length:0>=e?0:(e>t.highWaterMark&&(t.highWaterMark=f(e)),e>t.length?t.ended?t.length:(t.needReadable=!0,0):e)}function p(e,t){var n=null;return j.isBuffer(t)||"string"==typeof t||null===t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function d(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,v(e)}}function v(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(M("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?U(g,e):g(e))}function g(e){M("emit readable"),e.emit("readable"),x(e)}function y(e,t){t.readingMore||(t.readingMore=!0,U(m,e,t))}function m(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(M("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function b(e){return function(){var t=e._readableState;M("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&A(e,"data")&&(t.flowing=!0,x(e))}}function w(e){M("readable nexttick read 0"),e.read(0)}function _(e,t){t.resumeScheduled||(t.resumeScheduled=!0,U(E,e,t))}function E(e,t){t.reading||(M("resume read 0"),e.read(0)),t.resumeScheduled=!1,e.emit("resume"),x(e),t.flowing&&!t.reading&&e.read(0)}function x(e){var t=e._readableState;if(M("flow",t.flowing),t.flowing)do var n=e.read();while(null!==n&&t.flowing)}function I(e,t){var n,r=t.buffer,i=t.length,o=!!t.decoder,s=!!t.objectMode;if(0===r.length)return null;if(0===i)n=null;else if(s)n=r.shift();else if(!e||e>=i)n=o?r.join(""):1===r.length?r[0]:j.concat(r,i),r.length=0;else if(e<r[0].length){var a=r[0];n=a.slice(0,e),r[0]=a.slice(e)}else if(e===r[0].length)n=r.shift();else{n=o?"":new j(e);for(var u=0,c=0,l=r.length;l>c&&e>u;c++){var a=r[0],f=Math.min(e-u,a.length);o?n+=a.slice(0,f):a.copy(n,u,0,f),f<a.length?r[0]=a.slice(f):r.shift(),u+=f}}return n}function k(e){var t=e._readableState;if(t.length>0)throw new Error("endReadable called on non-empty stream");t.endEmitted||(t.ended=!0,U(S,t,e))}function S(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function C(e,t){for(var n=0,r=e.length;r>n;n++)t(e[n],n)}function T(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1}e.exports=u;var U=n(275),B=n(r),j=n(90).Buffer;u.ReadableState=a;var O,A=(n(86),function(e,t){return e.listeners(t).length});!function(){try{O=n(85)}catch(e){}finally{O||(O=n(86).EventEmitter)}}();var j=n(90).Buffer,R=n(93);R.inherits=n(75);var L=n(i),M=void 0;M=L&&L.debuglog?L.debuglog("stream"):function(){};var P;R.inherits(u,O);var F,F;u.prototype.push=function(e,t){var n=this._readableState;return n.objectMode||"string"!=typeof e||(t=t||n.defaultEncoding,t!==n.encoding&&(e=new j(e,t),t="")),c(this,n,e,t,!1)},u.prototype.unshift=function(e){var t=this._readableState;return c(this,t,e,"",!0)},u.prototype.isPaused=function(){return this._readableState.flowing===!1},u.prototype.setEncoding=function(e){return P||(P=n(97).StringDecoder),this._readableState.decoder=new P(e),this._readableState.encoding=e,this};var N=8388608;u.prototype.read=function(e){M("read",e);var t=this._readableState,n=e;if(("number"!=typeof e||e>0)&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return M("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?k(this):v(this),null;if(e=h(e,t),0===e&&t.ended)return 0===t.length&&k(this),null;var r=t.needReadable;M("need readable",r),(0===t.length||t.length-e<t.highWaterMark)&&(r=!0,M("length less than watermark",r)),(t.ended||t.reading)&&(r=!1,M("reading or ended",r)),r&&(M("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1),r&&!t.reading&&(e=h(n,t));var i;return i=e>0?I(e,t):null,null===i&&(t.needReadable=!0,e=0),t.length-=e,0!==t.length||t.ended||(t.needReadable=!0),n!==e&&t.ended&&0===t.length&&k(this),null!==i&&this.emit("data",i),i},u.prototype._read=function(e){this.emit("error",new Error("not implemented"))},u.prototype.pipe=function(e,n){function r(e){M("onunpipe"),e===f&&o()}function i(){M("onend"),e.end()}function o(){M("cleanup"),e.removeListener("close",u),e.removeListener("finish",c),e.removeListener("drain",v),e.removeListener("error",a),e.removeListener("unpipe",r),f.removeListener("end",i),f.removeListener("end",o),f.removeListener("data",s),g=!0,!h.awaitDrain||e._writableState&&!e._writableState.needDrain||v()}function s(t){M("ondata");var n=e.write(t);!1===n&&(1!==h.pipesCount||h.pipes[0]!==e||1!==f.listenerCount("data")||g||(M("false write response, pause",f._readableState.awaitDrain),f._readableState.awaitDrain++),f.pause())}function a(t){M("onerror",t),l(),e.removeListener("error",a),0===A(e,"error")&&e.emit("error",t)}function u(){e.removeListener("finish",c),l()}function c(){M("onfinish"),e.removeListener("close",u),l()}function l(){M("unpipe"),f.unpipe(e)}var f=this,h=this._readableState;switch(h.pipesCount){case 0:h.pipes=e;break;case 1:h.pipes=[h.pipes,e];break;default:h.pipes.push(e)}h.pipesCount+=1,M("pipe count=%d opts=%j",h.pipesCount,n);var p=(!n||n.end!==!1)&&e!==t.stdout&&e!==t.stderr,d=p?i:o;h.endEmitted?U(d):f.once("end",d),e.on("unpipe",r);var v=b(f);e.on("drain",v);var g=!1;return f.on("data",s),e._events&&e._events.error?B(e._events.error)?e._events.error.unshift(a):e._events.error=[a,e._events.error]:e.on("error",a),e.once("close",u),e.once("finish",c),e.emit("pipe",f),h.flowing||(M("pipe resume"),f.resume()),e},u.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var n=t.pipes,r=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;r>i;i++)n[i].emit("unpipe",this);return this}var o=T(t.pipes,e);return-1===o?this:(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},u.prototype.on=function(e,t){var n=O.prototype.on.call(this,e,t);if("data"===e&&!1!==this._readableState.flowing&&this.resume(),"readable"===e&&!this._readableState.endEmitted){var r=this._readableState;r.readableListening||(r.readableListening=!0,r.emittedReadable=!1,r.needReadable=!0,r.reading?r.length&&v(this,r):U(w,this))}return n},u.prototype.addListener=u.prototype.on,u.prototype.resume=function(){var e=this._readableState;return e.flowing||(M("resume"),e.flowing=!0,_(this,e)),this},u.prototype.pause=function(){return M("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(M("pause"),this._readableState.flowing=!1,this.emit("pause")),this},u.prototype.wrap=function(e){var t=this._readableState,n=!1,r=this;e.on("end",function(){if(M("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&r.push(e)}r.push(null)}),e.on("data",function(i){if(M("wrapped data"),t.decoder&&(i=t.decoder.write(i)),(!t.objectMode||null!==i&&void 0!==i)&&(t.objectMode||i&&i.length)){var o=r.push(i);o||(n=!0,e.pause())}});for(var i in e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));var o=["error","close","destroy","pause","resume"];return C(o,function(t){e.on(t,r.emit.bind(r,t))}),r._read=function(t){M("wrapped _read",t),n&&(n=!1,e.resume())},r},u._fromList=I}).call(t,n(38))},function(e,t,n,r,i){(function(t,o){"use strict";function s(){}function a(e,t,n){this.chunk=e,this.encoding=t,this.callback=n,this.next=null}function u(e,t){O=O||n(r),e=e||{},this.objectMode=!!e.objectMode,t instanceof O&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var i=e.highWaterMark,o=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:o,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var s=e.decodeStrings===!1;this.decodeStrings=!s,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){y(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new k(this),this.corkedRequestsFree.next=new k(this)}function c(e){return O=O||n(i),this instanceof c||this instanceof O?(this._writableState=new u(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev)),void B.call(this)):new c(e)}function l(e,t){var n=new Error("write after end");e.emit("error",n),S(t,n)}function f(e,t,n,r){var i=!0;if(!T.isBuffer(n)&&"string"!=typeof n&&null!==n&&void 0!==n&&!t.objectMode){var o=new TypeError("Invalid non-string/buffer chunk");e.emit("error",o),S(r,o),i=!1}return i}function h(e,t,n){return e.objectMode||e.decodeStrings===!1||"string"!=typeof t||(t=new T(t,n)),t}function p(e,t,n,r,i){n=h(t,n,r),T.isBuffer(n)&&(r="buffer");var o=t.objectMode?1:n.length;t.length+=o;var s=t.length<t.highWaterMark;if(s||(t.needDrain=!0),t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest=new a(n,r,i),u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else d(e,t,!1,o,n,r,i);return s}function d(e,t,n,r,i,o,s){t.writelen=r,t.writecb=s,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function v(e,t,n,r,i){--t.pendingcb,n?S(i,r):i(r),e._writableState.errorEmitted=!0,e.emit("error",r)}function g(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function y(e,t){var n=e._writableState,r=n.sync,i=n.writecb;if(g(n),t)v(e,n,r,t,i);else{var o=_(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||w(e,n),r?C(m,e,n,o,i):m(e,n,o,i)}}function m(e,t,n,r){n||b(e,t),t.pendingcb--,r(),x(e,t)}function b(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function w(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,i=new Array(r),o=t.corkedRequestsFree;o.entry=n;for(var s=0;n;)i[s]=n,n=n.next,s+=1;d(e,t,!0,t.length,i,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,t.corkedRequestsFree=o.next,o.next=null}else{for(;n;){var a=n.chunk,u=n.encoding,c=n.callback,l=t.objectMode?1:a.length;if(d(e,t,!1,l,a,u,c),n=n.next,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=n,t.bufferProcessing=!1}function _(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function E(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function x(e,t){var n=_(t);return n&&(0===t.pendingcb?(E(e,t),t.finished=!0,e.emit("finish")):E(e,t)),n}function I(e,t,n){t.ending=!0,x(e,t),n&&(t.finished?S(n):e.once("finish",n)),t.ended=!0,e.writable=!1}function k(e){var t=this;this.next=null,this.entry=null,this.finish=function(n){var r=t.entry;for(t.entry=null;r;){var i=r.callback;e.pendingcb--,i(n),r=r.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}}e.exports=c;var S=n(275),C=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?o:S,T=n(90).Buffer;c.WritableState=u;var U=n(93);U.inherits=n(75);var B,j={deprecate:n(280)};!function(){try{B=n(85)}catch(e){}finally{B||(B=n(86).EventEmitter)}}();var T=n(90).Buffer;U.inherits(c,B);var O;u.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(u.prototype,"buffer",{get:j.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch(e){}}();var O;c.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},c.prototype.write=function(e,t,n){var r=this._writableState,i=!1;return"function"==typeof t&&(n=t,t=null),T.isBuffer(e)?t="buffer":t||(t=r.defaultEncoding),"function"!=typeof n&&(n=s),r.ended?l(this,n):f(this,r,e,n)&&(r.pendingcb++,i=p(this,r,e,t,n)),i},c.prototype.cork=function(){var e=this._writableState;e.corked++},c.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||w(this,e))},c.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);this._writableState.defaultEncoding=e},c.prototype._write=function(e,t,n){n(new Error("not implemented"))},c.prototype._writev=null,c.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!==e&&void 0!==e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||I(this,r,n)}}).call(t,n(38),n(39).setImmediate)}]));